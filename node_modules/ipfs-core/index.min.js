(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.IpfsCore = factory()}(typeof self !== 'undefined' ? self : this, function () {
var IpfsCore=(()=>{var _be=Object.create;var Q3=Object.defineProperty;var Ebe=Object.getOwnPropertyDescriptor;var Sbe=Object.getOwnPropertyNames;var xbe=Object.getPrototypeOf,Abe=Object.prototype.hasOwnProperty;var pk=t=>Q3(t,"__esModule",{value:!0});var Ra=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var bt=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),zt=(t,e)=>{pk(t);for(var r in e)Q3(t,r,{get:e[r],enumerable:!0})},Ibe=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Sbe(e))!Abe.call(t,i)&&i!=="default"&&Q3(t,i,{get:()=>e[i],enumerable:!(r=Ebe(e,i))||r.enumerable});return t},N=t=>Ibe(pk(Q3(t!=null?_be(xbe(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var mk=v(Z3=>{l();"use strict";Z3.byteLength=Rbe;Z3.toByteArray=Cbe;Z3.fromByteArray=Dbe;var Pa=[],qs=[],Tbe=typeof Uint8Array!="undefined"?Uint8Array:Array,Aw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Dl=0,yk=Aw.length;Dl<yk;++Dl)Pa[Dl]=Aw[Dl],qs[Aw.charCodeAt(Dl)]=Dl;var Dl,yk;qs["-".charCodeAt(0)]=62;qs["_".charCodeAt(0)]=63;function gk(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function Rbe(t){var e=gk(t),r=e[0],i=e[1];return(r+i)*3/4-i}function Pbe(t,e,r){return(e+r)*3/4-r}function Cbe(t){var e,r=gk(t),i=r[0],n=r[1],s=new Tbe(Pbe(t,i,n)),o=0,a=n>0?i-4:i,c;for(c=0;c<a;c+=4)e=qs[t.charCodeAt(c)]<<18|qs[t.charCodeAt(c+1)]<<12|qs[t.charCodeAt(c+2)]<<6|qs[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return n===2&&(e=qs[t.charCodeAt(c)]<<2|qs[t.charCodeAt(c+1)]>>4,s[o++]=e&255),n===1&&(e=qs[t.charCodeAt(c)]<<10|qs[t.charCodeAt(c+1)]<<4|qs[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Obe(t){return Pa[t>>18&63]+Pa[t>>12&63]+Pa[t>>6&63]+Pa[t&63]}function kbe(t,e,r){for(var i,n=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),n.push(Obe(i));return n.join("")}function Dbe(t){for(var e,r=t.length,i=r%3,n=[],s=16383,o=0,a=r-i;o<a;o+=s)n.push(kbe(t,o,o+s>a?a:o+s));return i===1?(e=t[r-1],n.push(Pa[e>>2]+Pa[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push(Pa[e>>10]+Pa[e>>4&63]+Pa[e<<2&63]+"=")),n.join("")}});var bk=v(Iw=>{l();Iw.read=function(t,e,r,i,n){var s,o,a=n*8-i-1,c=(1<<a)-1,u=c>>1,f=-7,d=r?n-1:0,h=r?-1:1,p=t[e+d];for(d+=h,s=p&(1<<-f)-1,p>>=-f,f+=a;f>0;s=s*256+t[e+d],d+=h,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=i;f>0;o=o*256+t[e+d],d+=h,f-=8);if(s===0)s=1-u;else{if(s===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-u}return(p?-1:1)*o*Math.pow(2,s-i)};Iw.write=function(t,e,r,i,n,s){var o,a,c,u=s*8-n-1,f=(1<<u)-1,d=f>>1,h=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,y=i?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=f?(a=0,o=f):o+d>=1?(a=(e*c-1)*Math.pow(2,n),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;t[r+p]=a&255,p+=y,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;t[r+p]=o&255,p+=y,o/=256,u-=8);t[r+p-y]|=m*128}});var Yt=v(zh=>{l();"use strict";var Tw=mk(),Fh=bk(),vk=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;zh.Buffer=pe;zh.SlowBuffer=jbe;zh.INSPECT_MAX_BYTES=50;var J3=2147483647;zh.kMaxLength=J3;pe.TYPED_ARRAY_SUPPORT=Bbe();!pe.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Bbe(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(pe.prototype,"parent",{enumerable:!0,get:function(){if(!!pe.isBuffer(this))return this.buffer}});Object.defineProperty(pe.prototype,"offset",{enumerable:!0,get:function(){if(!!pe.isBuffer(this))return this.byteOffset}});function $c(t){if(t>J3)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,pe.prototype),e}function pe(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Rw(t)}return wk(t,e,r)}pe.poolSize=8192;function wk(t,e,r){if(typeof t=="string")return Mbe(t,e);if(ArrayBuffer.isView(t))return Lbe(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Ca(t,ArrayBuffer)||t&&Ca(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Ca(t,SharedArrayBuffer)||t&&Ca(t.buffer,SharedArrayBuffer)))return Cw(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return pe.from(i,e,r);let n=qbe(t);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return pe.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}pe.from=function(t,e,r){return wk(t,e,r)};Object.setPrototypeOf(pe.prototype,Uint8Array.prototype);Object.setPrototypeOf(pe,Uint8Array);function _k(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Nbe(t,e,r){return _k(t),t<=0?$c(t):e!==void 0?typeof r=="string"?$c(t).fill(e,r):$c(t).fill(e):$c(t)}pe.alloc=function(t,e,r){return Nbe(t,e,r)};function Rw(t){return _k(t),$c(t<0?0:Ow(t)|0)}pe.allocUnsafe=function(t){return Rw(t)};pe.allocUnsafeSlow=function(t){return Rw(t)};function Mbe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!pe.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Ek(t,e)|0,i=$c(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function Pw(t){let e=t.length<0?0:Ow(t.length)|0,r=$c(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function Lbe(t){if(Ca(t,Uint8Array)){let e=new Uint8Array(t);return Cw(e.buffer,e.byteOffset,e.byteLength)}return Pw(t)}function Cw(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,pe.prototype),i}function qbe(t){if(pe.isBuffer(t)){let e=Ow(t.length)|0,r=$c(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Bw(t.length)?$c(0):Pw(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Pw(t.data)}function Ow(t){if(t>=J3)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+J3.toString(16)+" bytes");return t|0}function jbe(t){return+t!=t&&(t=0),pe.alloc(+t)}pe.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==pe.prototype};pe.compare=function(e,r){if(Ca(e,Uint8Array)&&(e=pe.from(e,e.offset,e.byteLength)),Ca(r,Uint8Array)&&(r=pe.from(r,r.offset,r.byteLength)),!pe.isBuffer(e)||!pe.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let s=0,o=Math.min(i,n);s<o;++s)if(e[s]!==r[s]){i=e[s],n=r[s];break}return i<n?-1:n<i?1:0};pe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};pe.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return pe.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=pe.allocUnsafe(r),s=0;for(i=0;i<e.length;++i){let o=e[i];if(Ca(o,Uint8Array))s+o.length>n.length?(pe.isBuffer(o)||(o=pe.from(o)),o.copy(n,s)):Uint8Array.prototype.set.call(n,o,s);else if(pe.isBuffer(o))o.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return n};function Ek(t,e){if(pe.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ca(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Dw(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Bk(t).length;default:if(n)return i?-1:Dw(t).length;e=(""+e).toLowerCase(),n=!0}}pe.byteLength=Ek;function Ube(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Xbe(this,e,r);case"utf8":case"utf-8":return Ak(this,e,r);case"ascii":return Wbe(this,e,r);case"latin1":case"binary":return Ybe(this,e,r);case"base64":return $be(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qbe(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}pe.prototype._isBuffer=!0;function Bl(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}pe.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Bl(this,r,r+1);return this};pe.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Bl(this,r,r+3),Bl(this,r+1,r+2);return this};pe.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Bl(this,r,r+7),Bl(this,r+1,r+6),Bl(this,r+2,r+5),Bl(this,r+3,r+4);return this};pe.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Ak(this,0,e):Ube.apply(this,arguments)};pe.prototype.toLocaleString=pe.prototype.toString;pe.prototype.equals=function(e){if(!pe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:pe.compare(this,e)===0};pe.prototype.inspect=function(){let e="",r=zh.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};vk&&(pe.prototype[vk]=pe.prototype.inspect);pe.prototype.compare=function(e,r,i,n,s){if(Ca(e,Uint8Array)&&(e=pe.from(e,e.offset,e.byteLength)),!pe.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),r<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&r>=i)return 0;if(n>=s)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;let o=s-n,a=i-r,c=Math.min(o,a),u=this.slice(n,s),f=e.slice(r,i);for(let d=0;d<c;++d)if(u[d]!==f[d]){o=u[d],a=f[d];break}return o<a?-1:a<o?1:0};function Sk(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Bw(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=pe.from(e,i)),pe.isBuffer(e))return e.length===0?-1:xk(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):xk(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function xk(t,e,r,i,n){let s=1,o=t.length,a=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function c(f,d){return s===1?f[d]:f.readUInt16BE(d*s)}let u;if(n){let f=-1;for(u=r;u<o;u++)if(c(t,u)===c(e,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===a)return f*s}else f!==-1&&(u-=u-f),f=-1}else for(r+a>o&&(r=o-a),u=r;u>=0;u--){let f=!0;for(let d=0;d<a;d++)if(c(t,u+d)!==c(e,d)){f=!1;break}if(f)return u}return-1}pe.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};pe.prototype.indexOf=function(e,r,i){return Sk(this,e,r,i,!0)};pe.prototype.lastIndexOf=function(e,r,i){return Sk(this,e,r,i,!1)};function Fbe(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let s=e.length;i>s/2&&(i=s/2);let o;for(o=0;o<i;++o){let a=parseInt(e.substr(o*2,2),16);if(Bw(a))return o;t[r+o]=a}return o}function Kbe(t,e,r,i){return e6(Dw(e,t.length-r),t,r,i)}function Vbe(t,e,r,i){return e6(t5e(e),t,r,i)}function zbe(t,e,r,i){return e6(Bk(e),t,r,i)}function Hbe(t,e,r,i){return e6(r5e(e,t.length-r),t,r,i)}pe.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return Fbe(this,e,r,i);case"utf8":case"utf-8":return Kbe(this,e,r,i);case"ascii":case"latin1":case"binary":return Vbe(this,e,r,i);case"base64":return zbe(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Hbe(this,e,r,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}};pe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $be(t,e,r){return e===0&&r===t.length?Tw.fromByteArray(t):Tw.fromByteArray(t.slice(e,r))}function Ak(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let s=t[n],o=null,a=s>239?4:s>223?3:s>191?2:1;if(n+a<=r){let c,u,f,d;switch(a){case 1:s<128&&(o=s);break;case 2:c=t[n+1],(c&192)==128&&(d=(s&31)<<6|c&63,d>127&&(o=d));break;case 3:c=t[n+1],u=t[n+2],(c&192)==128&&(u&192)==128&&(d=(s&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:c=t[n+1],u=t[n+2],f=t[n+3],(c&192)==128&&(u&192)==128&&(f&192)==128&&(d=(s&15)<<18|(c&63)<<12|(u&63)<<6|f&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),n+=a}return Gbe(i)}var Ik=4096;function Gbe(t){let e=t.length;if(e<=Ik)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=Ik));return r}function Wbe(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function Ybe(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function Xbe(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let s=e;s<r;++s)n+=i5e[t[s]];return n}function Qbe(t,e,r){let i=t.slice(e,r),n="";for(let s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}pe.prototype.slice=function(e,r){let i=this.length;e=~~e,r=r===void 0?i:~~r,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,pe.prototype),n};function Fi(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}pe.prototype.readUintLE=pe.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Fi(e,r,this.length);let n=this[e],s=1,o=0;for(;++o<r&&(s*=256);)n+=this[e+o]*s;return n};pe.prototype.readUintBE=pe.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Fi(e,r,this.length);let n=this[e+--r],s=1;for(;r>0&&(s*=256);)n+=this[e+--r]*s;return n};pe.prototype.readUint8=pe.prototype.readUInt8=function(e,r){return e=e>>>0,r||Fi(e,1,this.length),this[e]};pe.prototype.readUint16LE=pe.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Fi(e,2,this.length),this[e]|this[e+1]<<8};pe.prototype.readUint16BE=pe.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Fi(e,2,this.length),this[e]<<8|this[e+1]};pe.prototype.readUint32LE=pe.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Fi(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};pe.prototype.readUint32BE=pe.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Fi(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};pe.prototype.readBigUInt64LE=Zu(function(e){e=e>>>0,Vh(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&K2(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))});pe.prototype.readBigUInt64BE=Zu(function(e){e=e>>>0,Vh(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&K2(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)});pe.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Fi(e,r,this.length);let n=this[e],s=1,o=0;for(;++o<r&&(s*=256);)n+=this[e+o]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*r)),n};pe.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Fi(e,r,this.length);let n=r,s=1,o=this[e+--n];for(;n>0&&(s*=256);)o+=this[e+--n]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};pe.prototype.readInt8=function(e,r){return e=e>>>0,r||Fi(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};pe.prototype.readInt16LE=function(e,r){e=e>>>0,r||Fi(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};pe.prototype.readInt16BE=function(e,r){e=e>>>0,r||Fi(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};pe.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Fi(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};pe.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Fi(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};pe.prototype.readBigInt64LE=Zu(function(e){e=e>>>0,Vh(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&K2(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});pe.prototype.readBigInt64BE=Zu(function(e){e=e>>>0,Vh(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&K2(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});pe.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Fi(e,4,this.length),Fh.read(this,e,!0,23,4)};pe.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Fi(e,4,this.length),Fh.read(this,e,!1,23,4)};pe.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Fi(e,8,this.length),Fh.read(this,e,!0,52,8)};pe.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Fi(e,8,this.length),Fh.read(this,e,!1,52,8)};function Xn(t,e,r,i,n,s){if(!pe.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}pe.prototype.writeUintLE=pe.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let a=Math.pow(2,8*i)-1;Xn(this,e,r,i,a,0)}let s=1,o=0;for(this[r]=e&255;++o<i&&(s*=256);)this[r+o]=e/s&255;return r+i};pe.prototype.writeUintBE=pe.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let a=Math.pow(2,8*i)-1;Xn(this,e,r,i,a,0)}let s=i-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+i};pe.prototype.writeUint8=pe.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,1,255,0),this[r]=e&255,r+1};pe.prototype.writeUint16LE=pe.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};pe.prototype.writeUint16BE=pe.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};pe.prototype.writeUint32LE=pe.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};pe.prototype.writeUint32BE=pe.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Tk(t,e,r,i,n){Dk(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function Rk(t,e,r,i,n){Dk(e,i,n,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}pe.prototype.writeBigUInt64LE=Zu(function(e,r=0){return Tk(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});pe.prototype.writeBigUInt64BE=Zu(function(e,r=0){return Rk(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});pe.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let c=Math.pow(2,8*i-1);Xn(this,e,r,i,c-1,-c)}let s=0,o=1,a=0;for(this[r]=e&255;++s<i&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+i};pe.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let c=Math.pow(2,8*i-1);Xn(this,e,r,i,c-1,-c)}let s=i-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+i};pe.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};pe.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};pe.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};pe.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};pe.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||Xn(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};pe.prototype.writeBigInt64LE=Zu(function(e,r=0){return Tk(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});pe.prototype.writeBigInt64BE=Zu(function(e,r=0){return Rk(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pk(t,e,r,i,n,s){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ck(t,e,r,i,n){return e=+e,r=r>>>0,n||Pk(t,e,r,4,34028234663852886e22,-34028234663852886e22),Fh.write(t,e,r,i,23,4),r+4}pe.prototype.writeFloatLE=function(e,r,i){return Ck(this,e,r,!0,i)};pe.prototype.writeFloatBE=function(e,r,i){return Ck(this,e,r,!1,i)};function Ok(t,e,r,i,n){return e=+e,r=r>>>0,n||Pk(t,e,r,8,17976931348623157e292,-17976931348623157e292),Fh.write(t,e,r,i,52,8),r+8}pe.prototype.writeDoubleLE=function(e,r,i){return Ok(this,e,r,!0,i)};pe.prototype.writeDoubleBE=function(e,r,i){return Ok(this,e,r,!1,i)};pe.prototype.copy=function(e,r,i,n){if(!pe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let s=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),s};pe.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!pe.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let o=e.charCodeAt(0);(n==="utf8"&&o<128||n==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<i;++s)this[s]=e;else{let o=pe.isBuffer(e)?e:pe.from(e,n),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-r;++s)this[s+r]=o[s%a]}return this};var Kh={};function kw(t,e,r){Kh[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}kw("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);kw("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);kw("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=kk(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=kk(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function kk(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Zbe(t,e,r){Vh(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&K2(e,t.length-(r+1))}function Dk(t,e,r,i,n,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Kh.ERR_OUT_OF_RANGE("value",a,t)}Zbe(i,n,s)}function Vh(t,e){if(typeof t!="number")throw new Kh.ERR_INVALID_ARG_TYPE(e,"number",t)}function K2(t,e,r){throw Math.floor(t)!==t?(Vh(t,r),new Kh.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Kh.ERR_BUFFER_OUT_OF_BOUNDS:new Kh.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Jbe=/[^+/0-9A-Za-z-_]/g;function e5e(t){if(t=t.split("=")[0],t=t.trim().replace(Jbe,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function Dw(t,e){e=e||1/0;let r,i=t.length,n=null,s=[];for(let o=0;o<i;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function t5e(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function r5e(t,e){let r,i,n,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),i=r>>8,n=r%256,s.push(n),s.push(i);return s}function Bk(t){return Tw.toByteArray(e5e(t))}function e6(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function Ca(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Bw(t){return t!==t}var i5e=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function Zu(t){return typeof BigInt=="undefined"?n5e:t}function n5e(){throw new Error("BigInt not supported")}});var jk=v((Btt,qk)=>{l();var ui=qk.exports={},Oa,ka;function Nw(){throw new Error("setTimeout has not been defined")}function Mw(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Oa=setTimeout:Oa=Nw}catch(t){Oa=Nw}try{typeof clearTimeout=="function"?ka=clearTimeout:ka=Mw}catch(t){ka=Mw}})();function Nk(t){if(Oa===setTimeout)return setTimeout(t,0);if((Oa===Nw||!Oa)&&setTimeout)return Oa=setTimeout,setTimeout(t,0);try{return Oa(t,0)}catch(e){try{return Oa.call(null,t,0)}catch(r){return Oa.call(this,t,0)}}}function s5e(t){if(ka===clearTimeout)return clearTimeout(t);if((ka===Mw||!ka)&&clearTimeout)return ka=clearTimeout,clearTimeout(t);try{return ka(t)}catch(e){try{return ka.call(null,t)}catch(r){return ka.call(this,t)}}}var Gc=[],Hh=!1,Nl,t6=-1;function o5e(){!Hh||!Nl||(Hh=!1,Nl.length?Gc=Nl.concat(Gc):t6=-1,Gc.length&&Mk())}function Mk(){if(!Hh){var t=Nk(o5e);Hh=!0;for(var e=Gc.length;e;){for(Nl=Gc,Gc=[];++t6<e;)Nl&&Nl[t6].run();t6=-1,e=Gc.length}Nl=null,Hh=!1,s5e(t)}}ui.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Gc.push(new Lk(t,e)),Gc.length===1&&!Hh&&Nk(Mk)};function Lk(t,e){this.fun=t,this.array=e}Lk.prototype.run=function(){this.fun.apply(null,this.array)};ui.title="browser";ui.browser=!0;ui.env={};ui.argv=[];ui.version="";ui.versions={};function Wc(){}ui.on=Wc;ui.addListener=Wc;ui.once=Wc;ui.off=Wc;ui.removeListener=Wc;ui.removeAllListeners=Wc;ui.emit=Wc;ui.prependListener=Wc;ui.prependOnceListener=Wc;ui.listeners=function(t){return[]};ui.binding=function(t){throw new Error("process.binding is not supported")};ui.cwd=function(){return"/"};ui.chdir=function(t){throw new Error("process.chdir is not supported")};ui.umask=function(){return 0}});var Buffer,process,l=bt(()=>{({Buffer}=Yt()),process=jk()});var Fk=v((Mtt,Uk)=>{l();"use strict";Uk.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var Ml=v((Hk,$k)=>{l();"use strict";var r6=Fk(),{hasOwnProperty:Kk}=Object.prototype,{propertyIsEnumerable:a5e}=Object,$h=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),c5e=Hk,Vk={concatArrays:!1,ignoreUndefined:!1},i6=t=>{let e=[];for(let r in t)Kk.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let i of r)a5e.call(t,i)&&e.push(i)}return e};function Gh(t){return Array.isArray(t)?u5e(t):r6(t)?f5e(t):t}function u5e(t){let e=t.slice(0,0);return i6(t).forEach(r=>{$h(e,r,Gh(t[r]))}),e}function f5e(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return i6(t).forEach(r=>{$h(e,r,Gh(t[r]))}),e}var zk=(t,e,r,i)=>(r.forEach(n=>{typeof e[n]=="undefined"&&i.ignoreUndefined||(n in t&&t[n]!==Object.getPrototypeOf(t)?$h(t,n,Lw(t[n],e[n],i)):$h(t,n,Gh(e[n])))}),t),l5e=(t,e,r)=>{let i=t.slice(0,0),n=0;return[t,e].forEach(s=>{let o=[];for(let a=0;a<s.length;a++)!Kk.call(s,a)||(o.push(String(a)),s===t?$h(i,n++,s[a]):$h(i,n++,Gh(s[a])));i=zk(i,s,i6(s).filter(a=>!o.includes(a)),r)}),i};function Lw(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?l5e(t,e,r):!r6(e)||!r6(t)?Gh(e):zk(t,e,i6(e),r)}$k.exports=function(...t){let e=Lw(Gh(Vk),this!==c5e&&this||{},Vk),r={_:{}};for(let i of t)if(i!==void 0){if(!r6(i))throw new TypeError("`"+i+"` is not an Option Object");r=Lw(r,{_:i},e)}return r._}});var qw=v((qtt,Wk)=>{l();function d5e(){return typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}Wk.exports=d5e});var z2=v((jtt,Yk)=>{l();"use strict";var h5e=qw(),n6=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,V2=h5e(),p5e=n6&&!V2,y5e=V2&&!n6,g5e=V2&&n6,m5e=typeof Ra=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!V2,b5e=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,v5e=typeof process!="undefined"&&typeof process.env!="undefined"&&!1,w5e=typeof navigator!="undefined"&&navigator.product==="ReactNative";Yk.exports={isTest:v5e,isElectron:V2,isElectronMain:y5e,isElectronRenderer:g5e,isNode:m5e,isBrowser:p5e,isWebWorker:b5e,isEnvWithDom:n6,isReactNative:w5e}});var jw=v((Utt,Xk)=>{l();var Wh=1e3,Yh=Wh*60,Xh=Yh*60,Ll=Xh*24,_5e=Ll*7,E5e=Ll*365.25;Xk.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return S5e(t);if(r==="number"&&isFinite(t))return e.long?A5e(t):x5e(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function S5e(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*E5e;case"weeks":case"week":case"w":return r*_5e;case"days":case"day":case"d":return r*Ll;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Xh;case"minutes":case"minute":case"mins":case"min":case"m":return r*Yh;case"seconds":case"second":case"secs":case"sec":case"s":return r*Wh;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function x5e(t){var e=Math.abs(t);return e>=Ll?Math.round(t/Ll)+"d":e>=Xh?Math.round(t/Xh)+"h":e>=Yh?Math.round(t/Yh)+"m":e>=Wh?Math.round(t/Wh)+"s":t+"ms"}function A5e(t){var e=Math.abs(t);return e>=Ll?s6(t,e,Ll,"day"):e>=Xh?s6(t,e,Xh,"hour"):e>=Yh?s6(t,e,Yh,"minute"):e>=Wh?s6(t,e,Wh,"second"):t+" ms"}function s6(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var Zk=v((Ftt,Qk)=>{l();function I5e(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=n,r.enabled=o,r.humanize=jw(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let d=0;for(let h=0;h<f.length;h++)d=(d<<5)-d+f.charCodeAt(h),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(f){let d,h=null,p,y;function m(...w){if(!m.enabled)return;let b=m,S=Number(new Date),I=S-(d||S);b.diff=I,b.prev=d,b.curr=S,d=S,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let j=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(C,z)=>{if(C==="%%")return"%";j++;let W=r.formatters[z];if(typeof W=="function"){let X=w[j];C=W.call(b,X),w.splice(j,1),j--}return C}),r.formatArgs.call(b,w),(b.log||r.log).apply(b,w)}return m.namespace=f,m.useColors=r.useColors(),m.color=r.selectColor(f),m.extend=i,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,y=r.enabled(f)),y),set:w=>{h=w}}),typeof r.init=="function"&&r.init(m),m}function i(f,d){let h=r(this.namespace+(typeof d=="undefined"?":":d)+f);return h.log=this.log,h}function n(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let d,h=(typeof f=="string"?f:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)!h[d]||(f=h[d].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let d,h;for(d=0,h=r.skips.length;d<h;d++)if(r.skips[d].test(f))return!1;for(d=0,h=r.names.length;d<h;d++)if(r.names[d].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Qk.exports=I5e});var Ee=v((ms,o6)=>{l();ms.formatArgs=R5e;ms.save=P5e;ms.load=C5e;ms.useColors=T5e;ms.storage=O5e();ms.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ms.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function T5e(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function R5e(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+o6.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}ms.log=console.debug||console.log||(()=>{});function P5e(t){try{t?ms.storage.setItem("debug",t):ms.storage.removeItem("debug")}catch(e){}}function C5e(){let t;try{t=ms.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function O5e(){try{return localStorage}catch(t){}}o6.exports=Zk()(ms);var{formatters:k5e}=o6.exports;k5e.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Rt=v((Ktt,eD)=>{l();"use strict";function Jk(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function D5e(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Jk(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Jk(new n,r)}}eD.exports=D5e});var iD=v((Vtt,rD)=>{l();"use strict";function tD(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function B5e(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return tD(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),tD(new n,r)}}rD.exports=B5e});var sD=v((ztt,nD)=>{l();"use strict";nD.exports=N5e;function N5e(t,e){for(var r=new Array(arguments.length-1),i=0,n=2,s=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(a,c){r[i]=function(f){if(s)if(s=!1,f)c(f);else{for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h++]=arguments[h];a.apply(null,d)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,c(u))}})}});var uD=v(cD=>{l();"use strict";var a6=cD;a6.length=function(e){var r=e.length;if(!r)return 0;for(var i=0;--r%4>1&&e.charAt(r)==="=";)++i;return Math.ceil(e.length*3)/4-i};var Qh=new Array(64),oD=new Array(123);for(Uo=0;Uo<64;)oD[Qh[Uo]=Uo<26?Uo+65:Uo<52?Uo+71:Uo<62?Uo-4:Uo-59|43]=Uo++;var Uo;a6.encode=function(e,r,i){for(var n=null,s=[],o=0,a=0,c;r<i;){var u=e[r++];switch(a){case 0:s[o++]=Qh[u>>2],c=(u&3)<<4,a=1;break;case 1:s[o++]=Qh[c|u>>4],c=(u&15)<<2,a=2;break;case 2:s[o++]=Qh[c|u>>6],s[o++]=Qh[u&63],a=0;break}o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Qh[c],s[o++]=61,a===1&&(s[o++]=61)),n?(o&&n.push(String.fromCharCode.apply(String,s.slice(0,o))),n.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var aD="invalid encoding";a6.decode=function(e,r,i){for(var n=i,s=0,o,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=oD[c])===void 0)throw Error(aD);switch(s){case 0:o=c,s=1;break;case 1:r[i++]=o<<2|(c&48)>>4,o=c,s=2;break;case 2:r[i++]=(o&15)<<4|(c&60)>>2,o=c,s=3;break;case 3:r[i++]=(o&3)<<6|c,s=0;break}}if(s===1)throw Error(aD);return i-n};a6.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var lD=v(($tt,fD)=>{l();"use strict";fD.exports=c6;function c6(){this._listeners={}}c6.prototype.on=function(e,r,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:i||this}),this};c6.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this};c6.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this}});var bD=v((Gtt,mD)=>{l();"use strict";mD.exports=dD(dD);function dD(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),i=r[3]===128;function n(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3]}function s(c,u,f){e[0]=c,u[f]=r[3],u[f+1]=r[2],u[f+2]=r[1],u[f+3]=r[0]}t.writeFloatLE=i?n:s,t.writeFloatBE=i?s:n;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],e[0]}function a(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],e[0]}t.readFloatLE=i?o:a,t.readFloatBE=i?a:o}():function(){function e(i,n,s,o){var a=n<0?1:0;if(a&&(n=-n),n===0)i(1/n>0?0:2147483648,s,o);else if(isNaN(n))i(2143289344,s,o);else if(n>34028234663852886e22)i((a<<31|2139095040)>>>0,s,o);else if(n<11754943508222875e-54)i((a<<31|Math.round(n/1401298464324817e-60))>>>0,s,o);else{var c=Math.floor(Math.log(n)/Math.LN2),u=Math.round(n*Math.pow(2,-c)*8388608)&8388607;i((a<<31|c+127<<23|u)>>>0,s,o)}}t.writeFloatLE=e.bind(null,hD),t.writeFloatBE=e.bind(null,pD);function r(i,n,s){var o=i(n,s),a=(o>>31)*2+1,c=o>>>23&255,u=o&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}t.readFloatLE=r.bind(null,yD),t.readFloatBE=r.bind(null,gD)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),i=r[7]===128;function n(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3],u[f+4]=r[4],u[f+5]=r[5],u[f+6]=r[6],u[f+7]=r[7]}function s(c,u,f){e[0]=c,u[f]=r[7],u[f+1]=r[6],u[f+2]=r[5],u[f+3]=r[4],u[f+4]=r[3],u[f+5]=r[2],u[f+6]=r[1],u[f+7]=r[0]}t.writeDoubleLE=i?n:s,t.writeDoubleBE=i?s:n;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],e[0]}function a(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],e[0]}t.readDoubleLE=i?o:a,t.readDoubleBE=i?a:o}():function(){function e(i,n,s,o,a,c){var u=o<0?1:0;if(u&&(o=-o),o===0)i(0,a,c+n),i(1/o>0?0:2147483648,a,c+s);else if(isNaN(o))i(0,a,c+n),i(2146959360,a,c+s);else if(o>17976931348623157e292)i(0,a,c+n),i((u<<31|2146435072)>>>0,a,c+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,i(f>>>0,a,c+n),i((u<<31|f/4294967296)>>>0,a,c+s);else{var d=Math.floor(Math.log(o)/Math.LN2);d===1024&&(d=1023),f=o*Math.pow(2,-d),i(f*4503599627370496>>>0,a,c+n),i((u<<31|d+1023<<20|f*1048576&1048575)>>>0,a,c+s)}}}t.writeDoubleLE=e.bind(null,hD,0,4),t.writeDoubleBE=e.bind(null,pD,4,0);function r(i,n,s,o,a){var c=i(o,a+n),u=i(o,a+s),f=(u>>31)*2+1,d=u>>>20&2047,h=4294967296*(u&1048575)+c;return d===2047?h?NaN:f*(1/0):d===0?f*5e-324*h:f*Math.pow(2,d-1075)*(h+4503599627370496)}t.readDoubleLE=r.bind(null,yD,0,4),t.readDoubleBE=r.bind(null,gD,4,0)}(),t}function hD(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function pD(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function yD(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function gD(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var vD=v((exports,module)=>{l();"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var _D=v(wD=>{l();"use strict";var Uw=wD;Uw.length=function(e){for(var r=0,i=0,n=0;n<e.length;++n)i=e.charCodeAt(n),i<128?r+=1:i<2048?r+=2:(i&64512)==55296&&(e.charCodeAt(n+1)&64512)==56320?(++n,r+=4):r+=3;return r};Uw.read=function(e,r,i){var n=i-r;if(n<1)return"";for(var s=null,o=[],a=0,c;r<i;)c=e[r++],c<128?o[a++]=c:c>191&&c<224?o[a++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(c>>10),o[a++]=56320+(c&1023)):o[a++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};Uw.write=function(e,r,i){for(var n=i,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):(s&64512)==55296&&((o=e.charCodeAt(a+1))&64512)==56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128);return i-n}});var SD=v((Ytt,ED)=>{l();"use strict";ED.exports=M5e;function M5e(t,e,r){var i=r||8192,n=i>>>1,s=null,o=i;return function(c){if(c<1||c>n)return t(c);o+c>i&&(s=t(i),o=0);var u=e.call(s,o,o+=c);return o&7&&(o=(o|7)+1),u}}});var AD=v((Xtt,xD)=>{l();"use strict";xD.exports=Ki;var H2=ef();function Ki(t,e){this.lo=t>>>0,this.hi=e>>>0}var ql=Ki.zero=new Ki(0,0);ql.toNumber=function(){return 0};ql.zzEncode=ql.zzDecode=function(){return this};ql.length=function(){return 1};var L5e=Ki.zeroHash="\0\0\0\0\0\0\0\0";Ki.fromNumber=function(e){if(e===0)return ql;var r=e<0;r&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return r&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new Ki(i,n)};Ki.from=function(e){if(typeof e=="number")return Ki.fromNumber(e);if(H2.isString(e))if(H2.Long)e=H2.Long.fromString(e);else return Ki.fromNumber(parseInt(e,10));return e.low||e.high?new Ki(e.low>>>0,e.high>>>0):ql};Ki.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,i=~this.hi>>>0;return r||(i=i+1>>>0),-(r+i*4294967296)}return this.lo+this.hi*4294967296};Ki.prototype.toLong=function(e){return H2.Long?new H2.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Ju=String.prototype.charCodeAt;Ki.fromHash=function(e){return e===L5e?ql:new Ki((Ju.call(e,0)|Ju.call(e,1)<<8|Ju.call(e,2)<<16|Ju.call(e,3)<<24)>>>0,(Ju.call(e,4)|Ju.call(e,5)<<8|Ju.call(e,6)<<16|Ju.call(e,7)<<24)>>>0)};Ki.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ki.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Ki.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Ki.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}});var ef=v(Fw=>{l();"use strict";var Ge=Fw;Ge.asPromise=sD();Ge.base64=uD();Ge.EventEmitter=lD();Ge.float=bD();Ge.inquire=vD();Ge.utf8=_D();Ge.pool=SD();Ge.LongBits=AD();Ge.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);Ge.global=Ge.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||Fw;Ge.emptyArray=Object.freeze?Object.freeze([]):[];Ge.emptyObject=Object.freeze?Object.freeze({}):{};Ge.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Ge.isString=function(e){return typeof e=="string"||e instanceof String};Ge.isObject=function(e){return e&&typeof e=="object"};Ge.isset=Ge.isSet=function(e,r){var i=e[r];return i!=null&&e.hasOwnProperty(r)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1};Ge.Buffer=function(){try{var t=Ge.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();Ge._Buffer_from=null;Ge._Buffer_allocUnsafe=null;Ge.newBuffer=function(e){return typeof e=="number"?Ge.Buffer?Ge._Buffer_allocUnsafe(e):new Ge.Array(e):Ge.Buffer?Ge._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};Ge.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;Ge.Long=Ge.global.dcodeIO&&Ge.global.dcodeIO.Long||Ge.global.Long||Ge.inquire("long");Ge.key2Re=/^true|false|0|1$/;Ge.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Ge.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Ge.longToHash=function(e){return e?Ge.LongBits.from(e).toHash():Ge.LongBits.zeroHash};Ge.longFromHash=function(e,r){var i=Ge.LongBits.fromHash(e);return Ge.Long?Ge.Long.fromBits(i.lo,i.hi,r):i.toNumber(Boolean(r))};function ID(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;++n)(t[i[n]]===void 0||!r)&&(t[i[n]]=e[i[n]]);return t}Ge.merge=ID;Ge.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function TD(t){function e(r,i){if(!(this instanceof e))return new e(r,i);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&ID(this,i)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}Ge.newError=TD;Ge.ProtocolError=TD("ProtocolError");Ge.oneOfGetter=function(e){for(var r={},i=0;i<e.length;++i)r[e[i]]=1;return function(){for(var n=Object.keys(this),s=n.length-1;s>-1;--s)if(r[n[s]]===1&&this[n[s]]!==void 0&&this[n[s]]!==null)return n[s]}};Ge.oneOfSetter=function(e){return function(r){for(var i=0;i<e.length;++i)e[i]!==r&&delete this[e[i]]}};Ge.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Ge._configure=function(){var t=Ge.Buffer;if(!t){Ge._Buffer_from=Ge._Buffer_allocUnsafe=null;return}Ge._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,i){return new t(r,i)},Ge._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var Ww=v((Ztt,OD)=>{l();"use strict";OD.exports=Ut;var js=ef(),Kw,u6=js.LongBits,RD=js.base64,PD=js.utf8;function $2(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function Vw(){}function q5e(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Ut(){this.len=0,this.head=new $2(Vw,0,0),this.tail=this.head,this.states=null}var CD=function(){return js.Buffer?function(){return(Ut.create=function(){return new Kw})()}:function(){return new Ut}};Ut.create=CD();Ut.alloc=function(e){return new js.Array(e)};js.Array!==Array&&(Ut.alloc=js.pool(Ut.alloc,js.Array.prototype.subarray));Ut.prototype._push=function(e,r,i){return this.tail=this.tail.next=new $2(e,r,i),this.len+=r,this};function zw(t,e,r){e[r]=t&255}function j5e(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Hw(t,e){this.len=t,this.next=void 0,this.val=e}Hw.prototype=Object.create($2.prototype);Hw.prototype.fn=j5e;Ut.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Hw((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Ut.prototype.int32=function(e){return e<0?this._push($w,10,u6.fromNumber(e)):this.uint32(e)};Ut.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function $w(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}Ut.prototype.uint64=function(e){var r=u6.from(e);return this._push($w,r.length(),r)};Ut.prototype.int64=Ut.prototype.uint64;Ut.prototype.sint64=function(e){var r=u6.from(e).zzEncode();return this._push($w,r.length(),r)};Ut.prototype.bool=function(e){return this._push(zw,1,e?1:0)};function Gw(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}Ut.prototype.fixed32=function(e){return this._push(Gw,4,e>>>0)};Ut.prototype.sfixed32=Ut.prototype.fixed32;Ut.prototype.fixed64=function(e){var r=u6.from(e);return this._push(Gw,4,r.lo)._push(Gw,4,r.hi)};Ut.prototype.sfixed64=Ut.prototype.fixed64;Ut.prototype.float=function(e){return this._push(js.float.writeFloatLE,4,e)};Ut.prototype.double=function(e){return this._push(js.float.writeDoubleLE,8,e)};var U5e=js.Array.prototype.set?function(e,r,i){r.set(e,i)}:function(e,r,i){for(var n=0;n<e.length;++n)r[i+n]=e[n]};Ut.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(zw,1,0);if(js.isString(e)){var i=Ut.alloc(r=RD.length(e));RD.decode(e,i,0),e=i}return this.uint32(r)._push(U5e,r,e)};Ut.prototype.string=function(e){var r=PD.length(e);return r?this.uint32(r)._push(PD.write,r,e):this._push(zw,1,0)};Ut.prototype.fork=function(){return this.states=new q5e(this),this.head=this.tail=new $2(Vw,0,0),this.len=0,this};Ut.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new $2(Vw,0,0),this.len=0),this};Ut.prototype.ldelim=function(){var e=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=r,this.len+=i),this};Ut.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,r,i),i+=e.len,e=e.next;return r};Ut._configure=function(t){Kw=t,Ut.create=CD(),Kw._configure()}});var BD=v((Jtt,DD)=>{l();"use strict";DD.exports=Da;var kD=Ww();(Da.prototype=Object.create(kD.prototype)).constructor=Da;var tf=ef();function Da(){kD.call(this)}Da._configure=function(){Da.alloc=tf._Buffer_allocUnsafe,Da.writeBytesBuffer=tf.Buffer&&tf.Buffer.prototype instanceof Uint8Array&&tf.Buffer.prototype.set.name==="set"?function(e,r,i){r.set(e,i)}:function(e,r,i){if(e.copy)e.copy(r,i,0,e.length);else for(var n=0;n<e.length;)r[i++]=e[n++]}};Da.prototype.bytes=function(e){tf.isString(e)&&(e=tf._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Da.writeBytesBuffer,r,e),this};function F5e(t,e,r){t.length<40?tf.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Da.prototype.string=function(e){var r=tf.Buffer.byteLength(e);return this.uint32(r),r&&this._push(F5e,r,e),this};Da._configure()});var Qw=v((ert,jD)=>{l();"use strict";jD.exports=fi;var Ba=ef(),Yw,ND=Ba.LongBits,K5e=Ba.utf8;function Fo(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function fi(t){this.buf=t,this.pos=0,this.len=t.length}var MD=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new fi(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new fi(e);throw Error("illegal buffer")},LD=function(){return Ba.Buffer?function(r){return(fi.create=function(n){return Ba.Buffer.isBuffer(n)?new Yw(n):MD(n)})(r)}:MD};fi.create=LD();fi.prototype._slice=Ba.Array.prototype.subarray||Ba.Array.prototype.slice;fi.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Fo(this,10);return e}}();fi.prototype.int32=function(){return this.uint32()|0};fi.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Xw(){var t=new ND(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Fo(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Fo(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}fi.prototype.bool=function(){return this.uint32()!==0};function f6(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}fi.prototype.fixed32=function(){if(this.pos+4>this.len)throw Fo(this,4);return f6(this.buf,this.pos+=4)};fi.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Fo(this,4);return f6(this.buf,this.pos+=4)|0};function qD(){if(this.pos+8>this.len)throw Fo(this,8);return new ND(f6(this.buf,this.pos+=4),f6(this.buf,this.pos+=4))}fi.prototype.float=function(){if(this.pos+4>this.len)throw Fo(this,4);var e=Ba.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};fi.prototype.double=function(){if(this.pos+8>this.len)throw Fo(this,4);var e=Ba.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};fi.prototype.bytes=function(){var e=this.uint32(),r=this.pos,i=this.pos+e;if(i>this.len)throw Fo(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};fi.prototype.string=function(){var e=this.bytes();return K5e.read(e,0,e.length)};fi.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Fo(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Fo(this);while(this.buf[this.pos++]&128);return this};fi.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};fi._configure=function(t){Yw=t,fi.create=LD(),Yw._configure();var e=Ba.Long?"toLong":"toNumber";Ba.merge(fi.prototype,{int64:function(){return Xw.call(this)[e](!1)},uint64:function(){return Xw.call(this)[e](!0)},sint64:function(){return Xw.call(this).zzDecode()[e](!1)},fixed64:function(){return qD.call(this)[e](!0)},sfixed64:function(){return qD.call(this)[e](!1)}})}});var VD=v((trt,KD)=>{l();"use strict";KD.exports=jl;var UD=Qw();(jl.prototype=Object.create(UD.prototype)).constructor=jl;var FD=ef();function jl(t){UD.call(this,t)}jl._configure=function(){FD.Buffer&&(jl.prototype._slice=FD.Buffer.prototype.slice)};jl.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};jl._configure()});var HD=v((rrt,zD)=>{l();"use strict";zD.exports=G2;var Zw=ef();(G2.prototype=Object.create(Zw.EventEmitter.prototype)).constructor=G2;function G2(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Zw.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}G2.prototype.rpcCall=function t(e,r,i,n,s){if(!n)throw TypeError("request must be specified");var o=this;if(!s)return Zw.asPromise(t,o,e,r,i,n);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(c,u){if(c)return o.emit("error",c,e),s(c);if(u===null){o.end(!0);return}if(!(u instanceof i))try{u=i[o.responseDelimited?"decodeDelimited":"decode"](u)}catch(f){return o.emit("error",f,e),s(f)}return o.emit("data",u,e),s(null,u)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};G2.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var GD=v($D=>{l();"use strict";var V5e=$D;V5e.Service=HD()});var YD=v((nrt,WD)=>{l();"use strict";WD.exports={}});var ZD=v(QD=>{l();"use strict";var Qn=QD;Qn.build="minimal";Qn.Writer=Ww();Qn.BufferWriter=BD();Qn.Reader=Qw();Qn.BufferReader=VD();Qn.util=ef();Qn.rpc=GD();Qn.roots=YD();Qn.configure=XD;function XD(){Qn.util._configure(),Qn.Writer._configure(Qn.BufferWriter),Qn.Reader._configure(Qn.BufferReader)}XD()});var Vi=v((ort,JD)=>{l();"use strict";JD.exports=ZD()});function sB(t,e,r){e=e||[],r=r||0;for(var i=r;t>=W5e;)e[r++]=t&255|nB,t/=128;for(;t&G5e;)e[r++]=t&255|nB,t>>>=7;return e[r]=t|0,sB.bytes=r-i+1,e}function e9(t,e){var r=0,e=e||0,i=0,n=e,s,o=t.length;do{if(n>=o)throw e9.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&oB)<<i:(s&oB)*Math.pow(2,i),i+=7}while(s>=X5e);return e9.bytes=n-e,r}var H5e,nB,$5e,G5e,W5e,Y5e,X5e,oB,Q5e,Z5e,J5e,e8e,t8e,r8e,i8e,n8e,s8e,o8e,a8e,c8e,W2,aB=bt(()=>{l();H5e=sB,nB=128,$5e=127,G5e=~$5e,W5e=Math.pow(2,31);Y5e=e9,X5e=128,oB=127;Q5e=Math.pow(2,7),Z5e=Math.pow(2,14),J5e=Math.pow(2,21),e8e=Math.pow(2,28),t8e=Math.pow(2,35),r8e=Math.pow(2,42),i8e=Math.pow(2,49),n8e=Math.pow(2,56),s8e=Math.pow(2,63),o8e=function(t){return t<Q5e?1:t<Z5e?2:t<J5e?3:t<e8e?4:t<t8e?5:t<r8e?6:t<i8e?7:t<n8e?8:t<s8e?9:10},a8e={encode:H5e,decode:Y5e,encodingLength:o8e},c8e=a8e,W2=c8e});var Y2,Jh,e0,d6=bt(()=>{l();aB();Y2=t=>[W2.decode(t),W2.decode.bytes],Jh=(t,e,r=0)=>(W2.encode(t,e,r),e),e0=t=>W2.encodingLength(t)});var t0={};zt(t0,{coerce:()=>Us,empty:()=>uB,equals:()=>t9,fromHex:()=>f8e,fromString:()=>r9,isBinary:()=>l8e,toHex:()=>u8e,toString:()=>i9});var uB,u8e,f8e,t9,Us,l8e,r9,i9,nf=bt(()=>{l();uB=new Uint8Array(0),u8e=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),f8e=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):uB},t9=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Us=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},l8e=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),r9=t=>new TextEncoder().encode(t),i9=t=>new TextDecoder().decode(t)});var i0={};zt(i0,{Digest:()=>r0,create:()=>X2,decode:()=>Pi,equals:()=>n9});var X2,Pi,n9,r0,Nn=bt(()=>{l();nf();d6();X2=(t,e)=>{let r=e.byteLength,i=e0(t),n=i+e0(r),s=new Uint8Array(n+r);return Jh(t,s,0),Jh(r,s,i),s.set(e,n),new r0(t,r,e,s)},Pi=t=>{let e=Us(t),[r,i]=Y2(e),[n,s]=Y2(e.subarray(i)),o=e.subarray(i+s);if(o.byteLength!==n)throw new Error("Incorrect length");return new r0(r,n,o,e)},n9=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&t9(t.bytes,e.bytes),r0=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}});function d8e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function d(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var m=0,w=0,b=0,S=y.length;b!==S&&y[b]===0;)b++,m++;for(var I=(S-b)*f+1>>>0,j=new Uint8Array(I);b!==S;){for(var B=y[b],C=0,z=I-1;(B!==0||C<w)&&z!==-1;z--,C++)B+=256*j[z]>>>0,j[z]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");w=C,b++}for(var W=I-w;W!==I&&j[W]===0;)W++;for(var X=c.repeat(m);W<I;++W)X+=t.charAt(j[W]);return X}function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var m=0;if(y[m]!==" "){for(var w=0,b=0;y[m]===c;)w++,m++;for(var S=(y.length-m)*u+1>>>0,I=new Uint8Array(S);y[m];){var j=r[y.charCodeAt(m)];if(j===255)return;for(var B=0,C=S-1;(j!==0||B<b)&&C!==-1;C--,B++)j+=a*I[C]>>>0,I[C]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");b=B,m++}if(y[m]!==" "){for(var z=S-b;z!==S&&I[z]===0;)z++;for(var W=new Uint8Array(w+(S-z)),X=w;z!==S;)W[X++]=I[z++];return W}}}function p(y){var m=h(y);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var h8e,p8e,fB,lB=bt(()=>{l();h8e=d8e,p8e=h8e,fB=p8e});var dB,hB,h6,pB,p6,sf,y8e,g8e,Qr,Na=bt(()=>{l();lB();nf();dB=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},hB=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseDecode=i}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){let r={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new h6(r)}},h6=class{constructor(e){this.decoders=e}or(e){let r=e.decoders||{[e.prefix]:e};return new h6({...this.decoders,...r})}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},pB=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new dB(e,r,i),this.decoder=new hB(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},p6=({name:t,prefix:e,encode:r,decode:i})=>new pB(t,e,r,i),sf=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=fB(r,e);return p6({prefix:t,name:e,encode:i,decode:s=>Us(n(s))})},y8e=(t,e,r,i)=>{let n={};for(let f=0;f<e.length;++f)n[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let d=n[t[f]];if(d===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},g8e=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},Qr=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>p6({prefix:e,name:t,encode(n){return g8e(n,i,r)},decode(n){return y8e(n,i,r,t)}})});var Fs={};zt(Fs,{base58btc:()=>pt,base58flickr:()=>m8e});var pt,m8e,li=bt(()=>{l();Na();pt=sf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),m8e=sf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var of={};zt(of,{base32:()=>ir,base32hex:()=>v8e,base32hexpad:()=>_8e,base32hexpadupper:()=>E8e,base32hexupper:()=>w8e,base32pad:()=>o9,base32padupper:()=>b8e,base32upper:()=>s9,base32z:()=>S8e});var ir,s9,o9,b8e,v8e,w8e,_8e,E8e,S8e,gn=bt(()=>{l();Na();ir=Qr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s9=Qr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),o9=Qr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),b8e=Qr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),v8e=Qr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),w8e=Qr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_8e=Qr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),E8e=Qr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),S8e=Qr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var af={};zt(af,{CID:()=>J});var J,x8e,A8e,I8e,Q2,T8e,yB,gB,y6,g6,R8e,P8e,C8e,Te=bt(()=>{l();d6();Nn();li();gn();nf();J=class{constructor(e,r,i,n){this.code=r,this.version=e,this.multihash=i,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:g6,byteLength:g6,code:y6,version:y6,multihash:y6,bytes:y6,_baseCache:g6,asCID:g6})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Q2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==T8e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return J.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,i=X2(e,r);return J.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&n9(this.multihash,e.multihash)}toString(e){let{bytes:r,version:i,_baseCache:n}=this;switch(i){case 0:return A8e(r,n,e||pt.encoder);default:return I8e(r,n,e||ir.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return P8e(/^0\.0/,C8e),!!(e&&(e[gB]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof J)return e;if(e!=null&&e.asCID===e){let{version:r,code:i,multihash:n,bytes:s}=e;return new J(r,i,n,s||yB(r,i,n.bytes))}else if(e!=null&&e[gB]===!0){let{version:r,multihash:i,code:n}=e,s=Pi(i);return J.create(r,n,s)}else return null}static create(e,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Q2)throw new Error(`Version 0 CID must use dag-pb (code: ${Q2}) block encoding`);return new J(e,r,i,i.bytes)}case 1:{let n=yB(e,r,i.bytes);return new J(e,r,i,n)}default:throw new Error("Invalid version")}}static createV0(e){return J.create(0,Q2,e)}static createV1(e,r){return J.create(1,e,r)}static decode(e){let[r,i]=J.decodeFirst(e);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=J.inspectBytes(e),i=r.size-r.multihashSize,n=Us(e.subarray(i,i+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=n.subarray(r.multihashSize-r.digestSize),o=new r0(r.multihashCode,r.digestSize,s,n);return[r.version===0?J.createV0(o):J.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,i=()=>{let[d,h]=Y2(e.subarray(r));return r+=h,d},n=i(),s=Q2;if(n===18?(n=0,r=0):n===1&&(s=i()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let o=r,a=i(),c=i(),u=r+c,f=u-o;return{version:n,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[i,n]=x8e(e,r),s=J.decode(n);return s._baseCache.set(i,e),s}},x8e=(t,e)=>{switch(t[0]){case"Q":{let r=e||pt;return[pt.prefix,r.decode(`${pt.prefix}${t}`)]}case pt.prefix:{let r=e||pt;return[pt.prefix,r.decode(t)]}case ir.prefix:{let r=e||ir;return[ir.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},A8e=(t,e,r)=>{let{prefix:i}=r;if(i!==pt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=e.get(i);if(n==null){let s=r.encode(t).slice(1);return e.set(i,s),s}else return n},I8e=(t,e,r)=>{let{prefix:i}=r,n=e.get(i);if(n==null){let s=r.encode(t);return e.set(i,s),s}else return n},Q2=112,T8e=18,yB=(t,e,r)=>{let i=e0(t),n=i+e0(e),s=new Uint8Array(n+r.byteLength);return Jh(t,s,0),Jh(e,s,i),s.set(r,n),s},gB=Symbol.for("@ipld/js-cid/CID"),y6={writable:!1,configurable:!1,enumerable:!0},g6={writable:!1,enumerable:!1,configurable:!1},R8e="0.0.0-dev",P8e=(t,e)=>{if(t.test(R8e))console.warn(e);else throw new Error(e)},C8e=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var ff,BN,oy=bt(()=>{l();Nn();ff=({name:t,code:e,encode:r})=>new BN(t,e,r),BN=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}async digest(e){if(e instanceof Uint8Array){let r=await this.encode(e);return X2(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var ay={};zt(ay,{identity:()=>Es});var Es,Jc=bt(()=>{l();oy();nf();Es=ff({name:"identity",code:0,encode:t=>Us(t)})});var w9={};zt(w9,{identity:()=>yve});var yve,MN=bt(()=>{l();Na();nf();yve=p6({prefix:"\0",name:"identity",encode:t=>i9(t),decode:t=>r9(t)})});var _9={};zt(_9,{base2:()=>gve});var gve,LN=bt(()=>{l();Na();gve=Qr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var E9={};zt(E9,{base8:()=>mve});var mve,qN=bt(()=>{l();Na();mve=Qr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var S9={};zt(S9,{base10:()=>bve});var bve,jN=bt(()=>{l();Na();bve=sf({prefix:"9",name:"base10",alphabet:"0123456789"})});var T6={};zt(T6,{base16:()=>vve,base16upper:()=>wve});var vve,wve,x9=bt(()=>{l();Na();vve=Qr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wve=Qr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var R6={};zt(R6,{base36:()=>_ve,base36upper:()=>Eve});var _ve,Eve,A9=bt(()=>{l();Na();_ve=sf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Eve=sf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var u0={};zt(u0,{base64:()=>Sve,base64pad:()=>xve,base64url:()=>Ave,base64urlpad:()=>Ive});var Sve,xve,Ave,Ive,cy=bt(()=>{l();Na();Sve=Qr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xve=Qr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ave=Qr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ive=Qr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var zs={};zt(zs,{sha256:()=>Ir,sha512:()=>Tve});var UN,Ir,Tve,mi=bt(()=>{l();oy();UN=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Ir=ff({name:"sha2-256",code:18,encode:UN("SHA-256")}),Tve=ff({name:"sha2-512",code:19,encode:UN("SHA-512")})});var uy={};zt(uy,{code:()=>Ci,decode:()=>Cve,encode:()=>Pve,name:()=>Rve});var Rve,Ci,Pve,Cve,Hs=bt(()=>{l();nf();Rve="raw",Ci=85,Pve=t=>Us(t),Cve=t=>Us(t)});var T9={};zt(T9,{code:()=>I9,decode:()=>Nve,encode:()=>Bve,name:()=>Dve});var Ove,kve,Dve,I9,Bve,Nve,R9=bt(()=>{l();Ove=new TextEncoder,kve=new TextDecoder,Dve="json",I9=512,Bve=t=>Ove.encode(JSON.stringify(t)),Nve=t=>JSON.parse(kve.decode(t))});var fy=bt(()=>{l();Te();d6();nf();oy();Nn()});var Kl,P6,C6,O6=bt(()=>{l();MN();LN();qN();jN();x9();gn();A9();li();cy();mi();Jc();Hs();R9();fy();Kl={...w9,..._9,...E9,...S9,...T6,...of,...R6,...Fs,...u0},P6={...zs,...ay},C6={raw:uy,json:T9}});function VN(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var zN,P9,Mve,k6,C9=bt(()=>{l();O6();zN=VN("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),P9=VN("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Mve={utf8:zN,"utf-8":zN,hex:Kl.base16,latin1:P9,ascii:P9,binary:P9,...Kl},k6=Mve});var bi={};zt(bi,{fromString:()=>Xe});function Xe(t,e="utf8"){let r=k6[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var dt=bt(()=>{l();C9()});var k9=v((Ant,$N)=>{l();"use strict";var HN="[a-fA-F\\d:]",hf=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${HN})|(?<=${HN})(?=\\s|$))`:"",Ho="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",vi="[a-fA-F\\d]{1,4}",D6=`
(?:
(?:${vi}:){7}(?:${vi}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${vi}:){6}(?:${Ho}|:${vi}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${vi}:){5}(?::${Ho}|(?::${vi}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${vi}:){4}(?:(?::${vi}){0,1}:${Ho}|(?::${vi}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${vi}:){3}(?:(?::${vi}){0,2}:${Ho}|(?::${vi}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${vi}:){2}(?:(?::${vi}){0,3}:${Ho}|(?::${vi}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${vi}:){1}(?:(?::${vi}){0,4}:${Ho}|(?::${vi}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${vi}){0,5}:${Ho}|(?::${vi}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Lve=new RegExp(`(?:^${Ho}$)|(?:^${D6}$)`),qve=new RegExp(`^${Ho}$`),jve=new RegExp(`^${D6}$`),O9=t=>t&&t.exact?Lve:new RegExp(`(?:${hf(t)}${Ho}${hf(t)})|(?:${hf(t)}${D6}${hf(t)})`,"g");O9.v4=t=>t&&t.exact?qve:new RegExp(`${hf(t)}${Ho}${hf(t)}`,"g");O9.v6=t=>t&&t.exact?jve:new RegExp(`${hf(t)}${D6}${hf(t)}`,"g");$N.exports=O9});var B9=v((Int,GN)=>{l();"use strict";var D9=k9(),d0=t=>D9({exact:!0}).test(t);d0.v4=t=>D9.v4({exact:!0}).test(t);d0.v6=t=>D9.v6({exact:!0}).test(t);d0.version=t=>d0(t)?d0.v4(t)?4:6:void 0;GN.exports=d0});var pr={};zt(pr,{toString:()=>$e});function $e(t,e="utf8"){let r=k6[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var tt=bt(()=>{l();C9()});var ZN=v((Rnt,QN)=>{l();"use strict";var N9=B9(),{toString:WN}=(tt(),pr),Uve=N9,M9=N9.v4,YN=N9.v6,XN=function(t,e,r){r=~~r;let i;if(M9(t))i=e||new Uint8Array(r+4),t.split(/\./g).map(function(n){i[r++]=parseInt(n,10)&255});else if(YN(t)){let n=t.split(":",8),s;for(s=0;s<n.length;s++){let o=M9(n[s]),a;o&&(a=XN(n[s]),n[s]=WN(a.slice(0,2),"base16")),a&&++s<8&&n.splice(s,0,WN(a.slice(2,4),"base16"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(s=0;s<n.length&&n[s]!=="";s++);let o=[s,"1"];for(s=9-n.length;s>0;s--)o.push("0");n.splice.apply(n,o)}for(i=e||new Uint8Array(r+16),s=0;s<n.length;s++){let o=parseInt(n[s],16);i[r++]=o>>8&255,i[r++]=o&255}}if(!i)throw Error("Invalid ip address: "+t);return i},Fve=function(t,e,r){e=~~e,r=r||t.length-e;let i=[],n,s=new DataView(t.buffer);if(r===4){for(let o=0;o<r;o++)i.push(t[e+o]);n=i.join(".")}else if(r===16){for(let o=0;o<r;o+=2)i.push(s.getUint16(e+o).toString(16));n=i.join(":"),n=n.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),n=n.replace(/:{3,4}/,"::")}return n};QN.exports={isIP:Uve,isV4:M9,isV6:YN,toBytes:XN,toString:Fve}});var ly=v((Pnt,eM)=>{l();"use strict";function es(t){if(typeof t=="number"){if(es.codes[t])return es.codes[t];throw new Error("no protocol with code: "+t)}else if(typeof t=="string"){if(es.names[t])return es.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}var $s=-1;es.lengthPrefixedVarSize=$s;es.V=$s;es.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,$s,"ip6zone"],[53,$s,"dns","resolvable"],[54,$s,"dns4","resolvable"],[55,$s,"dns6","resolvable"],[56,$s,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,$s,"unix",!1,"path"],[421,$s,"ipfs"],[421,$s,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,$s,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,$s,"memory"]];es.names={};es.codes={};es.table.map(t=>{let e=JN.apply(null,t);return es.codes[e.code]=e,es.names[e.name]=e,null});es.object=JN;function JN(t,e,r,i,n){return{code:t,size:e,name:r,resolvable:Boolean(i),path:Boolean(n)}}eM.exports=es});var iM=v((Cnt,rM)=>{l();rM.exports=L9;var tM=128,Kve=127,Vve=~Kve,zve=Math.pow(2,31);function L9(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw L9.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var i=r;t>=zve;)e[r++]=t&255|tM,t/=128;for(;t&Vve;)e[r++]=t&255|tM,t>>>=7;return e[r]=t|0,L9.bytes=r-i+1,e}});var oM=v((Ont,sM)=>{l();sM.exports=q9;var Hve=128,nM=127;function q9(t,e){var r=0,e=e||0,i=0,n=e,s,o=t.length;do{if(n>=o||i>49)throw q9.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&nM)<<i:(s&nM)*Math.pow(2,i),i+=7}while(s>=Hve);return q9.bytes=n-e,r}});var cM=v((knt,aM)=>{l();var $ve=Math.pow(2,7),Gve=Math.pow(2,14),Wve=Math.pow(2,21),Yve=Math.pow(2,28),Xve=Math.pow(2,35),Qve=Math.pow(2,42),Zve=Math.pow(2,49),Jve=Math.pow(2,56),e7e=Math.pow(2,63);aM.exports=function(t){return t<$ve?1:t<Gve?2:t<Wve?3:t<Yve?4:t<Xve?5:t<Qve?6:t<Zve?7:t<Jve?8:t<e7e?9:10}});var Ss=v((Dnt,uM)=>{l();uM.exports={encode:iM(),decode:oM(),encodingLength:cM()}});var Gs={};zt(Gs,{concat:()=>mn});function mn(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));let r=new Uint8Array(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}var bn=bt(()=>{l()});var mM=v((Bnt,gM)=>{l();"use strict";var B6=ZN(),fM=ly(),{CID:t7e}=(Te(),af),{base32:lM}=(gn(),of),{base58btc:r7e}=(li(),Fs),i7e=(Nn(),i0),h0=Ss(),{toString:N6}=(tt(),pr),{fromString:dM}=(dt(),bi),{concat:M6}=(bn(),Gs);gM.exports=dy;function dy(t,e){return e instanceof Uint8Array?dy.toString(t,e):dy.toBytes(t,e)}dy.toString=function(e,r){switch(fM(e).code){case 4:case 41:return n7e(r);case 6:case 273:case 33:case 132:return pM(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return o7e(r);case 421:return c7e(r);case 444:return yM(r);case 445:return yM(r);default:return N6(r,"base16")}};dy.toBytes=function(e,r){switch(fM(e).code){case 4:return hM(r);case 41:return hM(r);case 6:case 273:case 33:case 132:return j9(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return s7e(r);case 421:return a7e(r);case 444:return u7e(r);case 445:return f7e(r);default:return dM(r,"base16")}};function hM(t){if(!B6.isIP(t))throw new Error("invalid ip address");return B6.toBytes(t)}function n7e(t){let e=B6.toString(t);if(!e||!B6.isIP(e))throw new Error("invalid ip address");return e}function j9(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function pM(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function s7e(t){let e=dM(t),r=Uint8Array.from(h0.encode(e.length));return M6([r,e],r.length+e.length)}function o7e(t){let e=h0.decode(t);if(t=t.slice(h0.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return N6(t)}function a7e(t){let e;t[0]==="Q"||t[0]==="1"?e=i7e.decode(r7e.decode(`z${t}`)).bytes:e=t7e.parse(t).multihash.bytes;let r=Uint8Array.from(h0.encode(e.length));return M6([r,e],r.length+e.length)}function c7e(t){let e=h0.decode(t),r=t.slice(h0.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return N6(r,"base58btc")}function u7e(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let r=lM.decode("b"+e[0]),i=parseInt(e[1],10);if(i<1||i>65536)throw new Error("Port number is not in range(1, 65536)");let n=j9(i);return M6([r,n],r.length+n.length)}function f7e(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let r=lM.decode("b"+e[0]),i=parseInt(e[1],10);if(i<1||i>65536)throw new Error("Port number is not in range(1, 65536)");let n=j9(i);return M6([r,n],r.length+n.length)}function yM(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),i=N6(e,"base32"),n=pM(r);return i+":"+n}});var PM=v((Nnt,RM)=>{l();"use strict";var bM=mM(),U9=ly(),hy=Ss(),{concat:vM}=(bn(),Gs),{toString:l7e}=(tt(),pr);RM.exports={stringToStringTuples:wM,stringTuplesToString:_M,tuplesToStringTuples:SM,stringTuplesToTuples:EM,bytesToTuples:F9,tuplesToBytes:xM,bytesToString:d7e,stringToBytes:IM,fromString:h7e,fromBytes:TM,validateBytes:K9,isValidBytes:p7e,cleanPath:L6,ParseError:V9,protoFromTuple:py,sizeForAddr:AM};function wM(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let i=0;i<r.length;i++){let n=r[i],s=U9(n);if(s.size===0){e.push([n]);continue}if(i++,i>=r.length)throw V9("invalid address: "+t);if(s.path){e.push([n,L6(r.slice(i).join("/"))]);break}e.push([n,r[i]])}return e}function _M(t){let e=[];return t.map(r=>{let i=py(r);return e.push(i.name),r.length>1&&e.push(r[1]),null}),L6(e.join("/"))}function EM(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=py(e);return e.length>1?[r.code,bM.toBytes(r.code,e[1])]:[r.code]})}function SM(t){return t.map(e=>{let r=py(e);return e[1]?[r.code,bM.toString(r.code,e[1])]:[r.code]})}function xM(t){return TM(vM(t.map(e=>{let r=py(e),i=Uint8Array.from(hy.encode(r.code));return e.length>1&&(i=vM([i,e[1]])),i})))}function AM(t,e){return t.size>0?t.size/8:t.size===0?0:hy.decode(e)+hy.decode.bytes}function F9(t){let e=[],r=0;for(;r<t.length;){let i=hy.decode(t,r),n=hy.decode.bytes,s=U9(i),o=AM(s,t.slice(r+n));if(o===0){e.push([i]),r+=n;continue}let a=t.slice(r+n,r+n+o);if(r+=o+n,r>t.length)throw V9("Invalid address Uint8Array: "+l7e(t,"base16"));e.push([i,a])}return e}function d7e(t){let e=F9(t),r=SM(e);return _M(r)}function IM(t){t=L6(t);let e=wM(t),r=EM(e);return xM(r)}function h7e(t){return IM(t)}function TM(t){let e=K9(t);if(e)throw e;return Uint8Array.from(t)}function K9(t){try{F9(t)}catch(e){return e}}function p7e(t){return K9(t)===void 0}function L6(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function V9(t){return new Error("Error parsing address: "+t)}function py(t){return U9(t[0])}});var kM=v((Mnt,OM)=>{l();"use strict";function CM(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function y7e(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return CM(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),CM(new n,r)}}OM.exports=y7e});var vn={};zt(vn,{equals:()=>Ua});function Ua(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var wi=bt(()=>{l()});var rt=v((Lnt,NM)=>{l();"use strict";var $o=PM(),p0=ly(),DM=Ss(),{CID:g7e}=(Te(),af),{base58btc:m7e}=(li(),Fs),b7e=kM(),v7e=Symbol.for("nodejs.util.inspect.custom"),{toString:q6}=(tt(),pr),{equals:w7e}=(wi(),vn),z9=new Map,BM=Symbol.for("@multiformats/js-multiaddr/multiaddr"),Ln=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,BM,{value:!0}),e instanceof Uint8Array)this.bytes=$o.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=$o.fromString(e)}else if(Ln.isMultiaddr(e))this.bytes=$o.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return $o.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},r=this.toString().split("/");return e.family=r[1]==="ip4"?4:6,e.host=r[2],e.transport=r[3],e.port=parseInt(r[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},p0(e)))}protoCodes(){let e=[],r=this.bytes,i=0;for(;i<r.length;){let n=DM.decode(r,i),s=DM.decode.bytes,o=p0(n);i+=$o.sizeForAddr(o,r.slice(i+s))+s,e.push(n)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return $o.bytesToTuples(this.bytes)}stringTuples(){let e=$o.bytesToTuples(this.bytes);return $o.tuplesToStringTuples(e)}encapsulate(e){return e=new Ln(e),new Ln(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),i=this.toString(),n=i.lastIndexOf(r);if(n<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new Ln(i.slice(0,n))}decapsulateCode(e){let r=this.tuples();for(let i=r.length-1;i>=0;i--)if(r[i][0]===e)return new Ln($o.tuplesToBytes(r.slice(0,i)));return this}getPeerId(){try{let r=this.stringTuples().filter(i=>i[0]===p0.names.ipfs.code).pop();if(r&&r[1]){let i=r[1];return i[0]==="Q"||i[0]==="1"?q6(m7e.decode(`z${i}`),"base58btc"):q6(g7e.parse(i).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>!!p0(r[0]).path)[0][1],e||(e=null)}catch(r){e=null}return e}equals(e){return w7e(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(n=>n.resolvable);if(!e)return[this];let r=z9.get(e.name);if(!r)throw b7e(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(n=>new Ln(n))}nodeAddress(){let e=this.protoCodes(),r=this.protoNames(),i=this.toString().split("/").slice(1);if(i.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(i[2]!=="tcp"&&i[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:i[1],port:parseInt(i[3])}}isThinWaistAddress(e){let r=(e||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(e,r){if(!e)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let i;switch(e.family){case 4:i="ip4";break;case 6:i="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new Ln("/"+[i,e.address,r,e.port].join("/"))}static isName(e){return Ln.isMultiaddr(e)?e.protos().some(r=>r.resolvable):!1}static isMultiaddr(e){return e instanceof Ln||Boolean(e&&e[BM])}[v7e](){return"<Multiaddr "+q6(this.bytes,"base16")+" - "+$o.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+q6(this.bytes,"base16")+" - "+$o.bytesToString(this.bytes)+">"}};Ln.protocols=p0;Ln.resolvers=z9;function _7e(t){return new Ln(t)}NM.exports={Multiaddr:Ln,multiaddr:_7e,protocols:p0,resolvers:z9}});var zl=v((qnt,HM)=>{l();"use strict";var{Multiaddr:H9}=rt(),MM=Ze("dns4"),LM=Ze("dns6"),qM=Ze("dnsaddr"),Vl=wn(Ze("dns"),qM,MM,LM),yy=wn(Ze("ip4"),Ze("ip6")),y0=wn(gt(yy,Ze("tcp")),gt(Vl,Ze("tcp"))),$9=gt(yy,Ze("udp")),jM=gt($9,Ze("utp")),UM=gt($9,Ze("quic")),g0=wn(gt(y0,Ze("ws")),gt(Vl,Ze("ws"))),m0=wn(gt(y0,Ze("wss")),gt(Vl,Ze("wss"))),j6=wn(gt(y0,Ze("http")),gt(yy,Ze("http")),gt(Vl,Ze("http"))),U6=wn(gt(y0,Ze("https")),gt(yy,Ze("https")),gt(Vl,Ze("https"))),G9=wn(gt(g0,Ze("p2p-webrtc-star"),Ze("p2p")),gt(m0,Ze("p2p-webrtc-star"),Ze("p2p")),gt(g0,Ze("p2p-webrtc-star")),gt(m0,Ze("p2p-webrtc-star"))),E7e=wn(gt(g0,Ze("p2p-websocket-star"),Ze("p2p")),gt(m0,Ze("p2p-websocket-star"),Ze("p2p")),gt(g0,Ze("p2p-websocket-star")),gt(m0,Ze("p2p-websocket-star"))),W9=wn(gt(j6,Ze("p2p-webrtc-direct"),Ze("p2p")),gt(U6,Ze("p2p-webrtc-direct"),Ze("p2p")),gt(j6,Ze("p2p-webrtc-direct")),gt(U6,Ze("p2p-webrtc-direct"))),b0=wn(g0,m0,j6,U6,G9,W9,y0,jM,UM,Vl),S7e=wn(gt(b0,Ze("p2p-stardust"),Ze("p2p")),gt(b0,Ze("p2p-stardust"))),pf=wn(gt(b0,Ze("p2p")),G9,W9,Ze("p2p")),FM=wn(gt(pf,Ze("p2p-circuit"),pf),gt(pf,Ze("p2p-circuit")),gt(Ze("p2p-circuit"),pf),gt(b0,Ze("p2p-circuit")),gt(Ze("p2p-circuit"),b0),Ze("p2p-circuit")),KM=()=>wn(gt(FM,KM),FM),v0=KM(),VM=wn(gt(v0,pf,v0),gt(pf,v0),gt(v0,pf),v0,pf);HM.exports={DNS:Vl,DNS4:MM,DNS6:LM,DNSADDR:qM,IP:yy,TCP:y0,UDP:$9,QUIC:UM,UTP:jM,HTTP:j6,HTTPS:U6,WebSockets:g0,WebSocketsSecure:m0,WebSocketStar:E7e,WebRTCStar:G9,WebRTCDirect:W9,Reliable:b0,Stardust:S7e,Circuit:v0,P2P:VM,IPFS:VM};function zM(t){function e(r){if(!H9.isMultiaddr(r))try{r=new H9(r)}catch(n){return!1}let i=t(r.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function gt(...t){function e(r){if(r.length<t.length)return null;let i=r;return t.some(n=>(i=typeof n=="function"?n().partialMatch(r):n.partialMatch(r),Array.isArray(i)&&(r=i),i===null)),i}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:zM(e),partialMatch:e}}function wn(...t){function e(i){let n=null;return t.some(s=>{let o=typeof s=="function"?s().partialMatch(i):s.partialMatch(i);return o?(n=o,!0):!1}),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:zM(e),partialMatch:e}}function Ze(t){let e=t;function r(n){let s;if(typeof n=="string"||n instanceof Uint8Array)try{s=new H9(n)}catch(a){return!1}else s=n;let o=s.protoNames();return o.length===1&&o[0]===e}function i(n){return n.length===0?null:n[0]===e?n.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:i}}});var Y9=v((jnt,WM)=>{l();"use strict";var x7e=typeof navigator!="undefined"&&navigator.product==="ReactNative";function A7e(){return x7e?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var gy=self.URL,$M=A7e(),GM=class{constructor(e="",r=$M){this.super=new gy(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return gy.createObjectURL(e)}static revokeObjectURL(e){gy.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function I7e(t){if(typeof t=="string")return new gy(t).toString();if(!(t instanceof gy)){let e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",i=t.port?":"+t.port:"",n=t.protocol?t.protocol+"//":"",s=t.host||"",o=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",u=t.pathname||"",f=t.path||u+a;return`${n}${e||r}${s||o+i}${f}${c}`}}WM.exports={URLWithLegacySupport:GM,URLSearchParams:self.URLSearchParams,defaultBase:$M,format:I7e}});var QM=v((Unt,XM)=>{l();"use strict";var{URLWithLegacySupport:YM,format:T7e}=Y9();XM.exports=(t,e={},r={},i)=>{let n=e.protocol?e.protocol.replace(":",""):"http";n=(r[n]||i||n)+":";let s;try{s=new YM(t)}catch(a){s={}}let o=Object.assign({},e,{protocol:n||s.protocol,host:e.host||s.host});return new YM(t,T7e(o)).toString()}});var F6=v((Fnt,ZM)=>{l();"use strict";var{URLWithLegacySupport:R7e,format:P7e,URLSearchParams:C7e,defaultBase:O7e}=Y9(),k7e=QM();ZM.exports={URL:R7e,URLSearchParams:C7e,format:P7e,relative:k7e,defaultBase:O7e}});var _0=v((Knt,lL)=>{l();"use strict";var{base58btc:D7e}=(li(),Fs),{base32:B7e}=(gn(),of),N7e=(Nn(),i0),{Multiaddr:JM}=rt(),M7e=zl(),{CID:X9}=(Te(),af),{URL:L7e}=F6(),{toString:q7e}=(tt(),pr),Q9=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,w0=/^\/(ip[fn]s)\/([^/?#]+)/,eL=1,tL=2,my=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,rL=1,iL=2,j7e=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function U7e(t){let e=Z9(t);try{N7e.decode(D7e.decode("z"+e))}catch{return!1}return!0}function F7e(t){try{B7e.decode(t)}catch{return!1}return!0}function by(t){try{return typeof t=="string"?Boolean(X9.parse(t)):t instanceof Uint8Array?Boolean(X9.decode(t)):Boolean(X9.asCID(t))}catch(e){return!1}}function nL(t){if(!t)return!1;if(JM.isMultiaddr(t))return!0;try{return new JM(t),!0}catch(e){return!1}}function K7e(t){return nL(t)&&M7e.P2P.matches(t)}function vy(t,e,r=eL,i=tL){let n=Z9(t);if(!n)return!1;let s=n.match(e);if(!s||s[r]!=="ipfs")return!1;let o=s[i];return o&&e===my&&(o=o.toLowerCase()),by(o)}function K6(t,e,r=eL,i=tL){let n=Z9(t);if(!n)return!1;let s=n.match(e);if(!s||s[r]!=="ipns")return!1;let o=s[i];if(o&&e===my){if(o=o.toLowerCase(),by(o))return!0;try{!o.includes(".")&&o.includes("-")&&(o=o.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));let{hostname:a}=new L7e(`http://${o}`);return j7e.test(a)}catch(a){return!1}}return!0}function sL(t){return typeof t=="string"}function Z9(t){return t instanceof Uint8Array?q7e(t,"base58btc"):sL(t)?t:!1}var J9=t=>vy(t,my,iL,rL),e_=t=>K6(t,my,iL,rL),oL=t=>J9(t)||e_(t),aL=t=>vy(t,Q9)||J9(t),cL=t=>K6(t,Q9)||e_(t),uL=t=>aL(t)||cL(t)||oL(t),fL=t=>vy(t,w0)||K6(t,w0);lL.exports={multihash:U7e,multiaddr:nL,peerMultiaddr:K7e,cid:by,base32cid:t=>F7e(t)&&by(t),ipfsSubdomain:J9,ipnsSubdomain:e_,subdomain:oL,subdomainGatewayPattern:my,ipfsUrl:aL,ipnsUrl:cL,url:uL,pathGatewayPattern:Q9,ipfsPath:t=>vy(t,w0),ipnsPath:t=>K6(t,w0),path:fL,pathPattern:w0,urlOrPath:t=>uL(t)||fL(t),cidPath:t=>sL(t)&&!by(t)&&vy(`/ipfs/${t}`,w0)}});var dL,hL=bt(()=>{l();dL="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var r_={};zt(r_,{customAlphabet:()=>V7e,customRandom:()=>yL,nanoid:()=>t_,random:()=>pL,urlAlphabet:()=>dL});var pL,yL,V7e,t_,V6=bt(()=>{l();hL();pL=t=>crypto.getRandomValues(new Uint8Array(t)),yL=(t,e,r)=>{let i=(2<<Math.log(t.length-1)/Math.LN2)-1,n=-~(1.6*i*e/t.length);return()=>{let s="";for(;;){let o=r(n),a=n;for(;a--;)if(s+=t[o[a]&i]||"",s.length===e)return s}}},V7e=(t,e)=>yL(t,e,pL),t_=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let i=r[t]&63;i<36?e+=i.toString(36):i<62?e+=(i-26).toString(36).toUpperCase():i<63?e+="_":e+="-"}return e}});var wy={};zt(wy,{Key:()=>qe});function z7e(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function H7e(t){let e=t.split(":");return e[e.length-1]}function $7e(t){return[].concat(...t)}var eu,gL,z6,qe,Br=bt(()=>{l();V6();tt();dt();eu="/",gL=new TextEncoder().encode(eu),z6=gL[0],qe=class{constructor(e,r){if(typeof e=="string")this._buf=Xe(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==z6)throw new Error("Invalid key")}toString(e="utf8"){return $e(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new qe(e.join(eu))}static random(){return new qe(t_().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new qe(e):e.uint8Array?new qe(e.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=gL),this._buf[0]!==z6){let e=new Uint8Array(this._buf.byteLength+1);e.fill(z6,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===z6;)this._buf=this._buf.subarray(0,-1)}less(e){let r=this.list(),i=e.list();for(let n=0;n<r.length;n++){if(i.length<n+1)return!1;let s=r[n],o=i[n];if(s<o)return!0;if(s>o)return!1}return r.length<i.length}reverse(){return qe.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(eu).slice(1)}type(){return z7e(this.baseNamespace())}name(){return H7e(this.baseNamespace())}instance(e){return new qe(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(eu)||(e+=eu),e+=this.type(),new qe(e)}parent(){let e=this.list();return e.length===1?new qe(eu):new qe(e.slice(0,-1).join(eu))}child(e){return this.toString()===eu?e:e.toString()===eu?this:new qe(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return qe.withNamespaces([...this.namespaces(),...$7e(e.map(r=>r.namespaces()))])}}});var E0=v((Wnt,H6)=>{l();"use strict";var{AbortController:mL,AbortSignal:G7e}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;H6.exports=mL;H6.exports.AbortSignal=G7e;H6.exports.default=mL});var vL=v((Ynt,bL)=>{l();"use strict";bL.exports=function(){return Date.now()}});var _L=v((Xnt,wL)=>{l();"use strict";var i_=vL();function n_(t,e,r){var i=this;this._started=i_(),this._rescheduled=0,this._scheduled=e,this._args=r,this._timer=setTimeout(n,e);function n(){i._rescheduled>0?(i._scheduled=i._rescheduled-(i_()-i._started),i._timer=setTimeout(n,i._scheduled),i._rescheduled=0):t.apply(null,i._args)}}n_.prototype.reschedule=function(t){var e=i_();return e+t-(this._started+this._scheduled)<0?!1:(this._started=e,this._rescheduled=t,!0)};n_.prototype.clear=function(){clearTimeout(this._timer)};function W7e(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new n_(arguments[0],arguments[1],t)}wL.exports=W7e});var $6=v((Qnt,s_)=>{l();"use strict";var{AbortController:Y7e}=typeof self!="undefined"?self:typeof window!="undefined"?window:E0(),EL=_L(),_y=class extends Y7e{constructor(e){super();this._ms=e,this._timer=EL(()=>this.abort(),e),Object.setPrototypeOf(this,_y.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=EL(()=>this.abort(),this._ms)}};s_.exports=_y;s_.exports.TimeoutController=_y});var _n=v((Znt,o_)=>{l();"use strict";var G6;globalThis.AbortController&&globalThis.AbortSignal?G6=globalThis:G6=E0();o_.exports.AbortSignal=G6.AbortSignal;o_.exports.AbortController=G6.AbortController});var yf=v((Jnt,a_)=>{l();var{AbortController:X7e}=_n();function SL(t){let e=new X7e;function r(){e.abort();for(let i of t)!i||!i.removeEventListener||i.removeEventListener("abort",r)}for(let i of t)if(!(!i||!i.addEventListener)){if(i.aborted){r();break}i.addEventListener("abort",r)}return e.signal}a_.exports=SL;a_.exports.anySignal=SL});var Hl=v((sst,RL)=>{l();"use strict";function TL(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Z7e(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return TL(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),TL(new n,r)}}RL.exports=Z7e});var x0=v((_st,NL)=>{l();NL.exports=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,r=Object.create(null),i=Object.create(null);function n(s,o){r[s]=o,e++,e>=t&&(e=0,i=r,r=Object.create(null))}return{has:function(s){return r[s]!==void 0||i[s]!==void 0},remove:function(s){r[s]!==void 0&&(r[s]=void 0),i[s]!==void 0&&(i[s]=void 0)},get:function(s){var o=r[s];if(o!==void 0)return o;if((o=i[s])!==void 0)return n(s,o),o},set:function(s,o){r[s]!==void 0?r[s]=o:n(s,o)},clear:function(){r=Object.create(null),i=Object.create(null)}}}});var qL=v((Sst,l_)=>{l();"use strict";var ewe=Object.prototype.hasOwnProperty,jn="~";function xy(){}Object.create&&(xy.prototype=Object.create(null),new xy().__proto__||(jn=!1));function twe(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function LL(t,e,r,i,n){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new twe(r,i||t,n),o=jn?jn+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function X6(t,e){--t._eventsCount==0?t._events=new xy:delete t._events[e]}function En(){this._events=new xy,this._eventsCount=0}En.prototype.eventNames=function(){var e=[],r,i;if(this._eventsCount===0)return e;for(i in r=this._events)ewe.call(r,i)&&e.push(jn?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};En.prototype.listeners=function(e){var r=jn?jn+e:e,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o};En.prototype.listenerCount=function(e){var r=jn?jn+e:e,i=this._events[r];return i?i.fn?1:i.length:0};En.prototype.emit=function(e,r,i,n,s,o){var a=jn?jn+e:e;if(!this._events[a])return!1;var c=this._events[a],u=arguments.length,f,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,i),!0;case 4:return c.fn.call(c.context,r,i,n),!0;case 5:return c.fn.call(c.context,r,i,n,s),!0;case 6:return c.fn.call(c.context,r,i,n,s,o),!0}for(d=1,f=new Array(u-1);d<u;d++)f[d-1]=arguments[d];c.fn.apply(c.context,f)}else{var h=c.length,p;for(d=0;d<h;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,i);break;case 4:c[d].fn.call(c[d].context,r,i,n);break;default:if(!f)for(p=1,f=new Array(u-1);p<u;p++)f[p-1]=arguments[p];c[d].fn.apply(c[d].context,f)}}return!0};En.prototype.on=function(e,r,i){return LL(this,e,r,i,!1)};En.prototype.once=function(e,r,i){return LL(this,e,r,i,!0)};En.prototype.removeListener=function(e,r,i,n){var s=jn?jn+e:e;if(!this._events[s])return this;if(!r)return X6(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!n||o.once)&&(!i||o.context===i)&&X6(this,s);else{for(var a=0,c=[],u=o.length;a<u;a++)(o[a].fn!==r||n&&!o[a].once||i&&o[a].context!==i)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:X6(this,s)}return this};En.prototype.removeAllListeners=function(e){var r;return e?(r=jn?jn+e:e,this._events[r]&&X6(this,r)):(this._events=new xy,this._eventsCount=0),this};En.prototype.off=En.prototype.removeListener;En.prototype.addListener=En.prototype.on;En.prefixed=jn;En.EventEmitter=En;typeof l_!="undefined"&&(l_.exports=En)});var UL=v((xst,jL)=>{l();"use strict";jL.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(i=>{i(e())}).then(()=>r),r=>new Promise(i=>{i(e())}).then(()=>{throw r})))});var KL=v((Ast,Q6)=>{l();"use strict";var rwe=UL(),d_=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},FL=(t,e,r)=>new Promise((i,n)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){i(t);return}let s=setTimeout(()=>{if(typeof r=="function"){try{i(r())}catch(c){n(c)}return}let o=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,a=r instanceof Error?r:new d_(o);typeof t.cancel=="function"&&t.cancel(),n(a)},e);rwe(t.then(i,n),()=>{clearTimeout(s)})});Q6.exports=FL;Q6.exports.default=FL;Q6.exports.TimeoutError=d_});var VL=v(h_=>{l();"use strict";Object.defineProperty(h_,"__esModule",{value:!0});function iwe(t,e,r){let i=0,n=t.length;for(;n>0;){let s=n/2|0,o=i+s;r(t[o],e)<=0?(i=++o,n-=s+1):n=s}return i}h_.default=iwe});var HL=v(p_=>{l();"use strict";Object.defineProperty(p_,"__esModule",{value:!0});var nwe=VL(),zL=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let i={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(i);return}let n=nwe.default(this._queue,i,(s,o)=>o.priority-s.priority);this._queue.splice(n,0,i)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};p_.default=zL});var Fa=v(y_=>{l();"use strict";Object.defineProperty(y_,"__esModule",{value:!0});var swe=qL(),$L=KL(),owe=HL(),Z6=()=>{},awe=new $L.TimeoutError,GL=class extends swe{constructor(e){var r,i,n,s;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=Z6,this._resolveIdle=Z6,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:owe.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(i=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Z6,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Z6,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((i,n)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let o=this._timeout===void 0&&r.timeout===void 0?e():$L.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&n(awe)});i(await o)}catch(o){n(o)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async i=>this.add(i,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};y_.default=GL});var g_=v(J6=>{l();"use strict";var WL=class extends Error{constructor(e="Request timed out"){super(e);this.name="TimeoutError"}};J6.TimeoutError=WL;var YL=class extends Error{constructor(e="The operation was aborted."){super(e);this.name="AbortError"}};J6.AbortError=YL;var XL=class extends Error{constructor(e){super(e.statusText);this.name="HTTPError",this.response=e}};J6.HTTPError=XL});var QL=v(()=>{l()});var Ay=v((A0,ZL)=>{l();"use strict";var cwe=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof ru!="undefined")return ru;throw new Error("unable to locate global object")},ru=cwe();ZL.exports=A0=ru.fetch;ru.fetch&&(A0.default=ru.fetch.bind(ru));A0.Headers=ru.Headers;A0.Request=ru.Request;A0.Response=ru.Response});var b_=v((kst,m_)=>{l();"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?m_.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:m_.exports={default:Ay().default,Headers:Ay().Headers,Request:Ay().Request,Response:Ay().Response}});var JL=v((Dst,v_)=>{l();"use strict";var{isElectronMain:uwe}=z2();uwe?v_.exports=QL():v_.exports=b_()});var iq=v((Bst,rq)=>{l();"use strict";var{TimeoutError:fwe,AbortError:lwe}=g_(),{Response:eq,Request:dwe,Headers:w_,default:hwe}=JL(),pwe=(t,e={})=>{let r=new XMLHttpRequest;r.open(e.method||"GET",t.toString(),!0);let{timeout:i,headers:n}=e;if(i&&i>0&&i<1/0&&(r.timeout=i),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),n)for(let[s,o]of new w_(n))r.setRequestHeader(s,o);return e.signal&&(e.signal.onabort=()=>r.abort()),e.onUploadProgress&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((s,o)=>{let a=c=>{switch(c.type){case"error":{s(eq.error());break}case"load":{s(new tq(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:mwe(r.getAllResponseHeaders())}));break}case"timeout":{o(new fwe);break}case"abort":{o(new lwe);break}default:break}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(e.body)})},ywe=hwe,gwe=(t,e={})=>e.onUploadProgress!=null?pwe(t,e):ywe(t,e),mwe=t=>{let e=new w_;for(let r of t.trim().split(/[\r\n]+/)){let i=r.indexOf(": ");i>0&&e.set(r.slice(0,i),r.slice(i+1))}return e},tq=class extends eq{constructor(e,r,i){super(r,i);Object.defineProperty(this,"url",{value:e})}};rq.exports={fetch:gwe,Request:dwe,Headers:w_}});var Iy=v((Nst,uq)=>{l();"use strict";var{fetch:bwe,Request:vwe,Headers:wwe}=iq(),{TimeoutError:__,HTTPError:nq}=g_(),sq=Ml().bind({ignoreUndefined:!0}),{URL:oq,URLSearchParams:aq}=F6(),{AbortController:_we}=_n(),Ewe=yf(),Swe=(t,e,r)=>{if(e===void 0)return t;let i=Date.now(),n=()=>Date.now()-i>=e;return new Promise((s,o)=>{let a=setTimeout(()=>{n()&&(o(new __),r.abort())},e),c=u=>d=>{if(clearTimeout(a),n()){o(new __);return}u(d)};t.then(c(s),c(o))})},xwe={throwHttpErrors:!0,credentials:"same-origin"},Un=class{constructor(e={}){this.opts=sq(xwe,e)}async fetch(e,r={}){let i=sq(this.opts,r),n=new wwe(i.headers);if(typeof e!="string"&&!(e instanceof oq||e instanceof vwe))throw new TypeError("`resource` must be a string, URL, or Request");let s=new oq(e.toString(),i.base),{searchParams:o,transformSearchParams:a,json:c}=i;o&&(typeof a=="function"?s.search=a(new aq(i.searchParams)):s.search=new aq(i.searchParams)),c&&(i.body=JSON.stringify(i.json),n.set("content-type","application/json"));let u=new _we,f=Ewe([u.signal,i.signal]),d=await Swe(bwe(s.toString(),{...i,signal:f,timeout:void 0,headers:n}),i.timeout,u);if(!d.ok&&i.throwHttpErrors)throw i.handleError&&await i.handleError(d),new nq(d);return d.iterator=function(){return cq(d.body)},d.ndjson=async function*(){for await(let h of Awe(d.iterator()))r.transform?yield r.transform(h):yield h},d}post(e,r={}){return this.fetch(e,{...r,method:"POST"})}get(e,r={}){return this.fetch(e,{...r,method:"GET"})}put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}},Awe=async function*(t){let e=new TextDecoder,r="";for await(let i of t){r+=e.decode(i,{stream:!0});let n=r.split(/\r?\n/);for(let s=0;s<n.length-1;s++){let o=n[s].trim();o.length>0&&(yield JSON.parse(o))}r=n[n.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},cq=t=>{if(Rwe(t)){let e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(Twe(t)){let e=t.getReader();return async function*(){try{for(;;){let{done:r,value:i}=await e.read();if(r)return;i&&(yield i)}}finally{e.releaseLock()}}()}if(Iwe(t))return t;throw new TypeError("Body can't be converted to AsyncIterable")},Iwe=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",Twe=t=>t&&typeof t.getReader=="function",Rwe=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");Un.HTTPError=nq;Un.TimeoutError=__;Un.streamToAsyncIterator=cq;Un.post=(t,e)=>new Un(e).post(t,e);Un.get=(t,e)=>new Un(e).get(t,e);Un.put=(t,e)=>new Un(e).put(t,e);Un.delete=(t,e)=>new Un(e).delete(t,e);Un.options=(t,e)=>new Un(e).options(t,e);uq.exports=Un});var r4=v((Kst,gq)=>{l();"use strict";var $l=Vi(),t4=$l.Reader,yq=$l.Writer,Sn=$l.util,Ws=$l.roots["libp2p-crypto-keys"]||($l.roots["libp2p-crypto-keys"]={});Ws.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();Ws.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Sn.newBuffer([]),t.encode=function(r,i){return i||(i=yq.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof t4||(r=t4.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ws.PublicKey;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Sn.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Sn.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Ws.PublicKey)return r;var i=new Ws.PublicKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Sn.base64.decode(r.Data,i.Data=Sn.newBuffer(Sn.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Sn.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Ws.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Sn.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,$l.util.toJSONOptions)},t}();Ws.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Sn.newBuffer([]),t.encode=function(r,i){return i||(i=yq.create()),i.uint32(8).int32(r.Type),i.uint32(18).bytes(r.Data),i},t.decode=function(r,i){r instanceof t4||(r=t4.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ws.PrivateKey;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Sn.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Sn.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Ws.PrivateKey)return r;var i=new Ws.PrivateKey;switch(r.Type){case"RSA":case 0:i.Type=0;break;case"Ed25519":case 1:i.Type=1;break;case"Secp256k1":case 2:i.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Sn.base64.decode(r.Data,i.Data=Sn.newBuffer(Sn.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.Type=i.enums===String?"RSA":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Sn.newBuffer(n.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?Ws.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Sn.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,$l.util.toJSONOptions)},t}();gq.exports=Ws});var yt=v((Vst,mq)=>{l();mq.exports={options:{usePureJavaScript:!1}}});var wq=v((zst,vq)=>{l();var S_={};vq.exports=S_;var bq={};S_.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var i="";if(!(t instanceof Uint8Array))i=Dwe(t,e);else{var n=0,s=e.length,o=e.charAt(0),a=[0];for(n=0;n<t.length;++n){for(var c=0,u=t[n];c<a.length;++c)u+=a[c]<<8,a[c]=u%s,u=u/s|0;for(;u>0;)a.push(u%s),u=u/s|0}for(n=0;t[n]===0&&n<t.length-1;++n)i+=o;for(n=a.length-1;n>=0;--n)i+=e[a[n]]}if(r){var f=new RegExp(".{1,"+r+"}","g");i=i.match(f).join(`\r
`)}return i};S_.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=bq[e];if(!r){r=bq[e]=[];for(var i=0;i<e.length;++i)r[e.charCodeAt(i)]=i}t=t.replace(/\s/g,"");for(var n=e.length,s=e.charAt(0),o=[0],i=0;i<t.length;i++){var a=r[t.charCodeAt(i)];if(a===void 0)return;for(var c=0,u=a;c<o.length;++c)u+=o[c]*n,o[c]=u&255,u>>=8;for(;u>0;)o.push(u&255),u>>=8}for(var f=0;t[f]===s&&f<t.length-1;++f)o.push(0);return typeof Buffer!="undefined"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function Dwe(t,e){var r=0,i=e.length,n=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%i,a=a/i|0;for(;a>0;)s.push(a%i),a=a/i|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=n;for(r=s.length-1;r>=0;--r)c+=e[s[r]];return c}});var or=v((Hst,xq)=>{l();var _q=yt(),Eq=wq(),se=xq.exports=_q.util=_q.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){se.nextTick=process.nextTick,typeof setImmediate=="function"?se.setImmediate=setImmediate:se.setImmediate=se.nextTick;return}if(typeof setImmediate=="function"){se.setImmediate=function(){return setImmediate.apply(void 0,arguments)},se.nextTick=function(a){return setImmediate(a)};return}if(se.setImmediate=function(a){setTimeout(a,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var o=a,t="forge.setImmediate",e=[];se.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),i=!0,n=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(n,{attributes:!0});var s=se.setImmediate;se.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(e.push(c),e.length===1&&n.setAttribute("a",i=!i))}}se.nextTick=se.setImmediate})();se.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;se.globalScope=function(){return se.isNodejs?globalThis:typeof self=="undefined"?window:self}();se.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};se.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};se.isArrayBufferView=function(t){return t&&se.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Ty(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}se.ByteBuffer=x_;function x_(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(se.isArrayBuffer(t)||se.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(i){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof x_||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}se.ByteStringBuffer=x_;var Bwe=4096;se.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Bwe&&(this.data.substr(0,1),this._constructedStringLength=0)};se.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};se.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};se.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};se.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};se.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};se.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(se.encodeUtf8(t))};se.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};se.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};se.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};se.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};se.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};se.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};se.ByteStringBuffer.prototype.putInt=function(t,e){Ty(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};se.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};se.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};se.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};se.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};se.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};se.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};se.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};se.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};se.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};se.ByteStringBuffer.prototype.getInt=function(t){Ty(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};se.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};se.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};se.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};se.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};se.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};se.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};se.ByteStringBuffer.prototype.copy=function(){var t=se.createBuffer(this.data);return t.read=this.read,t};se.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};se.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};se.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};se.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};se.ByteStringBuffer.prototype.toString=function(){return se.decodeUtf8(this.bytes())};function Nwe(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=se.isArrayBuffer(t),i=se.isArrayBufferView(t);if(r||i){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}se.DataBuffer=Nwe;se.DataBuffer.prototype.length=function(){return this.write-this.read};se.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};se.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this};se.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};se.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};se.DataBuffer.prototype.putBytes=function(t,e){if(se.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=r.byteLength-r.byteOffset;this.accommodate(i);var n=new Uint8Array(this.data.buffer,this.write);return n.set(r),this.write+=i,this}if(se.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var n=new Uint8Array(this.data.buffer);return n.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof se.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&se.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var n=new Uint8Array(t.data.byteLength,this.write);return n.set(r),this.write+=r.byteLength,this}if(t instanceof se.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=se.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=se.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=se.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=se.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=se.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};se.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};se.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};se.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};se.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};se.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};se.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};se.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};se.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};se.DataBuffer.prototype.putInt=function(t,e){Ty(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};se.DataBuffer.prototype.putSignedInt=function(t,e){return Ty(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};se.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};se.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};se.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};se.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};se.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};se.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};se.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};se.DataBuffer.prototype.getInt=function(t){Ty(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};se.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};se.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};se.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};se.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};se.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};se.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};se.DataBuffer.prototype.copy=function(){return new se.DataBuffer(this)};se.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};se.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};se.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};se.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};se.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return se.binary.raw.encode(e);if(t==="hex")return se.binary.hex.encode(e);if(t==="base64")return se.binary.base64.encode(e);if(t==="utf8")return se.text.utf8.decode(e);if(t==="utf16")return se.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};se.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=se.encodeUtf8(t)),new se.ByteBuffer(t)};se.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};se.xorBytes=function(t,e,r){for(var i="",n="",s="",o=0,a=0;r>0;--r,++o)n=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(i+=s,s="",a=0),s+=String.fromCharCode(n),++a;return i+=s,i};se.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};se.bytesToHex=function(t){return se.createBuffer(t).toHex()};se.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var wf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Sq="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";se.encode64=function(t,e){for(var r="",i="",n,s,o,a=0;a<t.length;)n=t.charCodeAt(a++),s=t.charCodeAt(a++),o=t.charCodeAt(a++),r+=wf.charAt(n>>2),r+=wf.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=wf.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":wf.charAt(o&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};se.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,i,n,s,o=0;o<t.length;)r=_f[t.charCodeAt(o++)-43],i=_f[t.charCodeAt(o++)-43],n=_f[t.charCodeAt(o++)-43],s=_f[t.charCodeAt(o++)-43],e+=String.fromCharCode(r<<2|i>>4),n!==64&&(e+=String.fromCharCode((i&15)<<4|n>>2),s!==64&&(e+=String.fromCharCode((n&3)<<6|s)));return e};se.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};se.decodeUtf8=function(t){return decodeURIComponent(escape(t))};se.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Eq.encode,decode:Eq.decode}};se.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};se.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};se.binary.hex.encode=se.bytesToHex;se.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var n=0,s=r;for(t.length&1&&(n=1,i[s++]=parseInt(t[0],16));n<t.length;n+=2)i[s++]=parseInt(t.substr(n,2),16);return e?s-r:i};se.binary.base64.encode=function(t,e){for(var r="",i="",n,s,o,a=0;a<t.byteLength;)n=t[a++],s=t[a++],o=t[a++],r+=wf.charAt(n>>2),r+=wf.charAt((n&3)<<4|s>>4),isNaN(s)?r+="==":(r+=wf.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":wf.charAt(o&63)),e&&r.length>e&&(i+=r.substr(0,e)+`\r
`,r=r.substr(e));return i+=r,i};se.binary.base64.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var n,s,o,a,c=0,u=r;c<t.length;)n=_f[t.charCodeAt(c++)-43],s=_f[t.charCodeAt(c++)-43],o=_f[t.charCodeAt(c++)-43],a=_f[t.charCodeAt(c++)-43],i[u++]=n<<2|s>>4,o!==64&&(i[u++]=(s&15)<<4|o>>2,a!==64&&(i[u++]=(o&3)<<6|a));return e?u-r:i.subarray(0,u)};se.binary.base58.encode=function(t,e){return se.binary.baseN.encode(t,Sq,e)};se.binary.base58.decode=function(t,e){return se.binary.baseN.decode(t,Sq,e)};se.text={utf8:{},utf16:{}};se.text.utf8.encode=function(t,e,r){t=se.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length)),r=r||0;for(var n=r,s=0;s<t.length;++s)i[n++]=t.charCodeAt(s);return e?n-r:i};se.text.utf8.decode=function(t){return se.decodeUtf8(String.fromCharCode.apply(null,t))};se.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length*2));var n=new Uint16Array(i.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)n[o++]=t.charCodeAt(a),s+=2;return e?s-r:i};se.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};se.deflate=function(t,e,r){if(e=se.decode64(t.deflate(se.encode64(e)).rval),r){var i=2,n=e.charCodeAt(1);n&32&&(i=6),e=e.substring(i,e.length-4)}return e};se.inflate=function(t,e,r){var i=t.inflate(se.encode64(e)).rval;return i===null?null:se.decode64(i)};var A_=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(r===null?i=t.removeItem(e):(r=se.encode64(JSON.stringify(r)),i=t.setItem(e,r)),typeof i!="undefined"&&i.rval!==!0){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},I_=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(se.decode64(r))),r},Mwe=function(t,e,r,i){var n=I_(t,e);n===null&&(n={}),n[r]=i,A_(t,e,n)},Lwe=function(t,e,r){var i=I_(t,e);return i!==null&&(i=r in i?i[r]:null),i},qwe=function(t,e,r){var i=I_(t,e);if(i!==null&&r in i){delete i[r];var n=!0;for(var s in i){n=!1;break}n&&(i=null),A_(t,e,i)}},jwe=function(t,e){A_(t,e,null)},i4=function(t,e,r){var i=null;typeof r=="undefined"&&(r=["web","flash"]);var n,s=!1,o=null;for(var a in r){n=r[a];try{if(n==="flash"||n==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");i=t.apply(this,e),s=n==="flash"}(n==="web"||n==="both")&&(e[0]=localStorage,i=t.apply(this,e),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return i};se.setItem=function(t,e,r,i,n){i4(Mwe,arguments,n)};se.getItem=function(t,e,r,i){return i4(Lwe,arguments,i)};se.removeItem=function(t,e,r,i){i4(qwe,arguments,i)};se.clearItems=function(t,e,r){i4(jwe,arguments,r)};se.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=r===null?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?(i.port!==80&&i.scheme==="http"||i.port!==443&&i.scheme==="https")&&(i.fullHost+=":"+i.port):i.scheme==="http"?i.port=80:i.scheme==="https"&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var n4=null;se.getQueryVariables=function(t){var e=function(i){for(var n={},s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("="),c,u;a>0?(c=s[o].substring(0,a),u=s[o].substring(a+1)):(c=s[o],u=null),c in n||(n[c]=[]),!(c in Object.prototype)&&u!==null&&n[c].push(unescape(u))}return n},r;return typeof t=="undefined"?(n4===null&&(typeof window!="undefined"&&window.location&&window.location.search?n4=e(window.location.search.substring(1)):n4={}),r=n4):r=e(t),r};se.parseFragment=function(t){var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var n=e.split("/");n.length>0&&n[0]===""&&n.shift();var s=r===""?{}:se.getQueryVariables(r);return{pathString:e,queryString:r,path:n,query:s}};se.makeRequest=function(t){var e=se.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(i){return typeof i=="undefined"?e.path:e.path[i]},getQuery:function(i,n){var s;return typeof i=="undefined"?s=e.query:(s=e.query[i],s&&typeof n!="undefined"&&(s=s[n])),s},getQueryLast:function(i,n){var s,o=r.getQuery(i);return o?s=o[o.length-1]:s=n,s}};return r};se.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")};se.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};se.format=function(t){for(var e=/%./g,r,i,n=0,s=[],o=0;r=e.exec(t);){i=t.substring(o,e.lastIndex-2),i.length>0&&s.push(i),o=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":n<arguments.length?s.push(arguments[n+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")};se.formatNumber=function(t,e,r,i){var n=t,s=isNaN(e=Math.abs(e))?2:e,o=r===void 0?",":r,a=i===void 0?".":i,c=n<0?"-":"",u=parseInt(n=Math.abs(+n||0).toFixed(s),10)+"",f=u.length>3?u.length%3:0;return c+(f?u.substr(0,f)+a:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(n-u).toFixed(s).slice(2):"")};se.formatSize=function(t){return t>=1073741824?t=se.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=se.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=se.formatNumber(t/1024,0)+" KiB":t=se.formatNumber(t,0)+" bytes",t};se.bytesFromIP=function(t){return t.indexOf(".")!==-1?se.bytesFromIPv4(t):t.indexOf(":")!==-1?se.bytesFromIPv6(t):null};se.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=se.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()};se.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(o){return o.length===0&&++e,!0});for(var r=(8-t.length+e)*2,i=se.createBuffer(),n=0;n<8;++n){if(!t[n]||t[n].length===0){i.fillWithByte(0,r),r=0;continue}var s=se.hexToBytes(t[n]);s.length<2&&i.putByte(0),i.putBytes(s)}return i.getBytes()};se.bytesToIP=function(t){return t.length===4?se.bytesToIPv4(t):t.length===16?se.bytesToIPv6(t):null};se.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};se.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var s=se.bytesToHex(t[n]+t[n+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=e.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[i].end-r[i].start&&(i=r.length-1))}e.push(s)}if(r.length>0){var c=r[i];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};se.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in se&&!t.update)return e(null,se.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return se.cores=navigator.hardwareConcurrency,e(null,se.cores);if(typeof Worker=="undefined")return se.cores=1,e(null,se.cores);if(typeof Blob=="undefined")return se.cores=2,e(null,se.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));i([],5,16);function i(o,a,c){if(a===0){var u=Math.floor(o.reduce(function(f,d){return f+d},0)/o.length);return se.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,se.cores)}n(c,function(f,d){o.push(s(c,d)),i(o,a-1,c)})}function n(o,a){for(var c=[],u=[],f=0;f<o;++f){var d=new Worker(r);d.addEventListener("message",function(h){if(u.push(h.data),u.length===o){for(var p=0;p<o;++p)c[p].terminate();a(null,u)}}),c.push(d)}for(var f=0;f<o;++f)c[f].postMessage(f)}function s(o,a){for(var c=[],u=0;u<o;++u)for(var f=a[u],d=c[u]=[],h=0;h<o;++h)if(u!==h){var p=a[h];(f.st>p.st&&f.st<p.et||p.st>f.st&&p.st<f.et)&&d.push(h)}return c.reduce(function(y,m){return Math.max(y,m.length)},0)}}});var I0=v(($st,Aq)=>{l();var Ry=yt();Ry.pki=Ry.pki||{};var T_=Aq.exports=Ry.pki.oids=Ry.oids=Ry.oids||{};function Ie(t,e){T_[t]=e,T_[e]=t}function Qt(t,e){T_[t]=e}Ie("1.2.840.113549.1.1.1","rsaEncryption");Ie("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ie("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ie("1.2.840.113549.1.1.7","RSAES-OAEP");Ie("1.2.840.113549.1.1.8","mgf1");Ie("1.2.840.113549.1.1.9","pSpecified");Ie("1.2.840.113549.1.1.10","RSASSA-PSS");Ie("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ie("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ie("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ie("1.3.101.112","EdDSA25519");Ie("1.2.840.10040.4.3","dsa-with-sha1");Ie("1.3.14.3.2.7","desCBC");Ie("1.3.14.3.2.26","sha1");Ie("2.16.840.1.101.3.4.2.1","sha256");Ie("2.16.840.1.101.3.4.2.2","sha384");Ie("2.16.840.1.101.3.4.2.3","sha512");Ie("1.2.840.113549.2.5","md5");Ie("1.2.840.113549.1.7.1","data");Ie("1.2.840.113549.1.7.2","signedData");Ie("1.2.840.113549.1.7.3","envelopedData");Ie("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ie("1.2.840.113549.1.7.5","digestedData");Ie("1.2.840.113549.1.7.6","encryptedData");Ie("1.2.840.113549.1.9.1","emailAddress");Ie("1.2.840.113549.1.9.2","unstructuredName");Ie("1.2.840.113549.1.9.3","contentType");Ie("1.2.840.113549.1.9.4","messageDigest");Ie("1.2.840.113549.1.9.5","signingTime");Ie("1.2.840.113549.1.9.6","counterSignature");Ie("1.2.840.113549.1.9.7","challengePassword");Ie("1.2.840.113549.1.9.8","unstructuredAddress");Ie("1.2.840.113549.1.9.14","extensionRequest");Ie("1.2.840.113549.1.9.20","friendlyName");Ie("1.2.840.113549.1.9.21","localKeyId");Ie("1.2.840.113549.1.9.22.1","x509Certificate");Ie("1.2.840.113549.1.12.10.1.1","keyBag");Ie("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ie("1.2.840.113549.1.12.10.1.3","certBag");Ie("1.2.840.113549.1.12.10.1.4","crlBag");Ie("1.2.840.113549.1.12.10.1.5","secretBag");Ie("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ie("1.2.840.113549.1.5.13","pkcs5PBES2");Ie("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ie("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ie("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ie("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ie("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ie("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ie("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ie("1.2.840.113549.2.7","hmacWithSHA1");Ie("1.2.840.113549.2.8","hmacWithSHA224");Ie("1.2.840.113549.2.9","hmacWithSHA256");Ie("1.2.840.113549.2.10","hmacWithSHA384");Ie("1.2.840.113549.2.11","hmacWithSHA512");Ie("1.2.840.113549.3.7","des-EDE3-CBC");Ie("2.16.840.1.101.3.4.1.2","aes128-CBC");Ie("2.16.840.1.101.3.4.1.22","aes192-CBC");Ie("2.16.840.1.101.3.4.1.42","aes256-CBC");Ie("2.5.4.3","commonName");Ie("2.5.4.5","serialName");Ie("2.5.4.6","countryName");Ie("2.5.4.7","localityName");Ie("2.5.4.8","stateOrProvinceName");Ie("2.5.4.9","streetAddress");Ie("2.5.4.10","organizationName");Ie("2.5.4.11","organizationalUnitName");Ie("2.5.4.13","description");Ie("2.5.4.15","businessCategory");Ie("2.5.4.17","postalCode");Ie("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ie("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ie("2.16.840.1.113730.1.1","nsCertType");Ie("2.16.840.1.113730.1.13","nsComment");Qt("2.5.29.1","authorityKeyIdentifier");Qt("2.5.29.2","keyAttributes");Qt("2.5.29.3","certificatePolicies");Qt("2.5.29.4","keyUsageRestriction");Qt("2.5.29.5","policyMapping");Qt("2.5.29.6","subtreesConstraint");Qt("2.5.29.7","subjectAltName");Qt("2.5.29.8","issuerAltName");Qt("2.5.29.9","subjectDirectoryAttributes");Qt("2.5.29.10","basicConstraints");Qt("2.5.29.11","nameConstraints");Qt("2.5.29.12","policyConstraints");Qt("2.5.29.13","basicConstraints");Ie("2.5.29.14","subjectKeyIdentifier");Ie("2.5.29.15","keyUsage");Qt("2.5.29.16","privateKeyUsagePeriod");Ie("2.5.29.17","subjectAltName");Ie("2.5.29.18","issuerAltName");Ie("2.5.29.19","basicConstraints");Qt("2.5.29.20","cRLNumber");Qt("2.5.29.21","cRLReason");Qt("2.5.29.22","expirationDate");Qt("2.5.29.23","instructionCode");Qt("2.5.29.24","invalidityDate");Qt("2.5.29.25","cRLDistributionPoints");Qt("2.5.29.26","issuingDistributionPoint");Qt("2.5.29.27","deltaCRLIndicator");Qt("2.5.29.28","issuingDistributionPoint");Qt("2.5.29.29","certificateIssuer");Qt("2.5.29.30","nameConstraints");Ie("2.5.29.31","cRLDistributionPoints");Ie("2.5.29.32","certificatePolicies");Qt("2.5.29.33","policyMappings");Qt("2.5.29.34","policyConstraints");Ie("2.5.29.35","authorityKeyIdentifier");Qt("2.5.29.36","policyConstraints");Ie("2.5.29.37","extKeyUsage");Qt("2.5.29.46","freshestCRL");Qt("2.5.29.54","inhibitAnyPolicy");Ie("1.3.6.1.4.1.11129.2.4.2","timestampList");Ie("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ie("1.3.6.1.5.5.7.3.1","serverAuth");Ie("1.3.6.1.5.5.7.3.2","clientAuth");Ie("1.3.6.1.5.5.7.3.3","codeSigning");Ie("1.3.6.1.5.5.7.3.4","emailProtection");Ie("1.3.6.1.5.5.7.3.8","timeStamping")});var iu=v((Gst,Tq)=>{l();var Tr=yt();or();I0();var Me=Tq.exports=Tr.asn1=Tr.asn1||{};Me.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};Me.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};Me.create=function(t,e,r,i,n){if(Tr.util.isArray(i)){for(var s=[],o=0;o<i.length;++o)i[o]!==void 0&&s.push(i[o]);i=s}var a={tagClass:t,type:e,constructed:r,composed:r||Tr.util.isArray(i),value:i};return n&&"bitStringContents"in n&&(a.bitStringContents=n.bitStringContents,a.original=Me.copy(a)),a};Me.copy=function(t,e){var r;if(Tr.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(Me.copy(t[i],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:Me.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};Me.equals=function(t,e,r){if(Tr.util.isArray(t)){if(!Tr.util.isArray(e)||t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!Me.equals(t[i],e[i]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var n=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&Me.equals(t.value,e.value);return r&&r.includeBitStringContents&&(n=n&&t.bitStringContents===e.bitStringContents),n};Me.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,i=e&128;return i?r=t.getInt((e&127)<<3):r=e,r}};function Py(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}var Uwe=function(t,e){var r=t.getByte();if(e--,r!==128){var i,n=r&128;if(!n)i=r;else{var s=r&127;Py(t,e,s),i=t.getInt(s<<3)}if(i<0)throw new Error("Negative length: "+i);return i}};Me.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Tr.util.createBuffer(t)),s4(t,t.length(),0,e)};function s4(t,e,r,i){var n;Py(t,e,2);var s=t.getByte();e--;var o=s&192,a=s&31;n=t.length();var c=Uwe(t,e);if(e-=n-t.length(),c!==void 0&&c>e){if(i.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var f,d,h=(s&32)==32;if(h)if(f=[],c===void 0)for(;;){if(Py(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}n=t.length(),f.push(s4(t,e,r+1,i)),e-=n-t.length()}else for(;c>0;)n=t.length(),f.push(s4(t,c,r+1,i)),e-=n-t.length(),c-=n-t.length();if(f===void 0&&o===Me.Class.UNIVERSAL&&a===Me.Type.BITSTRING&&(d=t.bytes(c)),f===void 0&&i.decodeBitStrings&&o===Me.Class.UNIVERSAL&&a===Me.Type.BITSTRING&&c>1){var p=t.read,y=e,m=0;if(a===Me.Type.BITSTRING&&(Py(t,e,1),m=t.getByte(),e--),m===0)try{n=t.length();var w={verbose:i.verbose,strict:!0,decodeBitStrings:!0},b=s4(t,e,r+1,w),S=n-t.length();e-=S,a==Me.Type.BITSTRING&&S++;var I=b.tagClass;S===c&&(I===Me.Class.UNIVERSAL||I===Me.Class.CONTEXT_SPECIFIC)&&(f=[b])}catch(B){}f===void 0&&(t.read=p,e=y)}if(f===void 0){if(c===void 0){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===Me.Type.BMPSTRING)for(f="";c>0;c-=2)Py(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(c)}var j=d===void 0?null:{bitStringContents:d};return Me.create(o,a,h,f,j)}Me.toDer=function(t){var e=Tr.util.createBuffer(),r=t.tagClass|t.type,i=Tr.util.createBuffer(),n=!1;if("bitStringContents"in t&&(n=!0,t.original&&(n=Me.equals(t,t.original))),n)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&i.putBuffer(Me.toDer(t.value[s]))}else if(t.type===Me.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===Me.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(i.length()&127);else{var o=i.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);e.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)e.putByte(a.charCodeAt(s))}return e.putBuffer(i),e};Me.oidToDer=function(t){var e=t.split("."),r=Tr.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var i,n,s,o,a=2;a<e.length;++a){i=!0,n=[],s=parseInt(e[a],10);do o=s&127,s=s>>>7,i||(o|=128),n.push(o),i=!1;while(s>0);for(var c=n.length-1;c>=0;--c)r.putByte(n[c])}return r};Me.derToOid=function(t){var e;typeof t=="string"&&(t=Tr.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var i=0;t.length()>0;)r=t.getByte(),i=i<<7,r&128?i+=r&127:(e+="."+(i+r),i=0);return e};Me.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(s,o,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var f=parseInt(t.substr(u+1,2),10),d=parseInt(t.substr(u+4,2),10),h=f*60+d;h*=6e4,c==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};Me.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var d=t.length-5,h=t.charAt(d);if(h==="+"||h==="-"){var p=parseInt(t.substr(d+1,2),10),y=parseInt(t.substr(d+4,2),10);u=p*60+y,u*=6e4,h==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,i,n),e.setUTCHours(s,o,a,c),e.setTime(+e+u)):(e.setFullYear(r,i,n),e.setHours(s,o,a,c)),e};Me.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};Me.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z",e};Me.integerToDer=function(t){var e=Tr.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};Me.derToInteger=function(t){typeof t=="string"&&(t=Tr.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};Me.validate=function(t,e,r,i){var n=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(n=!0,e.value&&Tr.util.isArray(e.value))for(var s=0,o=0;n&&o<e.value.length;++o)n=e.value[o].optional||!1,t.value[s]&&(n=Me.validate(t.value[s],e.value[o],r,i),n?++s:e.value[o].optional&&(n=!0)),!n&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(n&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return n};var Iq=/[^\\u0000-\\u00ff]/;Me.prettyPrint=function(t,e,r){var i="";e=e||0,r=r||2,e>0&&(i+=`
`);for(var n="",s=0;s<e*r;++s)n+=" ";switch(i+=n+"Tag: ",t.tagClass){case Me.Class.UNIVERSAL:i+="Universal:";break;case Me.Class.APPLICATION:i+="Application:";break;case Me.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case Me.Class.PRIVATE:i+="Private:";break}if(t.tagClass===Me.Class.UNIVERSAL)switch(i+=t.type,t.type){case Me.Type.NONE:i+=" (None)";break;case Me.Type.BOOLEAN:i+=" (Boolean)";break;case Me.Type.INTEGER:i+=" (Integer)";break;case Me.Type.BITSTRING:i+=" (Bit string)";break;case Me.Type.OCTETSTRING:i+=" (Octet string)";break;case Me.Type.NULL:i+=" (Null)";break;case Me.Type.OID:i+=" (Object Identifier)";break;case Me.Type.ODESC:i+=" (Object Descriptor)";break;case Me.Type.EXTERNAL:i+=" (External or Instance of)";break;case Me.Type.REAL:i+=" (Real)";break;case Me.Type.ENUMERATED:i+=" (Enumerated)";break;case Me.Type.EMBEDDED:i+=" (Embedded PDV)";break;case Me.Type.UTF8:i+=" (UTF8)";break;case Me.Type.ROID:i+=" (Relative Object Identifier)";break;case Me.Type.SEQUENCE:i+=" (Sequence)";break;case Me.Type.SET:i+=" (Set)";break;case Me.Type.PRINTABLESTRING:i+=" (Printable String)";break;case Me.Type.IA5String:i+=" (IA5String (ASCII))";break;case Me.Type.UTCTIME:i+=" (UTC time)";break;case Me.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case Me.Type.BMPSTRING:i+=" (BMP String)";break}else i+=t.type;if(i+=`
`,i+=n+"Constructed: "+t.constructed+`
`,t.composed){for(var o=0,a="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(o+=1,a+=Me.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(a+=","));i+=n+"Sub values: "+o+a}else{if(i+=n+"Value: ",t.type===Me.Type.OID){var c=Me.derToOid(t.value);i+=c,Tr.pki&&Tr.pki.oids&&c in Tr.pki.oids&&(i+=" ("+Tr.pki.oids[c]+") ")}if(t.type===Me.Type.INTEGER)try{i+=Me.derToInteger(t.value)}catch(f){i+="0x"+Tr.util.bytesToHex(t.value)}else if(t.type===Me.Type.BITSTRING){if(t.value.length>1?i+="0x"+Tr.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?i+=" (1 unused bit shown)":u>1&&(i+=" ("+u+" unused bits shown)")}}else t.type===Me.Type.OCTETSTRING?(Iq.test(t.value)||(i+="("+t.value+") "),i+="0x"+Tr.util.bytesToHex(t.value)):t.type===Me.Type.UTF8?i+=Tr.util.decodeUtf8(t.value):t.type===Me.Type.PRINTABLESTRING||t.type===Me.Type.IA5String?i+=t.value:Iq.test(t.value)?i+="0x"+Tr.util.bytesToHex(t.value):t.value.length===0?i+="[null]":i+=t.value}return i}});var P_=v((Wst,Rq)=>{l();var $i=yt();or();Rq.exports=$i.cipher=$i.cipher||{};$i.cipher.algorithms=$i.cipher.algorithms||{};$i.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=$i.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new $i.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};$i.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=$i.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new $i.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};$i.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),$i.cipher.algorithms[t]=e};$i.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in $i.cipher.algorithms?$i.cipher.algorithms[t]:null};var R_=$i.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};R_.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=$i.util.createBuffer(),this.output=t.output||$i.util.createBuffer(),this.mode.start(e)};R_.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};R_.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var O_=v((Yst,Pq)=>{l();var Gi=yt();or();Gi.cipher=Gi.cipher||{};var Et=Pq.exports=Gi.cipher.modes=Gi.cipher.modes||{};Et.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Et.ecb.prototype.start=function(t){};Et.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};Et.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])};Et.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Et.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};Et.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Et.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=o4(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Et.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock};Et.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)};Et.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Et.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return i>this.blockSize<<2?!1:(t.truncate(i),!0)};Et.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Gi.util.createBuffer(),this._partialBytes=0};Et.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o4(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};Et.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};Et.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Gi.util.createBuffer(),this._partialBytes=0};Et.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o4(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];return}var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0)t.read-=this.blockSize;else for(var n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0};Et.ofb.prototype.decrypt=Et.ofb.prototype.encrypt;Et.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Gi.util.createBuffer(),this._partialBytes=0};Et.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=o4(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Et.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}a4(this._inBlock)};Et.ctr.prototype.decrypt=Et.ctr.prototype.encrypt;Et.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Gi.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Et.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Gi.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Gi.util.createBuffer(t.additionalData):r=Gi.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Gi.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=e.length();if(i===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(C_(i*8)))}this._inBlock=this._j0.slice(0),a4(this._inBlock),this._partialBytes=0,r=Gi.util.createBuffer(r),this._aDataLength=C_(r.length()*8);var n=r.length()%this.blockSize;for(n&&r.fillWithByte(0,this.blockSize-n),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Et.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(i===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-i)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(s<=0||r){if(r){var o=i%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),a4(this._inBlock)};Et.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),a4(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize};Et.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Gi.util.createBuffer();var i=this._aDataLength.concat(C_(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,i);var n=[];this.cipher.encrypt(this._j0,n);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^n[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Et.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){var s=t[n/32|0]&1<<31-n%32;s&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r};Et.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,i=3;i>0;--i)e[i]=t[i]>>>1|(t[i-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Et.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=r/8|0,n=t[i]>>>(7-r%8)*4&15,s=this._m[r][n];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};Et.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Et.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,s=new Array(n),o=0;o<n;++o){var a=[0,0,0,0],c=o/i|0,u=(i-1-o%i)*e;a[c]=1<<e-1<<u,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s};Et.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var s=i>>>1;s>0;)this.pow(n[2*s],n[s]=[]),s>>=1;for(s=2;s<i;){for(var o=1;o<s;++o){var a=n[s],c=n[o];n[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(n[0]=[0,0,0,0],s=i+1;s<r;++s){var u=n[s^i];n[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return n};function o4(t,e){if(typeof t=="string"&&(t=Gi.util.createBuffer(t)),Gi.util.isArray(t)&&t.length>4){var r=t;t=Gi.util.createBuffer();for(var i=0;i<r.length;++i)t.putByte(r[i])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Gi.util.isArray(t)){for(var n=[],s=e/4,i=0;i<s;++i)n.push(t.getInt32());t=n}return t}function a4(t){t[t.length-1]=t[t.length-1]+1&4294967295}function C_(t){return[t/4294967296|0,t&4294967295]}});var P0=v((Xst,Dq)=>{l();var yr=yt();P_();O_();or();Dq.exports=yr.aes=yr.aes||{};yr.aes.startEncrypting=function(t,e,r,i){var n=c4({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n};yr.aes.createEncryptionCipher=function(t,e){return c4({key:t,output:null,decrypt:!1,mode:e})};yr.aes.startDecrypting=function(t,e,r,i){var n=c4({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n};yr.aes.createDecryptionCipher=function(t,e){return c4({key:t,output:null,decrypt:!0,mode:e})};yr.aes.Algorithm=function(t,e){k_||Oq();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(i,n){return B_(r._w,i,n,!1)},decrypt:function(i,n){return B_(r._w,i,n,!0)}}}),r._init=!1};yr.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=yr.util.createBuffer(e);else if(yr.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=yr.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(!yr.util.isArray(e)){r=e,e=[];var n=r.length();if(n===16||n===24||n===32){n=n>>>2;for(var i=0;i<n;++i)e.push(r.getInt32())}}if(!yr.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=kq(e,t.decrypt&&!o),this._init=!0}};yr.aes._expandKey=function(t,e){return k_||Oq(),kq(t,e)};yr.aes._updateBlock=B_;T0("AES-ECB",yr.cipher.modes.ecb);T0("AES-CBC",yr.cipher.modes.cbc);T0("AES-CFB",yr.cipher.modes.cfb);T0("AES-OFB",yr.cipher.modes.ofb);T0("AES-CTR",yr.cipher.modes.ctr);T0("AES-GCM",yr.cipher.modes.gcm);function T0(t,e){var r=function(){return new yr.aes.Algorithm(t,e)};yr.cipher.registerAlgorithm(t,r)}var k_=!1,R0=4,Fn,D_,Cq,Gl,Go;function Oq(){k_=!0,Cq=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Fn=new Array(256),D_=new Array(256),Gl=new Array(4),Go=new Array(4);for(var e=0;e<4;++e)Gl[e]=new Array(256),Go[e]=new Array(256);for(var r=0,i=0,n,s,o,a,c,u,f,e=0;e<256;++e){a=i^i<<1^i<<2^i<<3^i<<4,a=a>>8^a&255^99,Fn[r]=a,D_[a]=r,c=t[a],n=t[r],s=t[n],o=t[s],u=c<<24^a<<16^a<<8^(a^c),f=(n^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^n^o);for(var d=0;d<4;++d)Gl[d][r]=u,Go[d][a]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=i=1:(r=n^t[t[t[n^o]]],i^=t[t[i]])}}function kq(t,e){for(var r=t.slice(0),i,n=1,s=r.length,o=s+6+1,a=R0*o,c=s;c<a;++c)i=r[c-1],c%s==0?(i=Fn[i>>>16&255]<<24^Fn[i>>>8&255]<<16^Fn[i&255]<<8^Fn[i>>>24]^Cq[n]<<24,n++):s>6&&c%s==4&&(i=Fn[i>>>24]<<24^Fn[i>>>16&255]<<16^Fn[i>>>8&255]<<8^Fn[i&255]),r[c]=r[c-s]^i;if(e){var u,f=Go[0],d=Go[1],h=Go[2],p=Go[3],y=r.slice(0);a=r.length;for(var c=0,m=a-R0;c<a;c+=R0,m-=R0)if(c===0||c===a-R0)y[c]=r[m],y[c+1]=r[m+3],y[c+2]=r[m+2],y[c+3]=r[m+1];else for(var w=0;w<R0;++w)u=r[m+w],y[c+(3&-w)]=f[Fn[u>>>24]]^d[Fn[u>>>16&255]]^h[Fn[u>>>8&255]]^p[Fn[u&255]];r=y}return r}function B_(t,e,r,i){var n=t.length/4-1,s,o,a,c,u;i?(s=Go[0],o=Go[1],a=Go[2],c=Go[3],u=D_):(s=Gl[0],o=Gl[1],a=Gl[2],c=Gl[3],u=Fn);var f,d,h,p,y,m,w;f=e[0]^t[0],d=e[i?3:1]^t[1],h=e[2]^t[2],p=e[i?1:3]^t[3];for(var b=3,S=1;S<n;++S)y=s[f>>>24]^o[d>>>16&255]^a[h>>>8&255]^c[p&255]^t[++b],m=s[d>>>24]^o[h>>>16&255]^a[p>>>8&255]^c[f&255]^t[++b],w=s[h>>>24]^o[p>>>16&255]^a[f>>>8&255]^c[d&255]^t[++b],p=s[p>>>24]^o[f>>>16&255]^a[d>>>8&255]^c[h&255]^t[++b],f=y,d=m,h=w;r[0]=u[f>>>24]<<24^u[d>>>16&255]<<16^u[h>>>8&255]<<8^u[p&255]^t[++b],r[i?3:1]=u[d>>>24]<<24^u[h>>>16&255]<<16^u[p>>>8&255]<<8^u[f&255]^t[++b],r[2]=u[h>>>24]<<24^u[p>>>16&255]<<16^u[f>>>8&255]<<8^u[d&255]^t[++b],r[i?1:3]=u[p>>>24]<<24^u[f>>>16&255]<<16^u[d>>>8&255]<<8^u[h&255]^t[++b]}function c4(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,i;t.decrypt?i=yr.cipher.createDecipher(r,t.key):i=yr.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,o){var a=null;o instanceof yr.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,n.call(i,o)},i}});var f4=v((Qst,Nq)=>{l();var Rr=yt();P_();O_();or();Nq.exports=Rr.des=Rr.des||{};Rr.des.startEncrypting=function(t,e,r,i){var n=u4({key:t,output:r,decrypt:!1,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Rr.des.createEncryptionCipher=function(t,e){return u4({key:t,output:null,decrypt:!1,mode:e})};Rr.des.startDecrypting=function(t,e,r,i){var n=u4({key:t,output:r,decrypt:!0,mode:i||(e===null?"ECB":"CBC")});return n.start(e),n};Rr.des.createDecryptionCipher=function(t,e){return u4({key:t,output:null,decrypt:!0,mode:e})};Rr.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(i,n){return Bq(r._keys,i,n,!1)},decrypt:function(i,n){return Bq(r._keys,i,n,!0)}}}),r._init=!1};Rr.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Rr.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Ywe(e),this._init=!0}};Ka("DES-ECB",Rr.cipher.modes.ecb);Ka("DES-CBC",Rr.cipher.modes.cbc);Ka("DES-CFB",Rr.cipher.modes.cfb);Ka("DES-OFB",Rr.cipher.modes.ofb);Ka("DES-CTR",Rr.cipher.modes.ctr);Ka("3DES-ECB",Rr.cipher.modes.ecb);Ka("3DES-CBC",Rr.cipher.modes.cbc);Ka("3DES-CFB",Rr.cipher.modes.cfb);Ka("3DES-OFB",Rr.cipher.modes.ofb);Ka("3DES-CTR",Rr.cipher.modes.ctr);function Ka(t,e){var r=function(){return new Rr.des.Algorithm(t,e)};Rr.cipher.registerAlgorithm(t,r)}var Fwe=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Kwe=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Vwe=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],zwe=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Hwe=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],$we=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Gwe=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Wwe=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Ywe(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],n=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=t.length()>8?3:1,w=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,I,j=0;j<m;j++){var B=t.getInt32(),C=t.getInt32();I=(B>>>4^C)&252645135,C^=I,B^=I<<4,I=(C>>>-16^B)&65535,B^=I,C^=I<<-16,I=(B>>>2^C)&858993459,C^=I,B^=I<<2,I=(C>>>-16^B)&65535,B^=I,C^=I<<-16,I=(B>>>1^C)&1431655765,C^=I,B^=I<<1,I=(C>>>8^B)&16711935,B^=I,C^=I<<8,I=(B>>>1^C)&1431655765,C^=I,B^=I<<1,I=B<<8|C>>>20&240,B=C<<24|C<<8&16711680|C>>>8&65280|C>>>24&240,C=I;for(var z=0;z<b.length;++z){b[z]?(B=B<<2|B>>>26,C=C<<2|C>>>26):(B=B<<1|B>>>27,C=C<<1|C>>>27),B&=-15,C&=-15;var W=e[B>>>28]|r[B>>>24&15]|i[B>>>20&15]|n[B>>>16&15]|s[B>>>12&15]|o[B>>>8&15]|a[B>>>4&15],X=c[C>>>28]|u[C>>>24&15]|f[C>>>20&15]|d[C>>>16&15]|h[C>>>12&15]|p[C>>>8&15]|y[C>>>4&15];I=(X>>>16^W)&65535,w[S++]=W^I,w[S++]=X^I<<16}}return w}function Bq(t,e,r,i){var n=t.length===32?3:9,s;n===3?s=i?[30,-2,-2]:[0,32,2]:s=i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=e[0],c=e[1];o=(a>>>4^c)&252645135,c^=o,a^=o<<4,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<n;u+=3){for(var f=s[u+1],d=s[u+2],h=s[u];h!=f;h+=d){var p=c^t[h],y=(c>>>4|c<<28)^t[h+1];o=a,a=c,c=o^(Kwe[p>>>24&63]|zwe[p>>>16&63]|$we[p>>>8&63]|Wwe[p&63]|Fwe[y>>>24&63]|Vwe[y>>>16&63]|Hwe[y>>>8&63]|Gwe[y&63])}o=a,a=c,c=o}a=a>>>1|a<<31,c=c>>>1|c<<31,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(a>>>4^c)&252645135,c^=o,a^=o<<4,r[0]=a,r[1]=c}function u4(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,i;t.decrypt?i=Rr.cipher.createDecipher(r,t.key):i=Rr.cipher.createCipher(r,t.key);var n=i.start;return i.start=function(s,o){var a=null;o instanceof Rr.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,n.call(i,o)},i}});var Ef=v((Zst,Mq)=>{l();var l4=yt();Mq.exports=l4.md=l4.md||{};l4.md.algorithms=l4.md.algorithms||{}});var qq=v((Jst,Lq)=>{l();var nu=yt();Ef();or();var Xwe=Lq.exports=nu.hmac=nu.hmac||{};Xwe.create=function(){var t=null,e=null,r=null,i=null,n={};return n.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in nu.md.algorithms)e=nu.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(o===null)o=t;else{if(typeof o=="string")o=nu.util.createBuffer(o);else if(nu.util.isArray(o)){var a=o;o=nu.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=nu.util.createBuffer(),i=nu.util.createBuffer(),u=o.length();for(var c=0;c<u;++c){var a=o.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);t=o,r=r.bytes(),i=i.bytes()}e.start(),e.update(r)},n.update=function(s){e.update(s)},n.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(i),e.update(s),e.digest()},n.digest=n.getMac,n}});var C0=v(()=>{l()});var N_=v((rot,jq)=>{l();var Kn=yt();qq();Ef();or();var Qwe=Kn.pkcs5=Kn.pkcs5||{},su;Kn.util.isNodejs&&!Kn.options.usePureJavaScript&&(su=C0());jq.exports=Kn.pbkdf2=Qwe.pbkdf2=function(t,e,r,i,n,s){if(typeof n=="function"&&(s=n,n=null),Kn.util.isNodejs&&!Kn.options.usePureJavaScript&&su.pbkdf2&&(n===null||typeof n!="object")&&(su.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?su.pbkdf2Sync.length===4?su.pbkdf2(t,e,r,i,function(I,j){if(I)return s(I);s(null,j.toString("binary"))}):su.pbkdf2(t,e,r,i,n,function(I,j){if(I)return s(I);s(null,j.toString("binary"))}):su.pbkdf2Sync.length===4?su.pbkdf2Sync(t,e,r,i).toString("binary"):su.pbkdf2Sync(t,e,r,i,n).toString("binary");if((typeof n=="undefined"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in Kn.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=Kn.md[n].create()}var o=n.digestLength;if(i>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var c=Math.ceil(i/o),u=i-(c-1)*o,f=Kn.hmac.create();f.start(n,t);var d="",h,p,y;if(!s){for(var m=1;m<=c;++m){f.start(null,null),f.update(e),f.update(Kn.util.int32ToBytes(m)),h=y=f.digest().getBytes();for(var w=2;w<=r;++w)f.start(null,null),f.update(y),p=f.digest().getBytes(),h=Kn.util.xorBytes(h,p,o),y=p;d+=m<c?h:h.substr(0,u)}return d}var m=1,w;function b(){if(m>c)return s(null,d);f.start(null,null),f.update(e),f.update(Kn.util.int32ToBytes(m)),h=y=f.digest().getBytes(),w=2,S()}function S(){if(w<=r)return f.start(null,null),f.update(y),p=f.digest().getBytes(),h=Kn.util.xorBytes(h,p,o),y=p,++w,Kn.util.setImmediate(S);d+=m<c?h:h.substr(0,u),++m,b()}b()}});var p4=v((iot,Fq)=>{l();var d4=yt();or();var Uq=Fq.exports=d4.pem=d4.pem||{};Uq.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,i;if(t.procType&&(i={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=h4(i)),t.contentDomain&&(i={name:"Content-Domain",values:[t.contentDomain]},r+=h4(i)),t.dekInfo&&(i={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&i.values.push(t.dekInfo.parameters),r+=h4(i)),t.headers)for(var n=0;n<t.headers.length;++n)r+=h4(t.headers[n]);return t.procType&&(r+=`\r
`),r+=d4.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Uq.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,n=/\r?\n/,s;s=r.exec(t),!!s;){var o={type:s[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:d4.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var a=s[2].split(n),c=0;s&&c<a.length;){for(var u=a[c].replace(/\s+$/,""),f=c+1;f<a.length;++f){var d=a[f];if(!/\s/.test(d[0]))break;u+=d,c=f}if(s=u.match(i),s){for(var h={name:s[1],values:[]},p=s[2].split(","),y=0;y<p.length;++y)h.values.push(Zwe(p[y]));if(o.procType)if(!o.contentDomain&&h.name==="Content-Domain")o.contentDomain=p[0]||"";else if(!o.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:p[0],parameters:p[1]||null}}else o.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:p[0],type:p[1]}}}++c}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function h4(t){for(var e=t.name+": ",r=[],i=function(c,u){return" "+u},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+`\r
`;for(var s=0,o=-1,n=0;n<e.length;++n,++s)if(s>65&&o!==-1){var a=e[o];a===","?(++o,e=e.substr(0,o)+`\r
 `+e.substr(o)):e=e.substr(0,o)+`\r
`+a+e.substr(o+1),s=n-o-1,o=-1,++n}else(e[n]===" "||e[n]==="	"||e[n]===",")&&(o=n);return e}function Zwe(t){return t.replace(/^\s+/,"")}});var Gq=v((not,$q)=>{l();var Va=yt();Ef();or();var Kq=$q.exports=Va.sha256=Va.sha256||{};Va.md.sha256=Va.md.algorithms.sha256=Kq;Kq.create=function(){Vq||Jwe();var t=null,e=Va.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=Va.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=Va.util.encodeUtf8(n));var o=n.length;i.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=i.fullMessageLength.length-1;a>=0;--a)i.fullMessageLength[a]+=o[1],o[1]=o[0]+(i.fullMessageLength[a]/4294967296>>>0),i.fullMessageLength[a]=i.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(n),Hq(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Va.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,o=s&i.blockLength-1;n.putBytes(M_.substr(0,i.blockLength-o));for(var a,c,u=i.fullMessageLength[0]*8,f=0;f<i.fullMessageLength.length-1;++f)a=i.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,n.putInt32(u>>>0),u=a>>>0;n.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Hq(d,r,n);var h=Va.util.createBuffer();return h.putInt32(d.h0),h.putInt32(d.h1),h.putInt32(d.h2),h.putInt32(d.h3),h.putInt32(d.h4),h.putInt32(d.h5),h.putInt32(d.h6),h.putInt32(d.h7),h},i};var M_=null,Vq=!1,zq=null;function Jwe(){M_=String.fromCharCode(128),M_+=Va.util.fillString(String.fromCharCode(0),64),zq=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Vq=!0}function Hq(t,e,r){for(var i,n,s,o,a,c,u,f,d,h,p,y,m,w,b,S=r.length();S>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)i=e[u-2],i=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=e[u-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[u]=i+e[u-7]+n+e[u-16]|0;for(f=t.h0,d=t.h1,h=t.h2,p=t.h3,y=t.h4,m=t.h5,w=t.h6,b=t.h7,u=0;u<64;++u)o=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),a=w^y&(m^w),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&d|h&(f^d),i=b+o+a+zq[u]+e[u],n=s+c,b=w,w=m,m=y,y=p+i>>>0,p=h,h=d,d=f,f=i+n>>>0;t.h0=t.h0+f|0,t.h1=t.h1+d|0,t.h2=t.h2+h|0,t.h3=t.h3+p|0,t.h4=t.h4+y|0,t.h5=t.h5+m|0,t.h6=t.h6+w|0,t.h7=t.h7+b|0,S-=64}}});var Yq=v((sot,Wq)=>{l();var za=yt();or();var y4=null;za.util.isNodejs&&!za.options.usePureJavaScript&&!process.versions["node-webkit"]&&(y4=C0());var e9e=Wq.exports=za.prng=za.prng||{};e9e.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),n=0;n<32;++n)i[n]=r.create();e.pools=i,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var d=e.plugin.cipher,h=e.plugin.increment,p=e.plugin.formatKey,y=e.plugin.formatSeed,m=za.util.createBuffer();e.key=null,w();function w(b){if(b)return f(b);if(m.length()>=u)return f(null,m.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return za.util.nextTick(function(){s(w)});var S=d(e.key,e.seed);e.generated+=S.length,m.putBytes(S),e.key=p(d(e.key,h(e.seed))),e.seed=y(d(e.key,e.seed)),za.util.setImmediate(w)}},e.generateSync=function(u){var f=e.plugin.cipher,d=e.plugin.increment,h=e.plugin.formatKey,p=e.plugin.formatSeed;e.key=null;for(var y=za.util.createBuffer();y.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&o();var m=f(e.key,e.seed);e.generated+=m.length,y.putBytes(m),e.key=h(f(e.key,d(e.seed))),e.seed=p(f(e.key,e.seed))}return y.getBytes(u)};function s(u){if(e.pools[0].messageLength>=32)return a(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(d,h){if(d)return u(d);e.collect(h),a(),u()})}function o(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,d=0;d<32;++d)e.reseeds%f==0&&(u.update(e.pools[d].digest().getBytes()),e.pools[d].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var h=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}function c(u){var f=null,d=za.util.globalScope,h=d.crypto||d.msCrypto;h&&h.getRandomValues&&(f=function(B){return h.getRandomValues(B)});var p=za.util.createBuffer();if(f)for(;p.length()<u;){var y=Math.max(1,Math.min(u-p.length(),65536)/4),m=new Uint32Array(Math.floor(y));try{f(m);for(var w=0;w<m.length;++w)p.putInt32(m[w])}catch(B){if(!(typeof QuotaExceededError!="undefined"&&B instanceof QuotaExceededError))throw B}}if(p.length()<u)for(var b,S,I,j=Math.floor(Math.random()*65536);p.length()<u;){S=16807*(j&65535),b=16807*(j>>16),S+=(b&32767)<<16,S+=b>>15,S=(S&2147483647)+(S>>31),j=S&4294967295;for(var w=0;w<3;++w)I=j>>>(w<<3),I^=Math.floor(Math.random()*256),p.putByte(String.fromCharCode(I&255))}return p.getBytes(u)}return y4?(e.seedFile=function(u,f){y4.randomBytes(u,function(d,h){if(d)return f(d);f(null,h.toString())})},e.seedFileSync=function(u){return y4.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,c(u))}catch(d){f(d)}},e.seedFileSync=c),e.collect=function(u){for(var f=u.length,d=0;d<f;++d)e.pools[e.pool].update(u.substr(d,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var d="",h=0;h<f;h+=8)d+=String.fromCharCode(u>>h&255);e.collect(d)},e.registerWorker=function(u){if(u===self)e.seedFile=function(d,h){function p(y){var m=y.data;m.forge&&m.forge.prng&&(self.removeEventListener("message",p),h(m.forge.prng.err,m.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:d}}})};else{var f=function(d){var h=d.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(p,y){u.postMessage({forge:{prng:{err:p,bytes:y}}})})};u.addEventListener("message",f)}},e}});var Sf=v((oot,L_)=>{l();var Wi=yt();P0();Gq();Yq();or();(function(){if(Wi.random&&Wi.random.getBytes){L_.exports=Wi.random;return}(function(t){var e={},r=new Array(4),i=Wi.util.createBuffer();e.formatKey=function(d){var h=Wi.util.createBuffer(d);return d=new Array(4),d[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),Wi.aes._expandKey(d,!1)},e.formatSeed=function(d){var h=Wi.util.createBuffer(d);return d=new Array(4),d[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),d},e.cipher=function(d,h){return Wi.aes._updateBlock(d,h,r,!1),i.putInt32(r[0]),i.putInt32(r[1]),i.putInt32(r[2]),i.putInt32(r[3]),i.getBytes()},e.increment=function(d){return++d[3],d},e.md=Wi.md.sha256;function n(){var d=Wi.prng.create(e);return d.getBytes=function(h,p){return d.generate(h,p)},d.getBytesSync=function(h){return d.generate(h)},d}var s=n(),o=null,a=Wi.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(o=function(d){return c.getRandomValues(d)}),Wi.options.usePureJavaScript||!Wi.util.isNodejs&&!o){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch(d){}s.collect(u),u=null}t&&(t().mousemove(function(d){s.collectInt(d.clientX,16),s.collectInt(d.clientY,16)}),t().keypress(function(d){s.collectInt(d.charCode,8)}))}if(!Wi.random)Wi.random=s;else for(var f in s)Wi.random[f]=s[f];Wi.random.createInstance=n,L_.exports=Wi.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Jq=v((aot,Zq)=>{l();var ts=yt();or();var q_=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Xq=[1,2,3,5],t9e=function(t,e){return t<<e&65535|(t&65535)>>16-e},r9e=function(t,e){return(t&65535)>>e|t<<16-e&65535};Zq.exports=ts.rc2=ts.rc2||{};ts.rc2.expandKey=function(t,e){typeof t=="string"&&(t=ts.util.createBuffer(t)),e=e||128;var r=t,i=t.length(),n=e,s=Math.ceil(n/8),o=255>>(n&7),a;for(a=i;a<128;a++)r.putByte(q_[r.at(a-1)+r.at(a-i)&255]);for(r.setAt(128-s,q_[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,q_[r.at(a+1)^r.at(a+s)]);return r};var Qq=function(t,e,r){var i=!1,n=null,s=null,o=null,a,c,u,f,d=[];for(t=ts.rc2.expandKey(t,e),u=0;u<64;u++)d.push(t.getInt16Le());r?(a=function(y){for(u=0;u<4;u++)y[u]+=d[f]+(y[(u+3)%4]&y[(u+2)%4])+(~y[(u+3)%4]&y[(u+1)%4]),y[u]=t9e(y[u],Xq[u]),f++},c=function(y){for(u=0;u<4;u++)y[u]+=d[y[(u+3)%4]&63]}):(a=function(y){for(u=3;u>=0;u--)y[u]=r9e(y[u],Xq[u]),y[u]-=d[f]+(y[(u+3)%4]&y[(u+2)%4])+(~y[(u+3)%4]&y[(u+1)%4]),f--},c=function(y){for(u=3;u>=0;u--)y[u]-=d[y[(u+3)%4]&63]});var h=function(y){var m=[];for(u=0;u<4;u++){var w=n.getInt16Le();o!==null&&(r?w^=o.getInt16Le():o.putInt16Le(w)),m.push(w&65535)}f=r?0:63;for(var b=0;b<y.length;b++)for(var S=0;S<y[b][0];S++)y[b][1](m);for(u=0;u<4;u++)o!==null&&(r?o.putInt16Le(m[u]):m[u]^=o.getInt16Le()),s.putInt16Le(m[u])},p=null;return p={start:function(y,m){y&&typeof y=="string"&&(y=ts.util.createBuffer(y)),i=!1,n=ts.util.createBuffer(),s=m||new ts.util.createBuffer,o=y,p.output=s},update:function(y){for(i||n.putBuffer(y);n.length()>=8;)h([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(y){var m=!0;if(r)if(y)m=y(8,n,!r);else{var w=n.length()===8?8:8-n.length();n.fillWithByte(w,w)}if(m&&(i=!0,p.update()),!r&&(m=n.length()===0,m))if(y)m=y(8,s,!r);else{var b=s.length(),S=s.at(b-1);S>b?m=!1:s.truncate(S)}return m}},p};ts.rc2.startEncrypting=function(t,e,r){var i=ts.rc2.createEncryptionCipher(t,128);return i.start(e,r),i};ts.rc2.createEncryptionCipher=function(t,e){return Qq(t,e,!0)};ts.rc2.startDecrypting=function(t,e,r){var i=ts.rc2.createDecryptionCipher(t,128);return i.start(e,r),i};ts.rc2.createDecryptionCipher=function(t,e){return Qq(t,e,!1)}});var Oy=v((cot,aj)=>{l();var j_=yt();aj.exports=j_.jsbn=j_.jsbn||{};var ou,i9e=244837814094590,ej=(i9e&16777215)==15715070;function Se(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}j_.jsbn.BigInteger=Se;function Ft(){return new Se(null)}function n9e(t,e,r,i,n,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[i]+n;n=Math.floor(o/67108864),r.data[i++]=o&67108863}return n}function s9e(t,e,r,i,n,s){for(var o=e&32767,a=e>>15;--s>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,f=a*c+u*o;c=o*c+((f&32767)<<15)+r.data[i]+(n&1073741823),n=(c>>>30)+(f>>>15)+a*u+(n>>>30),r.data[i++]=c&1073741823}return n}function tj(t,e,r,i,n,s){for(var o=e&16383,a=e>>14;--s>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,f=a*c+u*o;c=o*c+((f&16383)<<14)+r.data[i]+n,n=(c>>28)+(f>>14)+a*u,r.data[i++]=c&268435455}return n}typeof navigator=="undefined"?(Se.prototype.am=tj,ou=28):ej&&navigator.appName=="Microsoft Internet Explorer"?(Se.prototype.am=s9e,ou=30):ej&&navigator.appName!="Netscape"?(Se.prototype.am=n9e,ou=26):(Se.prototype.am=tj,ou=28);Se.prototype.DB=ou;Se.prototype.DM=(1<<ou)-1;Se.prototype.DV=1<<ou;var U_=52;Se.prototype.FV=Math.pow(2,U_);Se.prototype.F1=U_-ou;Se.prototype.F2=2*ou-U_;var o9e="0123456789abcdefghijklmnopqrstuvwxyz",g4=new Array,O0,Ys;O0="0".charCodeAt(0);for(Ys=0;Ys<=9;++Ys)g4[O0++]=Ys;O0="a".charCodeAt(0);for(Ys=10;Ys<36;++Ys)g4[O0++]=Ys;O0="A".charCodeAt(0);for(Ys=10;Ys<36;++Ys)g4[O0++]=Ys;function rj(t){return o9e.charAt(t)}function ij(t,e){var r=g4[t.charCodeAt(e)];return r??-1}function a9e(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function c9e(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function xf(t){var e=Ft();return e.fromInt(t),e}function u9e(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var o=r==8?t[i]&255:ij(t,i);if(o<0){t.charAt(i)=="-"&&(n=!0);continue}n=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&Se.ZERO.subTo(this,this)}function f9e(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function l9e(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,n=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(i=this.data[o]>>a)>0&&(n=!0,s=rj(i));o>=0;)a<e?(i=(this.data[o]&(1<<a)-1)<<e-a,i|=this.data[--o]>>(a+=this.DB-e)):(i=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),i>0&&(n=!0),n&&(s+=rj(i));return n?s:"0"}function d9e(){var t=Ft();return Se.ZERO.subTo(this,t),t}function h9e(){return this.s<0?this.negate():this}function p9e(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function m4(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function y9e(){return this.t<=0?0:this.DB*(this.t-1)+m4(this.data[this.t-1]^this.s&this.DM)}function g9e(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function m9e(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function b9e(t,e){var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+s+1]=this.data[a]>>i|o,o=(this.data[a]&n)<<r;for(a=s-1;a>=0;--a)e.data[a]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function v9e(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<n,e.data[o-r]=this.data[o]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}function w9e(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()}function _9e(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&Se.ZERO.subTo(e,e)}function E9e(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function S9e(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Ft());var s=Ft(),o=this.s,a=t.s,c=this.DB-m4(i.data[i.t-1]);c>0?(i.lShiftTo(c,s),n.lShiftTo(c,r)):(i.copyTo(s),n.copyTo(r));var u=s.t,f=s.data[u-1];if(f!=0){var d=f*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),h=this.FV/d,p=(1<<this.F1)/d,y=1<<this.F2,m=r.t,w=m-u,b=e??Ft();for(s.dlShiftTo(w,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),Se.ONE.dlShiftTo(u,b),b.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--w>=0;){var S=r.data[--m]==f?this.DM:Math.floor(r.data[m]*h+(r.data[m-1]+y)*p);if((r.data[m]+=s.am(0,S,r,w,0,u))<S)for(s.dlShiftTo(w,b),r.subTo(b,r);r.data[m]<--S;)r.subTo(b,r)}e!=null&&(r.drShiftTo(u,e),o!=a&&Se.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&Se.ZERO.subTo(r,r)}}}function x9e(t){var e=Ft();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Se.ZERO)>0&&t.subTo(e,e),e}function Wl(t){this.m=t}function A9e(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function I9e(t){return t}function T9e(t){t.divRemTo(this.m,null,t)}function R9e(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function P9e(t,e){t.squareTo(e),this.reduce(e)}Wl.prototype.convert=A9e;Wl.prototype.revert=I9e;Wl.prototype.reduce=T9e;Wl.prototype.mulTo=R9e;Wl.prototype.sqrTo=P9e;function C9e(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Yl(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function O9e(t){var e=Ft();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Se.ZERO)>0&&this.m.subTo(e,e),e}function k9e(t){var e=Ft();return t.copyTo(e),this.reduce(e),e}function D9e(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function B9e(t,e){t.squareTo(e),this.reduce(e)}function N9e(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Yl.prototype.convert=O9e;Yl.prototype.revert=k9e;Yl.prototype.reduce=D9e;Yl.prototype.mulTo=N9e;Yl.prototype.sqrTo=B9e;function M9e(){return(this.t>0?this.data[0]&1:this.s)==0}function L9e(t,e){if(t>4294967295||t<1)return Se.ONE;var r=Ft(),i=Ft(),n=e.convert(this),s=m4(t)-1;for(n.copyTo(r);--s>=0;)if(e.sqrTo(r,i),(t&1<<s)>0)e.mulTo(i,n,r);else{var o=r;r=i,i=o}return e.revert(r)}function q9e(t,e){var r;return t<256||e.isEven()?r=new Wl(e):r=new Yl(e),this.exp(t,r)}Se.prototype.copyTo=a9e;Se.prototype.fromInt=c9e;Se.prototype.fromString=u9e;Se.prototype.clamp=f9e;Se.prototype.dlShiftTo=g9e;Se.prototype.drShiftTo=m9e;Se.prototype.lShiftTo=b9e;Se.prototype.rShiftTo=v9e;Se.prototype.subTo=w9e;Se.prototype.multiplyTo=_9e;Se.prototype.squareTo=E9e;Se.prototype.divRemTo=S9e;Se.prototype.invDigit=C9e;Se.prototype.isEven=M9e;Se.prototype.exp=L9e;Se.prototype.toString=l9e;Se.prototype.negate=d9e;Se.prototype.abs=h9e;Se.prototype.compareTo=p9e;Se.prototype.bitLength=y9e;Se.prototype.mod=x9e;Se.prototype.modPowInt=q9e;Se.ZERO=xf(0);Se.ONE=xf(1);function j9e(){var t=Ft();return this.copyTo(t),t}function U9e(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function F9e(){return this.t==0?this.s:this.data[0]<<24>>24}function K9e(){return this.t==0?this.s:this.data[0]<<16>>16}function V9e(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function z9e(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function H9e(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=xf(r),n=Ft(),s=Ft(),o="";for(this.divRemTo(i,n,s);n.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,n.divRemTo(i,n,s);return s.intValue().toString(t)+o}function $9e(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,o=0,a=0;a<t.length;++a){var c=ij(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(n=!0);continue}o=e*o+c,++s>=r&&(this.dMultiply(i),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),n&&Se.ZERO.subTo(this,this)}function G9e(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(Se.ONE.shiftLeft(t-1),F_,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Se.ONE.shiftLeft(t-1),this);else{var i=new Array,n=t&7;i.length=(t>>3)+1,e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}}function W9e(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,n=0;if(t-- >0)for(r<this.DB&&(i=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this.data[t]&(1<<r)-1)<<8-r,i|=this.data[--t]>>(r+=this.DB-8)):(i=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(i&128)!=0&&(i|=-256),n==0&&(this.s&128)!=(i&128)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function Y9e(t){return this.compareTo(t)==0}function X9e(t){return this.compareTo(t)<0?this:t}function Q9e(t){return this.compareTo(t)>0?this:t}function Z9e(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;i<s;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function J9e(t,e){return t&e}function e_e(t){var e=Ft();return this.bitwiseTo(t,J9e,e),e}function F_(t,e){return t|e}function t_e(t){var e=Ft();return this.bitwiseTo(t,F_,e),e}function nj(t,e){return t^e}function r_e(t){var e=Ft();return this.bitwiseTo(t,nj,e),e}function sj(t,e){return t&~e}function i_e(t){var e=Ft();return this.bitwiseTo(t,sj,e),e}function n_e(){for(var t=Ft(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function s_e(t){var e=Ft();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function o_e(t){var e=Ft();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function a_e(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function c_e(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+a_e(this.data[t]);return this.s<0?this.t*this.DB:-1}function u_e(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function f_e(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=u_e(this.data[r]^e);return t}function l_e(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function d_e(t,e){var r=Se.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function h_e(t){return this.changeBit(t,F_)}function p_e(t){return this.changeBit(t,sj)}function y_e(t){return this.changeBit(t,nj)}function g_e(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()}function m_e(t){var e=Ft();return this.addTo(t,e),e}function b_e(t){var e=Ft();return this.subTo(t,e),e}function v_e(t){var e=Ft();return this.multiplyTo(t,e),e}function w_e(t){var e=Ft();return this.divRemTo(t,e,null),e}function __e(t){var e=Ft();return this.divRemTo(t,null,e),e}function E_e(t){var e=Ft(),r=Ft();return this.divRemTo(t,e,r),new Array(e,r)}function S_e(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function x_e(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Cy(){}function oj(t){return t}function A_e(t,e,r){t.multiplyTo(e,r)}function I_e(t,e){t.squareTo(e)}Cy.prototype.convert=oj;Cy.prototype.revert=oj;Cy.prototype.mulTo=A_e;Cy.prototype.sqrTo=I_e;function T_e(t){return this.exp(t,new Cy)}function R_e(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;var n;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,t.data[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t.data[i],r,i,0,e-i);r.clamp()}function P_e(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function k0(t){this.r2=Ft(),this.q3=Ft(),Se.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function C_e(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Ft();return t.copyTo(e),this.reduce(e),e}function O_e(t){return t}function k_e(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function D_e(t,e){t.squareTo(e),this.reduce(e)}function B_e(t,e,r){t.multiplyTo(e,r),this.reduce(r)}k0.prototype.convert=C_e;k0.prototype.revert=O_e;k0.prototype.reduce=k_e;k0.prototype.mulTo=B_e;k0.prototype.sqrTo=D_e;function N_e(t,e){var r=t.bitLength(),i,n=xf(1),s;if(r<=0)return n;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?s=new Wl(e):e.isEven()?s=new k0(e):s=new Yl(e);var o=new Array,a=3,c=i-1,u=(1<<i)-1;if(o[1]=s.convert(this),i>1){var f=Ft();for(s.sqrTo(o[1],f);a<=u;)o[a]=Ft(),s.mulTo(f,o[a-2],o[a]),a+=2}var d=t.t-1,h,p=!0,y=Ft(),m;for(r=m4(t.data[d])-1;d>=0;){for(r>=c?h=t.data[d]>>r-c&u:(h=(t.data[d]&(1<<r+1)-1)<<c-r,d>0&&(h|=t.data[d-1]>>this.DB+r-c)),a=i;(h&1)==0;)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--d),p)o[h].copyTo(n),p=!1;else{for(;a>1;)s.sqrTo(n,y),s.sqrTo(y,n),a-=2;a>0?s.sqrTo(n,y):(m=n,n=y,y=m),s.mulTo(y,o[h],n)}for(;d>=0&&(t.data[d]&1<<r)==0;)s.sqrTo(n,y),m=n,n=y,y=m,--r<0&&(r=this.DB-1,--d)}return s.revert(n)}function M_e(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function L_e(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r}function q_e(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Se.ZERO;for(var r=t.clone(),i=this.clone(),n=xf(1),s=xf(0),o=xf(0),a=xf(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!n.isEven()||!s.isEven())&&(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(o,n),s.subTo(a,s)):(i.subTo(r,i),e&&o.subTo(n,o),a.subTo(s,a))}if(i.compareTo(Se.ONE)!=0)return Se.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var Wo=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],j_e=(1<<26)/Wo[Wo.length-1];function U_e(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Wo[Wo.length-1]){for(e=0;e<Wo.length;++e)if(r.data[0]==Wo[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Wo.length;){for(var i=Wo[e],n=e+1;n<Wo.length&&i<j_e;)i*=Wo[n++];for(i=r.modInt(i);e<n;)if(i%Wo[e++]==0)return!1}return r.millerRabin(t)}function F_e(t){var e=this.subtract(Se.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i=e.shiftRight(r),n=K_e(),s,o=0;o<t;++o){do s=new Se(this.bitLength(),n);while(s.compareTo(Se.ONE)<=0||s.compareTo(e)>=0);var a=s.modPow(i,this);if(a.compareTo(Se.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(Se.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function K_e(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}Se.prototype.chunkSize=V9e;Se.prototype.toRadix=H9e;Se.prototype.fromRadix=$9e;Se.prototype.fromNumber=G9e;Se.prototype.bitwiseTo=Z9e;Se.prototype.changeBit=d_e;Se.prototype.addTo=g_e;Se.prototype.dMultiply=S_e;Se.prototype.dAddOffset=x_e;Se.prototype.multiplyLowerTo=R_e;Se.prototype.multiplyUpperTo=P_e;Se.prototype.modInt=L_e;Se.prototype.millerRabin=F_e;Se.prototype.clone=j9e;Se.prototype.intValue=U9e;Se.prototype.byteValue=F9e;Se.prototype.shortValue=K9e;Se.prototype.signum=z9e;Se.prototype.toByteArray=W9e;Se.prototype.equals=Y9e;Se.prototype.min=X9e;Se.prototype.max=Q9e;Se.prototype.and=e_e;Se.prototype.or=t_e;Se.prototype.xor=r_e;Se.prototype.andNot=i_e;Se.prototype.not=n_e;Se.prototype.shiftLeft=s_e;Se.prototype.shiftRight=o_e;Se.prototype.getLowestSetBit=c_e;Se.prototype.bitCount=f_e;Se.prototype.testBit=l_e;Se.prototype.setBit=h_e;Se.prototype.clearBit=p_e;Se.prototype.flipBit=y_e;Se.prototype.add=m_e;Se.prototype.subtract=b_e;Se.prototype.multiply=v_e;Se.prototype.divide=w_e;Se.prototype.remainder=__e;Se.prototype.divideAndRemainder=E_e;Se.prototype.modPow=N_e;Se.prototype.modInverse=q_e;Se.prototype.pow=T_e;Se.prototype.gcd=M_e;Se.prototype.isProbablePrime=U_e});var dj=v((uot,lj)=>{l();var Ha=yt();Ef();or();var cj=lj.exports=Ha.sha1=Ha.sha1||{};Ha.md.sha1=Ha.md.algorithms.sha1=cj;cj.create=function(){uj||V_e();var t=null,e=Ha.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return i.start=function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return e=Ha.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i},i.start(),i.update=function(n,s){s==="utf8"&&(n=Ha.util.encodeUtf8(n));var o=n.length;i.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=i.fullMessageLength.length-1;a>=0;--a)i.fullMessageLength[a]+=o[1],o[1]=o[0]+(i.fullMessageLength[a]/4294967296>>>0),i.fullMessageLength[a]=i.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(n),fj(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),i},i.digest=function(){var n=Ha.util.createBuffer();n.putBytes(e.bytes());var s=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,o=s&i.blockLength-1;n.putBytes(K_.substr(0,i.blockLength-o));for(var a,c,u=i.fullMessageLength[0]*8,f=0;f<i.fullMessageLength.length-1;++f)a=i.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,n.putInt32(u>>>0),u=a>>>0;n.putInt32(u);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};fj(d,r,n);var h=Ha.util.createBuffer();return h.putInt32(d.h0),h.putInt32(d.h1),h.putInt32(d.h2),h.putInt32(d.h3),h.putInt32(d.h4),h},i};var K_=null,uj=!1;function V_e(){K_=String.fromCharCode(128),K_+=Ha.util.fillString(String.fromCharCode(0),64),uj=!0}function fj(t,e,r){for(var i,n,s,o,a,c,u,f,d=r.length();d>=64;){for(n=t.h0,s=t.h1,o=t.h2,a=t.h3,c=t.h4,f=0;f<16;++f)i=r.getInt32(),e[f]=i,u=a^s&(o^a),i=(n<<5|n>>>27)+u+c+1518500249+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<20;++f)i=e[f-3]^e[f-8]^e[f-14]^e[f-16],i=i<<1|i>>>31,e[f]=i,u=a^s&(o^a),i=(n<<5|n>>>27)+u+c+1518500249+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<32;++f)i=e[f-3]^e[f-8]^e[f-14]^e[f-16],i=i<<1|i>>>31,e[f]=i,u=s^o^a,i=(n<<5|n>>>27)+u+c+1859775393+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<40;++f)i=e[f-6]^e[f-16]^e[f-28]^e[f-32],i=i<<2|i>>>30,e[f]=i,u=s^o^a,i=(n<<5|n>>>27)+u+c+1859775393+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<60;++f)i=e[f-6]^e[f-16]^e[f-28]^e[f-32],i=i<<2|i>>>30,e[f]=i,u=s&o|a&(s^o),i=(n<<5|n>>>27)+u+c+2400959708+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;for(;f<80;++f)i=e[f-6]^e[f-16]^e[f-28]^e[f-32],i=i<<2|i>>>30,e[f]=i,u=s^o^a,i=(n<<5|n>>>27)+u+c+3395469782+i,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,d-=64}}});var yj=v((fot,pj)=>{l();var $a=yt();or();Sf();dj();var hj=pj.exports=$a.pkcs1=$a.pkcs1||{};hj.encode_rsa_oaep=function(t,e,r){var i,n,s,o;typeof r=="string"?(i=r,n=arguments[3]||void 0,s=arguments[4]||void 0):r&&(i=r.label||void 0,n=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=$a.md.sha1.create(),o||(o=s);var a=Math.ceil(t.n.bitLength()/8),c=a-2*s.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}i||(i=""),s.update(i,"raw");for(var f=s.digest(),d="",h=c-e.length,p=0;p<h;p++)d+="\0";var y=f.getBytes()+d+""+e;if(!n)n=$a.random.getBytes(s.digestLength);else if(n.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=n.length,u.digestLength=s.digestLength,u}var m=b4(n,a-s.digestLength-1,o),w=$a.util.xorBytes(y,m,y.length),b=b4(w,s.digestLength,o),S=$a.util.xorBytes(n,b,n.length);return"\0"+S+w};hj.decode_rsa_oaep=function(t,e,r){var i,n,s;typeof r=="string"?(i=r,n=arguments[3]||void 0):r&&(i=r.label||void 0,n=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var w=new Error("RSAES-OAEP encoded message length is invalid.");throw w.length=e.length,w.expectedLength=o,w}if(n===void 0?n=$a.md.sha1.create():n.start(),s||(s=n),o<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),n.update(i,"raw");for(var a=n.digest().getBytes(),c=e.charAt(0),u=e.substring(1,n.digestLength+1),f=e.substring(1+n.digestLength),d=b4(f,n.digestLength,s),h=$a.util.xorBytes(u,d,u.length),p=b4(h,o-n.digestLength-1,s),y=$a.util.xorBytes(f,p,f.length),m=y.substring(0,n.digestLength),w=c!=="\0",b=0;b<n.digestLength;++b)w|=a.charAt(b)!==m.charAt(b);for(var S=1,I=n.digestLength,j=n.digestLength;j<y.length;j++){var B=y.charCodeAt(j),C=B&1^1,z=S?65534:0;w|=B&z,S=S&C,I+=S}if(w||y.charCodeAt(I)!==1)throw new Error("Invalid RSAES-OAEP padding.");return y.substring(I+1)};function b4(t,e,r){r||(r=$a.md.sha1.create());for(var i="",n=Math.ceil(e/r.digestLength),s=0;s<n;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+o),i+=r.digest().getBytes()}return i.substring(0,e)}});var gj=v((lot,V_)=>{l();var Af=yt();or();Oy();Sf();(function(){if(Af.prime){V_.exports=Af.prime;return}var t=V_.exports=Af.prime=Af.prime||{},e=Af.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],i=new e(null);i.fromInt(30);var n=function(d,h){return d|h};t.generateProbablePrime=function(d,h,p){typeof h=="function"&&(p=h,h={}),h=h||{};var y=h.algorithm||"PRIMEINC";typeof y=="string"&&(y={name:y}),y.options=y.options||{};var m=h.prng||Af.random,w={nextBytes:function(b){for(var S=m.getBytesSync(b.length),I=0;I<b.length;++I)b[I]=S.charCodeAt(I)}};if(y.name==="PRIMEINC")return s(d,w,y.options,p);throw new Error("Invalid prime generation algorithm: "+y.name)};function s(d,h,p,y){return"workers"in p?c(d,h,p,y):o(d,h,p,y)}function o(d,h,p,y){var m=u(d,h),w=0,b=f(m.bitLength());"millerRabinTests"in p&&(b=p.millerRabinTests);var S=10;"maxBlockTime"in p&&(S=p.maxBlockTime),a(m,d,h,w,b,S,y)}function a(d,h,p,y,m,w,b){var S=+new Date;do{if(d.bitLength()>h&&(d=u(h,p)),d.isProbablePrime(m))return b(null,d);d.dAddOffset(r[y++%8],0)}while(w<0||+new Date-S<w);Af.util.setImmediate(function(){a(d,h,p,y,m,w,b)})}function c(d,h,p,y){if(typeof Worker=="undefined")return o(d,h,p,y);var m=u(d,h),w=p.workers,b=p.workLoad||100,S=b*30/8,I=p.workerScript||"forge/prime.worker.js";if(w===-1)return Af.util.estimateCores(function(B,C){B&&(C=2),w=C-1,j()});j();function j(){w=Math.max(1,w);for(var B=[],C=0;C<w;++C)B[C]=new Worker(I);for(var z=w,C=0;C<w;++C)B[C].addEventListener("message",X);var W=!1;function X(P){if(!W){--z;var g=P.data;if(g.found){for(var _=0;_<B.length;++_)B[_].terminate();return W=!0,y(null,new e(g.prime,16))}m.bitLength()>d&&(m=u(d,h));var x=m.toString(16);P.target.postMessage({hex:x,workLoad:b}),m.dAddOffset(S,0)}}}}function u(d,h){var p=new e(d,h),y=d-1;return p.testBit(y)||p.bitwiseTo(e.ONE.shiftLeft(y),n,p),p.dAddOffset(31-p.mod(i).byteValue(),0),p}function f(d){return d<=100?27:d<=150?18:d<=200?15:d<=250?12:d<=300?9:d<=350?8:d<=400?7:d<=500?6:d<=600?5:d<=800?4:d<=1250?3:2}})()});var ky=v((dot,Sj)=>{l();var ut=yt();iu();Oy();I0();yj();gj();Sf();or();typeof Mt=="undefined"&&(Mt=ut.jsbn.BigInteger);var Mt,z_=ut.util.isNodejs?C0():null,fe=ut.asn1,Xs=ut.util;ut.pki=ut.pki||{};Sj.exports=ut.pki.rsa=ut.rsa=ut.rsa||{};var ft=ut.pki,z_e=[6,4,2,4,2,4,6,2],H_e={name:"PrivateKeyInfo",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},$_e={name:"RSAPrivateKey",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},G_e={name:"RSAPublicKey",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:fe.Class.UNIVERSAL,type:fe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},W_e=ut.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:fe.Class.UNIVERSAL,type:fe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:fe.Class.UNIVERSAL,type:fe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:fe.Class.UNIVERSAL,type:fe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Y_e=function(t){var e;if(t.algorithm in ft.oids)e=ft.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var i=fe.oidToDer(e).getBytes(),n=fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[]),s=fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[]);s.value.push(fe.create(fe.Class.UNIVERSAL,fe.Type.OID,!1,i)),s.value.push(fe.create(fe.Class.UNIVERSAL,fe.Type.NULL,!1,""));var o=fe.create(fe.Class.UNIVERSAL,fe.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(s),n.value.push(o),fe.toDer(n).getBytes()},mj=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Mt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Mt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var i;do i=new Mt(ut.util.bytesToHex(ut.random.getBytes(e.n.bitLength()/8)),16);while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(Mt.ONE));t=t.multiply(i.modPow(e.e,e.n)).mod(e.n);for(var n=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);n.compareTo(s)<0;)n=n.add(e.p);var o=n.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return o=o.multiply(i.modInverse(e.n)).mod(e.n),o};ft.rsa.encrypt=function(t,e,r){var i=r,n,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=bj(t,e,r)):(n=ut.util.createBuffer(),n.putBytes(t));for(var o=new Mt(n.toHex(),16),a=mj(o,e,i),c=a.toString(16),u=ut.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(ut.util.hexToBytes(c)),u.getBytes()};ft.rsa.decrypt=function(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8);if(t.length!==n){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=n,s}var o=new Mt(ut.util.createBuffer(t).toHex(),16);if(o.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=mj(o,e,r),c=a.toString(16),u=ut.util.createBuffer(),f=n-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(ut.util.hexToBytes(c)),i!==!1?v4(u.getBytes(),e,r):u.getBytes()};ft.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var i=r.prng||ut.random,n={nextBytes:function(a){for(var c=i.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:t,rng:n,eInt:e||65537,e:new Mt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};ft.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Mt(null);r.fromInt(30);for(var i=0,n=function(d,h){return d|h},s=+new Date,o,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new Mt(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Mt.ONE.shiftLeft(u),n,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(Q_e(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(z_e[i++%8],0):t.pqState===2?t.pqState=t.num.subtract(Mt.ONE).gcd(t.e).compareTo(Mt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Mt.ONE),t.q1=t.q.subtract(Mt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Mt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:ft.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ft.rsa.setPublicKey(t.n,t.e)}}o=+new Date,a+=o-s,s=o}return t.keys!==null};ft.rsa.generateKeyPair=function(t,e,r,i){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(i=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(i=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,i=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(i=r,r=void 0):(i=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!ut.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(i){if(vj("generateKeyPair"))return z_.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return i(a);i(null,{privateKey:ft.privateKeyFromPem(u),publicKey:ft.publicKeyFromPem(c)})});if(wj("generateKey")&&wj("exportKey"))return Xs.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Ej(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Xs.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){i(a)}).then(function(a){if(a){var c=ft.privateKeyFromAsn1(fe.fromDer(ut.util.createBuffer(a)));i(null,{privateKey:c,publicKey:ft.setRsaPublicKey(c.n,c.e)})}});if(_j("generateKey")&&_j("exportKey")){var n=Xs.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Ej(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);n.oncomplete=function(a){var c=a.target.result,u=Xs.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(f){var d=f.target.result,h=ft.privateKeyFromAsn1(fe.fromDer(ut.util.createBuffer(d)));i(null,{privateKey:h,publicKey:ft.setRsaPublicKey(h.n,h.e)})},u.onerror=function(f){i(f)}},n.onerror=function(a){i(a)};return}}else if(vj("generateKeyPairSync")){var s=z_.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ft.privateKeyFromPem(s.privateKey),publicKey:ft.publicKeyFromPem(s.publicKey)}}}var o=ft.rsa.createKeyPairGenerationState(t,e,r);if(!i)return ft.rsa.stepKeyPairGenerationState(o,0),o.keys;X_e(o,r,i)};ft.setRsaPublicKey=ft.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(i,n,s){if(typeof n=="string"?n=n.toUpperCase():n===void 0&&(n="RSAES-PKCS1-V1_5"),n==="RSAES-PKCS1-V1_5")n={encode:function(a,c,u){return bj(a,c,2).getBytes()}};else if(n==="RSA-OAEP"||n==="RSAES-OAEP")n={encode:function(a,c){return ut.pkcs1.encode_rsa_oaep(c,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(n)!==-1)n={encode:function(a){return a}};else if(typeof n=="string")throw new Error('Unsupported encryption scheme: "'+n+'".');var o=n.encode(i,r,!0);return ft.rsa.encrypt(o,r,!0)},r.verify=function(i,n,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(a,c){c=v4(c,r,!0);var u=fe.fromDer(c);return a===u.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(a,c){return c=v4(c,r,!0),a===c}});var o=ft.rsa.decrypt(n,r,!0,!1);return s.verify(i,o,r.n.bitLength())},r};ft.setRsaPrivateKey=ft.rsa.setPrivateKey=function(t,e,r,i,n,s,o,a){var c={n:t,e,d:r,p:i,q:n,dP:s,dQ:o,qInv:a};return c.decrypt=function(u,f,d){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=ft.rsa.decrypt(u,c,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:v4};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(p,y){return ut.pkcs1.decode_rsa_oaep(y,p,d)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,c,!1)},c.sign=function(u,f){var d=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:Y_e},d=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return u}},d=1);var h=f.encode(u,c.n.bitLength());return ft.rsa.encrypt(h,c,d)},c};ft.wrapRsaPrivateKey=function(t){return fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,fe.integerToDer(0).getBytes()),fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.OID,!1,fe.oidToDer(ft.oids.rsaEncryption).getBytes()),fe.create(fe.Class.UNIVERSAL,fe.Type.NULL,!1,"")]),fe.create(fe.Class.UNIVERSAL,fe.Type.OCTETSTRING,!1,fe.toDer(t).getBytes())])};ft.privateKeyFromAsn1=function(t){var e={},r=[];if(fe.validate(t,H_e,e,r)&&(t=fe.fromDer(ut.util.createBuffer(e.privateKey))),e={},r=[],!fe.validate(t,$_e,e,r)){var i=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw i.errors=r,i}var n,s,o,a,c,u,f,d;return n=ut.util.createBuffer(e.privateKeyModulus).toHex(),s=ut.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=ut.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=ut.util.createBuffer(e.privateKeyPrime1).toHex(),c=ut.util.createBuffer(e.privateKeyPrime2).toHex(),u=ut.util.createBuffer(e.privateKeyExponent1).toHex(),f=ut.util.createBuffer(e.privateKeyExponent2).toHex(),d=ut.util.createBuffer(e.privateKeyCoefficient).toHex(),ft.setRsaPrivateKey(new Mt(n,16),new Mt(s,16),new Mt(o,16),new Mt(a,16),new Mt(c,16),new Mt(u,16),new Mt(f,16),new Mt(d,16))};ft.privateKeyToAsn1=ft.privateKeyToRSAPrivateKey=function(t){return fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,fe.integerToDer(0).getBytes()),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.n)),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.e)),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.d)),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.p)),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.q)),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.dP)),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.dQ)),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.qInv))])};ft.publicKeyFromAsn1=function(t){var e={},r=[];if(fe.validate(t,W_e,e,r)){var i=fe.derToOid(e.publicKeyOid);if(i!==ft.oids.rsaEncryption){var n=new Error("Cannot read public key. Unknown OID.");throw n.oid=i,n}t=e.rsaPublicKey}if(r=[],!fe.validate(t,G_e,e,r)){var n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw n.errors=r,n}var s=ut.util.createBuffer(e.publicKeyModulus).toHex(),o=ut.util.createBuffer(e.publicKeyExponent).toHex();return ft.setRsaPublicKey(new Mt(s,16),new Mt(o,16))};ft.publicKeyToAsn1=ft.publicKeyToSubjectPublicKeyInfo=function(t){return fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.OID,!1,fe.oidToDer(ft.oids.rsaEncryption).getBytes()),fe.create(fe.Class.UNIVERSAL,fe.Type.NULL,!1,"")]),fe.create(fe.Class.UNIVERSAL,fe.Type.BITSTRING,!1,[ft.publicKeyToRSAPublicKey(t)])])};ft.publicKeyToRSAPublicKey=function(t){return fe.create(fe.Class.UNIVERSAL,fe.Type.SEQUENCE,!0,[fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.n)),fe.create(fe.Class.UNIVERSAL,fe.Type.INTEGER,!1,Ga(t.e))])};function bj(t,e,r){var i=ut.util.createBuffer(),n=Math.ceil(e.n.bitLength()/8);if(t.length>n-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=n-11,s}i.putByte(0),i.putByte(r);var o=n-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<o;++c)i.putByte(a)}else for(;o>0;){for(var u=0,f=ut.random.getBytes(o),c=0;c<o;++c)a=f.charCodeAt(c),a===0?++u:i.putByte(a);o=u}return i.putByte(0),i.putBytes(t),i}function v4(t,e,r,i){var n=Math.ceil(e.n.bitLength()/8),s=ut.util.createBuffer(t),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof i=="undefined")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=n-3-i;for(var u=0;u<c;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c}else if(a===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c}var f=s.getByte();if(f!==0||c!==n-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function X_e(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var i={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(i.prng=e.prng),n();function n(){s(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return o(a,t.q);s(t.qBits,o)})}function s(a,c){ut.prime.generateProbablePrime(a,i,c)}function o(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Mt.ONE).gcd(t.e).compareTo(Mt.ONE)!==0){t.p=null,n();return}if(t.q.subtract(Mt.ONE).gcd(t.e).compareTo(Mt.ONE)!==0){t.q=null,s(t.qBits,o);return}if(t.p1=t.p.subtract(Mt.ONE),t.q1=t.q.subtract(Mt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Mt.ONE)!==0){t.p=t.q=null,n();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,o);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:ft.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ft.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function Ga(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=ut.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function Q_e(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function vj(t){return ut.util.isNodejs&&typeof z_[t]=="function"}function wj(t){return typeof Xs.globalScope!="undefined"&&typeof Xs.globalScope.crypto=="object"&&typeof Xs.globalScope.crypto.subtle=="object"&&typeof Xs.globalScope.crypto.subtle[t]=="function"}function _j(t){return typeof Xs.globalScope!="undefined"&&typeof Xs.globalScope.msCrypto=="object"&&typeof Xs.globalScope.msCrypto.subtle=="object"&&typeof Xs.globalScope.msCrypto.subtle[t]=="function"}function Ej(t){for(var e=ut.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),i=0;i<e.length;++i)r[i]=e.charCodeAt(i);return r}});var H_=v((hot,Rj)=>{l();var je=yt();P0();iu();f4();Ef();I0();N_();p4();Sf();Jq();ky();or();typeof xj=="undefined"&&(xj=je.jsbn.BigInteger);var xj,ye=je.asn1,ht=je.pki=je.pki||{};Rj.exports=ht.pbe=je.pbe=je.pbe||{};var Xl=ht.oids,Z_e={name:"EncryptedPrivateKeyInfo",tagClass:ye.Class.UNIVERSAL,type:ye.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ye.Class.UNIVERSAL,type:ye.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ye.Class.UNIVERSAL,type:ye.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ye.Class.UNIVERSAL,type:ye.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ye.Class.UNIVERSAL,type:ye.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},J_e={name:"PBES2Algorithms",tagClass:ye.Class.UNIVERSAL,type:ye.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ye.Class.UNIVERSAL,type:ye.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ye.Class.UNIVERSAL,type:ye.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ye.Class.UNIVERSAL,type:ye.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ye.Class.UNIVERSAL,type:ye.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ye.Class.UNIVERSAL,type:ye.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ye.Class.UNIVERSAL,type:ye.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ye.Class.UNIVERSAL,type:ye.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ye.Class.UNIVERSAL,type:ye.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ye.Class.UNIVERSAL,type:ye.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ye.Class.UNIVERSAL,type:ye.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ye.Class.UNIVERSAL,type:ye.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},eEe={name:"pkcs-12PbeParams",tagClass:ye.Class.UNIVERSAL,type:ye.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ye.Class.UNIVERSAL,type:ye.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ye.Class.UNIVERSAL,type:ye.Type.INTEGER,constructed:!1,capture:"iterations"}]};ht.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i=je.random.getBytesSync(r.saltSize),n=r.count,s=ye.integerToDer(n),o,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,d;switch(r.algorithm){case"aes128":o=16,u=16,f=Xl["aes128-CBC"],d=je.aes.createEncryptionCipher;break;case"aes192":o=24,u=16,f=Xl["aes192-CBC"],d=je.aes.createEncryptionCipher;break;case"aes256":o=32,u=16,f=Xl["aes256-CBC"],d=je.aes.createEncryptionCipher;break;case"des":o=8,u=8,f=Xl.desCBC,d=je.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),y=Tj(p),m=je.pkcs5.pbkdf2(e,i,n,o,y),w=je.random.getBytesSync(u),b=d(m);b.start(w),b.update(ye.toDer(t)),b.finish(),c=b.output.getBytes();var S=tEe(i,s,o,p);a=ye.create(ye.Class.UNIVERSAL,ye.Type.SEQUENCE,!0,[ye.create(ye.Class.UNIVERSAL,ye.Type.OID,!1,ye.oidToDer(Xl.pkcs5PBES2).getBytes()),ye.create(ye.Class.UNIVERSAL,ye.Type.SEQUENCE,!0,[ye.create(ye.Class.UNIVERSAL,ye.Type.SEQUENCE,!0,[ye.create(ye.Class.UNIVERSAL,ye.Type.OID,!1,ye.oidToDer(Xl.pkcs5PBKDF2).getBytes()),S]),ye.create(ye.Class.UNIVERSAL,ye.Type.SEQUENCE,!0,[ye.create(ye.Class.UNIVERSAL,ye.Type.OID,!1,ye.oidToDer(f).getBytes()),ye.create(ye.Class.UNIVERSAL,ye.Type.OCTETSTRING,!1,w)])])])}else if(r.algorithm==="3des"){o=24;var I=new je.util.ByteBuffer(i),m=ht.pbe.generatePkcs12Key(e,I,1,n,o),w=ht.pbe.generatePkcs12Key(e,I,2,n,o),b=je.des.createEncryptionCipher(m);b.start(w),b.update(ye.toDer(t)),b.finish(),c=b.output.getBytes(),a=ye.create(ye.Class.UNIVERSAL,ye.Type.SEQUENCE,!0,[ye.create(ye.Class.UNIVERSAL,ye.Type.OID,!1,ye.oidToDer(Xl["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ye.create(ye.Class.UNIVERSAL,ye.Type.SEQUENCE,!0,[ye.create(ye.Class.UNIVERSAL,ye.Type.OCTETSTRING,!1,i),ye.create(ye.Class.UNIVERSAL,ye.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var j=ye.create(ye.Class.UNIVERSAL,ye.Type.SEQUENCE,!0,[a,ye.create(ye.Class.UNIVERSAL,ye.Type.OCTETSTRING,!1,c)]);return j};ht.decryptPrivateKeyInfo=function(t,e){var r=null,i={},n=[];if(!ye.validate(t,Z_e,i,n)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var o=ye.derToOid(i.encryptionOid),a=ht.pbe.getCipher(o,i.encryptionParams,e),c=je.util.createBuffer(i.encryptedData);return a.update(c),a.finish()&&(r=ye.fromDer(a.output)),r};ht.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:ye.toDer(t).getBytes()};return je.pem.encode(r,{maxline:e})};ht.encryptedPrivateKeyFromPem=function(t){var e=je.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ye.fromDer(e.body)};ht.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var i=ht.wrapRsaPrivateKey(ht.privateKeyToAsn1(t));return i=ht.encryptPrivateKeyInfo(i,e,r),ht.encryptedPrivateKeyToPem(i)}var n,s,o,a;switch(r.algorithm){case"aes128":n="AES-128-CBC",o=16,s=je.random.getBytesSync(16),a=je.aes.createEncryptionCipher;break;case"aes192":n="AES-192-CBC",o=24,s=je.random.getBytesSync(16),a=je.aes.createEncryptionCipher;break;case"aes256":n="AES-256-CBC",o=32,s=je.random.getBytesSync(16),a=je.aes.createEncryptionCipher;break;case"3des":n="DES-EDE3-CBC",o=24,s=je.random.getBytesSync(8),a=je.des.createEncryptionCipher;break;case"des":n="DES-CBC",o=8,s=je.random.getBytesSync(8),a=je.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=je.pbe.opensslDeriveBytes(e,s.substr(0,8),o),f=a(u);f.start(s),f.update(ye.toDer(ht.privateKeyToAsn1(t))),f.finish();var d={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:n,parameters:je.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return je.pem.encode(d)};ht.decryptRsaPrivateKey=function(t,e){var r=null,i=je.pem.decode(t)[0];if(i.type!=="ENCRYPTED PRIVATE KEY"&&i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw n.headerType=n,n}if(i.procType&&i.procType.type==="ENCRYPTED"){var s,o;switch(i.dekInfo.algorithm){case"DES-CBC":s=8,o=je.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=je.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=je.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=je.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=je.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(d){return je.rc2.createDecryptionCipher(d,40)};break;case"RC2-64-CBC":s=8,o=function(d){return je.rc2.createDecryptionCipher(d,64)};break;case"RC2-128-CBC":s=16,o=function(d){return je.rc2.createDecryptionCipher(d,128)};break;default:var n=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw n.algorithm=i.dekInfo.algorithm,n}var a=je.util.hexToBytes(i.dekInfo.parameters),c=je.pbe.opensslDeriveBytes(e,a.substr(0,8),s),u=o(c);if(u.start(a),u.update(je.util.createBuffer(i.body)),u.finish())r=u.output.getBytes();else return r}else r=i.body;return i.type==="ENCRYPTED PRIVATE KEY"?r=ht.decryptPrivateKeyInfo(ye.fromDer(r),e):r=ye.fromDer(r),r!==null&&(r=ht.privateKeyFromAsn1(r)),r};ht.pbe.generatePkcs12Key=function(t,e,r,i,n,s){var o,a;if(typeof s=="undefined"||s===null){if(!("sha1"in je.md))throw new Error('"sha1" hash algorithm unavailable.');s=je.md.sha1.create()}var c=s.digestLength,u=s.blockLength,f=new je.util.ByteBuffer,d=new je.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)d.putInt16(t.charCodeAt(a));d.putInt16(0)}var h=d.length(),p=e.length(),y=new je.util.ByteBuffer;y.fillWithByte(r,u);var m=u*Math.ceil(p/u),w=new je.util.ByteBuffer;for(a=0;a<m;a++)w.putByte(e.at(a%p));var b=u*Math.ceil(h/u),S=new je.util.ByteBuffer;for(a=0;a<b;a++)S.putByte(d.at(a%h));var I=w;I.putBuffer(S);for(var j=Math.ceil(n/c),B=1;B<=j;B++){var C=new je.util.ByteBuffer;C.putBytes(y.bytes()),C.putBytes(I.bytes());for(var z=0;z<i;z++)s.start(),s.update(C.getBytes()),C=s.digest();var W=new je.util.ByteBuffer;for(a=0;a<u;a++)W.putByte(C.at(a%c));var X=Math.ceil(p/u)+Math.ceil(h/u),P=new je.util.ByteBuffer;for(o=0;o<X;o++){var g=new je.util.ByteBuffer(I.getBytes(u)),_=511;for(a=W.length()-1;a>=0;a--)_=_>>8,_+=W.at(a)+g.at(a),g.setAt(a,_&255);P.putBuffer(g)}I=P,f.putBuffer(C)}return f.truncate(f.length()-n),f};ht.pbe.getCipher=function(t,e,r){switch(t){case ht.oids.pkcs5PBES2:return ht.pbe.getCipherForPBES2(t,e,r);case ht.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ht.oids["pbewithSHAAnd40BitRC2-CBC"]:return ht.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}};ht.pbe.getCipherForPBES2=function(t,e,r){var i={},n=[];if(!ye.validate(e,J_e,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}if(t=ye.derToOid(i.kdfOid),t!==ht.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=ye.derToOid(i.encOid),t!==ht.oids["aes128-CBC"]&&t!==ht.oids["aes192-CBC"]&&t!==ht.oids["aes256-CBC"]&&t!==ht.oids["des-EDE3-CBC"]&&t!==ht.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=i.kdfSalt,a=je.util.createBuffer(i.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(ht.oids[t]){case"aes128-CBC":c=16,u=je.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=je.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=je.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=je.des.createDecryptionCipher;break;case"desCBC":c=8,u=je.des.createDecryptionCipher;break}var f=Ij(i.prfOid),d=je.pkcs5.pbkdf2(r,o,a,c,f),h=i.encIv,p=u(d);return p.start(h),p};ht.pbe.getCipherForPKCS12PBE=function(t,e,r){var i={},n=[];if(!ye.validate(e,eEe,i,n)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=n,s}var o=je.util.createBuffer(i.salt),a=je.util.createBuffer(i.iterations);a=a.getInt(a.length()<<3);var c,u,f;switch(t){case ht.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,f=je.des.startDecrypting;break;case ht.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,f=function(m,w){var b=je.rc2.createDecryptionCipher(m,40);return b.start(w,null),b};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var d=Ij(i.prfOid),h=ht.pbe.generatePkcs12Key(r,o,1,a,c,d);d.start();var p=ht.pbe.generatePkcs12Key(r,o,2,a,u,d);return f(h,p)};ht.pbe.opensslDeriveBytes=function(t,e,r,i){if(typeof i=="undefined"||i===null){if(!("md5"in je.md))throw new Error('"md5" hash algorithm unavailable.');i=je.md.md5.create()}e===null&&(e="");for(var n=[Aj(i,t+e)],s=16,o=1;s<r;++o,s+=16)n.push(Aj(i,n[o-1]+t+e));return n.join("").substr(0,r)};function Aj(t,e){return t.start().update(e).digest().getBytes()}function Ij(t){var e;if(!t)e="hmacWithSHA1";else if(e=ht.oids[ye.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Tj(e)}function Tj(t){var e=je.md;switch(t){case"hmacWithSHA224":e=je.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function tEe(t,e,r,i){var n=ye.create(ye.Class.UNIVERSAL,ye.Type.SEQUENCE,!0,[ye.create(ye.Class.UNIVERSAL,ye.Type.OCTETSTRING,!1,t),ye.create(ye.Class.UNIVERSAL,ye.Type.INTEGER,!1,e.getBytes())]);return i!=="hmacWithSHA1"&&n.value.push(ye.create(ye.Class.UNIVERSAL,ye.Type.INTEGER,!1,je.util.hexToBytes(r.toString(16))),ye.create(ye.Class.UNIVERSAL,ye.Type.SEQUENCE,!0,[ye.create(ye.Class.UNIVERSAL,ye.Type.OID,!1,ye.oidToDer(ht.oids[i]).getBytes()),ye.create(ye.Class.UNIVERSAL,ye.Type.NULL,!1,"")])),n}});var Yo=v((pot,Cj)=>{l();"use strict";function Pj(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function rEe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Pj(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Pj(new n,r)}}Cj.exports=rEe});var Dy=v(Oj=>{l();"use strict";Oj.get=(t=self)=>{let e=t.crypto||t.msCrypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var $_=v((got,Dj)=>{l();"use strict";var{concat:iEe}=(bn(),Gs),{fromString:kj}=(dt(),bi),nEe=Dy();function sEe({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:i="SHA-256",saltLength:n=16,iterations:s=32767}={}){let o=nEe.get();r*=8;async function a(u,f){let d=o.getRandomValues(new Uint8Array(n)),h=o.getRandomValues(new Uint8Array(e)),p={name:t,iv:h},y={name:"PBKDF2",salt:d,iterations:s,hash:{name:i}},m=await o.subtle.importKey("raw",kj(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),w=await o.subtle.deriveKey(y,m,{name:t,length:r},!0,["encrypt"]),b=await o.subtle.encrypt(p,w,u);return iEe([d,p.iv,new Uint8Array(b)])}async function c(u,f){let d=u.slice(0,n),h=u.slice(n,n+e),p=u.slice(n+e),y={name:t,iv:h},m={name:"PBKDF2",salt:d,iterations:s,hash:{name:i}},w=await o.subtle.importKey("raw",kj(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),b=await o.subtle.deriveKey(m,w,{name:t,length:r},!0,["decrypt"]),S=await o.subtle.decrypt(y,b,p);return new Uint8Array(S)}return{encrypt:a,decrypt:c}}Dj.exports={create:sEe}});var Nj=v((mot,Bj)=>{l();"use strict";var{base64:oEe}=(cy(),u0),aEe=$_();Bj.exports={import:async function(t,e){let r=oEe.decode(t);return await aEe.create().decrypt(r,e)}}});var w4=v((bot,jj)=>{l();var Ar=yt();Ef();or();var By=jj.exports=Ar.sha512=Ar.sha512||{};Ar.md.sha512=Ar.md.algorithms.sha512=By;var Mj=Ar.sha384=Ar.sha512.sha384=Ar.sha512.sha384||{};Mj.create=function(){return By.create("SHA-384")};Ar.md.sha384=Ar.md.algorithms.sha384=Mj;Ar.sha512.sha256=Ar.sha512.sha256||{create:function(){return By.create("SHA-512/256")}};Ar.md["sha512/256"]=Ar.md.algorithms["sha512/256"]=Ar.sha512.sha256;Ar.sha512.sha224=Ar.sha512.sha224||{create:function(){return By.create("SHA-512/224")}};Ar.md["sha512/224"]=Ar.md.algorithms["sha512/224"]=Ar.sha512.sha224;By.create=function(t){if(Lj||cEe(),typeof t=="undefined"&&(t="SHA-512"),!(t in Ql))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Ql[t],r=null,i=Ar.util.createBuffer(),n=new Array(80),s=0;s<80;++s)n[s]=new Array(2);var o=64;switch(t){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);i=Ar.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=Ar.util.encodeUtf8(c));var f=c.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=f[1],f[1]=f[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,f[0]=f[1]/4294967296>>>0;return i.putBytes(c),qj(r,n,i),(i.read>2048||i.length()===0)&&i.compact(),a},a.digest=function(){var c=Ar.util.createBuffer();c.putBytes(i.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=u&a.blockLength-1;c.putBytes(G_.substr(0,a.blockLength-f));for(var d,h,p=a.fullMessageLength[0]*8,y=0;y<a.fullMessageLength.length-1;++y)d=a.fullMessageLength[y+1]*8,h=d/4294967296>>>0,p+=h,c.putInt32(p>>>0),p=d>>>0;c.putInt32(p);for(var m=new Array(r.length),y=0;y<r.length;++y)m[y]=r[y].slice(0);qj(m,n,c);var w=Ar.util.createBuffer(),b;t==="SHA-512"?b=m.length:t==="SHA-384"?b=m.length-2:b=m.length-4;for(var y=0;y<b;++y)w.putInt32(m[y][0]),(y!==b-1||t!=="SHA-512/224")&&w.putInt32(m[y][1]);return w},a};var G_=null,Lj=!1,W_=null,Ql=null;function cEe(){G_=String.fromCharCode(128),G_+=Ar.util.fillString(String.fromCharCode(0),128),W_=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Ql={},Ql["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Ql["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Ql["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Ql["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Lj=!0}function qj(t,e,r){for(var i,n,s,o,a,c,u,f,d,h,p,y,m,w,b,S,I,j,B,C,z,W,X,P,g,_,x,O,L,Y,V,q,E,U,de,Q=r.length();Q>=128;){for(L=0;L<16;++L)e[L][0]=r.getInt32()>>>0,e[L][1]=r.getInt32()>>>0;for(;L<80;++L)q=e[L-2],Y=q[0],V=q[1],i=((Y>>>19|V<<13)^(V>>>29|Y<<3)^Y>>>6)>>>0,n=((Y<<13|V>>>19)^(V<<3|Y>>>29)^(Y<<26|V>>>6))>>>0,U=e[L-15],Y=U[0],V=U[1],s=((Y>>>1|V<<31)^(Y>>>8|V<<24)^Y>>>7)>>>0,o=((Y<<31|V>>>1)^(Y<<24|V>>>8)^(Y<<25|V>>>7))>>>0,E=e[L-7],de=e[L-16],V=n+E[1]+o+de[1],e[L][0]=i+E[0]+s+de[0]+(V/4294967296>>>0)>>>0,e[L][1]=V>>>0;for(m=t[0][0],w=t[0][1],b=t[1][0],S=t[1][1],I=t[2][0],j=t[2][1],B=t[3][0],C=t[3][1],z=t[4][0],W=t[4][1],X=t[5][0],P=t[5][1],g=t[6][0],_=t[6][1],x=t[7][0],O=t[7][1],L=0;L<80;++L)u=((z>>>14|W<<18)^(z>>>18|W<<14)^(W>>>9|z<<23))>>>0,f=((z<<18|W>>>14)^(z<<14|W>>>18)^(W<<23|z>>>9))>>>0,d=(g^z&(X^g))>>>0,h=(_^W&(P^_))>>>0,a=((m>>>28|w<<4)^(w>>>2|m<<30)^(w>>>7|m<<25))>>>0,c=((m<<4|w>>>28)^(w<<30|m>>>2)^(w<<25|m>>>7))>>>0,p=(m&b|I&(m^b))>>>0,y=(w&S|j&(w^S))>>>0,V=O+f+h+W_[L][1]+e[L][1],i=x+u+d+W_[L][0]+e[L][0]+(V/4294967296>>>0)>>>0,n=V>>>0,V=c+y,s=a+p+(V/4294967296>>>0)>>>0,o=V>>>0,x=g,O=_,g=X,_=P,X=z,P=W,V=C+n,z=B+i+(V/4294967296>>>0)>>>0,W=V>>>0,B=I,C=j,I=b,j=S,b=m,S=w,V=n+o,m=i+s+(V/4294967296>>>0)>>>0,w=V>>>0;V=t[0][1]+w,t[0][0]=t[0][0]+m+(V/4294967296>>>0)>>>0,t[0][1]=V>>>0,V=t[1][1]+S,t[1][0]=t[1][0]+b+(V/4294967296>>>0)>>>0,t[1][1]=V>>>0,V=t[2][1]+j,t[2][0]=t[2][0]+I+(V/4294967296>>>0)>>>0,t[2][1]=V>>>0,V=t[3][1]+C,t[3][0]=t[3][0]+B+(V/4294967296>>>0)>>>0,t[3][1]=V>>>0,V=t[4][1]+W,t[4][0]=t[4][0]+z+(V/4294967296>>>0)>>>0,t[4][1]=V>>>0,V=t[5][1]+P,t[5][0]=t[5][0]+X+(V/4294967296>>>0)>>>0,t[5][1]=V>>>0,V=t[6][1]+_,t[6][0]=t[6][0]+g+(V/4294967296>>>0)>>>0,t[6][1]=V>>>0,V=t[7][1]+O,t[7][0]=t[7][0]+x+(V/4294967296>>>0)>>>0,t[7][1]=V>>>0,Q-=128}}});var Uj=v(Y_=>{l();var uEe=yt();iu();var Yi=uEe.asn1;Y_.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Yi.Class.UNIVERSAL,type:Yi.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Yi.Class.UNIVERSAL,type:Yi.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Yi.Class.UNIVERSAL,type:Yi.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Yi.Class.UNIVERSAL,type:Yi.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Yi.Class.UNIVERSAL,type:Yi.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Y_.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Yi.Class.UNIVERSAL,type:Yi.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Yi.Class.UNIVERSAL,type:Yi.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Yi.Class.UNIVERSAL,type:Yi.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Yi.Class.UNIVERSAL,type:Yi.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var nE=v((wot,Zj)=>{l();var sn=yt();Oy();Sf();w4();or();var Fj=Uj(),fEe=Fj.publicKeyValidator,lEe=Fj.privateKeyValidator;typeof Kj=="undefined"&&(Kj=sn.jsbn.BigInteger);var Kj,X_=sn.util.ByteBuffer,rs=typeof Buffer=="undefined"?Uint8Array:Buffer;sn.pki=sn.pki||{};Zj.exports=sn.pki.ed25519=sn.ed25519=sn.ed25519||{};var St=sn.ed25519;St.constants={};St.constants.PUBLIC_KEY_BYTE_LENGTH=32;St.constants.PRIVATE_KEY_BYTE_LENGTH=64;St.constants.SEED_BYTE_LENGTH=32;St.constants.SIGN_BYTE_LENGTH=64;St.constants.HASH_BYTE_LENGTH=64;St.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=sn.random.getBytesSync(St.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==St.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+St.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=au({message:e,encoding:"binary"});for(var r=new rs(St.constants.PUBLIC_KEY_BYTE_LENGTH),i=new rs(St.constants.PRIVATE_KEY_BYTE_LENGTH),n=0;n<32;++n)i[n]=e[n];return yEe(r,i),{publicKey:r,privateKey:i}};St.privateKeyFromAsn1=function(t){var e={},r=[],i=sn.asn1.validate(t,lEe,e,r);if(!i){var n=new Error("Invalid Key.");throw n.errors=r,n}var s=sn.asn1.derToOid(e.privateKeyOid),o=sn.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID "'+s+'"; OID must be "'+o+'".');var a=e.privateKey,c=au({message:sn.asn1.fromDer(a).value,encoding:"binary"});return{privateKeyBytes:c}};St.publicKeyFromAsn1=function(t){var e={},r=[],i=sn.asn1.validate(t,fEe,e,r);if(!i){var n=new Error("Invalid Key.");throw n.errors=r,n}var s=sn.asn1.derToOid(e.publicKeyOid),o=sn.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID "'+s+'"; OID must be "'+o+'".');var a=e.ed25519PublicKey;if(a.length!==St.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return au({message:a,encoding:"binary"})};St.publicKeyFromPrivateKey=function(t){t=t||{};var e=au({message:t.privateKey,encoding:"binary"});if(e.length!==St.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+St.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new rs(St.constants.PUBLIC_KEY_BYTE_LENGTH),i=0;i<r.length;++i)r[i]=e[32+i];return r};St.sign=function(t){t=t||{};var e=au(t),r=au({message:t.privateKey,encoding:"binary"});if(r.length===St.constants.SEED_BYTE_LENGTH){var i=St.generateKeyPair({seed:r});r=i.privateKey}else if(r.length!==St.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+St.constants.SEED_BYTE_LENGTH+" or "+St.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new rs(St.constants.SIGN_BYTE_LENGTH+e.length);gEe(n,e,e.length,r);for(var s=new rs(St.constants.SIGN_BYTE_LENGTH),o=0;o<s.length;++o)s[o]=n[o];return s};St.verify=function(t){t=t||{};var e=au(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=au({message:t.signature,encoding:"binary"});if(r.length!==St.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+St.constants.SIGN_BYTE_LENGTH);var i=au({message:t.publicKey,encoding:"binary"});if(i.length!==St.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+St.constants.PUBLIC_KEY_BYTE_LENGTH);var n=new rs(St.constants.SIGN_BYTE_LENGTH+e.length),s=new rs(St.constants.SIGN_BYTE_LENGTH+e.length),o;for(o=0;o<St.constants.SIGN_BYTE_LENGTH;++o)n[o]=r[o];for(o=0;o<e.length;++o)n[o+St.constants.SIGN_BYTE_LENGTH]=e[o];return mEe(s,n,n.length,i)>=0};function au(t){var e=t.message;if(e instanceof Uint8Array||e instanceof rs)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new X_(e,r)}else if(!(e instanceof X_))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var i=new rs(e.length()),n=0;n<i.length;++n)i[n]=e.at(n);return i}var Q_=Je(),_4=Je([1]),dEe=Je([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),hEe=Je([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Vj=Je([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),zj=Je([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Z_=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),pEe=Je([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Ny(t,e){var r=sn.md.sha512.create(),i=new X_(t);r.update(i.getBytes(e),"binary");var n=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(n,"binary");for(var s=new rs(St.constants.HASH_BYTE_LENGTH),o=0;o<64;++o)s[o]=n.charCodeAt(o);return s}function yEe(t,e){var r=[Je(),Je(),Je(),Je()],i,n=Ny(e,32);for(n[0]&=248,n[31]&=127,n[31]|=64,rE(r,n),tE(t,r),i=0;i<32;++i)e[i+32]=t[i];return 0}function gEe(t,e,r,i){var n,s,o=new Float64Array(64),a=[Je(),Je(),Je(),Je()],c=Ny(i,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=r+64;for(n=0;n<r;++n)t[64+n]=e[n];for(n=0;n<32;++n)t[32+n]=c[32+n];var f=Ny(t.subarray(32),r+32);for(J_(f),rE(a,f),tE(t,a),n=32;n<64;++n)t[n]=i[n];var d=Ny(t,r+64);for(J_(d),n=32;n<64;++n)o[n]=0;for(n=0;n<32;++n)o[n]=f[n];for(n=0;n<32;++n)for(s=0;s<32;s++)o[n+s]+=d[n]*c[s];return Hj(t.subarray(32),o),u}function mEe(t,e,r,i){var n,s,o=new rs(32),a=[Je(),Je(),Je(),Je()],c=[Je(),Je(),Je(),Je()];if(s=-1,r<64||bEe(c,i))return-1;for(n=0;n<r;++n)t[n]=e[n];for(n=0;n<32;++n)t[n+32]=i[n];var u=Ny(t,r);if(J_(u),Xj(a,c,u),rE(c,e.subarray(32)),eE(a,c),tE(o,a),r-=64,Wj(e,0,o,0)){for(n=0;n<r;++n)t[n]=0;return-1}for(n=0;n<r;++n)t[n]=e[n+64];return s=r,s}function Hj(t,e){var r,i,n,s;for(i=63;i>=32;--i){for(r=0,n=i-32,s=i-12;n<s;++n)e[n]+=r-16*e[i]*Z_[n-(i-32)],r=e[n]+128>>8,e[n]-=r*256;e[n]+=r,e[i]=0}for(r=0,n=0;n<32;++n)e[n]+=r-(e[31]>>4)*Z_[n],r=e[n]>>8,e[n]&=255;for(n=0;n<32;++n)e[n]-=r*Z_[n];for(i=0;i<32;++i)e[i+1]+=e[i]>>8,t[i]=e[i]&255}function J_(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;Hj(t,e)}function eE(t,e){var r=Je(),i=Je(),n=Je(),s=Je(),o=Je(),a=Je(),c=Je(),u=Je(),f=Je();B0(r,t[1],t[0]),B0(f,e[1],e[0]),ar(r,r,f),D0(i,t[0],t[1]),D0(f,e[0],e[1]),ar(i,i,f),ar(n,t[3],e[3]),ar(n,n,hEe),ar(s,t[2],e[2]),D0(s,s,s),B0(o,i,r),B0(a,s,n),D0(c,s,n),D0(u,i,r),ar(t[0],o,a),ar(t[1],u,c),ar(t[2],c,a),ar(t[3],o,u)}function $j(t,e,r){for(var i=0;i<4;++i)Qj(t[i],e[i],r)}function tE(t,e){var r=Je(),i=Je(),n=Je();EEe(n,e[2]),ar(r,e[0],n),ar(i,e[1],n),E4(t,i),t[31]^=Yj(r)<<7}function E4(t,e){var r,i,n,s=Je(),o=Je();for(r=0;r<16;++r)o[r]=e[r];for(iE(o),iE(o),iE(o),i=0;i<2;++i){for(s[0]=o[0]-65517,r=1;r<15;++r)s[r]=o[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=o[15]-32767-(s[14]>>16&1),n=s[15]>>16&1,s[14]&=65535,Qj(o,s,1-n)}for(r=0;r<16;r++)t[2*r]=o[r]&255,t[2*r+1]=o[r]>>8}function bEe(t,e){var r=Je(),i=Je(),n=Je(),s=Je(),o=Je(),a=Je(),c=Je();return If(t[2],_4),vEe(t[1],e),Zl(n,t[1]),ar(s,n,dEe),B0(n,n,t[2]),D0(s,t[2],s),Zl(o,s),Zl(a,o),ar(c,a,o),ar(r,c,n),ar(r,r,s),wEe(r,r),ar(r,r,n),ar(r,r,s),ar(r,r,s),ar(t[0],r,s),Zl(i,t[0]),ar(i,i,s),Gj(i,n)&&ar(t[0],t[0],pEe),Zl(i,t[0]),ar(i,i,s),Gj(i,n)?-1:(Yj(t[0])===e[31]>>7&&B0(t[0],Q_,t[0]),ar(t[3],t[0],t[1]),0)}function vEe(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function wEe(t,e){var r=Je(),i;for(i=0;i<16;++i)r[i]=e[i];for(i=250;i>=0;--i)Zl(r,r),i!==1&&ar(r,r,e);for(i=0;i<16;++i)t[i]=r[i]}function Gj(t,e){var r=new rs(32),i=new rs(32);return E4(r,t),E4(i,e),Wj(r,0,i,0)}function Wj(t,e,r,i){return _Ee(t,e,r,i,32)}function _Ee(t,e,r,i,n){var s,o=0;for(s=0;s<n;++s)o|=t[e+s]^r[i+s];return(1&o-1>>>8)-1}function Yj(t){var e=new rs(32);return E4(e,t),e[0]&1}function Xj(t,e,r){var i,n;for(If(t[0],Q_),If(t[1],_4),If(t[2],_4),If(t[3],Q_),n=255;n>=0;--n)i=r[n/8|0]>>(n&7)&1,$j(t,e,i),eE(e,t),eE(t,t),$j(t,e,i)}function rE(t,e){var r=[Je(),Je(),Je(),Je()];If(r[0],Vj),If(r[1],zj),If(r[2],_4),ar(r[3],Vj,zj),Xj(t,r,e)}function If(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function EEe(t,e){var r=Je(),i;for(i=0;i<16;++i)r[i]=e[i];for(i=253;i>=0;--i)Zl(r,r),i!==2&&i!==4&&ar(r,r,e);for(i=0;i<16;++i)t[i]=r[i]}function iE(t){var e,r,i=1;for(e=0;e<16;++e)r=t[e]+i+65535,i=Math.floor(r/65536),t[e]=r-i*65536;t[0]+=i-1+37*(i-1)}function Qj(t,e,r){for(var i,n=~(r-1),s=0;s<16;++s)i=n&(t[s]^e[s]),t[s]^=i,e[s]^=i}function Je(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function D0(t,e,r){for(var i=0;i<16;++i)t[i]=e[i]+r[i]}function B0(t,e,r){for(var i=0;i<16;++i)t[i]=e[i]-r[i]}function Zl(t,e){ar(t,e,e)}function ar(t,e,r){var i,n,s=0,o=0,a=0,c=0,u=0,f=0,d=0,h=0,p=0,y=0,m=0,w=0,b=0,S=0,I=0,j=0,B=0,C=0,z=0,W=0,X=0,P=0,g=0,_=0,x=0,O=0,L=0,Y=0,V=0,q=0,E=0,U=r[0],de=r[1],Q=r[2],ue=r[3],le=r[4],me=r[5],be=r[6],xe=r[7],D=r[8],K=r[9],G=r[10],ee=r[11],T=r[12],F=r[13],H=r[14],M=r[15];i=e[0],s+=i*U,o+=i*de,a+=i*Q,c+=i*ue,u+=i*le,f+=i*me,d+=i*be,h+=i*xe,p+=i*D,y+=i*K,m+=i*G,w+=i*ee,b+=i*T,S+=i*F,I+=i*H,j+=i*M,i=e[1],o+=i*U,a+=i*de,c+=i*Q,u+=i*ue,f+=i*le,d+=i*me,h+=i*be,p+=i*xe,y+=i*D,m+=i*K,w+=i*G,b+=i*ee,S+=i*T,I+=i*F,j+=i*H,B+=i*M,i=e[2],a+=i*U,c+=i*de,u+=i*Q,f+=i*ue,d+=i*le,h+=i*me,p+=i*be,y+=i*xe,m+=i*D,w+=i*K,b+=i*G,S+=i*ee,I+=i*T,j+=i*F,B+=i*H,C+=i*M,i=e[3],c+=i*U,u+=i*de,f+=i*Q,d+=i*ue,h+=i*le,p+=i*me,y+=i*be,m+=i*xe,w+=i*D,b+=i*K,S+=i*G,I+=i*ee,j+=i*T,B+=i*F,C+=i*H,z+=i*M,i=e[4],u+=i*U,f+=i*de,d+=i*Q,h+=i*ue,p+=i*le,y+=i*me,m+=i*be,w+=i*xe,b+=i*D,S+=i*K,I+=i*G,j+=i*ee,B+=i*T,C+=i*F,z+=i*H,W+=i*M,i=e[5],f+=i*U,d+=i*de,h+=i*Q,p+=i*ue,y+=i*le,m+=i*me,w+=i*be,b+=i*xe,S+=i*D,I+=i*K,j+=i*G,B+=i*ee,C+=i*T,z+=i*F,W+=i*H,X+=i*M,i=e[6],d+=i*U,h+=i*de,p+=i*Q,y+=i*ue,m+=i*le,w+=i*me,b+=i*be,S+=i*xe,I+=i*D,j+=i*K,B+=i*G,C+=i*ee,z+=i*T,W+=i*F,X+=i*H,P+=i*M,i=e[7],h+=i*U,p+=i*de,y+=i*Q,m+=i*ue,w+=i*le,b+=i*me,S+=i*be,I+=i*xe,j+=i*D,B+=i*K,C+=i*G,z+=i*ee,W+=i*T,X+=i*F,P+=i*H,g+=i*M,i=e[8],p+=i*U,y+=i*de,m+=i*Q,w+=i*ue,b+=i*le,S+=i*me,I+=i*be,j+=i*xe,B+=i*D,C+=i*K,z+=i*G,W+=i*ee,X+=i*T,P+=i*F,g+=i*H,_+=i*M,i=e[9],y+=i*U,m+=i*de,w+=i*Q,b+=i*ue,S+=i*le,I+=i*me,j+=i*be,B+=i*xe,C+=i*D,z+=i*K,W+=i*G,X+=i*ee,P+=i*T,g+=i*F,_+=i*H,x+=i*M,i=e[10],m+=i*U,w+=i*de,b+=i*Q,S+=i*ue,I+=i*le,j+=i*me,B+=i*be,C+=i*xe,z+=i*D,W+=i*K,X+=i*G,P+=i*ee,g+=i*T,_+=i*F,x+=i*H,O+=i*M,i=e[11],w+=i*U,b+=i*de,S+=i*Q,I+=i*ue,j+=i*le,B+=i*me,C+=i*be,z+=i*xe,W+=i*D,X+=i*K,P+=i*G,g+=i*ee,_+=i*T,x+=i*F,O+=i*H,L+=i*M,i=e[12],b+=i*U,S+=i*de,I+=i*Q,j+=i*ue,B+=i*le,C+=i*me,z+=i*be,W+=i*xe,X+=i*D,P+=i*K,g+=i*G,_+=i*ee,x+=i*T,O+=i*F,L+=i*H,Y+=i*M,i=e[13],S+=i*U,I+=i*de,j+=i*Q,B+=i*ue,C+=i*le,z+=i*me,W+=i*be,X+=i*xe,P+=i*D,g+=i*K,_+=i*G,x+=i*ee,O+=i*T,L+=i*F,Y+=i*H,V+=i*M,i=e[14],I+=i*U,j+=i*de,B+=i*Q,C+=i*ue,z+=i*le,W+=i*me,X+=i*be,P+=i*xe,g+=i*D,_+=i*K,x+=i*G,O+=i*ee,L+=i*T,Y+=i*F,V+=i*H,q+=i*M,i=e[15],j+=i*U,B+=i*de,C+=i*Q,z+=i*ue,W+=i*le,X+=i*me,P+=i*be,g+=i*xe,_+=i*D,x+=i*K,O+=i*G,L+=i*ee,Y+=i*T,V+=i*F,q+=i*H,E+=i*M,s+=38*B,o+=38*C,a+=38*z,c+=38*W,u+=38*X,f+=38*P,d+=38*g,h+=38*_,p+=38*x,y+=38*O,m+=38*L,w+=38*Y,b+=38*V,S+=38*q,I+=38*E,n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=b+n+65535,n=Math.floor(i/65536),b=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=j+n+65535,n=Math.floor(i/65536),j=i-n*65536,s+=n-1+37*(n-1),n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=b+n+65535,n=Math.floor(i/65536),b=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=j+n+65535,n=Math.floor(i/65536),j=i-n*65536,s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=f,t[6]=d,t[7]=h,t[8]=p,t[9]=y,t[10]=m,t[11]=w,t[12]=b,t[13]=S,t[14]=I,t[15]=j}});var eU=v((_ot,Jj)=>{l();"use strict";var S4=65536;function SEe(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>S4)for(;r<t;)r+S4>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+S4)),r+=S4);else crypto.getRandomValues(e);return e}Jj.exports=SEe});var My=v((Eot,tU)=>{l();"use strict";var xEe=eU(),AEe=Yo();tU.exports=function(t){if(isNaN(t)||t<=0)throw AEe(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return xEe(t)}});var x4=v(Ly=>{l();"use strict";or();Oy();var IEe=yt(),{fromString:TEe}=(dt(),bi),{toString:rU}=(tt(),pr),{concat:iU}=(bn(),Gs);Ly.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=iU([new Uint8Array(e-r.length),r])}return rU(r,"base64url")};Ly.base64urlToBigInteger=t=>{let e=Ly.base64urlToBuffer(t);return new IEe.jsbn.BigInteger(rU(e,"base16"),16)};Ly.base64urlToBuffer=(t,e)=>{let r=TEe(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=iU([new Uint8Array(e-r.length),r])}return r}});var oU=v(qy=>{l();"use strict";iu();ky();var Tf=yt(),{bigIntegerToUintBase64url:Wa,base64urlToBigInteger:Ya}=x4(),{fromString:nU}=(dt(),bi),{toString:sU}=(tt(),pr);qy.pkcs1ToJwk=function(t){let e=Tf.asn1.fromDer(sU(t,"ascii")),r=Tf.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Wa(r.n),e:Wa(r.e),d:Wa(r.d),p:Wa(r.p),q:Wa(r.q),dp:Wa(r.dP),dq:Wa(r.dQ),qi:Wa(r.qInv),alg:"RS256",kid:"2011-04-29"}};qy.jwkToPkcs1=function(t){let e=Tf.pki.privateKeyToAsn1({n:Ya(t.n),e:Ya(t.e),d:Ya(t.d),p:Ya(t.p),q:Ya(t.q),dP:Ya(t.dp),dQ:Ya(t.dq),qInv:Ya(t.qi)});return nU(Tf.asn1.toDer(e).getBytes(),"ascii")};qy.pkixToJwk=function(t){let e=Tf.asn1.fromDer(sU(t,"ascii")),r=Tf.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Wa(r.n),e:Wa(r.e),alg:"RS256",kid:"2011-04-29"}};qy.jwkToPkix=function(t){let e=Tf.pki.publicKeyToAsn1({n:Ya(t.n),e:Ya(t.e)});return nU(Tf.asn1.toDer(e).getBytes(),"ascii")}});var fU=v((Aot,uU)=>{l();"use strict";ky();var aU=yt(),{base64urlToBigInteger:REe}=x4();function cU(t,e){return e.map(r=>REe(t[r]))}function PEe(t){return aU.pki.setRsaPrivateKey(...cU(t,["n","e","d","p","q","dp","dq","qi"]))}function CEe(t){return aU.pki.setRsaPublicKey(...cU(t,["n","e"]))}uU.exports={jwk2pub:CEe,jwk2priv:PEe}});var hU=v(uu=>{l();"use strict";var cu=Dy(),OEe=My(),{toString:kEe}=(tt(),pr),{fromString:DEe}=(dt(),bi);uu.utils=oU();uu.generateKey=async function(t){let e=await cu.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await lU(e);return{privateKey:r[0],publicKey:r[1]}};uu.unmarshalPrivateKey=async function(t){let r=[await cu.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await BEe(t)],i=await lU({privateKey:r[0],publicKey:r[1]});return{privateKey:i[0],publicKey:i[1]}};uu.getRandomValues=OEe;uu.hashAndSign=async function(t,e){let r=await cu.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),i=await cu.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(i,i.byteOffset,i.byteLength)};uu.hashAndVerify=async function(t,e,r){let i=await cu.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return cu.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,e,r)};function lU(t){return Promise.all([cu.get().subtle.exportKey("jwk",t.privateKey),cu.get().subtle.exportKey("jwk",t.publicKey)])}function BEe(t){return cu.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:NEe,jwk2priv:MEe}=fU();function dU(t,e,r,i){let n=e?NEe(t):MEe(t),s=kEe(Uint8Array.from(r),"ascii"),o=i(s,n);return DEe(o,"ascii")}uu.encrypt=function(t,e){return dU(t,!0,e,(r,i)=>i.encrypt(r))};uu.decrypt=function(t,e){return dU(t,!1,e,(r,i)=>i.decrypt(r))}});var A4=v((Tot,pU)=>{l();"use strict";var{base64:LEe}=(cy(),u0),qEe=$_();pU.exports={export:async function(t,e){let i=await qEe.create().encrypt(t,e);return LEe.encode(i)}}});var vU=v((Rot,bU)=>{l();"use strict";var{sha256:yU}=(mi(),zs),gU=Yo(),{equals:mU}=(wi(),vn),{toString:jEe}=(tt(),pr);w4();nE();var I4=yt(),Qs=hU(),T4=r4(),UEe=A4(),R4=class{constructor(e){this._key=e}async verify(e,r){return Qs.hashAndVerify(this._key,r,e)}marshal(){return Qs.utils.jwkToPkix(this._key)}get bytes(){return T4.PublicKey.encode({Type:T4.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return Qs.encrypt(this._key,e)}equals(e){return mU(this.bytes,e.bytes)}async hash(){let{bytes:e}=await yU.digest(this.bytes);return e}},jy=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Qs.getRandomValues(16)}async sign(e){return Qs.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw gU(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new R4(this._publicKey)}decrypt(e){return Qs.decrypt(this._key,e)}marshal(){return Qs.utils.jwkToPkcs1(this._key)}get bytes(){return T4.PrivateKey.encode({Type:T4.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return mU(this.bytes,e.bytes)}async hash(){let{bytes:e}=await yU.digest(this.bytes);return e}async id(){let e=await this.public.hash();return jEe(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let i=new I4.util.ByteBuffer(this.marshal()),n=I4.asn1.fromDer(i),s=I4.pki.privateKeyFromAsn1(n),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return I4.pki.encryptRsaPrivateKey(s,e,o)}else{if(r==="libp2p-key")return UEe.export(this.bytes,e);throw gU(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function FEe(t){let e=Qs.utils.pkcs1ToJwk(t),r=await Qs.unmarshalPrivateKey(e);return new jy(r.privateKey,r.publicKey)}function KEe(t){let e=Qs.utils.pkixToJwk(t);return new R4(e)}async function VEe(t){let e=await Qs.unmarshalPrivateKey(t);return new jy(e.privateKey,e.publicKey)}async function zEe(t){let e=await Qs.generateKey(t);return new jy(e.privateKey,e.publicKey)}bU.exports={RsaPublicKey:R4,RsaPrivateKey:jy,unmarshalRsaPublicKey:KEe,unmarshalRsaPrivateKey:FEe,generateKeyPair:zEe,fromJwk:VEe}});var wU=v(Jl=>{l();"use strict";nE();var N0=yt();Jl.publicKeyLength=N0.pki.ed25519.constants.PUBLIC_KEY_BYTE_LENGTH;Jl.privateKeyLength=N0.pki.ed25519.constants.PRIVATE_KEY_BYTE_LENGTH;Jl.generateKey=async function(){return N0.pki.ed25519.generateKeyPair()};Jl.generateKeyFromSeed=async function(t){return N0.pki.ed25519.generateKeyPair({seed:t})};Jl.hashAndSign=async function(t,e){return N0.pki.ed25519.sign({message:e,privateKey:t})};Jl.hashAndVerify=async function(t,e,r){return N0.pki.ed25519.verify({signature:e,message:r,publicKey:t})}});var AU=v((Cot,xU)=>{l();"use strict";var _U=Yo(),{equals:EU}=(wi(),vn),{sha256:SU}=(mi(),zs),{base58btc:HEe}=(li(),Fs),{identity:$Ee}=(Jc(),ay),xn=wU(),P4=r4(),GEe=A4(),C4=class{constructor(e){this._key=L0(e,xn.publicKeyLength)}async verify(e,r){return xn.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return P4.PublicKey.encode({Type:P4.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return EU(this.bytes,e.bytes)}async hash(){let{bytes:e}=await SU.digest(this.bytes);return e}},M0=class{constructor(e,r){this._key=L0(e,xn.privateKeyLength),this._publicKey=L0(r,xn.publicKeyLength)}async sign(e){return xn.hashAndSign(this._key,e)}get public(){return new C4(this._publicKey)}marshal(){return this._key}get bytes(){return P4.PrivateKey.encode({Type:P4.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return EU(this.bytes,e.bytes)}async hash(){let{bytes:e}=await SU.digest(this.bytes);return e}async id(){let e=await $Ee.digest(this.public.bytes);return HEe.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return GEe.export(this.bytes,e);throw _U(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function WEe(t){if(t.length>xn.privateKeyLength){t=L0(t,xn.privateKeyLength+xn.publicKeyLength);let i=t.slice(0,xn.privateKeyLength),n=t.slice(xn.privateKeyLength,t.length);return new M0(i,n)}t=L0(t,xn.privateKeyLength);let e=t.slice(0,xn.privateKeyLength),r=t.slice(xn.publicKeyLength);return new M0(e,r)}function YEe(t){return t=L0(t,xn.publicKeyLength),new C4(t)}async function XEe(){let{privateKey:t,publicKey:e}=await xn.generateKey();return new M0(t,e)}async function QEe(t){let{privateKey:e,publicKey:r}=await xn.generateKeyFromSeed(t);return new M0(e,r)}function L0(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw _U(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}xU.exports={Ed25519PublicKey:C4,Ed25519PrivateKey:M0,unmarshalEd25519PrivateKey:WEe,unmarshalEd25519PublicKey:YEe,generateKeyPair:XEe,generateKeyPairFromSeed:QEe}});var TU=v((Oot,IU)=>{l();var $t={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Zs(t,e){if(!t)throw new Error(e)}function Lt(t,e,r){if(Zs(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let i=r.join(", "),n=`Expected ${t} to be an Uint8Array with length [${i}]`;Zs(r.includes(e.length),n)}else{let i=`Expected ${t} to be an Uint8Array with length ${r}`;Zs(e.length===r,i)}}function ed(t){Zs(q0(t)==="Boolean","Expected compressed to be a Boolean")}function Xo(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),Lt("output",t,e),t}function q0(t){return Object.prototype.toString.call(t).slice(8,-1)}IU.exports=t=>({contextRandomize(e){switch(Zs(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&Lt("seed",e,32),t.contextRandomize(e)){case 1:throw new Error($t.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return Lt("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(Lt("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error($t.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(Lt("private key",e,32),Lt("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error($t.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(Lt("private key",e,32),Lt("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error($t.TWEAK_MUL)}},publicKeyVerify(e){return Lt("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,i){switch(Lt("private key",e,32),ed(r),i=Xo(i,r?33:65),t.publicKeyCreate(i,e)){case 0:return i;case 1:throw new Error($t.SECKEY_INVALID);case 2:throw new Error($t.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,i){switch(Lt("public key",e,[33,65]),ed(r),i=Xo(i,r?33:65),t.publicKeyConvert(i,e)){case 0:return i;case 1:throw new Error($t.PUBKEY_PARSE);case 2:throw new Error($t.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,i){switch(Lt("public key",e,[33,65]),ed(r),i=Xo(i,r?33:65),t.publicKeyNegate(i,e)){case 0:return i;case 1:throw new Error($t.PUBKEY_PARSE);case 2:throw new Error($t.IMPOSSIBLE_CASE);case 3:throw new Error($t.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,i){Zs(Array.isArray(e),"Expected public keys to be an Array"),Zs(e.length>0,"Expected public keys array will have more than zero items");for(let n of e)Lt("public key",n,[33,65]);switch(ed(r),i=Xo(i,r?33:65),t.publicKeyCombine(i,e)){case 0:return i;case 1:throw new Error($t.PUBKEY_PARSE);case 2:throw new Error($t.PUBKEY_COMBINE);case 3:throw new Error($t.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,i=!0,n){switch(Lt("public key",e,[33,65]),Lt("tweak",r,32),ed(i),n=Xo(n,i?33:65),t.publicKeyTweakAdd(n,e,r)){case 0:return n;case 1:throw new Error($t.PUBKEY_PARSE);case 2:throw new Error($t.TWEAK_ADD)}},publicKeyTweakMul(e,r,i=!0,n){switch(Lt("public key",e,[33,65]),Lt("tweak",r,32),ed(i),n=Xo(n,i?33:65),t.publicKeyTweakMul(n,e,r)){case 0:return n;case 1:throw new Error($t.PUBKEY_PARSE);case 2:throw new Error($t.TWEAK_MUL)}},signatureNormalize(e){switch(Lt("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error($t.SIG_PARSE)}},signatureExport(e,r){Lt("signature",e,64),r=Xo(r,72);let i={output:r,outputlen:72};switch(t.signatureExport(i,e)){case 0:return r.slice(0,i.outputlen);case 1:throw new Error($t.SIG_PARSE);case 2:throw new Error($t.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(Lt("signature",e),r=Xo(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error($t.SIG_PARSE);case 2:throw new Error($t.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,i={},n){Lt("message",e,32),Lt("private key",r,32),Zs(q0(i)==="Object","Expected options to be an Object"),i.data!==void 0&&Lt("options.data",i.data),i.noncefn!==void 0&&Zs(q0(i.noncefn)==="Function","Expected options.noncefn to be a Function"),n=Xo(n,64);let s={signature:n,recid:null};switch(t.ecdsaSign(s,e,r,i.data,i.noncefn)){case 0:return s;case 1:throw new Error($t.SIGN);case 2:throw new Error($t.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,i){switch(Lt("signature",e,64),Lt("message",r,32),Lt("public key",i,[33,65]),t.ecdsaVerify(e,r,i)){case 0:return!0;case 3:return!1;case 1:throw new Error($t.SIG_PARSE);case 2:throw new Error($t.PUBKEY_PARSE)}},ecdsaRecover(e,r,i,n=!0,s){switch(Lt("signature",e,64),Zs(q0(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),Lt("message",i,32),ed(n),s=Xo(s,n?33:65),t.ecdsaRecover(s,e,r,i)){case 0:return s;case 1:throw new Error($t.SIG_PARSE);case 2:throw new Error($t.RECOVER);case 3:throw new Error($t.IMPOSSIBLE_CASE)}},ecdh(e,r,i={},n){switch(Lt("public key",e,[33,65]),Lt("private key",r,32),Zs(q0(i)==="Object","Expected options to be an Object"),i.data!==void 0&&Lt("options.data",i.data),i.hashfn!==void 0?(Zs(q0(i.hashfn)==="Function","Expected options.hashfn to be a Function"),i.xbuf!==void 0&&Lt("options.xbuf",i.xbuf,32),i.ybuf!==void 0&&Lt("options.ybuf",i.ybuf,32),Lt("output",n)):n=Xo(n,32),t.ecdh(n,e,r,i.data,i.hashfn,i.xbuf,i.ybuf)){case 0:return n;case 1:throw new Error($t.PUBKEY_PARSE);case 2:throw new Error($t.ECDH)}}})});var RU=v((kot,ZEe)=>{ZEe.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var PU=v(()=>{l()});var Xa=v((CU,sE)=>{l();(function(t,e){"use strict";function r(P,g){if(!P)throw new Error(g||"Assertion failed")}function i(P,g){P.super_=g;var _=function(){};_.prototype=g.prototype,P.prototype=new _,P.prototype.constructor=P}function n(P,g,_){if(n.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((g==="le"||g==="be")&&(_=g,g=10),this._init(P||0,g||10,_||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var s;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?s=window.Buffer:s=PU().Buffer}catch(P){}n.isBN=function(g){return g instanceof n?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===n.wordSize&&Array.isArray(g.words)},n.max=function(g,_){return g.cmp(_)>0?g:_},n.min=function(g,_){return g.cmp(_)<0?g:_},n.prototype._init=function(g,_,x){if(typeof g=="number")return this._initNumber(g,_,x);if(typeof g=="object")return this._initArray(g,_,x);_==="hex"&&(_=16),r(_===(_|0)&&_>=2&&_<=36),g=g.toString().replace(/\s+/g,"");var O=0;g[0]==="-"&&(O++,this.negative=1),O<g.length&&(_===16?this._parseHex(g,O,x):(this._parseBase(g,_,O),x==="le"&&this._initArray(this.toArray(),_,x)))},n.prototype._initNumber=function(g,_,x){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(r(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),x==="le"&&this._initArray(this.toArray(),_,x)},n.prototype._initArray=function(g,_,x){if(r(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var L,Y,V=0;if(x==="be")for(O=g.length-1,L=0;O>=0;O-=3)Y=g[O]|g[O-1]<<8|g[O-2]<<16,this.words[L]|=Y<<V&67108863,this.words[L+1]=Y>>>26-V&67108863,V+=24,V>=26&&(V-=26,L++);else if(x==="le")for(O=0,L=0;O<g.length;O+=3)Y=g[O]|g[O+1]<<8|g[O+2]<<16,this.words[L]|=Y<<V&67108863,this.words[L+1]=Y>>>26-V&67108863,V+=24,V>=26&&(V-=26,L++);return this.strip()};function o(P,g){var _=P.charCodeAt(g);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function a(P,g,_){var x=o(P,_);return _-1>=g&&(x|=o(P,_-1)<<4),x}n.prototype._parseHex=function(g,_,x){this.length=Math.ceil((g.length-_)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var L=0,Y=0,V;if(x==="be")for(O=g.length-1;O>=_;O-=2)V=a(g,_,O)<<L,this.words[Y]|=V&67108863,L>=18?(L-=18,Y+=1,this.words[Y]|=V>>>26):L+=8;else{var q=g.length-_;for(O=q%2==0?_+1:_;O<g.length;O+=2)V=a(g,_,O)<<L,this.words[Y]|=V&67108863,L>=18?(L-=18,Y+=1,this.words[Y]|=V>>>26):L+=8}this.strip()};function c(P,g,_,x){for(var O=0,L=Math.min(P.length,_),Y=g;Y<L;Y++){var V=P.charCodeAt(Y)-48;O*=x,V>=49?O+=V-49+10:V>=17?O+=V-17+10:O+=V}return O}n.prototype._parseBase=function(g,_,x){this.words=[0],this.length=1;for(var O=0,L=1;L<=67108863;L*=_)O++;O--,L=L/_|0;for(var Y=g.length-x,V=Y%O,q=Math.min(Y,Y-V)+x,E=0,U=x;U<q;U+=O)E=c(g,U,U+O,_),this.imuln(L),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(V!==0){var de=1;for(E=c(g,U,g.length,_),U=0;U<V;U++)de*=_;this.imuln(de),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}this.strip()},n.prototype.copy=function(g){g.words=new Array(this.length);for(var _=0;_<this.length;_++)g.words[_]=this.words[_];g.length=this.length,g.negative=this.negative,g.red=this.red},n.prototype.clone=function(){var g=new n(null);return this.copy(g),g},n.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(g,_){g=g||10,_=_|0||1;var x;if(g===16||g==="hex"){x="";for(var O=0,L=0,Y=0;Y<this.length;Y++){var V=this.words[Y],q=((V<<O|L)&16777215).toString(16);L=V>>>24-O&16777215,L!==0||Y!==this.length-1?x=u[6-q.length]+q+x:x=q+x,O+=2,O>=26&&(O-=26,Y--)}for(L!==0&&(x=L.toString(16)+x);x.length%_!=0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}if(g===(g|0)&&g>=2&&g<=36){var E=f[g],U=d[g];x="";var de=this.clone();for(de.negative=0;!de.isZero();){var Q=de.modn(U).toString(g);de=de.idivn(U),de.isZero()?x=Q+x:x=u[E-Q.length]+Q+x}for(this.isZero()&&(x="0"+x);x.length%_!=0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(g,_){return r(typeof s!="undefined"),this.toArrayLike(s,g,_)},n.prototype.toArray=function(g,_){return this.toArrayLike(Array,g,_)},n.prototype.toArrayLike=function(g,_,x){var O=this.byteLength(),L=x||Math.max(1,O);r(O<=L,"byte array longer than desired length"),r(L>0,"Requested array length <= 0"),this.strip();var Y=_==="le",V=new g(L),q,E,U=this.clone();if(Y){for(E=0;!U.isZero();E++)q=U.andln(255),U.iushrn(8),V[E]=q;for(;E<L;E++)V[E]=0}else{for(E=0;E<L-O;E++)V[E]=0;for(E=0;!U.isZero();E++)q=U.andln(255),U.iushrn(8),V[L-E-1]=q}return V},Math.clz32?n.prototype._countBits=function(g){return 32-Math.clz32(g)}:n.prototype._countBits=function(g){var _=g,x=0;return _>=4096&&(x+=13,_>>>=13),_>=64&&(x+=7,_>>>=7),_>=8&&(x+=4,_>>>=4),_>=2&&(x+=2,_>>>=2),x+_},n.prototype._zeroBits=function(g){if(g===0)return 26;var _=g,x=0;return(_&8191)==0&&(x+=13,_>>>=13),(_&127)==0&&(x+=7,_>>>=7),(_&15)==0&&(x+=4,_>>>=4),(_&3)==0&&(x+=2,_>>>=2),(_&1)==0&&x++,x},n.prototype.bitLength=function(){var g=this.words[this.length-1],_=this._countBits(g);return(this.length-1)*26+_};function h(P){for(var g=new Array(P.bitLength()),_=0;_<g.length;_++){var x=_/26|0,O=_%26;g[_]=(P.words[x]&1<<O)>>>O}return g}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,_=0;_<this.length;_++){var x=this._zeroBits(this.words[_]);if(g+=x,x!==26)break}return g},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},n.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var _=0;_<g.length;_++)this.words[_]=this.words[_]|g.words[_];return this.strip()},n.prototype.ior=function(g){return r((this.negative|g.negative)==0),this.iuor(g)},n.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},n.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},n.prototype.iuand=function(g){var _;this.length>g.length?_=g:_=this;for(var x=0;x<_.length;x++)this.words[x]=this.words[x]&g.words[x];return this.length=_.length,this.strip()},n.prototype.iand=function(g){return r((this.negative|g.negative)==0),this.iuand(g)},n.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},n.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},n.prototype.iuxor=function(g){var _,x;this.length>g.length?(_=this,x=g):(_=g,x=this);for(var O=0;O<x.length;O++)this.words[O]=_.words[O]^x.words[O];if(this!==_)for(;O<_.length;O++)this.words[O]=_.words[O];return this.length=_.length,this.strip()},n.prototype.ixor=function(g){return r((this.negative|g.negative)==0),this.iuxor(g)},n.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},n.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},n.prototype.inotn=function(g){r(typeof g=="number"&&g>=0);var _=Math.ceil(g/26)|0,x=g%26;this._expand(_),x>0&&_--;for(var O=0;O<_;O++)this.words[O]=~this.words[O]&67108863;return x>0&&(this.words[O]=~this.words[O]&67108863>>26-x),this.strip()},n.prototype.notn=function(g){return this.clone().inotn(g)},n.prototype.setn=function(g,_){r(typeof g=="number"&&g>=0);var x=g/26|0,O=g%26;return this._expand(x+1),_?this.words[x]=this.words[x]|1<<O:this.words[x]=this.words[x]&~(1<<O),this.strip()},n.prototype.iadd=function(g){var _;if(this.negative!==0&&g.negative===0)return this.negative=0,_=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,_=this.isub(g),g.negative=1,_._normSign();var x,O;this.length>g.length?(x=this,O=g):(x=g,O=this);for(var L=0,Y=0;Y<O.length;Y++)_=(x.words[Y]|0)+(O.words[Y]|0)+L,this.words[Y]=_&67108863,L=_>>>26;for(;L!==0&&Y<x.length;Y++)_=(x.words[Y]|0)+L,this.words[Y]=_&67108863,L=_>>>26;if(this.length=x.length,L!==0)this.words[this.length]=L,this.length++;else if(x!==this)for(;Y<x.length;Y++)this.words[Y]=x.words[Y];return this},n.prototype.add=function(g){var _;return g.negative!==0&&this.negative===0?(g.negative=0,_=this.sub(g),g.negative^=1,_):g.negative===0&&this.negative!==0?(this.negative=0,_=g.sub(this),this.negative=1,_):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},n.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var _=this.iadd(g);return g.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var x=this.cmp(g);if(x===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,L;x>0?(O=this,L=g):(O=g,L=this);for(var Y=0,V=0;V<L.length;V++)_=(O.words[V]|0)-(L.words[V]|0)+Y,Y=_>>26,this.words[V]=_&67108863;for(;Y!==0&&V<O.length;V++)_=(O.words[V]|0)+Y,Y=_>>26,this.words[V]=_&67108863;if(Y===0&&V<O.length&&O!==this)for(;V<O.length;V++)this.words[V]=O.words[V];return this.length=Math.max(this.length,V),O!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(g){return this.clone().isub(g)};function p(P,g,_){_.negative=g.negative^P.negative;var x=P.length+g.length|0;_.length=x,x=x-1|0;var O=P.words[0]|0,L=g.words[0]|0,Y=O*L,V=Y&67108863,q=Y/67108864|0;_.words[0]=V;for(var E=1;E<x;E++){for(var U=q>>>26,de=q&67108863,Q=Math.min(E,g.length-1),ue=Math.max(0,E-P.length+1);ue<=Q;ue++){var le=E-ue|0;O=P.words[le]|0,L=g.words[ue]|0,Y=O*L+de,U+=Y/67108864|0,de=Y&67108863}_.words[E]=de|0,q=U|0}return q!==0?_.words[E]=q|0:_.length--,_.strip()}var y=function(g,_,x){var O=g.words,L=_.words,Y=x.words,V=0,q,E,U,de=O[0]|0,Q=de&8191,ue=de>>>13,le=O[1]|0,me=le&8191,be=le>>>13,xe=O[2]|0,D=xe&8191,K=xe>>>13,G=O[3]|0,ee=G&8191,T=G>>>13,F=O[4]|0,H=F&8191,M=F>>>13,Z=O[5]|0,ie=Z&8191,te=Z>>>13,he=O[6]|0,we=he&8191,_e=he>>>13,Ke=O[7]|0,Pe=Ke&8191,Ve=Ke>>>13,et=O[8]|0,He=et&8191,ze=et>>>13,mt=O[9]|0,rr=mt&8191,dr=mt>>>13,Bn=L[0]|0,Xt=Bn&8191,kt=Bn>>>13,ci=L[1]|0,nt=ci&8191,Dr=ci>>>13,U3=L[2]|0,Mr=U3&8191,Lr=U3>>>13,F3=L[3]|0,qr=F3&8191,jr=F3>>>13,K3=L[4]|0,Ur=K3&8191,Fr=K3>>>13,V3=L[5]|0,Kr=V3&8191,Vr=V3>>>13,z3=L[6]|0,zr=z3&8191,Hr=z3>>>13,H3=L[7]|0,$r=H3&8191,Gr=H3>>>13,$3=L[8]|0,Wr=$3&8191,Yr=$3>>>13,G3=L[9]|0,Xr=G3&8191,hr=G3>>>13;x.negative=g.negative^_.negative,x.length=19,q=Math.imul(Q,Xt),E=Math.imul(Q,kt),E=E+Math.imul(ue,Xt)|0,U=Math.imul(ue,kt);var Uh=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(Uh>>>26)|0,Uh&=67108863,q=Math.imul(me,Xt),E=Math.imul(me,kt),E=E+Math.imul(be,Xt)|0,U=Math.imul(be,kt),q=q+Math.imul(Q,nt)|0,E=E+Math.imul(Q,Dr)|0,E=E+Math.imul(ue,nt)|0,U=U+Math.imul(ue,Dr)|0;var I2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(I2>>>26)|0,I2&=67108863,q=Math.imul(D,Xt),E=Math.imul(D,kt),E=E+Math.imul(K,Xt)|0,U=Math.imul(K,kt),q=q+Math.imul(me,nt)|0,E=E+Math.imul(me,Dr)|0,E=E+Math.imul(be,nt)|0,U=U+Math.imul(be,Dr)|0,q=q+Math.imul(Q,Mr)|0,E=E+Math.imul(Q,Lr)|0,E=E+Math.imul(ue,Mr)|0,U=U+Math.imul(ue,Lr)|0;var T2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(T2>>>26)|0,T2&=67108863,q=Math.imul(ee,Xt),E=Math.imul(ee,kt),E=E+Math.imul(T,Xt)|0,U=Math.imul(T,kt),q=q+Math.imul(D,nt)|0,E=E+Math.imul(D,Dr)|0,E=E+Math.imul(K,nt)|0,U=U+Math.imul(K,Dr)|0,q=q+Math.imul(me,Mr)|0,E=E+Math.imul(me,Lr)|0,E=E+Math.imul(be,Mr)|0,U=U+Math.imul(be,Lr)|0,q=q+Math.imul(Q,qr)|0,E=E+Math.imul(Q,jr)|0,E=E+Math.imul(ue,qr)|0,U=U+Math.imul(ue,jr)|0;var R2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(R2>>>26)|0,R2&=67108863,q=Math.imul(H,Xt),E=Math.imul(H,kt),E=E+Math.imul(M,Xt)|0,U=Math.imul(M,kt),q=q+Math.imul(ee,nt)|0,E=E+Math.imul(ee,Dr)|0,E=E+Math.imul(T,nt)|0,U=U+Math.imul(T,Dr)|0,q=q+Math.imul(D,Mr)|0,E=E+Math.imul(D,Lr)|0,E=E+Math.imul(K,Mr)|0,U=U+Math.imul(K,Lr)|0,q=q+Math.imul(me,qr)|0,E=E+Math.imul(me,jr)|0,E=E+Math.imul(be,qr)|0,U=U+Math.imul(be,jr)|0,q=q+Math.imul(Q,Ur)|0,E=E+Math.imul(Q,Fr)|0,E=E+Math.imul(ue,Ur)|0,U=U+Math.imul(ue,Fr)|0;var P2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(P2>>>26)|0,P2&=67108863,q=Math.imul(ie,Xt),E=Math.imul(ie,kt),E=E+Math.imul(te,Xt)|0,U=Math.imul(te,kt),q=q+Math.imul(H,nt)|0,E=E+Math.imul(H,Dr)|0,E=E+Math.imul(M,nt)|0,U=U+Math.imul(M,Dr)|0,q=q+Math.imul(ee,Mr)|0,E=E+Math.imul(ee,Lr)|0,E=E+Math.imul(T,Mr)|0,U=U+Math.imul(T,Lr)|0,q=q+Math.imul(D,qr)|0,E=E+Math.imul(D,jr)|0,E=E+Math.imul(K,qr)|0,U=U+Math.imul(K,jr)|0,q=q+Math.imul(me,Ur)|0,E=E+Math.imul(me,Fr)|0,E=E+Math.imul(be,Ur)|0,U=U+Math.imul(be,Fr)|0,q=q+Math.imul(Q,Kr)|0,E=E+Math.imul(Q,Vr)|0,E=E+Math.imul(ue,Kr)|0,U=U+Math.imul(ue,Vr)|0;var C2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(C2>>>26)|0,C2&=67108863,q=Math.imul(we,Xt),E=Math.imul(we,kt),E=E+Math.imul(_e,Xt)|0,U=Math.imul(_e,kt),q=q+Math.imul(ie,nt)|0,E=E+Math.imul(ie,Dr)|0,E=E+Math.imul(te,nt)|0,U=U+Math.imul(te,Dr)|0,q=q+Math.imul(H,Mr)|0,E=E+Math.imul(H,Lr)|0,E=E+Math.imul(M,Mr)|0,U=U+Math.imul(M,Lr)|0,q=q+Math.imul(ee,qr)|0,E=E+Math.imul(ee,jr)|0,E=E+Math.imul(T,qr)|0,U=U+Math.imul(T,jr)|0,q=q+Math.imul(D,Ur)|0,E=E+Math.imul(D,Fr)|0,E=E+Math.imul(K,Ur)|0,U=U+Math.imul(K,Fr)|0,q=q+Math.imul(me,Kr)|0,E=E+Math.imul(me,Vr)|0,E=E+Math.imul(be,Kr)|0,U=U+Math.imul(be,Vr)|0,q=q+Math.imul(Q,zr)|0,E=E+Math.imul(Q,Hr)|0,E=E+Math.imul(ue,zr)|0,U=U+Math.imul(ue,Hr)|0;var Mo=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(Mo>>>26)|0,Mo&=67108863,q=Math.imul(Pe,Xt),E=Math.imul(Pe,kt),E=E+Math.imul(Ve,Xt)|0,U=Math.imul(Ve,kt),q=q+Math.imul(we,nt)|0,E=E+Math.imul(we,Dr)|0,E=E+Math.imul(_e,nt)|0,U=U+Math.imul(_e,Dr)|0,q=q+Math.imul(ie,Mr)|0,E=E+Math.imul(ie,Lr)|0,E=E+Math.imul(te,Mr)|0,U=U+Math.imul(te,Lr)|0,q=q+Math.imul(H,qr)|0,E=E+Math.imul(H,jr)|0,E=E+Math.imul(M,qr)|0,U=U+Math.imul(M,jr)|0,q=q+Math.imul(ee,Ur)|0,E=E+Math.imul(ee,Fr)|0,E=E+Math.imul(T,Ur)|0,U=U+Math.imul(T,Fr)|0,q=q+Math.imul(D,Kr)|0,E=E+Math.imul(D,Vr)|0,E=E+Math.imul(K,Kr)|0,U=U+Math.imul(K,Vr)|0,q=q+Math.imul(me,zr)|0,E=E+Math.imul(me,Hr)|0,E=E+Math.imul(be,zr)|0,U=U+Math.imul(be,Hr)|0,q=q+Math.imul(Q,$r)|0,E=E+Math.imul(Q,Gr)|0,E=E+Math.imul(ue,$r)|0,U=U+Math.imul(ue,Gr)|0;var O2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(O2>>>26)|0,O2&=67108863,q=Math.imul(He,Xt),E=Math.imul(He,kt),E=E+Math.imul(ze,Xt)|0,U=Math.imul(ze,kt),q=q+Math.imul(Pe,nt)|0,E=E+Math.imul(Pe,Dr)|0,E=E+Math.imul(Ve,nt)|0,U=U+Math.imul(Ve,Dr)|0,q=q+Math.imul(we,Mr)|0,E=E+Math.imul(we,Lr)|0,E=E+Math.imul(_e,Mr)|0,U=U+Math.imul(_e,Lr)|0,q=q+Math.imul(ie,qr)|0,E=E+Math.imul(ie,jr)|0,E=E+Math.imul(te,qr)|0,U=U+Math.imul(te,jr)|0,q=q+Math.imul(H,Ur)|0,E=E+Math.imul(H,Fr)|0,E=E+Math.imul(M,Ur)|0,U=U+Math.imul(M,Fr)|0,q=q+Math.imul(ee,Kr)|0,E=E+Math.imul(ee,Vr)|0,E=E+Math.imul(T,Kr)|0,U=U+Math.imul(T,Vr)|0,q=q+Math.imul(D,zr)|0,E=E+Math.imul(D,Hr)|0,E=E+Math.imul(K,zr)|0,U=U+Math.imul(K,Hr)|0,q=q+Math.imul(me,$r)|0,E=E+Math.imul(me,Gr)|0,E=E+Math.imul(be,$r)|0,U=U+Math.imul(be,Gr)|0,q=q+Math.imul(Q,Wr)|0,E=E+Math.imul(Q,Yr)|0,E=E+Math.imul(ue,Wr)|0,U=U+Math.imul(ue,Yr)|0;var k2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(k2>>>26)|0,k2&=67108863,q=Math.imul(rr,Xt),E=Math.imul(rr,kt),E=E+Math.imul(dr,Xt)|0,U=Math.imul(dr,kt),q=q+Math.imul(He,nt)|0,E=E+Math.imul(He,Dr)|0,E=E+Math.imul(ze,nt)|0,U=U+Math.imul(ze,Dr)|0,q=q+Math.imul(Pe,Mr)|0,E=E+Math.imul(Pe,Lr)|0,E=E+Math.imul(Ve,Mr)|0,U=U+Math.imul(Ve,Lr)|0,q=q+Math.imul(we,qr)|0,E=E+Math.imul(we,jr)|0,E=E+Math.imul(_e,qr)|0,U=U+Math.imul(_e,jr)|0,q=q+Math.imul(ie,Ur)|0,E=E+Math.imul(ie,Fr)|0,E=E+Math.imul(te,Ur)|0,U=U+Math.imul(te,Fr)|0,q=q+Math.imul(H,Kr)|0,E=E+Math.imul(H,Vr)|0,E=E+Math.imul(M,Kr)|0,U=U+Math.imul(M,Vr)|0,q=q+Math.imul(ee,zr)|0,E=E+Math.imul(ee,Hr)|0,E=E+Math.imul(T,zr)|0,U=U+Math.imul(T,Hr)|0,q=q+Math.imul(D,$r)|0,E=E+Math.imul(D,Gr)|0,E=E+Math.imul(K,$r)|0,U=U+Math.imul(K,Gr)|0,q=q+Math.imul(me,Wr)|0,E=E+Math.imul(me,Yr)|0,E=E+Math.imul(be,Wr)|0,U=U+Math.imul(be,Yr)|0,q=q+Math.imul(Q,Xr)|0,E=E+Math.imul(Q,hr)|0,E=E+Math.imul(ue,Xr)|0,U=U+Math.imul(ue,hr)|0;var D2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(D2>>>26)|0,D2&=67108863,q=Math.imul(rr,nt),E=Math.imul(rr,Dr),E=E+Math.imul(dr,nt)|0,U=Math.imul(dr,Dr),q=q+Math.imul(He,Mr)|0,E=E+Math.imul(He,Lr)|0,E=E+Math.imul(ze,Mr)|0,U=U+Math.imul(ze,Lr)|0,q=q+Math.imul(Pe,qr)|0,E=E+Math.imul(Pe,jr)|0,E=E+Math.imul(Ve,qr)|0,U=U+Math.imul(Ve,jr)|0,q=q+Math.imul(we,Ur)|0,E=E+Math.imul(we,Fr)|0,E=E+Math.imul(_e,Ur)|0,U=U+Math.imul(_e,Fr)|0,q=q+Math.imul(ie,Kr)|0,E=E+Math.imul(ie,Vr)|0,E=E+Math.imul(te,Kr)|0,U=U+Math.imul(te,Vr)|0,q=q+Math.imul(H,zr)|0,E=E+Math.imul(H,Hr)|0,E=E+Math.imul(M,zr)|0,U=U+Math.imul(M,Hr)|0,q=q+Math.imul(ee,$r)|0,E=E+Math.imul(ee,Gr)|0,E=E+Math.imul(T,$r)|0,U=U+Math.imul(T,Gr)|0,q=q+Math.imul(D,Wr)|0,E=E+Math.imul(D,Yr)|0,E=E+Math.imul(K,Wr)|0,U=U+Math.imul(K,Yr)|0,q=q+Math.imul(me,Xr)|0,E=E+Math.imul(me,hr)|0,E=E+Math.imul(be,Xr)|0,U=U+Math.imul(be,hr)|0;var B2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(B2>>>26)|0,B2&=67108863,q=Math.imul(rr,Mr),E=Math.imul(rr,Lr),E=E+Math.imul(dr,Mr)|0,U=Math.imul(dr,Lr),q=q+Math.imul(He,qr)|0,E=E+Math.imul(He,jr)|0,E=E+Math.imul(ze,qr)|0,U=U+Math.imul(ze,jr)|0,q=q+Math.imul(Pe,Ur)|0,E=E+Math.imul(Pe,Fr)|0,E=E+Math.imul(Ve,Ur)|0,U=U+Math.imul(Ve,Fr)|0,q=q+Math.imul(we,Kr)|0,E=E+Math.imul(we,Vr)|0,E=E+Math.imul(_e,Kr)|0,U=U+Math.imul(_e,Vr)|0,q=q+Math.imul(ie,zr)|0,E=E+Math.imul(ie,Hr)|0,E=E+Math.imul(te,zr)|0,U=U+Math.imul(te,Hr)|0,q=q+Math.imul(H,$r)|0,E=E+Math.imul(H,Gr)|0,E=E+Math.imul(M,$r)|0,U=U+Math.imul(M,Gr)|0,q=q+Math.imul(ee,Wr)|0,E=E+Math.imul(ee,Yr)|0,E=E+Math.imul(T,Wr)|0,U=U+Math.imul(T,Yr)|0,q=q+Math.imul(D,Xr)|0,E=E+Math.imul(D,hr)|0,E=E+Math.imul(K,Xr)|0,U=U+Math.imul(K,hr)|0;var N2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(N2>>>26)|0,N2&=67108863,q=Math.imul(rr,qr),E=Math.imul(rr,jr),E=E+Math.imul(dr,qr)|0,U=Math.imul(dr,jr),q=q+Math.imul(He,Ur)|0,E=E+Math.imul(He,Fr)|0,E=E+Math.imul(ze,Ur)|0,U=U+Math.imul(ze,Fr)|0,q=q+Math.imul(Pe,Kr)|0,E=E+Math.imul(Pe,Vr)|0,E=E+Math.imul(Ve,Kr)|0,U=U+Math.imul(Ve,Vr)|0,q=q+Math.imul(we,zr)|0,E=E+Math.imul(we,Hr)|0,E=E+Math.imul(_e,zr)|0,U=U+Math.imul(_e,Hr)|0,q=q+Math.imul(ie,$r)|0,E=E+Math.imul(ie,Gr)|0,E=E+Math.imul(te,$r)|0,U=U+Math.imul(te,Gr)|0,q=q+Math.imul(H,Wr)|0,E=E+Math.imul(H,Yr)|0,E=E+Math.imul(M,Wr)|0,U=U+Math.imul(M,Yr)|0,q=q+Math.imul(ee,Xr)|0,E=E+Math.imul(ee,hr)|0,E=E+Math.imul(T,Xr)|0,U=U+Math.imul(T,hr)|0;var M2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(M2>>>26)|0,M2&=67108863,q=Math.imul(rr,Ur),E=Math.imul(rr,Fr),E=E+Math.imul(dr,Ur)|0,U=Math.imul(dr,Fr),q=q+Math.imul(He,Kr)|0,E=E+Math.imul(He,Vr)|0,E=E+Math.imul(ze,Kr)|0,U=U+Math.imul(ze,Vr)|0,q=q+Math.imul(Pe,zr)|0,E=E+Math.imul(Pe,Hr)|0,E=E+Math.imul(Ve,zr)|0,U=U+Math.imul(Ve,Hr)|0,q=q+Math.imul(we,$r)|0,E=E+Math.imul(we,Gr)|0,E=E+Math.imul(_e,$r)|0,U=U+Math.imul(_e,Gr)|0,q=q+Math.imul(ie,Wr)|0,E=E+Math.imul(ie,Yr)|0,E=E+Math.imul(te,Wr)|0,U=U+Math.imul(te,Yr)|0,q=q+Math.imul(H,Xr)|0,E=E+Math.imul(H,hr)|0,E=E+Math.imul(M,Xr)|0,U=U+Math.imul(M,hr)|0;var L2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(L2>>>26)|0,L2&=67108863,q=Math.imul(rr,Kr),E=Math.imul(rr,Vr),E=E+Math.imul(dr,Kr)|0,U=Math.imul(dr,Vr),q=q+Math.imul(He,zr)|0,E=E+Math.imul(He,Hr)|0,E=E+Math.imul(ze,zr)|0,U=U+Math.imul(ze,Hr)|0,q=q+Math.imul(Pe,$r)|0,E=E+Math.imul(Pe,Gr)|0,E=E+Math.imul(Ve,$r)|0,U=U+Math.imul(Ve,Gr)|0,q=q+Math.imul(we,Wr)|0,E=E+Math.imul(we,Yr)|0,E=E+Math.imul(_e,Wr)|0,U=U+Math.imul(_e,Yr)|0,q=q+Math.imul(ie,Xr)|0,E=E+Math.imul(ie,hr)|0,E=E+Math.imul(te,Xr)|0,U=U+Math.imul(te,hr)|0;var q2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(q2>>>26)|0,q2&=67108863,q=Math.imul(rr,zr),E=Math.imul(rr,Hr),E=E+Math.imul(dr,zr)|0,U=Math.imul(dr,Hr),q=q+Math.imul(He,$r)|0,E=E+Math.imul(He,Gr)|0,E=E+Math.imul(ze,$r)|0,U=U+Math.imul(ze,Gr)|0,q=q+Math.imul(Pe,Wr)|0,E=E+Math.imul(Pe,Yr)|0,E=E+Math.imul(Ve,Wr)|0,U=U+Math.imul(Ve,Yr)|0,q=q+Math.imul(we,Xr)|0,E=E+Math.imul(we,hr)|0,E=E+Math.imul(_e,Xr)|0,U=U+Math.imul(_e,hr)|0;var j2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(j2>>>26)|0,j2&=67108863,q=Math.imul(rr,$r),E=Math.imul(rr,Gr),E=E+Math.imul(dr,$r)|0,U=Math.imul(dr,Gr),q=q+Math.imul(He,Wr)|0,E=E+Math.imul(He,Yr)|0,E=E+Math.imul(ze,Wr)|0,U=U+Math.imul(ze,Yr)|0,q=q+Math.imul(Pe,Xr)|0,E=E+Math.imul(Pe,hr)|0,E=E+Math.imul(Ve,Xr)|0,U=U+Math.imul(Ve,hr)|0;var Ri=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(Ri>>>26)|0,Ri&=67108863,q=Math.imul(rr,Wr),E=Math.imul(rr,Yr),E=E+Math.imul(dr,Wr)|0,U=Math.imul(dr,Yr),q=q+Math.imul(He,Xr)|0,E=E+Math.imul(He,hr)|0,E=E+Math.imul(ze,Xr)|0,U=U+Math.imul(ze,hr)|0;var U2=(V+q|0)+((E&8191)<<13)|0;V=(U+(E>>>13)|0)+(U2>>>26)|0,U2&=67108863,q=Math.imul(rr,Xr),E=Math.imul(rr,hr),E=E+Math.imul(dr,Xr)|0,U=Math.imul(dr,hr);var F2=(V+q|0)+((E&8191)<<13)|0;return V=(U+(E>>>13)|0)+(F2>>>26)|0,F2&=67108863,Y[0]=Uh,Y[1]=I2,Y[2]=T2,Y[3]=R2,Y[4]=P2,Y[5]=C2,Y[6]=Mo,Y[7]=O2,Y[8]=k2,Y[9]=D2,Y[10]=B2,Y[11]=N2,Y[12]=M2,Y[13]=L2,Y[14]=q2,Y[15]=j2,Y[16]=Ri,Y[17]=U2,Y[18]=F2,V!==0&&(Y[19]=V,x.length++),x};Math.imul||(y=p);function m(P,g,_){_.negative=g.negative^P.negative,_.length=P.length+g.length;for(var x=0,O=0,L=0;L<_.length-1;L++){var Y=O;O=0;for(var V=x&67108863,q=Math.min(L,g.length-1),E=Math.max(0,L-P.length+1);E<=q;E++){var U=L-E,de=P.words[U]|0,Q=g.words[E]|0,ue=de*Q,le=ue&67108863;Y=Y+(ue/67108864|0)|0,le=le+V|0,V=le&67108863,Y=Y+(le>>>26)|0,O+=Y>>>26,Y&=67108863}_.words[L]=V,x=Y,Y=O}return x!==0?_.words[L]=x:_.length--,_.strip()}function w(P,g,_){var x=new b;return x.mulp(P,g,_)}n.prototype.mulTo=function(g,_){var x,O=this.length+g.length;return this.length===10&&g.length===10?x=y(this,g,_):O<63?x=p(this,g,_):O<1024?x=m(this,g,_):x=w(this,g,_),x};function b(P,g){this.x=P,this.y=g}b.prototype.makeRBT=function(g){for(var _=new Array(g),x=n.prototype._countBits(g)-1,O=0;O<g;O++)_[O]=this.revBin(O,x,g);return _},b.prototype.revBin=function(g,_,x){if(g===0||g===x-1)return g;for(var O=0,L=0;L<_;L++)O|=(g&1)<<_-L-1,g>>=1;return O},b.prototype.permute=function(g,_,x,O,L,Y){for(var V=0;V<Y;V++)O[V]=_[g[V]],L[V]=x[g[V]]},b.prototype.transform=function(g,_,x,O,L,Y){this.permute(Y,g,_,x,O,L);for(var V=1;V<L;V<<=1)for(var q=V<<1,E=Math.cos(2*Math.PI/q),U=Math.sin(2*Math.PI/q),de=0;de<L;de+=q)for(var Q=E,ue=U,le=0;le<V;le++){var me=x[de+le],be=O[de+le],xe=x[de+le+V],D=O[de+le+V],K=Q*xe-ue*D;D=Q*D+ue*xe,xe=K,x[de+le]=me+xe,O[de+le]=be+D,x[de+le+V]=me-xe,O[de+le+V]=be-D,le!==q&&(K=E*Q-U*ue,ue=E*ue+U*Q,Q=K)}},b.prototype.guessLen13b=function(g,_){var x=Math.max(_,g)|1,O=x&1,L=0;for(x=x/2|0;x;x=x>>>1)L++;return 1<<L+1+O},b.prototype.conjugate=function(g,_,x){if(!(x<=1))for(var O=0;O<x/2;O++){var L=g[O];g[O]=g[x-O-1],g[x-O-1]=L,L=_[O],_[O]=-_[x-O-1],_[x-O-1]=-L}},b.prototype.normalize13b=function(g,_){for(var x=0,O=0;O<_/2;O++){var L=Math.round(g[2*O+1]/_)*8192+Math.round(g[2*O]/_)+x;g[O]=L&67108863,L<67108864?x=0:x=L/67108864|0}return g},b.prototype.convert13b=function(g,_,x,O){for(var L=0,Y=0;Y<_;Y++)L=L+(g[Y]|0),x[2*Y]=L&8191,L=L>>>13,x[2*Y+1]=L&8191,L=L>>>13;for(Y=2*_;Y<O;++Y)x[Y]=0;r(L===0),r((L&~8191)==0)},b.prototype.stub=function(g){for(var _=new Array(g),x=0;x<g;x++)_[x]=0;return _},b.prototype.mulp=function(g,_,x){var O=2*this.guessLen13b(g.length,_.length),L=this.makeRBT(O),Y=this.stub(O),V=new Array(O),q=new Array(O),E=new Array(O),U=new Array(O),de=new Array(O),Q=new Array(O),ue=x.words;ue.length=O,this.convert13b(g.words,g.length,V,O),this.convert13b(_.words,_.length,U,O),this.transform(V,Y,q,E,O,L),this.transform(U,Y,de,Q,O,L);for(var le=0;le<O;le++){var me=q[le]*de[le]-E[le]*Q[le];E[le]=q[le]*Q[le]+E[le]*de[le],q[le]=me}return this.conjugate(q,E,O),this.transform(q,E,ue,Y,O,L),this.conjugate(ue,Y,O),this.normalize13b(ue,O),x.negative=g.negative^_.negative,x.length=g.length+_.length,x.strip()},n.prototype.mul=function(g){var _=new n(null);return _.words=new Array(this.length+g.length),this.mulTo(g,_)},n.prototype.mulf=function(g){var _=new n(null);return _.words=new Array(this.length+g.length),w(this,g,_)},n.prototype.imul=function(g){return this.clone().mulTo(g,this)},n.prototype.imuln=function(g){r(typeof g=="number"),r(g<67108864);for(var _=0,x=0;x<this.length;x++){var O=(this.words[x]|0)*g,L=(O&67108863)+(_&67108863);_>>=26,_+=O/67108864|0,_+=L>>>26,this.words[x]=L&67108863}return _!==0&&(this.words[x]=_,this.length++),this},n.prototype.muln=function(g){return this.clone().imuln(g)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(g){var _=h(g);if(_.length===0)return new n(1);for(var x=this,O=0;O<_.length&&_[O]===0;O++,x=x.sqr());if(++O<_.length)for(var L=x.sqr();O<_.length;O++,L=L.sqr())_[O]!==0&&(x=x.mul(L));return x},n.prototype.iushln=function(g){r(typeof g=="number"&&g>=0);var _=g%26,x=(g-_)/26,O=67108863>>>26-_<<26-_,L;if(_!==0){var Y=0;for(L=0;L<this.length;L++){var V=this.words[L]&O,q=(this.words[L]|0)-V<<_;this.words[L]=q|Y,Y=V>>>26-_}Y&&(this.words[L]=Y,this.length++)}if(x!==0){for(L=this.length-1;L>=0;L--)this.words[L+x]=this.words[L];for(L=0;L<x;L++)this.words[L]=0;this.length+=x}return this.strip()},n.prototype.ishln=function(g){return r(this.negative===0),this.iushln(g)},n.prototype.iushrn=function(g,_,x){r(typeof g=="number"&&g>=0);var O;_?O=(_-_%26)/26:O=0;var L=g%26,Y=Math.min((g-L)/26,this.length),V=67108863^67108863>>>L<<L,q=x;if(O-=Y,O=Math.max(0,O),q){for(var E=0;E<Y;E++)q.words[E]=this.words[E];q.length=Y}if(Y!==0)if(this.length>Y)for(this.length-=Y,E=0;E<this.length;E++)this.words[E]=this.words[E+Y];else this.words[0]=0,this.length=1;var U=0;for(E=this.length-1;E>=0&&(U!==0||E>=O);E--){var de=this.words[E]|0;this.words[E]=U<<26-L|de>>>L,U=de&V}return q&&U!==0&&(q.words[q.length++]=U),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(g,_,x){return r(this.negative===0),this.iushrn(g,_,x)},n.prototype.shln=function(g){return this.clone().ishln(g)},n.prototype.ushln=function(g){return this.clone().iushln(g)},n.prototype.shrn=function(g){return this.clone().ishrn(g)},n.prototype.ushrn=function(g){return this.clone().iushrn(g)},n.prototype.testn=function(g){r(typeof g=="number"&&g>=0);var _=g%26,x=(g-_)/26,O=1<<_;if(this.length<=x)return!1;var L=this.words[x];return!!(L&O)},n.prototype.imaskn=function(g){r(typeof g=="number"&&g>=0);var _=g%26,x=(g-_)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=x)return this;if(_!==0&&x++,this.length=Math.min(x,this.length),_!==0){var O=67108863^67108863>>>_<<_;this.words[this.length-1]&=O}return this.strip()},n.prototype.maskn=function(g){return this.clone().imaskn(g)},n.prototype.iaddn=function(g){return r(typeof g=="number"),r(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},n.prototype._iaddn=function(g){this.words[0]+=g;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},n.prototype.isubn=function(g){if(r(typeof g=="number"),r(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},n.prototype.addn=function(g){return this.clone().iaddn(g)},n.prototype.subn=function(g){return this.clone().isubn(g)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(g,_,x){var O=g.length+x,L;this._expand(O);var Y,V=0;for(L=0;L<g.length;L++){Y=(this.words[L+x]|0)+V;var q=(g.words[L]|0)*_;Y-=q&67108863,V=(Y>>26)-(q/67108864|0),this.words[L+x]=Y&67108863}for(;L<this.length-x;L++)Y=(this.words[L+x]|0)+V,V=Y>>26,this.words[L+x]=Y&67108863;if(V===0)return this.strip();for(r(V===-1),V=0,L=0;L<this.length;L++)Y=-(this.words[L]|0)+V,V=Y>>26,this.words[L]=Y&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(g,_){var x=this.length-g.length,O=this.clone(),L=g,Y=L.words[L.length-1]|0,V=this._countBits(Y);x=26-V,x!==0&&(L=L.ushln(x),O.iushln(x),Y=L.words[L.length-1]|0);var q=O.length-L.length,E;if(_!=="mod"){E=new n(null),E.length=q+1,E.words=new Array(E.length);for(var U=0;U<E.length;U++)E.words[U]=0}var de=O.clone()._ishlnsubmul(L,1,q);de.negative===0&&(O=de,E&&(E.words[q]=1));for(var Q=q-1;Q>=0;Q--){var ue=(O.words[L.length+Q]|0)*67108864+(O.words[L.length+Q-1]|0);for(ue=Math.min(ue/Y|0,67108863),O._ishlnsubmul(L,ue,Q);O.negative!==0;)ue--,O.negative=0,O._ishlnsubmul(L,1,Q),O.isZero()||(O.negative^=1);E&&(E.words[Q]=ue)}return E&&E.strip(),O.strip(),_!=="div"&&x!==0&&O.iushrn(x),{div:E||null,mod:O}},n.prototype.divmod=function(g,_,x){if(r(!g.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var O,L,Y;return this.negative!==0&&g.negative===0?(Y=this.neg().divmod(g,_),_!=="mod"&&(O=Y.div.neg()),_!=="div"&&(L=Y.mod.neg(),x&&L.negative!==0&&L.iadd(g)),{div:O,mod:L}):this.negative===0&&g.negative!==0?(Y=this.divmod(g.neg(),_),_!=="mod"&&(O=Y.div.neg()),{div:O,mod:Y.mod}):(this.negative&g.negative)!=0?(Y=this.neg().divmod(g.neg(),_),_!=="div"&&(L=Y.mod.neg(),x&&L.negative!==0&&L.isub(g)),{div:Y.div,mod:L}):g.length>this.length||this.cmp(g)<0?{div:new n(0),mod:this}:g.length===1?_==="div"?{div:this.divn(g.words[0]),mod:null}:_==="mod"?{div:null,mod:new n(this.modn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new n(this.modn(g.words[0]))}:this._wordDiv(g,_)},n.prototype.div=function(g){return this.divmod(g,"div",!1).div},n.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},n.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},n.prototype.divRound=function(g){var _=this.divmod(g);if(_.mod.isZero())return _.div;var x=_.div.negative!==0?_.mod.isub(g):_.mod,O=g.ushrn(1),L=g.andln(1),Y=x.cmp(O);return Y<0||L===1&&Y===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},n.prototype.modn=function(g){r(g<=67108863);for(var _=(1<<26)%g,x=0,O=this.length-1;O>=0;O--)x=(_*x+(this.words[O]|0))%g;return x},n.prototype.idivn=function(g){r(g<=67108863);for(var _=0,x=this.length-1;x>=0;x--){var O=(this.words[x]|0)+_*67108864;this.words[x]=O/g|0,_=O%g}return this.strip()},n.prototype.divn=function(g){return this.clone().idivn(g)},n.prototype.egcd=function(g){r(g.negative===0),r(!g.isZero());var _=this,x=g.clone();_.negative!==0?_=_.umod(g):_=_.clone();for(var O=new n(1),L=new n(0),Y=new n(0),V=new n(1),q=0;_.isEven()&&x.isEven();)_.iushrn(1),x.iushrn(1),++q;for(var E=x.clone(),U=_.clone();!_.isZero();){for(var de=0,Q=1;(_.words[0]&Q)==0&&de<26;++de,Q<<=1);if(de>0)for(_.iushrn(de);de-- >0;)(O.isOdd()||L.isOdd())&&(O.iadd(E),L.isub(U)),O.iushrn(1),L.iushrn(1);for(var ue=0,le=1;(x.words[0]&le)==0&&ue<26;++ue,le<<=1);if(ue>0)for(x.iushrn(ue);ue-- >0;)(Y.isOdd()||V.isOdd())&&(Y.iadd(E),V.isub(U)),Y.iushrn(1),V.iushrn(1);_.cmp(x)>=0?(_.isub(x),O.isub(Y),L.isub(V)):(x.isub(_),Y.isub(O),V.isub(L))}return{a:Y,b:V,gcd:x.iushln(q)}},n.prototype._invmp=function(g){r(g.negative===0),r(!g.isZero());var _=this,x=g.clone();_.negative!==0?_=_.umod(g):_=_.clone();for(var O=new n(1),L=new n(0),Y=x.clone();_.cmpn(1)>0&&x.cmpn(1)>0;){for(var V=0,q=1;(_.words[0]&q)==0&&V<26;++V,q<<=1);if(V>0)for(_.iushrn(V);V-- >0;)O.isOdd()&&O.iadd(Y),O.iushrn(1);for(var E=0,U=1;(x.words[0]&U)==0&&E<26;++E,U<<=1);if(E>0)for(x.iushrn(E);E-- >0;)L.isOdd()&&L.iadd(Y),L.iushrn(1);_.cmp(x)>=0?(_.isub(x),O.isub(L)):(x.isub(_),L.isub(O))}var de;return _.cmpn(1)===0?de=O:de=L,de.cmpn(0)<0&&de.iadd(g),de},n.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var _=this.clone(),x=g.clone();_.negative=0,x.negative=0;for(var O=0;_.isEven()&&x.isEven();O++)_.iushrn(1),x.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;x.isEven();)x.iushrn(1);var L=_.cmp(x);if(L<0){var Y=_;_=x,x=Y}else if(L===0||x.cmpn(1)===0)break;_.isub(x)}while(!0);return x.iushln(O)},n.prototype.invm=function(g){return this.egcd(g).a.umod(g)},n.prototype.isEven=function(){return(this.words[0]&1)==0},n.prototype.isOdd=function(){return(this.words[0]&1)==1},n.prototype.andln=function(g){return this.words[0]&g},n.prototype.bincn=function(g){r(typeof g=="number");var _=g%26,x=(g-_)/26,O=1<<_;if(this.length<=x)return this._expand(x+1),this.words[x]|=O,this;for(var L=O,Y=x;L!==0&&Y<this.length;Y++){var V=this.words[Y]|0;V+=L,L=V>>>26,V&=67108863,this.words[Y]=V}return L!==0&&(this.words[Y]=L,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(g){var _=g<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var x;if(this.length>1)x=1;else{_&&(g=-g),r(g<=67108863,"Number is too big");var O=this.words[0]|0;x=O===g?0:O<g?-1:1}return this.negative!==0?-x|0:x},n.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var _=this.ucmp(g);return this.negative!==0?-_|0:_},n.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var _=0,x=this.length-1;x>=0;x--){var O=this.words[x]|0,L=g.words[x]|0;if(O!==L){O<L?_=-1:O>L&&(_=1);break}}return _},n.prototype.gtn=function(g){return this.cmpn(g)===1},n.prototype.gt=function(g){return this.cmp(g)===1},n.prototype.gten=function(g){return this.cmpn(g)>=0},n.prototype.gte=function(g){return this.cmp(g)>=0},n.prototype.ltn=function(g){return this.cmpn(g)===-1},n.prototype.lt=function(g){return this.cmp(g)===-1},n.prototype.lten=function(g){return this.cmpn(g)<=0},n.prototype.lte=function(g){return this.cmp(g)<=0},n.prototype.eqn=function(g){return this.cmpn(g)===0},n.prototype.eq=function(g){return this.cmp(g)===0},n.red=function(g){return new W(g)},n.prototype.toRed=function(g){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(g){return this.red=g,this},n.prototype.forceRed=function(g){return r(!this.red,"Already a number in reduction context"),this._forceRed(g)},n.prototype.redAdd=function(g){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},n.prototype.redIAdd=function(g){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},n.prototype.redSub=function(g){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},n.prototype.redISub=function(g){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},n.prototype.redShl=function(g){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},n.prototype.redMul=function(g){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},n.prototype.redIMul=function(g){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(g){return r(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var S={k256:null,p224:null,p192:null,p25519:null};function I(P,g){this.name=P,this.p=new n(g,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var g=new n(null);return g.words=new Array(Math.ceil(this.n/13)),g},I.prototype.ireduce=function(g){var _=g,x;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),x=_.bitLength();while(x>this.n);var O=x<this.n?-1:_.ucmp(this.p);return O===0?(_.words[0]=0,_.length=1):O>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},I.prototype.split=function(g,_){g.iushrn(this.n,0,_)},I.prototype.imulK=function(g){return g.imul(this.k)};function j(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(j,I),j.prototype.split=function(g,_){for(var x=4194303,O=Math.min(g.length,9),L=0;L<O;L++)_.words[L]=g.words[L];if(_.length=O,g.length<=9){g.words[0]=0,g.length=1;return}var Y=g.words[9];for(_.words[_.length++]=Y&x,L=10;L<g.length;L++){var V=g.words[L]|0;g.words[L-10]=(V&x)<<4|Y>>>22,Y=V}Y>>>=22,g.words[L-10]=Y,Y===0&&g.length>10?g.length-=10:g.length-=9},j.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var _=0,x=0;x<g.length;x++){var O=g.words[x]|0;_+=O*977,g.words[x]=_&67108863,_=O*64+(_/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function B(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(B,I);function C(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(C,I);function z(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,I),z.prototype.imulK=function(g){for(var _=0,x=0;x<g.length;x++){var O=(g.words[x]|0)*19+_,L=O&67108863;O>>>=26,g.words[x]=L,_=O}return _!==0&&(g.words[g.length++]=_),g},n._prime=function(g){if(S[g])return S[g];var _;if(g==="k256")_=new j;else if(g==="p224")_=new B;else if(g==="p192")_=new C;else if(g==="p25519")_=new z;else throw new Error("Unknown prime "+g);return S[g]=_,_};function W(P){if(typeof P=="string"){var g=n._prime(P);this.m=g.p,this.prime=g}else r(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}W.prototype._verify1=function(g){r(g.negative===0,"red works only with positives"),r(g.red,"red works only with red numbers")},W.prototype._verify2=function(g,_){r((g.negative|_.negative)==0,"red works only with positives"),r(g.red&&g.red===_.red,"red works only with red numbers")},W.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):g.umod(this.m)._forceRed(this)},W.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},W.prototype.add=function(g,_){this._verify2(g,_);var x=g.add(_);return x.cmp(this.m)>=0&&x.isub(this.m),x._forceRed(this)},W.prototype.iadd=function(g,_){this._verify2(g,_);var x=g.iadd(_);return x.cmp(this.m)>=0&&x.isub(this.m),x},W.prototype.sub=function(g,_){this._verify2(g,_);var x=g.sub(_);return x.cmpn(0)<0&&x.iadd(this.m),x._forceRed(this)},W.prototype.isub=function(g,_){this._verify2(g,_);var x=g.isub(_);return x.cmpn(0)<0&&x.iadd(this.m),x},W.prototype.shl=function(g,_){return this._verify1(g),this.imod(g.ushln(_))},W.prototype.imul=function(g,_){return this._verify2(g,_),this.imod(g.imul(_))},W.prototype.mul=function(g,_){return this._verify2(g,_),this.imod(g.mul(_))},W.prototype.isqr=function(g){return this.imul(g,g.clone())},W.prototype.sqr=function(g){return this.mul(g,g)},W.prototype.sqrt=function(g){if(g.isZero())return g.clone();var _=this.m.andln(3);if(r(_%2==1),_===3){var x=this.m.add(new n(1)).iushrn(2);return this.pow(g,x)}for(var O=this.m.subn(1),L=0;!O.isZero()&&O.andln(1)===0;)L++,O.iushrn(1);r(!O.isZero());var Y=new n(1).toRed(this),V=Y.redNeg(),q=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new n(2*E*E).toRed(this);this.pow(E,q).cmp(V)!==0;)E.redIAdd(V);for(var U=this.pow(E,O),de=this.pow(g,O.addn(1).iushrn(1)),Q=this.pow(g,O),ue=L;Q.cmp(Y)!==0;){for(var le=Q,me=0;le.cmp(Y)!==0;me++)le=le.redSqr();r(me<ue);var be=this.pow(U,new n(1).iushln(ue-me-1));de=de.redMul(be),U=be.redSqr(),Q=Q.redMul(U),ue=me}return de},W.prototype.invm=function(g){var _=g._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},W.prototype.pow=function(g,_){if(_.isZero())return new n(1).toRed(this);if(_.cmpn(1)===0)return g.clone();var x=4,O=new Array(1<<x);O[0]=new n(1).toRed(this),O[1]=g;for(var L=2;L<O.length;L++)O[L]=this.mul(O[L-1],g);var Y=O[0],V=0,q=0,E=_.bitLength()%26;for(E===0&&(E=26),L=_.length-1;L>=0;L--){for(var U=_.words[L],de=E-1;de>=0;de--){var Q=U>>de&1;if(Y!==O[0]&&(Y=this.sqr(Y)),Q===0&&V===0){q=0;continue}V<<=1,V|=Q,q++,!(q!==x&&(L!==0||de!==0))&&(Y=this.mul(Y,O[V]),q=0,V=0)}E=26}return Y},W.prototype.convertTo=function(g){var _=g.umod(this.m);return _===g?_.clone():_},W.prototype.convertFrom=function(g){var _=g.clone();return _.red=null,_},n.mont=function(g){return new X(g)};function X(P){W.call(this,P),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(X,W),X.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},X.prototype.convertFrom=function(g){var _=this.imod(g.mul(this.rinv));return _.red=null,_},X.prototype.imul=function(g,_){if(g.isZero()||_.isZero())return g.words[0]=0,g.length=1,g;var x=g.imul(_),O=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=x.isub(O).iushrn(this.shift),Y=L;return L.cmp(this.m)>=0?Y=L.isub(this.m):L.cmpn(0)<0&&(Y=L.iadd(this.m)),Y._forceRed(this)},X.prototype.mul=function(g,_){if(g.isZero()||_.isZero())return new n(0)._forceRed(this);var x=g.mul(_),O=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),L=x.isub(O).iushrn(this.shift),Y=L;return L.cmp(this.m)>=0?Y=L.isub(this.m):L.cmpn(0)<0&&(Y=L.iadd(this.m)),Y._forceRed(this)},X.prototype.invm=function(g){var _=this.imod(g._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(typeof sE=="undefined"||sE,CU)});var Rf=v((Not,kU)=>{l();kU.exports=OU;function OU(t,e){if(!t)throw new Error(e||"Assertion failed")}OU.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)}});var oE=v(NU=>{l();"use strict";var O4=NU;function JEe(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!="string"){for(var i=0;i<t.length;i++)r[i]=t[i]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t);for(var i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var i=0;i<t.length;i++){var n=t.charCodeAt(i),s=n>>8,o=n&255;s?r.push(s,o):r.push(o)}return r}O4.toArray=JEe;function DU(t){return t.length===1?"0"+t:t}O4.zero2=DU;function BU(t){for(var e="",r=0;r<t.length;r++)e+=DU(t[r].toString(16));return e}O4.toHex=BU;O4.encode=function(e,r){return r==="hex"?BU(e):e}});var xs=v(MU=>{l();"use strict";var Qo=MU,eSe=Xa(),tSe=Rf(),k4=oE();Qo.assert=tSe;Qo.toArray=k4.toArray;Qo.zero2=k4.zero2;Qo.toHex=k4.toHex;Qo.encode=k4.encode;function rSe(t,e,r){var i=new Array(Math.max(t.bitLength(),r)+1);i.fill(0);for(var n=1<<e+1,s=t.clone(),o=0;o<i.length;o++){var a,c=s.andln(n-1);s.isOdd()?(c>(n>>1)-1?a=(n>>1)-c:a=c,s.isubn(a)):a=0,i[o]=a,s.iushrn(1)}return i}Qo.getNAF=rSe;function iSe(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var i=0,n=0,s;t.cmpn(-i)>0||e.cmpn(-n)>0;){var o=t.andln(3)+i&3,a=e.andln(3)+n&3;o===3&&(o=-1),a===3&&(a=-1);var c;(o&1)==0?c=0:(s=t.andln(7)+i&7,(s===3||s===5)&&a===2?c=-o:c=o),r[0].push(c);var u;(a&1)==0?u=0:(s=e.andln(7)+n&7,(s===3||s===5)&&o===2?u=-a:u=a),r[1].push(u),2*i===c+1&&(i=1-i),2*n===u+1&&(n=1-n),t.iushrn(1),e.iushrn(1)}return r}Qo.getJSF=iSe;function nSe(t,e,r){var i="_"+e;t.prototype[e]=function(){return this[i]!==void 0?this[i]:this[i]=r.call(this)}}Qo.cachedProperty=nSe;function sSe(t){return typeof t=="string"?Qo.toArray(t,"hex"):t}Qo.parseBytes=sSe;function oSe(t){return new eSe(t,"hex","le")}Qo.intFromLE=oSe});var fE=v((qot,uE)=>{l();var aE;uE.exports=function(e){return aE||(aE=new Pf(null)),aE.generate(e)};function Pf(t){this.rand=t}uE.exports.Rand=Pf;Pf.prototype.generate=function(e){return this._rand(e)};Pf.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Pf.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Pf.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Pf.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(cE=C0(),typeof cE.randomBytes!="function")throw new Error("Not supported");Pf.prototype._rand=function(e){return cE.randomBytes(e)}}catch(t){}var cE});var Fy=v((jot,LU)=>{l();"use strict";var td=Xa(),Uy=xs(),D4=Uy.getNAF,aSe=Uy.getJSF,B4=Uy.assert;function Cf(t,e){this.type=t,this.p=new td(e.p,16),this.red=e.prime?td.red(e.prime):td.mont(this.p),this.zero=new td(0).toRed(this.red),this.one=new td(1).toRed(this.red),this.two=new td(2).toRed(this.red),this.n=e.n&&new td(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}LU.exports=Cf;Cf.prototype.point=function(){throw new Error("Not implemented")};Cf.prototype.validate=function(){throw new Error("Not implemented")};Cf.prototype._fixedNafMul=function(e,r){B4(e.precomputed);var i=e._getDoubles(),n=D4(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2==0?2:1);s/=3;var o=[],a,c;for(a=0;a<n.length;a+=i.step){c=0;for(var u=a+i.step-1;u>=a;u--)c=(c<<1)+n[u];o.push(c)}for(var f=this.jpoint(null,null,null),d=this.jpoint(null,null,null),h=s;h>0;h--){for(a=0;a<o.length;a++)c=o[a],c===h?d=d.mixedAdd(i.points[a]):c===-h&&(d=d.mixedAdd(i.points[a].neg()));f=f.add(d)}return f.toP()};Cf.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=D4(r,i,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var u=0;c>=0&&o[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var f=o[c];B4(f!==0),e.type==="affine"?f>0?a=a.mixedAdd(s[f-1>>1]):a=a.mixedAdd(s[-f-1>>1].neg()):f>0?a=a.add(s[f-1>>1]):a=a.add(s[-f-1>>1].neg())}return e.type==="affine"?a.toP():a};Cf.prototype._wnafMulAdd=function(e,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,f,d,h;for(f=0;f<n;f++){h=r[f];var p=h._getNAFPoints(e);o[f]=p.wnd,a[f]=p.points}for(f=n-1;f>=1;f-=2){var y=f-1,m=f;if(o[y]!==1||o[m]!==1){c[y]=D4(i[y],o[y],this._bitLength),c[m]=D4(i[m],o[m],this._bitLength),u=Math.max(c[y].length,u),u=Math.max(c[m].length,u);continue}var w=[r[y],null,null,r[m]];r[y].y.cmp(r[m].y)===0?(w[1]=r[y].add(r[m]),w[2]=r[y].toJ().mixedAdd(r[m].neg())):r[y].y.cmp(r[m].y.redNeg())===0?(w[1]=r[y].toJ().mixedAdd(r[m]),w[2]=r[y].add(r[m].neg())):(w[1]=r[y].toJ().mixedAdd(r[m]),w[2]=r[y].toJ().mixedAdd(r[m].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],S=aSe(i[y],i[m]);for(u=Math.max(S[0].length,u),c[y]=new Array(u),c[m]=new Array(u),d=0;d<u;d++){var I=S[0][d]|0,j=S[1][d]|0;c[y][d]=b[(I+1)*3+(j+1)],c[m][d]=0,a[y]=w}}var B=this.jpoint(null,null,null),C=this._wnafT4;for(f=u;f>=0;f--){for(var z=0;f>=0;){var W=!0;for(d=0;d<n;d++)C[d]=c[d][f]|0,C[d]!==0&&(W=!1);if(!W)break;z++,f--}if(f>=0&&z++,B=B.dblp(z),f<0)break;for(d=0;d<n;d++){var X=C[d];X!==0&&(X>0?h=a[d][X-1>>1]:X<0&&(h=a[d][-X-1>>1].neg()),h.type==="affine"?B=B.mixedAdd(h):B=B.add(h))}}for(f=0;f<n;f++)a[f]=null;return s?B:B.toP()};function Js(t,e){this.curve=t,this.type=e,this.precomputed=null}Cf.BasePoint=Js;Js.prototype.eq=function(){throw new Error("Not implemented")};Js.prototype.validate=function(){return this.curve.validate(this)};Cf.prototype.decodePoint=function(e,r){e=Uy.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1==2*i){e[0]===6?B4(e[e.length-1]%2==0):e[0]===7&&B4(e[e.length-1]%2==1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Js.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Js.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Js.prototype.encode=function(e,r){return Uy.encode(this._encode(r),e)};Js.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Js.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Js.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)n=n.dbl();i.push(n)}return{step:e,points:i}};Js.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}};Js.prototype._getBeta=function(){return null};Js.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r}});var on=v((Uot,lE)=>{l();typeof Object.create=="function"?lE.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:lE.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}}});var jU=v((Fot,qU)=>{l();"use strict";var cSe=xs(),Zr=Xa(),dE=on(),j0=Fy(),uSe=cSe.assert;function eo(t){j0.call(this,"short",t),this.a=new Zr(t.a,16).toRed(this.red),this.b=new Zr(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}dE(eo,j0);qU.exports=eo;eo.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new Zr(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new Zr(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],uSe(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Zr(a.a,16),b:new Zr(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}};eo.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Zr.mont(e),i=new Zr(2).toRed(r).redInvm(),n=i.redNeg(),s=new Zr(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]};eo.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new Zr(1),o=new Zr(0),a=new Zr(0),c=new Zr(1),u,f,d,h,p,y,m,w=0,b,S;i.cmpn(0)!==0;){var I=n.div(i);b=n.sub(I.mul(i)),S=a.sub(I.mul(s));var j=c.sub(I.mul(o));if(!d&&b.cmp(r)<0)u=m.neg(),f=s,d=b.neg(),h=S;else if(d&&++w==2)break;m=b,n=i,i=b,a=s,s=S,c=o,o=j}p=b.neg(),y=S;var B=d.sqr().add(h.sqr()),C=p.sqr().add(y.sqr());return C.cmp(B)>=0&&(p=u,y=f),d.negative&&(d=d.neg(),h=h.neg()),p.negative&&(p=p.neg(),y=y.neg()),[{a:d,b:h},{a:p,b:y}]};eo.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),c=o.mul(n.a),u=s.mul(i.b),f=o.mul(n.b),d=e.sub(a).sub(c),h=u.add(f).neg();return{k1:d,k2:h}};eo.prototype.pointFromX=function(e,r){e=new Zr(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)};eo.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};eo.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[o*2]=c,n[o*2+1]=u,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var f=this._wnafMulAdd(1,n,s,o*2,i),d=0;d<o*2;d++)n[d]=null,s[d]=null;return f};function Xi(t,e,r,i){j0.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Zr(e,16),this.y=new Zr(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}dE(Xi,j0.BasePoint);eo.prototype.point=function(e,r,i){return new Xi(this,e,r,i)};eo.prototype.pointFromJSON=function(e,r){return Xi.fromJSON(this,e,r)};Xi.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}};Xi.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Xi.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(a){return e.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n};Xi.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Xi.prototype.isInfinity=function(){return this.inf};Xi.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};Xi.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Xi.prototype.getX=function(){return this.x.fromRed()};Xi.prototype.getY=function(){return this.y.fromRed()};Xi.prototype.mul=function(e){return e=new Zr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Xi.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)};Xi.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)};Xi.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Xi.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};Xi.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function an(t,e,r,i){j0.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Zr(0)):(this.x=new Zr(e,16),this.y=new Zr(r,16),this.z=new Zr(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}dE(an,j0.BasePoint);eo.prototype.jpoint=function(e,r,i){return new an(this,e,r,i)};an.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)};an.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};an.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),c=n.redSub(s),u=o.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),d=f.redMul(c),h=n.redMul(f),p=u.redSqr().redIAdd(d).redISub(h).redISub(h),y=u.redMul(h.redISub(p)).redISub(o.redMul(d)),m=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(p,y,m)};an.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=i.redSub(n),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),f=u.redMul(a),d=i.redMul(u),h=c.redSqr().redIAdd(f).redISub(d).redISub(d),p=c.redMul(d.redISub(h)).redISub(s.redMul(f)),y=this.z.redMul(a);return this.curve.jpoint(h,p,y)};an.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),f=a.redAdd(a);for(r=0;r<e;r++){var d=o.redSqr(),h=f.redSqr(),p=h.redSqr(),y=d.redAdd(d).redIAdd(d).redIAdd(n.redMul(u)),m=o.redMul(h),w=y.redSqr().redISub(m.redAdd(m)),b=m.redISub(w),S=y.redMul(b);S=S.redIAdd(S).redISub(p);var I=f.redMul(c);r+1<e&&(u=u.redMul(p)),o=w,c=I,f=S}return this.curve.jpoint(o,f.redMul(s),c)};an.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};an.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n),u=c.redSqr().redISub(a).redISub(a),f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),e=u,r=c.redMul(a.redISub(u)).redISub(f),i=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),p=h.redSqr(),y=this.x.redAdd(h).redSqr().redISub(d).redISub(p);y=y.redIAdd(y);var m=d.redAdd(d).redIAdd(d),w=m.redSqr(),b=p.redIAdd(p);b=b.redIAdd(b),b=b.redIAdd(b),e=w.redISub(y).redISub(y),r=m.redMul(y.redISub(e)).redISub(b),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)};an.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);e=u;var f=o.redIAdd(o);f=f.redIAdd(f),f=f.redIAdd(f),r=c.redMul(a.redISub(u)).redISub(f),i=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),h=this.y.redSqr(),p=this.x.redMul(h),y=this.x.redSub(d).redMul(this.x.redAdd(d));y=y.redAdd(y).redIAdd(y);var m=p.redIAdd(p);m=m.redIAdd(m);var w=m.redAdd(m);e=y.redSqr().redISub(w),i=this.y.redAdd(this.z).redSqr().redISub(h).redISub(d);var b=h.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b),r=y.redMul(m.redISub(e)).redISub(b)}return this.curve.jpoint(e,r,i)};an.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),u=r.redAdd(r);u=u.redIAdd(u);var f=u.redMul(a),d=c.redSqr().redISub(f.redAdd(f)),h=f.redISub(d),p=a.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var y=c.redMul(h).redISub(p),m=i.redAdd(i).redMul(n);return this.curve.jpoint(d,y,m)};an.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),u=n.redIAdd(n);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var f=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(u),d=r.redMul(f);d=d.redIAdd(d),d=d.redIAdd(d);var h=this.x.redMul(c).redISub(d);h=h.redIAdd(h),h=h.redIAdd(h);var p=this.y.redMul(f.redMul(u.redISub(f)).redISub(a.redMul(c)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var y=this.z.redAdd(a).redSqr().redISub(i).redISub(c);return this.curve.jpoint(h,p,y)};an.prototype.mul=function(e,r){return e=new Zr(e,r),this.curve._wnafMul(this,e)};an.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0};an.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};an.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};an.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var KU=v((Kot,FU)=>{l();"use strict";var U0=Xa(),UU=on(),N4=Fy(),fSe=xs();function F0(t){N4.call(this,"mont",t),this.a=new U0(t.a,16).toRed(this.red),this.b=new U0(t.b,16).toRed(this.red),this.i4=new U0(4).toRed(this.red).redInvm(),this.two=new U0(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}UU(F0,N4);FU.exports=F0;F0.prototype.validate=function(e){var r=e.normalize().x,i=r.redSqr(),n=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=n.redSqrt();return s.redSqr().cmp(n)===0};function Qi(t,e,r){N4.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new U0(e,16),this.z=new U0(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}UU(Qi,N4.BasePoint);F0.prototype.decodePoint=function(e,r){return this.point(fSe.toArray(e,r),1)};F0.prototype.point=function(e,r){return new Qi(this,e,r)};F0.prototype.pointFromJSON=function(e){return Qi.fromJSON(this,e)};Qi.prototype.precompute=function(){};Qi.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Qi.fromJSON=function(e,r){return new Qi(e,r[0],r[1]||e.one)};Qi.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Qi.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Qi.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),s=r.redSub(n),o=r.redMul(n),a=s.redMul(n.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};Qi.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Qi.prototype.diffAdd=function(e,r){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(i),c=s.redMul(n),u=r.z.redMul(a.redAdd(c).redSqr()),f=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(u,f)};Qi.prototype.mul=function(e){for(var r=e.clone(),i=this,n=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(i=i.diffAdd(n,s),n=n.dbl()):(n=i.diffAdd(n,s),i=i.dbl());return n};Qi.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Qi.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Qi.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Qi.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Qi.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var HU=v((Vot,zU)=>{l();"use strict";var lSe=xs(),fu=Xa(),VU=on(),M4=Fy(),dSe=lSe.assert;function Qa(t){this.twisted=(t.a|0)!=1,this.mOneA=this.twisted&&(t.a|0)==-1,this.extended=this.mOneA,M4.call(this,"edwards",t),this.a=new fu(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new fu(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new fu(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),dSe(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)==1}VU(Qa,M4);zU.exports=Qa;Qa.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Qa.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Qa.prototype.jpoint=function(e,r,i,n){return this.point(e,r,i,n)};Qa.prototype.pointFromX=function(e,r){e=new fu(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=n.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)};Qa.prototype.pointFromY=function(e,r){e=new fu(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};Qa.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),i=e.y.redSqr(),n=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return n.cmp(s)===0};function gr(t,e,r,i,n){M4.BasePoint.call(this,t,"projective"),e===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new fu(e,16),this.y=new fu(r,16),this.z=i?new fu(i,16):this.curve.one,this.t=n&&new fu(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}VU(gr,M4.BasePoint);Qa.prototype.pointFromJSON=function(e){return gr.fromJSON(this,e)};Qa.prototype.point=function(e,r,i,n){return new gr(this,e,r,i,n)};gr.fromJSON=function(e,r){return new gr(e,r[0],r[1],r[2])};gr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};gr.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};gr.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=n.redAdd(r),a=o.redSub(i),c=n.redSub(r),u=s.redMul(a),f=o.redMul(c),d=s.redMul(c),h=a.redMul(o);return this.curve.point(u,f,h,d)};gr.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),n,s,o,a,c,u;if(this.curve.twisted){a=this.curve._mulA(r);var f=a.redAdd(i);this.zOne?(n=e.redSub(r).redSub(i).redMul(f.redSub(this.curve.two)),s=f.redMul(a.redSub(i)),o=f.redSqr().redSub(f).redSub(f)):(c=this.z.redSqr(),u=f.redSub(c).redISub(c),n=e.redSub(r).redISub(i).redMul(u),s=f.redMul(a.redSub(i)),o=f.redMul(u))}else a=r.redAdd(i),c=this.curve._mulC(this.z).redSqr(),u=a.redSub(c).redSub(c),n=this.curve._mulC(e.redISub(a)).redMul(u),s=this.curve._mulC(a).redMul(r.redISub(i)),o=a.redMul(u);return this.curve.point(n,s,o)};gr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};gr.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=i.redSub(r),a=s.redSub(n),c=s.redAdd(n),u=i.redAdd(r),f=o.redMul(a),d=c.redMul(u),h=o.redMul(u),p=a.redMul(c);return this.curve.point(f,d,p,h)};gr.prototype._projAdd=function(e){var r=this.z.redMul(e.z),i=r.redSqr(),n=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(n).redMul(s),a=i.redSub(o),c=i.redAdd(o),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(s),f=r.redMul(a).redMul(u),d,h;return this.curve.twisted?(d=r.redMul(c).redMul(s.redSub(this.curve._mulA(n))),h=a.redMul(c)):(d=r.redMul(c).redMul(s.redSub(n)),h=this.curve._mulC(a).redMul(c)),this.curve.point(f,d,h)};gr.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};gr.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};gr.prototype.mulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!1)};gr.prototype.jmulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!0)};gr.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};gr.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};gr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};gr.prototype.getY=function(){return this.normalize(),this.y.fromRed()};gr.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};gr.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}};gr.prototype.toP=gr.prototype.normalize;gr.prototype.mixedAdd=gr.prototype.add});var hE=v($U=>{l();"use strict";var L4=$U;L4.base=Fy();L4.short=jU();L4.mont=KU();L4.edwards=HU()});var Zo=v(cr=>{l();"use strict";var hSe=Rf(),pSe=on();cr.inherits=pSe;function ySe(t,e){return(t.charCodeAt(e)&64512)!=55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)==56320}function gSe(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):ySe(t,n)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128)}else for(n=0;n<t.length;n++)r[n]=t[n]|0;return r}cr.toArray=gSe;function mSe(t){for(var e="",r=0;r<t.length;r++)e+=WU(t[r].toString(16));return e}cr.toHex=mSe;function GU(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}cr.htonl=GU;function bSe(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];e==="little"&&(n=GU(n)),r+=YU(n.toString(16))}return r}cr.toHex32=bSe;function WU(t){return t.length===1?"0"+t:t}cr.zero2=WU;function YU(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}cr.zero8=YU;function vSe(t,e,r,i){var n=r-e;hSe(n%4==0);for(var s=new Array(n/4),o=0,a=e;o<s.length;o++,a+=4){var c;i==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}cr.join32=vSe;function wSe(t,e){for(var r=new Array(t.length*4),i=0,n=0;i<t.length;i++,n+=4){var s=t[i];e==="big"?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=s&255):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=s&255)}return r}cr.split32=wSe;function _Se(t,e){return t>>>e|t<<32-e}cr.rotr32=_Se;function ESe(t,e){return t<<e|t>>>32-e}cr.rotl32=ESe;function SSe(t,e){return t+e>>>0}cr.sum32=SSe;function xSe(t,e,r){return t+e+r>>>0}cr.sum32_3=xSe;function ASe(t,e,r,i){return t+e+r+i>>>0}cr.sum32_4=ASe;function ISe(t,e,r,i,n){return t+e+r+i+n>>>0}cr.sum32_5=ISe;function TSe(t,e,r,i){var n=t[e],s=t[e+1],o=i+s>>>0,a=(o<i?1:0)+r+n;t[e]=a>>>0,t[e+1]=o}cr.sum64=TSe;function RSe(t,e,r,i){var n=e+i>>>0,s=(n<e?1:0)+t+r;return s>>>0}cr.sum64_hi=RSe;function PSe(t,e,r,i){var n=e+i;return n>>>0}cr.sum64_lo=PSe;function CSe(t,e,r,i,n,s,o,a){var c=0,u=e;u=u+i>>>0,c+=u<e?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+a>>>0,c+=u<a?1:0;var f=t+r+n+o+c;return f>>>0}cr.sum64_4_hi=CSe;function OSe(t,e,r,i,n,s,o,a){var c=e+i+s+a;return c>>>0}cr.sum64_4_lo=OSe;function kSe(t,e,r,i,n,s,o,a,c,u){var f=0,d=e;d=d+i>>>0,f+=d<e?1:0,d=d+s>>>0,f+=d<s?1:0,d=d+a>>>0,f+=d<a?1:0,d=d+u>>>0,f+=d<u?1:0;var h=t+r+n+o+c+f;return h>>>0}cr.sum64_5_hi=kSe;function DSe(t,e,r,i,n,s,o,a,c,u){var f=e+i+s+a+u;return f>>>0}cr.sum64_5_lo=DSe;function BSe(t,e,r){var i=e<<32-r|t>>>r;return i>>>0}cr.rotr64_hi=BSe;function NSe(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}cr.rotr64_lo=NSe;function MSe(t,e,r){return t>>>r}cr.shr64_hi=MSe;function LSe(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}cr.shr64_lo=LSe});var K0=v(QU=>{l();"use strict";var XU=Zo(),qSe=Rf();function q4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}QU.BlockHash=q4;q4.prototype.update=function(e,r){if(e=XU.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=XU.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this};q4.prototype.digest=function(e){return this.update(this._pad()),qSe(this.pending===null),this._digest(e)};q4.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,i=r-(e+this.padLength)%r,n=new Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=e&255}else for(n[s++]=e&255,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,o=8;o<this.padLength;o++)n[s++]=0;return n}});var pE=v(lu=>{l();"use strict";var jSe=Zo(),Za=jSe.rotr32;function USe(t,e,r,i){if(t===0)return ZU(e,r,i);if(t===1||t===3)return eF(e,r,i);if(t===2)return JU(e,r,i)}lu.ft_1=USe;function ZU(t,e,r){return t&e^~t&r}lu.ch32=ZU;function JU(t,e,r){return t&e^t&r^e&r}lu.maj32=JU;function eF(t,e,r){return t^e^r}lu.p32=eF;function FSe(t){return Za(t,2)^Za(t,13)^Za(t,22)}lu.s0_256=FSe;function KSe(t){return Za(t,6)^Za(t,11)^Za(t,25)}lu.s1_256=KSe;function VSe(t){return Za(t,7)^Za(t,18)^t>>>3}lu.g0_256=VSe;function zSe(t){return Za(t,17)^Za(t,19)^t>>>10}lu.g1_256=zSe});var iF=v((Wot,rF)=>{l();"use strict";var V0=Zo(),HSe=K0(),$Se=pE(),yE=V0.rotl32,Ky=V0.sum32,GSe=V0.sum32_5,WSe=$Se.ft_1,tF=HSe.BlockHash,YSe=[1518500249,1859775393,2400959708,3395469782];function Ja(){if(!(this instanceof Ja))return new Ja;tF.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}V0.inherits(Ja,tF);rF.exports=Ja;Ja.blockSize=512;Ja.outSize=160;Ja.hmacStrength=80;Ja.padLength=64;Ja.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=yE(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],u=this.h[4];for(n=0;n<i.length;n++){var f=~~(n/20),d=GSe(yE(s,5),WSe(f,o,a,c),u,i[n],YSe[f]);u=c,c=a,a=yE(o,30),o=s,s=d}this.h[0]=Ky(this.h[0],s),this.h[1]=Ky(this.h[1],o),this.h[2]=Ky(this.h[2],a),this.h[3]=Ky(this.h[3],c),this.h[4]=Ky(this.h[4],u)};Ja.prototype._digest=function(e){return e==="hex"?V0.toHex32(this.h,"big"):V0.split32(this.h,"big")}});var gE=v((Yot,sF)=>{l();"use strict";var z0=Zo(),XSe=K0(),H0=pE(),QSe=Rf(),Jo=z0.sum32,ZSe=z0.sum32_4,JSe=z0.sum32_5,exe=H0.ch32,txe=H0.maj32,rxe=H0.s0_256,ixe=H0.s1_256,nxe=H0.g0_256,sxe=H0.g1_256,nF=XSe.BlockHash,oxe=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ec(){if(!(this instanceof ec))return new ec;nF.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=oxe,this.W=new Array(64)}z0.inherits(ec,nF);sF.exports=ec;ec.blockSize=512;ec.outSize=256;ec.hmacStrength=192;ec.padLength=64;ec.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=ZSe(sxe(i[n-2]),i[n-7],nxe(i[n-15]),i[n-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],u=this.h[4],f=this.h[5],d=this.h[6],h=this.h[7];for(QSe(this.k.length===i.length),n=0;n<i.length;n++){var p=JSe(h,ixe(u),exe(u,f,d),this.k[n],i[n]),y=Jo(rxe(s),txe(s,o,a));h=d,d=f,f=u,u=Jo(c,p),c=a,a=o,o=s,s=Jo(p,y)}this.h[0]=Jo(this.h[0],s),this.h[1]=Jo(this.h[1],o),this.h[2]=Jo(this.h[2],a),this.h[3]=Jo(this.h[3],c),this.h[4]=Jo(this.h[4],u),this.h[5]=Jo(this.h[5],f),this.h[6]=Jo(this.h[6],d),this.h[7]=Jo(this.h[7],h)};ec.prototype._digest=function(e){return e==="hex"?z0.toHex32(this.h,"big"):z0.split32(this.h,"big")}});var cF=v((Xot,aF)=>{l();"use strict";var mE=Zo(),oF=gE();function du(){if(!(this instanceof du))return new du;oF.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}mE.inherits(du,oF);aF.exports=du;du.blockSize=512;du.outSize=224;du.hmacStrength=192;du.padLength=64;du.prototype._digest=function(e){return e==="hex"?mE.toHex32(this.h.slice(0,7),"big"):mE.split32(this.h.slice(0,7),"big")}});var wE=v((Qot,dF)=>{l();"use strict";var is=Zo(),axe=K0(),cxe=Rf(),tc=is.rotr64_hi,rc=is.rotr64_lo,uF=is.shr64_hi,fF=is.shr64_lo,Of=is.sum64,bE=is.sum64_hi,vE=is.sum64_lo,uxe=is.sum64_4_hi,fxe=is.sum64_4_lo,lxe=is.sum64_5_hi,dxe=is.sum64_5_lo,lF=axe.BlockHash,hxe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ea(){if(!(this instanceof ea))return new ea;lF.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=hxe,this.W=new Array(160)}is.inherits(ea,lF);dF.exports=ea;ea.blockSize=1024;ea.outSize=512;ea.hmacStrength=192;ea.padLength=128;ea.prototype._prepareBlock=function(e,r){for(var i=this.W,n=0;n<32;n++)i[n]=e[r+n];for(;n<i.length;n+=2){var s=xxe(i[n-4],i[n-3]),o=Axe(i[n-4],i[n-3]),a=i[n-14],c=i[n-13],u=Exe(i[n-30],i[n-29]),f=Sxe(i[n-30],i[n-29]),d=i[n-32],h=i[n-31];i[n]=uxe(s,o,a,c,u,f,d,h),i[n+1]=fxe(s,o,a,c,u,f,d,h)}};ea.prototype._update=function(e,r){this._prepareBlock(e,r);var i=this.W,n=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],f=this.h[6],d=this.h[7],h=this.h[8],p=this.h[9],y=this.h[10],m=this.h[11],w=this.h[12],b=this.h[13],S=this.h[14],I=this.h[15];cxe(this.k.length===i.length);for(var j=0;j<i.length;j+=2){var B=S,C=I,z=wxe(h,p),W=_xe(h,p),X=pxe(h,p,y,m,w,b),P=yxe(h,p,y,m,w,b),g=this.k[j],_=this.k[j+1],x=i[j],O=i[j+1],L=lxe(B,C,z,W,X,P,g,_,x,O),Y=dxe(B,C,z,W,X,P,g,_,x,O);B=bxe(n,s),C=vxe(n,s),z=gxe(n,s,o,a,c,u),W=mxe(n,s,o,a,c,u);var V=bE(B,C,z,W),q=vE(B,C,z,W);S=w,I=b,w=y,b=m,y=h,m=p,h=bE(f,d,L,Y),p=vE(d,d,L,Y),f=c,d=u,c=o,u=a,o=n,a=s,n=bE(L,Y,V,q),s=vE(L,Y,V,q)}Of(this.h,0,n,s),Of(this.h,2,o,a),Of(this.h,4,c,u),Of(this.h,6,f,d),Of(this.h,8,h,p),Of(this.h,10,y,m),Of(this.h,12,w,b),Of(this.h,14,S,I)};ea.prototype._digest=function(e){return e==="hex"?is.toHex32(this.h,"big"):is.split32(this.h,"big")};function pxe(t,e,r,i,n){var s=t&r^~t&n;return s<0&&(s+=4294967296),s}function yxe(t,e,r,i,n,s){var o=e&i^~e&s;return o<0&&(o+=4294967296),o}function gxe(t,e,r,i,n){var s=t&r^t&n^r&n;return s<0&&(s+=4294967296),s}function mxe(t,e,r,i,n,s){var o=e&i^e&s^i&s;return o<0&&(o+=4294967296),o}function bxe(t,e){var r=tc(t,e,28),i=tc(e,t,2),n=tc(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function vxe(t,e){var r=rc(t,e,28),i=rc(e,t,2),n=rc(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function wxe(t,e){var r=tc(t,e,14),i=tc(t,e,18),n=tc(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function _xe(t,e){var r=rc(t,e,14),i=rc(t,e,18),n=rc(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function Exe(t,e){var r=tc(t,e,1),i=tc(t,e,8),n=uF(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function Sxe(t,e){var r=rc(t,e,1),i=rc(t,e,8),n=fF(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function xxe(t,e){var r=tc(t,e,19),i=tc(e,t,29),n=uF(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}function Axe(t,e){var r=rc(t,e,19),i=rc(e,t,29),n=fF(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}});var yF=v((Zot,pF)=>{l();"use strict";var _E=Zo(),hF=wE();function hu(){if(!(this instanceof hu))return new hu;hF.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}_E.inherits(hu,hF);pF.exports=hu;hu.blockSize=1024;hu.outSize=384;hu.hmacStrength=192;hu.padLength=128;hu.prototype._digest=function(e){return e==="hex"?_E.toHex32(this.h.slice(0,12),"big"):_E.split32(this.h.slice(0,12),"big")}});var gF=v($0=>{l();"use strict";$0.sha1=iF();$0.sha224=cF();$0.sha256=gE();$0.sha384=yF();$0.sha512=wE()});var EF=v(_F=>{l();"use strict";var rd=Zo(),Ixe=K0(),j4=rd.rotl32,mF=rd.sum32,Vy=rd.sum32_3,bF=rd.sum32_4,vF=Ixe.BlockHash;function ic(){if(!(this instanceof ic))return new ic;vF.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}rd.inherits(ic,vF);_F.ripemd160=ic;ic.blockSize=512;ic.outSize=160;ic.hmacStrength=192;ic.padLength=64;ic.prototype._update=function(e,r){for(var i=this.h[0],n=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=i,u=n,f=s,d=o,h=a,p=0;p<80;p++){var y=mF(j4(bF(i,wF(p,n,s,o),e[Pxe[p]+r],Txe(p)),Oxe[p]),a);i=a,a=o,o=j4(s,10),s=n,n=y,y=mF(j4(bF(c,wF(79-p,u,f,d),e[Cxe[p]+r],Rxe(p)),kxe[p]),h),c=h,h=d,d=j4(f,10),f=u,u=y}y=Vy(this.h[1],s,d),this.h[1]=Vy(this.h[2],o,h),this.h[2]=Vy(this.h[3],a,c),this.h[3]=Vy(this.h[4],i,u),this.h[4]=Vy(this.h[0],n,f),this.h[0]=y};ic.prototype._digest=function(e){return e==="hex"?rd.toHex32(this.h,"little"):rd.split32(this.h,"little")};function wF(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function Txe(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Rxe(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var Pxe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Cxe=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Oxe=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],kxe=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var xF=v((tat,SF)=>{l();"use strict";var Dxe=Zo(),Bxe=Rf();function G0(t,e,r){if(!(this instanceof G0))return new G0(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Dxe.toArray(e,r))}SF.exports=G0;G0.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Bxe(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};G0.prototype.update=function(e,r){return this.inner.update(e,r),this};G0.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var U4=v(AF=>{l();var cn=AF;cn.utils=Zo();cn.common=K0();cn.sha=gF();cn.ripemd=EF();cn.hmac=xF();cn.sha1=cn.sha.sha1;cn.sha256=cn.sha.sha256;cn.sha224=cn.sha.sha224;cn.sha384=cn.sha.sha384;cn.sha512=cn.sha.sha512;cn.ripemd160=cn.ripemd.ripemd160});var TF=v((iat,IF)=>{l();IF.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var F4=v(CF=>{l();"use strict";var EE=CF,kf=U4(),SE=hE(),Nxe=xs(),RF=Nxe.assert;function PF(t){t.type==="short"?this.curve=new SE.short(t):t.type==="edwards"?this.curve=new SE.edwards(t):this.curve=new SE.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,RF(this.g.validate(),"Invalid curve"),RF(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}EE.PresetCurve=PF;function Df(t,e){Object.defineProperty(EE,t,{configurable:!0,enumerable:!0,get:function(){var r=new PF(e);return Object.defineProperty(EE,t,{configurable:!0,enumerable:!0,value:r}),r}})}Df("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:kf.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Df("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:kf.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Df("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:kf.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Df("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:kf.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Df("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:kf.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Df("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:kf.sha256,gRed:!1,g:["9"]});Df("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:kf.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var xE;try{xE=TF()}catch(t){xE=void 0}Df("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:kf.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",xE]})});var DF=v((sat,kF)=>{l();"use strict";var Mxe=U4(),id=oE(),OF=Rf();function Bf(t){if(!(this instanceof Bf))return new Bf(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=id.toArray(t.entropy,t.entropyEnc||"hex"),r=id.toArray(t.nonce,t.nonceEnc||"hex"),i=id.toArray(t.pers,t.persEnc||"hex");OF(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}kF.exports=Bf;Bf.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};Bf.prototype._hmac=function(){return new Mxe.hmac(this.hash,this.K)};Bf.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),!!e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Bf.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=id.toArray(e,r),i=id.toArray(i,n),OF(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};Bf.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=id.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(i),this._reseed++,id.encode(o,r)}});var NF=v((oat,BF)=>{l();"use strict";var Lxe=Xa(),qxe=xs(),AE=qxe.assert;function An(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}BF.exports=An;An.fromPublic=function(e,r,i){return r instanceof An?r:new An(e,{pub:r,pubEnc:i})};An.fromPrivate=function(e,r,i){return r instanceof An?r:new An(e,{priv:r,privEnc:i})};An.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};An.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};An.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};An.prototype._importPrivate=function(e,r){this.priv=new Lxe(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};An.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?AE(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&AE(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};An.prototype.derive=function(e){return e.validate()||AE(e.validate(),"public point not validated"),e.mul(this.priv).getX()};An.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)};An.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};An.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var qF=v((aat,LF)=>{l();"use strict";var K4=Xa(),IE=xs(),jxe=IE.assert;function V4(t,e){if(t instanceof V4)return t;this._importDER(t,e)||(jxe(t.r&&t.s,"Signature without r or s"),this.r=new K4(t.r,16),this.s=new K4(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}LF.exports=V4;function Uxe(){this.place=0}function TE(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return n<=127?!1:(e.place=o,n)}function MF(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}V4.prototype._importDER=function(e,r){e=IE.toArray(e,r);var i=new Uxe;if(e[i.place++]!==48)return!1;var n=TE(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=TE(e,i);if(s===!1)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var a=TE(e,i);if(a===!1||e.length!==a+i.place)return!1;var c=e.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new K4(o),this.s=new K4(c),this.recoveryParam=null,!0};function RE(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}V4.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=MF(r),i=MF(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];RE(n,r.length),n=n.concat(r),n.push(2),RE(n,i.length);var s=n.concat(i),o=[48];return RE(o,s.length),o=o.concat(s),IE.encode(o,e)}});var KF=v((cat,FF)=>{l();"use strict";var nd=Xa(),jF=DF(),Fxe=xs(),PE=F4(),Kxe=fE(),UF=Fxe.assert,CE=NF(),z4=qF();function to(t){if(!(this instanceof to))return new to(t);typeof t=="string"&&(UF(Object.prototype.hasOwnProperty.call(PE,t),"Unknown curve "+t),t=PE[t]),t instanceof PE.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}FF.exports=to;to.prototype.keyPair=function(e){return new CE(this,e)};to.prototype.keyFromPrivate=function(e,r){return CE.fromPrivate(this,e,r)};to.prototype.keyFromPublic=function(e,r){return CE.fromPublic(this,e,r)};to.prototype.genKeyPair=function(e){e||(e={});for(var r=new jF({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Kxe(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new nd(2));;){var s=new nd(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}};to.prototype._truncateToN=function(e,r){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};to.prototype.sign=function(e,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),e=this._truncateToN(new nd(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new jF({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new nd(1)),f=0;;f++){var d=n.k?n.k(f):new nd(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(u)>=0)){var h=this.g.mul(d);if(!h.isInfinity()){var p=h.getX(),y=p.umod(this.n);if(y.cmpn(0)!==0){var m=d.invm(this.n).mul(y.mul(r.getPrivate()).iadd(e));if(m=m.umod(this.n),m.cmpn(0)!==0){var w=(h.getY().isOdd()?1:0)|(p.cmp(y)!==0?2:0);return n.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),w^=1),new z4({r:y,s:m,recoveryParam:w})}}}}}};to.prototype.verify=function(e,r,i,n){e=this._truncateToN(new nd(e,16)),i=this.keyFromPublic(i,n),r=new z4(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),u=a.mul(s).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,i.getPublic(),u),f.isInfinity()?!1:f.eqXToP(s)):(f=this.g.mulAdd(c,i.getPublic(),u),f.isInfinity()?!1:f.getX().umod(this.n).cmp(s)===0)};to.prototype.recoverPubKey=function(t,e,r,i){UF((3&r)===r,"The recovery param is more than two bits"),e=new z4(e,i);var n=this.n,s=new nd(t),o=e.r,a=e.s,c=r&1,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var f=e.r.invm(n),d=n.sub(s).mul(f).umod(n),h=a.mul(f).umod(n);return this.g.mulAdd(d,o,h)};to.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new z4(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch(o){continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")}});var $F=v((uat,HF)=>{l();"use strict";var zy=xs(),VF=zy.assert,zF=zy.parseBytes,W0=zy.cachedProperty;function Zi(t,e){this.eddsa=t,this._secret=zF(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=zF(e.pub)}Zi.fromPublic=function(e,r){return r instanceof Zi?r:new Zi(e,{pub:r})};Zi.fromSecret=function(e,r){return r instanceof Zi?r:new Zi(e,{secret:r})};Zi.prototype.secret=function(){return this._secret};W0(Zi,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});W0(Zi,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});W0(Zi,"privBytes",function(){var e=this.eddsa,r=this.hash(),i=e.encodingLength-1,n=r.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n});W0(Zi,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});W0(Zi,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});W0(Zi,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Zi.prototype.sign=function(e){return VF(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Zi.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Zi.prototype.getSecret=function(e){return VF(this._secret,"KeyPair is public only"),zy.encode(this.secret(),e)};Zi.prototype.getPublic=function(e){return zy.encode(this.pubBytes(),e)};HF.exports=Zi});var WF=v((fat,GF)=>{l();"use strict";var Vxe=Xa(),H4=xs(),zxe=H4.assert,$4=H4.cachedProperty,Hxe=H4.parseBytes;function sd(t,e){this.eddsa=t,typeof e!="object"&&(e=Hxe(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),zxe(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof Vxe&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}$4(sd,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});$4(sd,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});$4(sd,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});$4(sd,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});sd.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};sd.prototype.toHex=function(){return H4.encode(this.toBytes(),"hex").toUpperCase()};GF.exports=sd});var JF=v((lat,ZF)=>{l();"use strict";var $xe=U4(),Gxe=F4(),Y0=xs(),Wxe=Y0.assert,YF=Y0.parseBytes,XF=$F(),QF=WF();function ns(t){if(Wxe(t==="ed25519","only tested with ed25519 so far"),!(this instanceof ns))return new ns(t);t=Gxe[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=$xe.sha512}ZF.exports=ns;ns.prototype.sign=function(e,r){e=YF(e);var i=this.keyFromSecret(r),n=this.hashInt(i.messagePrefix(),e),s=this.g.mul(n),o=this.encodePoint(s),a=this.hashInt(o,i.pubBytes(),e).mul(i.priv()),c=n.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};ns.prototype.verify=function(e,r,i){e=YF(e),r=this.makeSignature(r);var n=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),n.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(n.pub().mul(s));return a.eq(o)};ns.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Y0.intFromLE(e.digest()).umod(this.curve.n)};ns.prototype.keyFromPublic=function(e){return XF.fromPublic(this,e)};ns.prototype.keyFromSecret=function(e){return XF.fromSecret(this,e)};ns.prototype.makeSignature=function(e){return e instanceof QF?e:new QF(this,e)};ns.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};ns.prototype.decodePoint=function(e){e=Y0.parseBytes(e);var r=e.length-1,i=e.slice(0,r).concat(e[r]&~128),n=(e[r]&128)!=0,s=Y0.intFromLE(i);return this.curve.pointFromY(s,n)};ns.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};ns.prototype.decodeInt=function(e){return Y0.intFromLE(e)};ns.prototype.isPoint=function(e){return e instanceof this.pointClass}});var tK=v(eK=>{l();"use strict";var od=eK;od.version=RU().version;od.utils=xs();od.rand=fE();od.curve=hE();od.curves=F4();od.ec=KF();od.eddsa=JF()});var iK=v((hat,rK)=>{l();var Yxe=tK().ec,nc=new Yxe("secp256k1"),Bt=nc.curve,ur=Bt.n.constructor;function Xxe(t,e){let r=new ur(e);if(r.cmp(Bt.p)>=0)return null;r=r.toRed(Bt.red);let i=r.redSqr().redIMul(r).redIAdd(Bt.b).redSqrt();return t===3!==i.isOdd()&&(i=i.redNeg()),nc.keyPair({pub:{x:r,y:i}})}function Qxe(t,e,r){let i=new ur(e),n=new ur(r);if(i.cmp(Bt.p)>=0||n.cmp(Bt.p)>=0||(i=i.toRed(Bt.red),n=n.toRed(Bt.red),(t===6||t===7)&&n.isOdd()!==(t===7)))return null;let s=i.redSqr().redIMul(i);return n.redSqr().redISub(s.redIAdd(Bt.b)).isZero()?nc.keyPair({pub:{x:i,y:n}}):null}function Nf(t){let e=t[0];switch(e){case 2:case 3:return t.length!==33?null:Xxe(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:Qxe(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function ad(t,e){let r=e.encode(null,t.length===33);for(let i=0;i<t.length;++i)t[i]=r[i]}rK.exports={contextRandomize(){return 0},privateKeyVerify(t){let e=new ur(t);return e.cmp(Bt.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){let e=new ur(t),r=Bt.n.sub(e).umod(Bt.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){let r=new ur(e);if(r.cmp(Bt.n)>=0||(r.iadd(new ur(t)),r.cmp(Bt.n)>=0&&r.isub(Bt.n),r.isZero()))return 1;let i=r.toArrayLike(Uint8Array,"be",32);return t.set(i),0},privateKeyTweakMul(t,e){let r=new ur(e);if(r.cmp(Bt.n)>=0||r.isZero())return 1;r.imul(new ur(t)),r.cmp(Bt.n)>=0&&(r=r.umod(Bt.n));let i=r.toArrayLike(Uint8Array,"be",32);return t.set(i),0},publicKeyVerify(t){return Nf(t)===null?1:0},publicKeyCreate(t,e){let r=new ur(e);if(r.cmp(Bt.n)>=0||r.isZero())return 1;let i=nc.keyFromPrivate(e).getPublic();return ad(t,i),0},publicKeyConvert(t,e){let r=Nf(e);if(r===null)return 1;let i=r.getPublic();return ad(t,i),0},publicKeyNegate(t,e){let r=Nf(e);if(r===null)return 1;let i=r.getPublic();return i.y=i.y.redNeg(),ad(t,i),0},publicKeyCombine(t,e){let r=new Array(e.length);for(let n=0;n<e.length;++n)if(r[n]=Nf(e[n]),r[n]===null)return 1;let i=r[0].getPublic();for(let n=1;n<r.length;++n)i=i.add(r[n].pub);return i.isInfinity()?2:(ad(t,i),0)},publicKeyTweakAdd(t,e,r){let i=Nf(e);if(i===null)return 1;if(r=new ur(r),r.cmp(Bt.n)>=0)return 2;let n=i.getPublic().add(Bt.g.mul(r));return n.isInfinity()?2:(ad(t,n),0)},publicKeyTweakMul(t,e,r){let i=Nf(e);if(i===null)return 1;if(r=new ur(r),r.cmp(Bt.n)>=0||r.isZero())return 2;let n=i.getPublic().mul(r);return ad(t,n),0},signatureNormalize(t){let e=new ur(t.subarray(0,32)),r=new ur(t.subarray(32,64));return e.cmp(Bt.n)>=0||r.cmp(Bt.n)>=0?1:(r.cmp(nc.nh)===1&&t.set(Bt.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){let r=e.subarray(0,32),i=e.subarray(32,64);if(new ur(r).cmp(Bt.n)>=0||new ur(i).cmp(Bt.n)>=0)return 1;let{output:n}=t,s=n.subarray(4,4+33);s[0]=0,s.set(r,1);let o=33,a=0;for(;o>1&&s[a]===0&&!(s[a+1]&128);--o,++a);if(s=s.subarray(a),s[0]&128||o>1&&s[0]===0&&!(s[1]&128))return 1;let c=n.subarray(6+33,6+33+33);c[0]=0,c.set(i,1);let u=33,f=0;for(;u>1&&c[f]===0&&!(c[f+1]&128);--u,++f);return c=c.subarray(f),c[0]&128||u>1&&c[0]===0&&!(c[1]&128)?1:(t.outputlen=6+o+u,n[0]=48,n[1]=t.outputlen-2,n[2]=2,n[3]=s.length,n.set(s,4),n[4+o]=2,n[5+o]=c.length,n.set(c,6+o),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;let r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;let i=e[5+r];if(i===0||6+r+i!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||i>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let n=e.subarray(4,4+r);if(n.length===33&&n[0]===0&&(n=n.subarray(1)),n.length>32)return 1;let s=e.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let o=new ur(n);o.cmp(Bt.n)>=0&&(o=new ur(0));let a=new ur(e.subarray(6+r));return a.cmp(Bt.n)>=0&&(a=new ur(0)),t.set(o.toArrayLike(Uint8Array,"be",32),0),t.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,i,n){if(n){let a=n;n=c=>{let u=a(e,r,null,i,c);if(!(u instanceof Uint8Array&&u.length===32))throw new Error("This is the way");return new ur(u)}}let s=new ur(r);if(s.cmp(Bt.n)>=0||s.isZero())return 1;let o;try{o=nc.sign(e,r,{canonical:!0,k:n,pers:i})}catch(a){return 1}return t.signature.set(o.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(o.s.toArrayLike(Uint8Array,"be",32),32),t.recid=o.recoveryParam,0},ecdsaVerify(t,e,r){let i={r:t.subarray(0,32),s:t.subarray(32,64)},n=new ur(i.r),s=new ur(i.s);if(n.cmp(Bt.n)>=0||s.cmp(Bt.n)>=0)return 1;if(s.cmp(nc.nh)===1||n.isZero()||s.isZero())return 3;let o=Nf(r);if(o===null)return 2;let a=o.getPublic();return nc.verify(e,i,a)?0:3},ecdsaRecover(t,e,r,i){let n={r:e.slice(0,32),s:e.slice(32,64)},s=new ur(n.r),o=new ur(n.s);if(s.cmp(Bt.n)>=0||o.cmp(Bt.n)>=0)return 1;if(s.isZero()||o.isZero())return 2;let a;try{a=nc.recoverPubKey(i,n,r)}catch(c){return 2}return ad(t,a),0},ecdh(t,e,r,i,n,s,o){let a=Nf(e);if(a===null)return 1;let c=new ur(r);if(c.cmp(Bt.n)>=0||c.isZero())return 2;let u=a.getPublic().mul(c);if(n===void 0){let f=u.encode(null,!0),d=nc.hash().update(f).digest();for(let h=0;h<32;++h)t[h]=d[h]}else{s||(s=new Uint8Array(32));let f=u.getX().toArray("be",32);for(let y=0;y<32;++y)s[y]=f[y];o||(o=new Uint8Array(32));let d=u.getY().toArray("be",32);for(let y=0;y<32;++y)o[y]=d[y];let h=n(s,o,i);if(!(h instanceof Uint8Array&&h.length===t.length))return 2;t.set(h)}return 0}}});var sK=v((pat,nK)=>{l();nK.exports=TU()(iK())});var cK=v((yat,aK)=>{l();"use strict";var ta=sK(),{sha256:oK}=(mi(),zs);aK.exports=t=>{let e=32;function r(){let f;do f=t(32);while(!ta.privateKeyVerify(f));return f}async function i(f,d){let{digest:h}=await oK.digest(d),p=ta.ecdsaSign(h,f);return ta.signatureExport(p.signature)}async function n(f,d,h){let{digest:p}=await oK.digest(h);return d=ta.signatureImport(d),ta.ecdsaVerify(d,p,f)}function s(f){if(!ta.publicKeyVerify(f))throw new Error("Invalid public key");return ta.publicKeyConvert(f,!0)}function o(f){return ta.publicKeyConvert(f,!1)}function a(f){if(!ta.privateKeyVerify(f))throw new Error("Invalid private key")}function c(f){if(!ta.publicKeyVerify(f))throw new Error("Invalid public key")}function u(f){return a(f),ta.publicKeyCreate(f)}return{generateKey:r,privateKeyLength:e,hashAndSign:i,hashAndVerify:n,compressPublicKey:s,decompressPublicKey:o,validatePrivateKey:a,validatePublicKey:c,computePublicKey:u}}});var dK=v((gat,lK)=>{l();"use strict";var{sha256:uK}=(mi(),zs),Zxe=Yo(),{equals:fK}=(wi(),vn),{toString:Jxe}=(tt(),pr),eAe=A4();lK.exports=(t,e,r)=>{r=r||cK()(e);class i{constructor(u){r.validatePublicKey(u),this._key=u}verify(u,f){return r.hashAndVerify(this._key,f,u)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return fK(this.bytes,u.bytes)}async hash(){let{bytes:u}=await uK.digest(this.bytes);return u}}class n{constructor(u,f){this._key=u,this._publicKey=f||r.computePublicKey(u),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(u){return r.hashAndSign(this._key,u)}get public(){return new i(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(u){return fK(this.bytes,u.bytes)}async hash(){let{bytes:u}=await uK.digest(this.bytes);return u}async id(){let u=await this.public.hash();return Jxe(u,"base58btc")}async export(u,f="libp2p-key"){if(f==="libp2p-key")return eAe.export(this.bytes,u);throw Zxe(new Error(`export format '${f}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(c){return new n(c)}function o(c){return new i(c)}async function a(){let c=await r.generateKey();return new n(c)}return{Secp256k1PublicKey:i,Secp256k1PrivateKey:n,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:o,generateKeyPair:a}}});var pK=v((mat,hK)=>{l();"use strict";hK.exports={SHA1:20,SHA256:32,SHA512:64}});var OE=v(gK=>{l();"use strict";var yK=Dy(),tAe=pK(),rAe={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},iAe=async(t,e)=>{let r=await yK.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};gK.create=async function(t,e){let r=rAe[t],i=await yK.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(n){return iAe(i,n)},length:tAe[t]}}});var _K=v((vat,wK)=>{l();"use strict";var mK=Yo(),{concat:bK}=(bn(),Gs),{fromString:nAe}=(dt(),bi),sAe=OE(),vK={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};wK.exports=async(t,e,r)=>{let i=vK[t];if(!i){let S=Object.keys(vK).join(" / ");throw mK(new Error(`unknown cipher type '${t}'. Must be ${S}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw mK(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let n=i.keySize,s=i.ivSize,o=20,a=nAe("key expansion"),c=2*(s+n+o),u=await sAe.create(e,r),f=await u.digest(a),d=[],h=0;for(;h<c;){let S=await u.digest(bK([f,a])),I=S.length;h+I>c&&(I=c-h),d.push(S),h+=I,f=await u.digest(f)}let p=c/2,y=bK(d),m=y.slice(0,p),w=y.slice(p,c),b=S=>({iv:S.slice(0,s),cipherKey:S.slice(s,s+n),macKey:S.slice(s+n)});return{k1:b(m),k2:b(w)}}});var SK=v((wat,EK)=>{l();"use strict";var oAe=Yo();EK.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw oAe(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var PK=v(RK=>{l();"use strict";var aAe=Yo(),Hy=Dy(),{base64urlToBuffer:xK}=x4(),cAe=SK(),{toString:kE}=(tt(),pr),{concat:uAe}=(bn(),Gs),{equals:fAe}=(wi(),vn),AK={"P-256":256,"P-384":384,"P-521":521};RK.generateEphmeralKeyPair=async function(t){cAe(Object.keys(AK),t);let e=await Hy.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(n,s)=>{let o;s?o=await Hy.get().subtle.importKey("jwk",dAe(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):o=e.privateKey;let a=[await Hy.get().subtle.importKey("jwk",TK(t,n),{name:"ECDH",namedCurve:t},!1,[]),o],c=await Hy.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:a[0]},a[1],AK[t]);return new Uint8Array(c,c.byteOffset,c.byteLength)},i=await Hy.get().subtle.exportKey("jwk",e.publicKey);return{key:lAe(i),genSharedKey:r}};var IK={"P-256":32,"P-384":48,"P-521":66};function lAe(t){let e=IK[t.crv];return uAe([Uint8Array.from([4]),xK(t.x,e),xK(t.y,e)],1+e*2)}function TK(t,e){let r=IK[t];if(fAe(!e.slice(0,1),Uint8Array.from([4])))throw aAe(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:kE(e.slice(1,r+1),"base64url"),y:kE(e.slice(1+r),"base64url"),ext:!0}}var dAe=(t,e)=>({...TK(t,e.public),d:kE(e.private,"base64url")})});var OK=v((Eat,CK)=>{l();"use strict";var hAe=PK();CK.exports=async t=>hAe.generateEphmeralKeyPair(t)});var W4=v((Sat,DK)=>{l();"use strict";var sc=r4();iu();H_();var DE=yt(),$y=Yo(),{fromString:pAe}=(dt(),bi),yAe=Nj(),ro={rsa:vU(),ed25519:AU(),secp256k1:dK()(sc,My())},G4={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function X0(t){let e=ro[t.toLowerCase()];if(!e){let r=Object.keys(ro).join(" / ");throw $y(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var gAe=async(t,e)=>X0(t).generateKeyPair(e),mAe=async(t,e,r)=>{let i=X0(t);if(t.toLowerCase()!=="ed25519")throw $y(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return i.generateKeyPairFromSeed(e,r)},bAe=t=>{let e=sc.PublicKey.decode(t),r=e.Data;switch(e.Type){case sc.KeyType.RSA:return ro.rsa.unmarshalRsaPublicKey(r);case sc.KeyType.Ed25519:return ro.ed25519.unmarshalEd25519PublicKey(r);case sc.KeyType.Secp256k1:if(ro.secp256k1)return ro.secp256k1.unmarshalSecp256k1PublicKey(r);throw $y(new Error(G4.message),G4.code);default:X0(e.Type)}},vAe=(t,e)=>(e=(e||"rsa").toLowerCase(),X0(e),t.bytes),kK=async t=>{let e=sc.PrivateKey.decode(t),r=e.Data;switch(e.Type){case sc.KeyType.RSA:return ro.rsa.unmarshalRsaPrivateKey(r);case sc.KeyType.Ed25519:return ro.ed25519.unmarshalEd25519PrivateKey(r);case sc.KeyType.Secp256k1:if(ro.secp256k1)return ro.secp256k1.unmarshalSecp256k1PrivateKey(r);throw $y(new Error(G4.message),G4.code);default:X0(e.Type)}},wAe=(t,e)=>(e=(e||"rsa").toLowerCase(),X0(e),t.bytes),_Ae=async(t,e)=>{try{let n=await yAe.import(t,e);return kK(n)}catch(n){}let r=DE.pki.decryptRsaPrivateKey(t,e);if(r===null)throw $y(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let i=DE.asn1.toDer(DE.pki.privateKeyToAsn1(r));return i=pAe(i.getBytes(),"ascii"),ro.rsa.unmarshalRsaPrivateKey(i)};DK.exports={supportedKeys:ro,keysPBM:sc,keyStretcher:_K(),generateEphemeralKeyPair:OK(),generateKeyPair:gAe,generateKeyPairFromSeed:mAe,unmarshalPublicKey:bAe,marshalPublicKey:vAe,unmarshalPrivateKey:kK,marshalPrivateKey:wAe,import:_Ae}});var Y4=v((xat,BE)=>{l();"use strict";function EAe(t,{className:e,symbolName:r}){let i=Symbol.for(r),n={[e]:class extends t{constructor(...s){super(...s);Object.defineProperty(this,i,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return n[`is${e}`]=s=>!!(s&&s[i]),n}function SAe(t,{className:e,symbolName:r,withoutNew:i}){let n=Symbol.for(r),s={[e]:function(...o){if(i&&!(this instanceof s))return new s(...o);let a=t.call(this,...o)||this;return a&&!a[n]&&Object.defineProperty(a,n,{value:!0}),a}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return e}}),s[`is${e}`]=o=>!!(o&&o[n]),s}BE.exports=EAe;BE.exports.proto=SAe});var MK=v((Aat,NK)=>{l();"use strict";var Q0=Vi(),BK=Q0.Reader,xAe=Q0.Writer,Oi=Q0.util,Gy=Q0.roots["libp2p-peer-id"]||(Q0.roots["libp2p-peer-id"]={});Gy.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.id=Oi.newBuffer([]),t.prototype.pubKey=Oi.newBuffer([]),t.prototype.privKey=Oi.newBuffer([]),t.encode=function(r,i){return i||(i=xAe.create()),i.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&i.uint32(26).bytes(r.privKey),i},t.decode=function(r,i){r instanceof BK||(r=BK.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Gy.PeerIdProto;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.id=r.bytes();break;case 2:s.pubKey=r.bytes();break;case 3:s.privKey=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("id"))throw Oi.ProtocolError("missing required 'id'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Gy.PeerIdProto)return r;var i=new Gy.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?Oi.base64.decode(r.id,i.id=Oi.newBuffer(Oi.base64.length(r.id)),0):r.id.length&&(i.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?Oi.base64.decode(r.pubKey,i.pubKey=Oi.newBuffer(Oi.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?Oi.base64.decode(r.privKey,i.privKey=Oi.newBuffer(Oi.base64.length(r.privKey)),0):r.privKey.length&&(i.privKey=r.privKey)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.id="":(n.id=[],i.bytes!==Array&&(n.id=Oi.newBuffer(n.id))),i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=Oi.newBuffer(n.pubKey))),i.bytes===String?n.privKey="":(n.privKey=[],i.bytes!==Array&&(n.privKey=Oi.newBuffer(n.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(n.id=i.bytes===String?Oi.base64.encode(r.id,0,r.id.length):i.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?Oi.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(n.privKey=i.bytes===String?Oi.base64.encode(r.privKey,0,r.privKey.length):i.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Q0.util.toJSONOptions)},t}();NK.exports=Gy});var it=v((In,zK)=>{l();"use strict";var{CID:NE}=(Te(),af),AAe=(gn(),of),IAe=(A9(),R6),TAe=(li(),Fs),RAe=(cy(),u0),{base58btc:ME}=(li(),Fs),{base32:PAe}=(gn(),of),{base16:LK}=(x9(),T6),Wy=(Nn(),i0),oc=W4(),CAe=Y4(),{PeerIdProto:qK}=MK(),{equals:cd}=(wi(),vn),{fromString:Yy}=(dt(),bi),{toString:OAe}=(tt(),pr),{identity:X4}=(Jc(),ay),jK={...AAe,...IAe,...TAe,...RAe},kAe=Object.keys(jK).reduce((t,e)=>t.or(jK[e]),PAe.decoder),DAe=112,UK=114,FK=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&i&&!cd(r.public.bytes,i.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=ME.encode(this.id).substring(1),this._privKey=r,this._pubKey=i}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=Wy.decode(this.id);e.code===X4.code&&(this._pubKey=oc.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return oc.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return oc.marshalPrivateKey(this.privKey)}marshal(e){return qK.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:VK(this.marshalPrivKey()),pubKey:VK(this.marshalPubKey())}}toHexString(){return LK.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=NE.createV1(UK,Wy.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return cd(this.id,e);if(e.id)return cd(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&cd(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(Wy.decode(this.id).code===X4.code)return!0}catch(e){}return!1}},ac=CAe(FK,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});In=zK.exports=ac;var Xy=t=>t.bytes.length<=42?Wy.create(X4.code,t.bytes).bytes:t.hash(),LE=async(t,e)=>{let r=await Xy(e);return new ac(r,t,e)};In.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await oc.generateKeyPair(t.keyType,t.bits);return LE(e,e.public)};In.createFromHexString=t=>new ac(LK.decode("f"+t));In.createFromBytes=t=>{try{let e=NE.decode(t);if(!KK(e))throw new Error("Supplied PeerID CID is invalid");return In.createFromCID(e)}catch{if(Wy.decode(t).code!==X4.code)throw new Error("Supplied PeerID CID is invalid");return new ac(t)}};In.createFromB58String=t=>In.createFromBytes(ME.decode("z"+t));var KK=t=>t.code===UK||t.code===DAe;In.createFromCID=t=>{if(t=NE.asCID(t),!t||!KK(t))throw new Error("Supplied PeerID CID is invalid");return new ac(t.multihash.bytes)};In.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=Yy(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await oc.unmarshalPublicKey(e);return LE(void 0,r)};In.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=Yy(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await oc.unmarshalPrivateKey(t);return LE(e,e.public)};In.createFromJSON=async t=>{let e=ME.decode("z"+t.id),r=t.privKey&&Yy(t.privKey,"base64pad"),i=t.pubKey&&Yy(t.pubKey,"base64pad"),n=i&&await oc.unmarshalPublicKey(i);if(!r)return new ac(e,void 0,n);let s=await oc.unmarshalPrivateKey(r),o=await Xy(s.public),a;if(n&&(a=await Xy(n)),n&&!cd(o,a))throw new Error("Public and private key do not match");if(e&&!cd(o,e))throw new Error("Id and private key do not match");return new ac(e,s,n)};In.createFromProtobuf=async t=>{typeof t=="string"&&(t=Yy(t,"base16"));let{id:e,privKey:r,pubKey:i}=qK.decode(t);r=r?await oc.unmarshalPrivateKey(r):!1,i=i?await oc.unmarshalPublicKey(i):!1;let n,s;if(r&&(s=await Xy(r.public)),i&&(n=await Xy(i)),r){if(i&&!cd(s,n))throw new Error("Public and private key do not match");return new ac(s,r,r.public)}if(i)return new ac(n,void 0,i);if(e)return new ac(e);throw new Error("Protobuf did not contain any usable key material")};In.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),In.createFromBytes(kAe.decode(t)));In.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function VK(t){if(t)return OAe(t,"base64pad")}});var ss=v((Cat,GK)=>{l();"use strict";var NAe=async t=>{let e;for await(let r of t)e=r;return e};GK.exports=NAe});var iV=v((nct,rV)=>{l();"use strict";function tV(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function MAe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return tV(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),tV(new n,r)}}rV.exports=MAe});var FE={};zt(FE,{abortedError:()=>LAe,dbDeleteFailedError:()=>Z4,dbOpenFailedError:()=>Q4,dbWriteFailedError:()=>J4,notFoundError:()=>un});function Q4(t){return t=t||new Error("Cannot open database"),(0,J0.default)(t,"ERR_DB_OPEN_FAILED")}function Z4(t){return t=t||new Error("Delete failed"),(0,J0.default)(t,"ERR_DB_DELETE_FAILED")}function J4(t){return t=t||new Error("Write failed"),(0,J0.default)(t,"ERR_DB_WRITE_FAILED")}function un(t){return t=t||new Error("Not Found"),(0,J0.default)(t,"ERR_NOT_FOUND")}function LAe(t){return t=t||new Error("Aborted"),(0,J0.default)(t,"ERR_ABORTED")}var J0,ia=bt(()=>{l();J0=N(iV())});var nV=v((oct,KE)=>{l();var sct=function(){typeof KE!="undefined"&&(KE.exports=b);var t=24*3600,e=3200,r=(365*400+97)*e/400,i=t*r,n=i*1e3,s=1e3*1e4*1e4*t,o=16777216,a=65536*65536,c=1e3*1e3,u=1e3*1e3*1e3,f="000000000",d=Math.trunc||q,h=b.prototype;b.fromDate=X,b.fromInt64BE=Y(0,1,2,3,0,4),b.fromInt64LE=Y(3,2,1,0,4,0),b.fromString=W,b.fromTimeT=P,h.year=0,h.time=0,h.nano=0,h.addNano=C,h.getNano=z,h.getTimeT=_,h.getYear=S,h.toDate=j,h.toJSON=x,h.toString=O,h.writeInt64BE=L(0,1,2,3,0,4),h.writeInt64LE=L(3,2,1,0,4,0);var p="%Y-%m-%dT%H:%M:%S.%NZ",y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],w={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return b;function b(Q,ue,le){var me=this;if(!(me instanceof b))return new b(Q,ue,le);me.time=+Q||0,me.nano=+ue||0,me.year=+le||0,I(me)}function S(){var Q=this.toDate().getUTCFullYear();return Q+this.year}function I(Q){var ue=Q.year,le=Q.time,me=Q.nano,be,xe;if(me<0||c<=me){var D=Math.floor(me/c);me-=D*c,le+=D,be=1}var K=ue%e;if(le<-s||s<le||K){xe=d(le/n),xe&&(ue+=xe*e,le-=xe*n);var G=B(le);G.setUTCFullYear(K+G.getUTCFullYear()),ue-=K,le=+G,xe=d(ue/e);var ee=le+xe*n;xe&&-s<=ee&&ee<=s&&(ue-=xe*e,le=ee),be=1}return be&&(Q.year=ue,Q.time=le,Q.nano=me),Q}function j(){var Q=I(this);return B(Q.time)}function B(Q){var ue=new Date(0);return ue.setTime(Q),ue}function C(Q){return this.nano+=+Q||0,this}function z(){var Q=I(this);return(Q.time%1e3*c+ +Q.nano+u)%u}function W(Q){var ue,le=new b;Q+="";var me=Q.replace(/^\s*[+\-]?\d+/,function(be){var xe=+be,D=1970+(xe-1970)%400;return le.year=xe-D,D}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(be,xe,D){return xe<0&&(D*=-1),ue=(+xe*60+ +D)*6e4,""}).replace(/\.\d+$/,function(be){return le.nano=+(be+f).substr(1,9),""}).split(/\D+/);if(me.length>1?me[1]--:me[1]=0,le.time=ue=Date.UTC.apply(Date,me)-(ue||0),isNaN(ue))throw new TypeError("Invalid Date");return I(le)}function X(Q){return new b(+Q)}function P(Q){return g(Q,0)}function g(Q,ue){ue|=0,ue*=a,Q=+Q||0;var le=d(ue/i)+d(Q/i),me=ue%i+Q%i,be=d(me/i);return be&&(le+=be,me-=be*i),new b(me*1e3,0,le*e)}function _(){var Q=I(this),ue=Math.floor(Q.time/1e3),le=Q.year;return le&&(ue+=le*r*t/e),ue}function x(){return this.toString().replace(/0{1,6}Z$/,"Z")}function O(Q){var ue=this,le=ue.toDate(),me={H:ee,L:H,M:T,N:M,S:F,Y:xe,a:Z,b:ie,d:K,e:G,m:D};return be(Q||p);function be(te){return te.replace(/%./g,function(he){var we=he[1],_e=w[we],Ke=me[we];return _e?be(_e):Ke?Ke():he})}function xe(){var te=ue.getYear();return te>999999?"+"+te:te>9999?"+"+de(te,6):te>=0?de(te,4):te>=-999999?"-"+de(-te,6):te}function D(){return U(le.getUTCMonth()+1)}function K(){return U(le.getUTCDate())}function G(){return E(le.getUTCDate())}function ee(){return U(le.getUTCHours())}function T(){return U(le.getUTCMinutes())}function F(){return U(le.getUTCSeconds())}function H(){return de(le.getUTCMilliseconds(),3)}function M(){return de(ue.getNano(),9)}function Z(){return m[le.getUTCDay()]}function ie(){return y[le.getUTCMonth()]}}function L(Q,ue,le,me,be,xe){return D;function D(G,ee){var T=I(this);G||(G=new Array(8)),V(G,ee|=0);var F=Math.floor(T.time/1e3),H=T.year*(r*t/e),M=d(H/a)+d(F/a),Z=H%a+F%a,ie=Math.floor(Z/a);return ie&&(M+=ie,Z-=ie*a),K(G,ee+be,M),K(G,ee+xe,Z),G}function K(G,ee,T){G[ee+Q]=T>>24&255,G[ee+ue]=T>>16&255,G[ee+le]=T>>8&255,G[ee+me]=T&255}}function Y(Q,ue,le,me,be,xe){return D;function D(G,ee){V(G,ee|=0);var T=K(G,ee+be),F=K(G,ee+xe);return g(F,T)}function K(G,ee){return G[ee+Q]*o+(G[ee+ue]<<16|G[ee+le]<<8|G[ee+me])}}function V(Q,ue){var le=Q&&Q.length;if(le==null)throw new TypeError("Invalid Buffer");if(le<ue+8)throw new RangeError("Out of range")}function q(Q){var ue=Q-Q%1;return ue===0&&(Q<0||Q===0&&1/Q!=1/0)?-0:ue}function E(Q){return(Q>9?"":" ")+(Q|0)}function U(Q){return(Q>9?"":"0")+(Q|0)}function de(Q,ue){return(f+(Q|0)).substr(-ue)}}()});var aV=v((act,oV)=>{l();"use strict";P0();var eb=yt(),{toString:ep}=(tt(),pr),{fromString:sV}=(dt(),bi);oV.exports={createCipheriv:(t,e,r)=>{let i=eb.cipher.createCipher("AES-CTR",ep(e,"ascii"));return i.start({iv:ep(r,"ascii")}),{update:n=>(i.update(eb.util.createBuffer(ep(n,"ascii"))),sV(i.output.getBytes(),"ascii"))}},createDecipheriv:(t,e,r)=>{let i=eb.cipher.createDecipher("AES-CTR",ep(e,"ascii"));return i.start({iv:ep(r,"ascii")}),{update:n=>(i.update(eb.util.createBuffer(ep(n,"ascii"))),sV(i.output.getBytes(),"ascii"))}}}});var fV=v((cct,uV)=>{l();"use strict";var qAe=Yo(),cV={16:"aes-128-ctr",32:"aes-256-ctr"};uV.exports=function(t){let e=cV[t.length];if(!e){let r=Object.entries(cV).map(([i,n])=>`${i} (${n})`).join(" / ");throw qAe(new Error(`Invalid key length ${t.length} bytes. Must be ${r}`),"ERR_INVALID_KEY_LENGTH")}return e}});var hV=v(dV=>{l();"use strict";var lV=aV(),jAe=fV();dV.create=async function(t,e){let r=jAe(t),i=lV.createCipheriv(r,t,e),n=lV.createDecipheriv(r,t,e);return{async encrypt(o){return i.update(o)},async decrypt(o){return n.update(o)}}}});var gV=v((fct,yV)=>{l();"use strict";var UAe=N_(),FAe=or(),KAe=Yo(),pV={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function VAe(t,e,r,i,n){let s=pV[n];if(!s){let a=Object.keys(pV).join(" / ");throw KAe(new Error(`Hash '${n}' is unknown or not supported. Must be ${a}`),"ERR_UNSUPPORTED_HASH_TYPE")}let o=UAe(t,e,r,i,s);return FAe.encode64(o)}yV.exports=VAe});var uc=v(tp=>{l();"use strict";var zAe=OE(),HAe=hV(),$Ae=W4();tp.aes=HAe;tp.hmac=zAe;tp.keys=$Ae;tp.randomBytes=My();tp.pbkdf2=gV()});var vV=v((dct,bV)=>{l();"use strict";function mV(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function GAe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return mV(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),mV(new n,r)}}bV.exports=GAe});var CV=v((hct,PV)=>{l();PV.exports=mr;var io=null;try{io=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function mr(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}mr.prototype.__isLong__;Object.defineProperty(mr.prototype,"__isLong__",{value:!0});function os(t){return(t&&t.__isLong__)===!0}mr.isLong=os;var wV={},_V={};function ud(t,e){var r,i,n;return e?(t>>>=0,(n=0<=t&&t<256)&&(i=_V[t],i)?i:(r=br(t,(t|0)<0?-1:0,!0),n&&(_V[t]=r),r)):(t|=0,(n=-128<=t&&t<128)&&(i=wV[t],i)?i:(r=br(t,t<0?-1:0,!1),n&&(wV[t]=r),r))}mr.fromInt=ud;function no(t,e){if(isNaN(t))return e?fd:so;if(e){if(t<0)return fd;if(t>=SV)return RV}else{if(t<=-xV)return as;if(t+1>=xV)return TV}return t<0?no(-t,e).neg():br(t%rp|0,t/rp|0,e)}mr.fromNumber=no;function br(t,e,r){return new mr(t,e,r)}mr.fromBits=br;var tb=Math.pow;function VE(t,e,r){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return so;if(typeof e=="number"?(r=e,e=!1):e=!!e,r=r||10,r<2||36<r)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return VE(t.substring(1),e,r).neg();for(var n=no(tb(r,8)),s=so,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+a),r);if(a<8){var u=no(tb(r,a));s=s.mul(u).add(no(c))}else s=s.mul(n),s=s.add(no(c))}return s.unsigned=e,s}mr.fromString=VE;function na(t,e){return typeof t=="number"?no(t,e):typeof t=="string"?VE(t,e):br(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}mr.fromValue=na;var EV=1<<16,WAe=1<<24,rp=EV*EV,SV=rp*rp,xV=SV/2,AV=ud(WAe),so=ud(0);mr.ZERO=so;var fd=ud(0,!0);mr.UZERO=fd;var ip=ud(1);mr.ONE=ip;var IV=ud(1,!0);mr.UONE=IV;var zE=ud(-1);mr.NEG_ONE=zE;var TV=br(4294967295|0,2147483647|0,!1);mr.MAX_VALUE=TV;var RV=br(4294967295|0,4294967295|0,!0);mr.MAX_UNSIGNED_VALUE=RV;var as=br(0,2147483648|0,!1);mr.MIN_VALUE=as;var Oe=mr.prototype;Oe.toInt=function(){return this.unsigned?this.low>>>0:this.low};Oe.toNumber=function(){return this.unsigned?(this.high>>>0)*rp+(this.low>>>0):this.high*rp+(this.low>>>0)};Oe.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(as)){var r=no(e),i=this.div(r),n=i.mul(r).sub(this);return i.toString(e)+n.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=no(tb(e,6),this.unsigned),o=this,a="";;){var c=o.div(s),u=o.sub(c.mul(s)).toInt()>>>0,f=u.toString(e);if(o=c,o.isZero())return f+a;for(;f.length<6;)f="0"+f;a=""+f+a}};Oe.getHighBits=function(){return this.high};Oe.getHighBitsUnsigned=function(){return this.high>>>0};Oe.getLowBits=function(){return this.low};Oe.getLowBitsUnsigned=function(){return this.low>>>0};Oe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(as)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,r=31;r>0&&(e&1<<r)==0;r--);return this.high!=0?r+33:r+1};Oe.isZero=function(){return this.high===0&&this.low===0};Oe.eqz=Oe.isZero;Oe.isNegative=function(){return!this.unsigned&&this.high<0};Oe.isPositive=function(){return this.unsigned||this.high>=0};Oe.isOdd=function(){return(this.low&1)==1};Oe.isEven=function(){return(this.low&1)==0};Oe.equals=function(e){return os(e)||(e=na(e)),this.unsigned!==e.unsigned&&this.high>>>31==1&&e.high>>>31==1?!1:this.high===e.high&&this.low===e.low};Oe.eq=Oe.equals;Oe.notEquals=function(e){return!this.eq(e)};Oe.neq=Oe.notEquals;Oe.ne=Oe.notEquals;Oe.lessThan=function(e){return this.comp(e)<0};Oe.lt=Oe.lessThan;Oe.lessThanOrEqual=function(e){return this.comp(e)<=0};Oe.lte=Oe.lessThanOrEqual;Oe.le=Oe.lessThanOrEqual;Oe.greaterThan=function(e){return this.comp(e)>0};Oe.gt=Oe.greaterThan;Oe.greaterThanOrEqual=function(e){return this.comp(e)>=0};Oe.gte=Oe.greaterThanOrEqual;Oe.ge=Oe.greaterThanOrEqual;Oe.compare=function(e){if(os(e)||(e=na(e)),this.eq(e))return 0;var r=this.isNegative(),i=e.isNegative();return r&&!i?-1:!r&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Oe.comp=Oe.compare;Oe.negate=function(){return!this.unsigned&&this.eq(as)?as:this.not().add(ip)};Oe.neg=Oe.negate;Oe.add=function(e){os(e)||(e=na(e));var r=this.high>>>16,i=this.high&65535,n=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,c=e.low>>>16,u=e.low&65535,f=0,d=0,h=0,p=0;return p+=s+u,h+=p>>>16,p&=65535,h+=n+c,d+=h>>>16,h&=65535,d+=i+a,f+=d>>>16,d&=65535,f+=r+o,f&=65535,br(h<<16|p,f<<16|d,this.unsigned)};Oe.subtract=function(e){return os(e)||(e=na(e)),this.add(e.neg())};Oe.sub=Oe.subtract;Oe.multiply=function(e){if(this.isZero())return so;if(os(e)||(e=na(e)),io){var r=io.mul(this.low,this.high,e.low,e.high);return br(r,io.get_high(),this.unsigned)}if(e.isZero())return so;if(this.eq(as))return e.isOdd()?as:so;if(e.eq(as))return this.isOdd()?as:so;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(AV)&&e.lt(AV))return no(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,n=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,c=e.high&65535,u=e.low>>>16,f=e.low&65535,d=0,h=0,p=0,y=0;return y+=o*f,p+=y>>>16,y&=65535,p+=s*f,h+=p>>>16,p&=65535,p+=o*u,h+=p>>>16,p&=65535,h+=n*f,d+=h>>>16,h&=65535,h+=s*u,d+=h>>>16,h&=65535,h+=o*c,d+=h>>>16,h&=65535,d+=i*f+n*u+s*c+o*a,d&=65535,br(p<<16|y,d<<16|h,this.unsigned)};Oe.mul=Oe.multiply;Oe.divide=function(e){if(os(e)||(e=na(e)),e.isZero())throw Error("division by zero");if(io){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?io.div_u:io.div_s)(this.low,this.high,e.low,e.high);return br(r,io.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?fd:so;var i,n,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return fd;if(e.gt(this.shru(1)))return IV;s=fd}else{if(this.eq(as)){if(e.eq(ip)||e.eq(zE))return as;if(e.eq(as))return ip;var o=this.shr(1);return i=o.div(e).shl(1),i.eq(so)?e.isNegative()?ip:zE:(n=this.sub(e.mul(i)),s=i.add(n.div(e)),s)}else if(e.eq(as))return this.unsigned?fd:so;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=so}for(n=this;n.gte(e);){i=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(i)/Math.LN2),c=a<=48?1:tb(2,a-48),u=no(i),f=u.mul(e);f.isNegative()||f.gt(n);)i-=c,u=no(i,this.unsigned),f=u.mul(e);u.isZero()&&(u=ip),s=s.add(u),n=n.sub(f)}return s};Oe.div=Oe.divide;Oe.modulo=function(e){if(os(e)||(e=na(e)),io){var r=(this.unsigned?io.rem_u:io.rem_s)(this.low,this.high,e.low,e.high);return br(r,io.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Oe.mod=Oe.modulo;Oe.rem=Oe.modulo;Oe.not=function(){return br(~this.low,~this.high,this.unsigned)};Oe.and=function(e){return os(e)||(e=na(e)),br(this.low&e.low,this.high&e.high,this.unsigned)};Oe.or=function(e){return os(e)||(e=na(e)),br(this.low|e.low,this.high|e.high,this.unsigned)};Oe.xor=function(e){return os(e)||(e=na(e)),br(this.low^e.low,this.high^e.high,this.unsigned)};Oe.shiftLeft=function(e){return os(e)&&(e=e.toInt()),(e&=63)==0?this:e<32?br(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):br(0,this.low<<e-32,this.unsigned)};Oe.shl=Oe.shiftLeft;Oe.shiftRight=function(e){return os(e)&&(e=e.toInt()),(e&=63)==0?this:e<32?br(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):br(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Oe.shr=Oe.shiftRight;Oe.shiftRightUnsigned=function(e){if(os(e)&&(e=e.toInt()),e&=63,e===0)return this;var r=this.high;if(e<32){var i=this.low;return br(i>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?br(r,0,this.unsigned):br(r>>>e-32,0,this.unsigned)};Oe.shru=Oe.shiftRightUnsigned;Oe.shr_u=Oe.shiftRightUnsigned;Oe.toSigned=function(){return this.unsigned?br(this.low,this.high,!1):this};Oe.toUnsigned=function(){return this.unsigned?this:br(this.low,this.high,!0)};Oe.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Oe.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Oe.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]};mr.fromBytes=function(e,r,i){return i?mr.fromBytesLE(e,r):mr.fromBytesBE(e,r)};mr.fromBytesLE=function(e,r){return new mr(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)};mr.fromBytesBE=function(e,r){return new mr(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}});var yd=v((Yct,tz)=>{l();"use strict";var aIe=async t=>{let e=[];for await(let r of t)e.push(r);return e};tz.exports=aIe});var rz,fb,oS=bt(()=>{l();rz=N(yd()),fb=(t,e)=>async function*(){yield*(await(0,rz.default)(t)).sort(e)}()});var fc=v((Qct,iz)=>{l();"use strict";var cIe=async t=>{for await(let e of t);};iz.exports=cIe});var sa=v((Zct,nz)=>{l();"use strict";var uIe=async function*(t,e){for await(let r of t)await e(r)&&(yield r)};nz.exports=uIe});var op=v((Jct,sz)=>{l();"use strict";var fIe=async function*(t,e){let r=0;if(!(e<1)){for await(let i of t)if(yield i,r++,r===e)return}};sz.exports=fIe});var aS,gd,cS,Is,md=bt(()=>{l();oS();aS=N(fc()),gd=N(sa()),cS=N(op()),Is=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,r,i){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(let{key:i,value:n}of e)await this.put(i,n,r),yield{key:i,value:n}}async*getMany(e,r={}){for await(let i of e)yield this.get(i,r)}async*deleteMany(e,r={}){for await(let i of e)await this.delete(i,r),yield i}batch(){let e=[],r=[];return{put(i,n){e.push({key:i,value:n})},delete(i){r.push(i)},commit:async i=>{await(0,aS.default)(this.putMany(e,i)),e=[],await(0,aS.default)(this.deleteMany(r,i)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let i=this._all(e,r);if(e.prefix!=null&&(i=(0,gd.default)(i,n=>n.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>(0,gd.default)(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>fb(n,s),i)),e.offset!=null){let n=0;i=(0,gd.default)(i,()=>n++>=e.offset)}return e.limit!=null&&(i=(0,cS.default)(i,e.limit)),i}queryKeys(e,r){let i=this._allKeys(e,r);if(e.prefix!=null&&(i=(0,gd.default)(i,n=>n.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>(0,gd.default)(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>fb(n,s),i)),e.offset!=null){let n=0;i=(0,gd.default)(i,()=>n++>=e.offset)}return e.limit!=null&&(i=(0,cS.default)(i,e.limit)),i}}});var az=v((iut,oz)=>{l();oz.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var uS=v((sut,uz)=>{l();var cz=az();uz.exports=class{constructor(e){this.hwm=e||16,this.head=new cz(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new cz(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var lc=v((out,fz)=>{l();var fS=uS();fz.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new fS,i,n,s,o=()=>{if(!r.isEmpty()){if(t.writev){let m,w=[];for(;!r.isEmpty();){if(m=r.shift(),m.error)throw m.error;w.push(m.value)}return{done:m.done,value:w}}let y=r.shift();if(y.error)throw y.error;return y}return s?{done:!0}:new Promise((y,m)=>{n=w=>(n=null,w.error?m(w.error):t.writev&&!w.done?y({done:w.done,value:[w.value]}):y(w),i)})},a=y=>n?n(y):(r.push(y),i),c=y=>(r=new fS,n?n({error:y}):(r.push({error:y}),i)),u=y=>s?i:a({done:!1,value:y}),f=y=>s?i:(s=!0,y?c(y):a({done:!0})),d=()=>(r=new fS,f(),{done:!0}),h=y=>(f(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:o,return:d,throw:h,push:u,end:f},!e)return i;let p=i;return i={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(y){return p.throw(y),e&&(e(y),e=null),{done:!0}},return(){return p.return(),e&&(e(),e=null),{done:!0}},push:u,end(y){return p.end(y),e&&(e(y),e=null),i}},i}});var ng=v((hS,pS)=>{l();(function(t,e){typeof hS=="object"&&typeof pS!="undefined"?pS.exports=function(r,i,n,s,o){for(i=i.split?i.split("."):i,s=0;s<i.length;s++)r=r?r[i[s]]:o;return r===o?n:r}:typeof define=="function"&&define.amd?define(function(){return function(r,i,n,s,o){for(i=i.split?i.split("."):i,s=0;s<i.length;s++)r=r?r[i[s]]:o;return r===o?n:r}}):t.dlv=function(r,i,n,s,o){for(i=i.split?i.split("."):i,s=0;s<i.length;s++)r=r?r[i[s]]:o;return r===o?n:r}})(hS)});var pz={};zt(pz,{MemoryDatastore:()=>_S});var _S,ES=bt(()=>{l();md();Br();ia();_S=class extends Is{constructor(){super();this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,r){this.data[e.toString()]=r}async get(e){if(!await this.has(e))throw un();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,r])=>({key:new qe(e),value:r}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new qe(e))}}});var oo=v((wut,yz)=>{l();"use strict";var dIe=async function*(t,e){for await(let r of t)yield e(r)};yz.exports=dIe});var Nr=v((_ut,ap)=>{l();var gz=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},SS=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),pb=t=>t&&typeof t.sink=="function"&&SS(t.source),hIe=t=>e=>(t.sink(e),t.source),mz=(...t)=>{if(pb(t[0])){let e=t[0];t[0]=()=>e.source}else if(SS(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&pb(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)pb(t[e])&&(t[e]=hIe(t[e]));return gz(...t)};ap.exports=mz;ap.exports.pipe=mz;ap.exports.rawPipe=gz;ap.exports.isIterable=SS;ap.exports.isDuplex=pb});var cp=v((kut,bz)=>{l();"use strict";var gIe=lc(),mIe=async function*(...t){let e=gIe();setTimeout(async()=>{try{await Promise.all(t.map(async r=>{for await(let i of r)e.push(i)})),e.end()}catch(r){e.end(r)}},0),yield*e};bz.exports=mIe});var AS=v((tft,wz)=>{l();"use strict";function vz(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function _Ie(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return vz(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),vz(new n,r)}}wz.exports=_Ie});var Az=v((gft,xz)=>{l();"use strict";var lp=Vi(),Sz=lp.Reader,EIe=lp.Writer,ao=lp.util,ag=lp.roots["libp2p-record"]||(lp.roots["libp2p-record"]={});ag.Record=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.key=ao.newBuffer([]),t.prototype.value=ao.newBuffer([]),t.prototype.timeReceived="",t.encode=function(r,i){return i||(i=EIe.create()),r.key!=null&&Object.hasOwnProperty.call(r,"key")&&i.uint32(10).bytes(r.key),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&i.uint32(18).bytes(r.value),r.timeReceived!=null&&Object.hasOwnProperty.call(r,"timeReceived")&&i.uint32(42).string(r.timeReceived),i},t.decode=function(r,i){r instanceof Sz||(r=Sz.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new ag.Record;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.key=r.bytes();break;case 2:s.value=r.bytes();break;case 5:s.timeReceived=r.string();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof ag.Record)return r;var i=new ag.Record;return r.key!=null&&(typeof r.key=="string"?ao.base64.decode(r.key,i.key=ao.newBuffer(ao.base64.length(r.key)),0):r.key.length&&(i.key=r.key)),r.value!=null&&(typeof r.value=="string"?ao.base64.decode(r.value,i.value=ao.newBuffer(ao.base64.length(r.value)),0):r.value.length&&(i.value=r.value)),r.timeReceived!=null&&(i.timeReceived=String(r.timeReceived)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.key="":(n.key=[],i.bytes!==Array&&(n.key=ao.newBuffer(n.key))),i.bytes===String?n.value="":(n.value=[],i.bytes!==Array&&(n.value=ao.newBuffer(n.value))),n.timeReceived=""),r.key!=null&&r.hasOwnProperty("key")&&(n.key=i.bytes===String?ao.base64.encode(r.key,0,r.key.length):i.bytes===Array?Array.prototype.slice.call(r.key):r.key),r.value!=null&&r.hasOwnProperty("value")&&(n.value=i.bytes===String?ao.base64.encode(r.value,0,r.value.length):i.bytes===Array?Array.prototype.slice.call(r.value):r.value),r.timeReceived!=null&&r.hasOwnProperty("timeReceived")&&(n.timeReceived=r.timeReceived),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,lp.util.toJSONOptions)},t}();xz.exports=ag});var Iz=v((mft,kS)=>{l();"use strict";kS.exports.toRFC3339=t=>{let e=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),i=String(t.getUTCDate()).padStart(2,"0"),n=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),o=String(t.getUTCSeconds()).padStart(2,"0"),c=t.getUTCMilliseconds()*1e3*1e3;return`${e}-${r}-${i}T${n}:${s}:${o}.${c}Z`};kS.exports.parseRFC3339=t=>{let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(!r)throw new Error("Invalid format");let i=parseInt(r[1],10),n=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(i,n,s,o,a,c,u))}});var Pz=v((bft,Rz)=>{l();"use strict";var{Record:DS}=Az(),Tz=Iz(),cg=class{constructor(e,r,i){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(r instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=r,this.timeReceived=i}serialize(){return DS.encode(this.prepareSerialize()).finish()}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&Tz.toRFC3339(this.timeReceived)}}static deserialize(e){let r=DS.decode(e);return cg.fromDeserialized(DS.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}))}static fromDeserialized(e){let r;return e.timeReceived&&(r=Tz.parseRFC3339(e.timeReceived)),new cg(e.key,e.value,r)}};Rz.exports=cg});var gb=v((vft,Oz)=>{l();"use strict";function Cz(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function SIe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Cz(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Cz(new n,r)}}Oz.exports=SIe});var Dz=v((wft,kz)=>{l();"use strict";var{sha256:xIe}=(mi(),zs),mb=gb(),{toString:AIe}=(tt(),pr),{equals:IIe}=(wi(),vn),TIe=async(t,e)=>{if(!(t instanceof Uint8Array))throw mb(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(t.byteLength<5)throw mb(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");if(AIe(t.subarray(0,4))!=="/pk/")throw mb(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");let i=t.slice(4),n=await xIe.digest(e);if(!IIe(i,n.bytes))throw mb(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")};kz.exports={func:TIe,sign:!1}});var Nz=v((_ft,Bz)=>{l();"use strict";Bz.exports={pk:Dz()}});var Lz=v((Eft,Mz)=>{l();"use strict";var RIe=gb(),{toString:PIe}=(tt(),pr),CIe=(t,e)=>{let r=e.key,n=PIe(r).split("/");if(n.length<3)return;let s=t[n[1].toString()];if(!s){let o="Invalid record keytype";throw RIe(new Error(o),"ERR_INVALID_RECORD_KEY_TYPE")}return s.func(r,e.value)};Mz.exports={verifyRecord:CIe,validators:Nz()}});var jz=v((Sft,qz)=>{l();"use strict";var OIe=(t,e)=>0;qz.exports=OIe});var Fz=v((xft,Uz)=>{l();"use strict";Uz.exports={pk:jz()}});var Vz=v((Aft,Kz)=>{l();"use strict";var BS=gb(),{toString:kIe}=(tt(),pr),DIe=(t,e,r)=>{if(r.length===0){let o="No records given";throw BS(new Error(o),"ERR_NO_RECORDS_RECEIVED")}let n=kIe(e).split("/");if(n.length<3){let o="Record key does not have a selector function";throw BS(new Error(o),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}let s=t[n[1].toString()];if(!s){let o=`Unrecognized key prefix: ${n[1]}`;throw BS(new Error(o),"ERR_UNRECOGNIZED_KEY_PREFIX")}return r.length===1?0:s(e,r)};Kz.exports={bestRecord:DIe,selectors:Fz()}});var bd=v((Ift,zz)=>{l();"use strict";zz.exports={Record:Pz(),validator:Lz(),selection:Vz()}});var Jz=v((Yft,Zz)=>{l();"use strict";var NIe=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;Zz.exports=function(e,r){if(r==null&&(r=!1),e.length<2||e.length>255)return!1;var i=e[e.length-1];if(r){if(i!==".")return!1}else if(i===".")return!1;return NIe.test(e)}});var gu=v((hdt,IH)=>{l();"use strict";var zIe=()=>{let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t};IH.exports=zIe});var vr=v((pdt,XS)=>{l();"use strict";var pp=typeof Reflect=="object"?Reflect:null,TH=pp&&typeof pp.apply=="function"?pp.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Eb;pp&&typeof pp.ownKeys=="function"?Eb=pp.ownKeys:Object.getOwnPropertySymbols?Eb=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Eb=function(e){return Object.getOwnPropertyNames(e)};function HIe(t){console&&console.warn&&console.warn(t)}var RH=Number.isNaN||function(e){return e!==e};function nr(){nr.init.call(this)}XS.exports=nr;XS.exports.once=YIe;nr.EventEmitter=nr;nr.prototype._events=void 0;nr.prototype._eventsCount=0;nr.prototype._maxListeners=void 0;var PH=10;function Sb(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(nr,"defaultMaxListeners",{enumerable:!0,get:function(){return PH},set:function(t){if(typeof t!="number"||t<0||RH(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");PH=t}});nr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nr.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||RH(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function CH(t){return t._maxListeners===void 0?nr.defaultMaxListeners:t._maxListeners}nr.prototype.getMaxListeners=function(){return CH(this)};nr.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")TH(c,this,r);else for(var u=c.length,f=NH(c,u),i=0;i<u;++i)TH(f[i],this,r);return!0};function OH(t,e,r,i){var n,s,o;if(Sb(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=CH(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,HIe(a)}return t}nr.prototype.addListener=function(e,r){return OH(this,e,r,!1)};nr.prototype.on=nr.prototype.addListener;nr.prototype.prependListener=function(e,r){return OH(this,e,r,!0)};function $Ie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kH(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=$Ie.bind(i);return n.listener=r,i.wrapFn=n,n}nr.prototype.once=function(e,r){return Sb(r),this.on(e,kH(this,e,r)),this};nr.prototype.prependOnceListener=function(e,r){return Sb(r),this.prependListener(e,kH(this,e,r)),this};nr.prototype.removeListener=function(e,r){var i,n,s,o,a;if(Sb(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():GIe(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};nr.prototype.off=nr.prototype.removeListener;nr.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(n=0;n<s.length;++n)o=s[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function DH(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?WIe(n):NH(n,n.length)}nr.prototype.listeners=function(e){return DH(this,e,!0)};nr.prototype.rawListeners=function(e){return DH(this,e,!1)};nr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):BH.call(t,e)};nr.prototype.listenerCount=BH;function BH(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}nr.prototype.eventNames=function(){return this._eventsCount>0?Eb(this._events):[]};function NH(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function GIe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function WIe(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function YIe(t,e){return new Promise(function(r,i){function n(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}MH(t,e,s,{once:!0}),e!=="error"&&XIe(t,n,{once:!0})})}function XIe(t,e,r){typeof t.on=="function"&&MH(t,"error",e,r)}function MH(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var qH=v((ydt,LH)=>{l();"use strict";var xb=gu(),QIe=vr().EventEmitter;async function*ZIe(t,e=1){e<1&&(e=1);let r=new QIe,i=[],n=xb(),s=!1,o=xb();for(r.on("task-complete",()=>{o.resolve(),o=xb()}),Promise.resolve().then(async()=>{try{for await(let a of t){i.length===e&&await n.promise;let c={done:!1};i.push(c),a().then(u=>{c.done=!0,c.ok=!0,c.value=u,r.emit("task-complete")},u=>{c.done=!0,c.err=u,r.emit("task-complete")})}s=!0}catch(a){r.emit("task-complete")}});;){for(await o.promise;i.length&&i[0].done;){let a=i[0];if(i.shift(),a.ok)yield a.value;else throw a.err;n.resolve(),n=xb()}if(s&&i.length===0)break}}LH.exports=ZIe});var yp=v((Pdt,$H)=>{l();"use strict";async function*eTe(t,e={}){let r=t.getReader();try{for(;;){let i=await r.read();if(i.done)return;yield i.value}}finally{e.preventCancel!==!0&&r.cancel(),r.releaseLock()}}$H.exports=eTe});var YH=v((Cdt,WH)=>{l();"use strict";var GH=yp();function tTe(t){return typeof t.stream=="function"?GH(t.stream()):GH(new Response(t).body)}WH.exports=tTe});var gp=v((Odt,XH)=>{l();"use strict";function rTe(t){let[e,r]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],i=[];return{peek:()=>e.next(),push:n=>{i.push(n)},next:()=>i.length?{done:!1,value:i.shift()}:e.next(),[r](){return this}}}XH.exports=rTe});var Ob=v((zdt,c$)=>{l();"use strict";async function*iTe(t,e=1){let r=[];e<1&&(e=1);for await(let i of t)for(r.push(i);r.length>=e;)yield r.slice(0,e),r=r.slice(e);for(;r.length;)yield r.slice(0,e),r=r.slice(e)}c$.exports=iTe});var kb=v((Hdt,u$)=>{l();"use strict";var nTe=Ob();async function*sTe(t,e=1){for await(let r of nTe(t,e)){let i=r.map(n=>n().then(s=>({ok:!0,value:s}),s=>({ok:!1,err:s})));for(let n=0;n<i.length;n++){let s=await i[n];if(s.ok)yield s.value;else throw s.err}}}u$.exports=sTe});var f$=v((lg,Db)=>{l();(function(t,e){"use strict";var r={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function i(p){if(!Array.isArray(p)&&!ArrayBuffer.isView(p))return!1;for(var y=0;y<p.length;y++)if(!Number.isInteger(p[y])||p[y]<0||p[y]>255)return!1;return!0}function n(p,y){return(p&65535)*y+(((p>>>16)*y&65535)<<16)}function s(p,y){return p<<y|p>>>32-y}function o(p){return p^=p>>>16,p=n(p,2246822507),p^=p>>>13,p=n(p,3266489909),p^=p>>>16,p}function a(p,y){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],y=[y[0]>>>16,y[0]&65535,y[1]>>>16,y[1]&65535];var m=[0,0,0,0];return m[3]+=p[3]+y[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=p[2]+y[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=p[1]+y[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=p[0]+y[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function c(p,y){p=[p[0]>>>16,p[0]&65535,p[1]>>>16,p[1]&65535],y=[y[0]>>>16,y[0]&65535,y[1]>>>16,y[1]&65535];var m=[0,0,0,0];return m[3]+=p[3]*y[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=p[2]*y[3],m[1]+=m[2]>>>16,m[2]&=65535,m[2]+=p[3]*y[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=p[1]*y[3],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=p[2]*y[2],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=p[3]*y[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=p[0]*y[3]+p[1]*y[2]+p[2]*y[1]+p[3]*y[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function u(p,y){return y%=64,y===32?[p[1],p[0]]:y<32?[p[0]<<y|p[1]>>>32-y,p[1]<<y|p[0]>>>32-y]:(y-=32,[p[1]<<y|p[0]>>>32-y,p[0]<<y|p[1]>>>32-y])}function f(p,y){return y%=64,y===0?p:y<32?[p[0]<<y|p[1]>>>32-y,p[1]<<y]:[p[1]<<y-32,0]}function d(p,y){return[p[0]^y[0],p[1]^y[1]]}function h(p){return p=d(p,[0,p[0]>>>1]),p=c(p,[4283543511,3981806797]),p=d(p,[0,p[0]>>>1]),p=c(p,[3301882366,444984403]),p=d(p,[0,p[0]>>>1]),p}r.x86.hash32=function(p,y){if(r.inputValidation&&!i(p))return e;y=y||0;for(var m=p.length%4,w=p.length-m,b=y,S=0,I=3432918353,j=461845907,B=0;B<w;B=B+4)S=p[B]|p[B+1]<<8|p[B+2]<<16|p[B+3]<<24,S=n(S,I),S=s(S,15),S=n(S,j),b^=S,b=s(b,13),b=n(b,5)+3864292196;switch(S=0,m){case 3:S^=p[B+2]<<16;case 2:S^=p[B+1]<<8;case 1:S^=p[B],S=n(S,I),S=s(S,15),S=n(S,j),b^=S}return b^=p.length,b=o(b),b>>>0},r.x86.hash128=function(p,y){if(r.inputValidation&&!i(p))return e;y=y||0;for(var m=p.length%16,w=p.length-m,b=y,S=y,I=y,j=y,B=0,C=0,z=0,W=0,X=597399067,P=2869860233,g=951274213,_=2716044179,x=0;x<w;x=x+16)B=p[x]|p[x+1]<<8|p[x+2]<<16|p[x+3]<<24,C=p[x+4]|p[x+5]<<8|p[x+6]<<16|p[x+7]<<24,z=p[x+8]|p[x+9]<<8|p[x+10]<<16|p[x+11]<<24,W=p[x+12]|p[x+13]<<8|p[x+14]<<16|p[x+15]<<24,B=n(B,X),B=s(B,15),B=n(B,P),b^=B,b=s(b,19),b+=S,b=n(b,5)+1444728091,C=n(C,P),C=s(C,16),C=n(C,g),S^=C,S=s(S,17),S+=I,S=n(S,5)+197830471,z=n(z,g),z=s(z,17),z=n(z,_),I^=z,I=s(I,15),I+=j,I=n(I,5)+2530024501,W=n(W,_),W=s(W,18),W=n(W,X),j^=W,j=s(j,13),j+=b,j=n(j,5)+850148119;switch(B=0,C=0,z=0,W=0,m){case 15:W^=p[x+14]<<16;case 14:W^=p[x+13]<<8;case 13:W^=p[x+12],W=n(W,_),W=s(W,18),W=n(W,X),j^=W;case 12:z^=p[x+11]<<24;case 11:z^=p[x+10]<<16;case 10:z^=p[x+9]<<8;case 9:z^=p[x+8],z=n(z,g),z=s(z,17),z=n(z,_),I^=z;case 8:C^=p[x+7]<<24;case 7:C^=p[x+6]<<16;case 6:C^=p[x+5]<<8;case 5:C^=p[x+4],C=n(C,P),C=s(C,16),C=n(C,g),S^=C;case 4:B^=p[x+3]<<24;case 3:B^=p[x+2]<<16;case 2:B^=p[x+1]<<8;case 1:B^=p[x],B=n(B,X),B=s(B,15),B=n(B,P),b^=B}return b^=p.length,S^=p.length,I^=p.length,j^=p.length,b+=S,b+=I,b+=j,S+=b,I+=b,j+=b,b=o(b),S=o(S),I=o(I),j=o(j),b+=S,b+=I,b+=j,S+=b,I+=b,j+=b,("00000000"+(b>>>0).toString(16)).slice(-8)+("00000000"+(S>>>0).toString(16)).slice(-8)+("00000000"+(I>>>0).toString(16)).slice(-8)+("00000000"+(j>>>0).toString(16)).slice(-8)},r.x64.hash128=function(p,y){if(r.inputValidation&&!i(p))return e;y=y||0;for(var m=p.length%16,w=p.length-m,b=[0,y],S=[0,y],I=[0,0],j=[0,0],B=[2277735313,289559509],C=[1291169091,658871167],z=0;z<w;z=z+16)I=[p[z+4]|p[z+5]<<8|p[z+6]<<16|p[z+7]<<24,p[z]|p[z+1]<<8|p[z+2]<<16|p[z+3]<<24],j=[p[z+12]|p[z+13]<<8|p[z+14]<<16|p[z+15]<<24,p[z+8]|p[z+9]<<8|p[z+10]<<16|p[z+11]<<24],I=c(I,B),I=u(I,31),I=c(I,C),b=d(b,I),b=u(b,27),b=a(b,S),b=a(c(b,[0,5]),[0,1390208809]),j=c(j,C),j=u(j,33),j=c(j,B),S=d(S,j),S=u(S,31),S=a(S,b),S=a(c(S,[0,5]),[0,944331445]);switch(I=[0,0],j=[0,0],m){case 15:j=d(j,f([0,p[z+14]],48));case 14:j=d(j,f([0,p[z+13]],40));case 13:j=d(j,f([0,p[z+12]],32));case 12:j=d(j,f([0,p[z+11]],24));case 11:j=d(j,f([0,p[z+10]],16));case 10:j=d(j,f([0,p[z+9]],8));case 9:j=d(j,[0,p[z+8]]),j=c(j,C),j=u(j,33),j=c(j,B),S=d(S,j);case 8:I=d(I,f([0,p[z+7]],56));case 7:I=d(I,f([0,p[z+6]],48));case 6:I=d(I,f([0,p[z+5]],40));case 5:I=d(I,f([0,p[z+4]],32));case 4:I=d(I,f([0,p[z+3]],24));case 3:I=d(I,f([0,p[z+2]],16));case 2:I=d(I,f([0,p[z+1]],8));case 1:I=d(I,[0,p[z]]),I=c(I,B),I=u(I,31),I=c(I,C),b=d(b,I)}return b=d(b,[0,p.length]),S=d(S,[0,p.length]),b=a(b,S),S=a(S,b),b=h(b),S=h(S),b=a(b,S),S=a(S,b),("00000000"+(b[0]>>>0).toString(16)).slice(-8)+("00000000"+(b[1]>>>0).toString(16)).slice(-8)+("00000000"+(S[0]>>>0).toString(16)).slice(-8)+("00000000"+(S[1]>>>0).toString(16)).slice(-8)},typeof lg!="undefined"?(typeof Db!="undefined"&&Db.exports&&(lg=Db.exports=r),lg.murmurHash3=r):typeof define=="function"&&define.amd?define([],function(){return r}):(r._murmurHash3=t.murmurHash3,r.noConflict=function(){return t.murmurHash3=r._murmurHash3,r._murmurHash3=e,r.noConflict=e,r},t.murmurHash3=r)})(lg)});var d$=v(($dt,l$)=>{l();l$.exports=f$()});var dg=v((cht,g$)=>{l();"use strict";function y$(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function lTe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return y$(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),y$(new n,r)}}g$.exports=lTe});var Pn=v((xht,C$)=>{l();"use strict";var{Buffer:aa}=Yt(),P$=Symbol.for("BufferList");function wr(t){if(!(this instanceof wr))return new wr(t);wr._init.call(this,t)}wr._init=function(e){Object.defineProperty(this,P$,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};wr.prototype._new=function(e){return new wr(e)};wr.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let i=0;i<this._bufs.length;i++){let n=r+this._bufs[i].length;if(e<n||i===this._bufs.length-1)return[i,e-r];r=n}};wr.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let i=0;i<e;i++)r+=this._bufs[i].length;return r};wr.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};wr.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};wr.prototype.copy=function(e,r,i,n){if((typeof i!="number"||i<0)&&(i=0),(typeof n!="number"||n>this.length)&&(n=this.length),i>=this.length||n<=0)return e||aa.alloc(0);let s=!!e,o=this._offset(i),a=n-i,c=a,u=s&&r||0,f=o[1];if(i===0&&n===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:aa.concat(this._bufs,this.length);for(let d=0;d<this._bufs.length;d++)this._bufs[d].copy(e,u),u+=this._bufs[d].length;return e}if(c<=this._bufs[o[0]].length-f)return s?this._bufs[o[0]].copy(e,r,f,f+c):this._bufs[o[0]].slice(f,f+c);s||(e=aa.allocUnsafe(a));for(let d=o[0];d<this._bufs.length;d++){let h=this._bufs[d].length-f;if(c>h)this._bufs[d].copy(e,u,f),u+=h;else{this._bufs[d].copy(e,u,f,f+c),u+=h;break}c-=h,f&&(f=0)}return e.length>u?e.slice(0,u):e};wr.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let i=this._offset(e),n=this._offset(r),s=this._bufs.slice(i[0],n[0]+1);return n[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,n[1]),i[1]!==0&&(s[0]=s[0].slice(i[1])),this._new(s)};wr.prototype.toString=function(e,r,i){return this.slice(r,i).toString(e)};wr.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};wr.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};wr.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(aa.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(aa.from(e));return this};wr.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};wr.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=aa.from([t]):typeof t=="string"?t=aa.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=aa.from(t.buffer,t.byteOffset,t.byteLength):aa.isBuffer(t)||(t=aa.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let i=this._offset(e),n=i[0],s=i[1];for(;n<this._bufs.length;n++){let o=this._bufs[n];for(;s<o.length;)if(o.length-s>=t.length){let c=o.indexOf(t,s);if(c!==-1)return this._reverseOffset([n,c]);s=o.length-t.length+1}else{let c=this._reverseOffset([n,s]);if(this._match(c,t))return c;s++}s=0}return-1};wr.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?wr.prototype[r]=function(i,n){return this.slice(i,i+n)[r](0,n)}:wr.prototype[r]=function(i=0){return this.slice(i,i+t[r])[r](0)}})(e)})();wr.prototype._isBufferList=function(e){return e instanceof wr||wr.isBufferList(e)};wr.isBufferList=function(e){return e!=null&&e[P$]};C$.exports=wr});var D$=v((Aht,k$)=>{l();var O$=class{constructor(e,r=12,i=8*1024,n=32*1024,s=64,o){this.bits=r,this.min=i,this.max=n,this.asModule=e,this.rabin=new e.Rabin(r,i,n,s,o),this.polynomial=o}fingerprint(e){let{__retain:r,__release:i,__allocArray:n,__getInt32Array:s,Int32Array_ID:o,Uint8Array_ID:a}=this.asModule,c=new Int32Array(Math.ceil(e.length/this.min)),u=r(n(o,c)),f=r(n(a,e)),d=this.rabin.fingerprint(f,u),h=s(d);i(f),i(u);let p=h.indexOf(0);return p>=0?h.subarray(0,p):h}};k$.exports=O$});var $$=v(yg=>{l();"use strict";var tx=-8,Bb=-4,wTe=0,B$=1,N$=1<<0,Nb=1<<1,Iht=1<<2,Tht=1<<3,M$=5,Rht=1<<M$,L$=1<<10,q$=1<<11,Pht=1<<12,_Te=1<<13,j$=14,Cht=1<<j$,Oht=1<<19,kht=1<<20,Dht=1<<21,Bht=1<<22,ETe=0,rx=4,STe=8,xTe=12,U$=12,ATe=16,ITe=typeof BigUint64Array!="undefined",hg=Symbol(),pg=1024;function F$(t,e){let r=new Uint32Array(t),i=new Uint16Array(t);var n=r[e+Bb>>>2]>>>1,s=e>>>1;if(n<=pg)return String.fromCharCode.apply(String,i.subarray(s,s+n));let o=[];do{let a=i[s+pg-1],c=a>=55296&&a<56320?pg-1:pg;o.push(String.fromCharCode.apply(String,i.subarray(s,s+=c))),n-=c}while(n>pg);return o.join("")+String.fromCharCode.apply(String,i.subarray(s,s+n))}function ix(t){let e={};function r(n,s){return n?F$(n.buffer,s):"<yet unknown>"}let i=t.env=t.env||{};return i.abort=i.abort||function(s,o,a,c){let u=e.memory||i.memory;throw Error("abort: "+r(u,s)+" at "+r(u,o)+":"+a+":"+c)},i.trace=i.trace||function(s,o){let a=e.memory||i.memory;console.log("trace: "+r(a,s)+(o?" ":"")+Array.prototype.slice.call(arguments,2,2+o).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,e}function nx(t,e){let r=e.exports,i=r.memory,n=r.table,s=r.__alloc,o=r.__retain,a=r.__rtti_base||~0;function c(C){let z=new Uint32Array(i.buffer),W=z[a>>>2];if((C>>>=0)>=W)throw Error("invalid id: "+C);return z[(a+4>>>2)+C*2]}function u(C){let z=new Uint32Array(i.buffer),W=z[a>>>2];if((C>>>=0)>=W)throw Error("invalid id: "+C);return z[(a+4>>>2)+C*2+1]}function f(C){return 31-Math.clz32(C>>>M$&31)}function d(C){return 31-Math.clz32(C>>>j$&31)}function h(C){let z=C.length,W=s(z<<1,B$),X=new Uint16Array(i.buffer);for(var P=0,g=W>>>1;P<z;++P)X[g+P]=C.charCodeAt(P);return W}t.__allocString=h;function p(C){let z=i.buffer;if(new Uint32Array(z)[C+tx>>>2]!==B$)throw Error("not a string: "+C);return F$(z,C)}t.__getString=p;function y(C,z,W){let X=i.buffer;if(W)switch(C){case 2:return new Float32Array(X);case 3:return new Float64Array(X)}else switch(C){case 0:return new(z?Int8Array:Uint8Array)(X);case 1:return new(z?Int16Array:Uint16Array)(X);case 2:return new(z?Int32Array:Uint32Array)(X);case 3:return new(z?BigInt64Array:BigUint64Array)(X)}throw Error("unsupported align: "+C)}function m(C,z){let W=c(C);if(!(W&(N$|Nb)))throw Error("not an array: "+C+" @ "+W);let X=f(W),P=z.length,g=s(P<<X,wTe),_=s(W&Nb?ATe:xTe,C),x=new Uint32Array(i.buffer);x[_+ETe>>>2]=o(g),x[_+rx>>>2]=g,x[_+STe>>>2]=P<<X,W&Nb&&(x[_+U$>>>2]=P);let O=y(X,W&L$,W&q$);if(W&_Te)for(let L=0;L<P;++L)O[(g>>>X)+L]=o(z[L]);else O.set(z,g>>>X);return _}t.__allocArray=m;function w(C){let z=new Uint32Array(i.buffer),W=z[C+tx>>>2],X=c(W);if(!(X&N$))throw Error("not an array: "+W);let P=f(X);var g=z[C+rx>>>2];let _=X&Nb?z[C+U$>>>2]:z[g+Bb>>>2]>>>P;return y(P,X&L$,X&q$).subarray(g>>>=P,g+_)}t.__getArrayView=w;function b(C){let z=w(C),W=z.length,X=new Array(W);for(let P=0;P<W;P++)X[P]=z[P];return X}t.__getArray=b;function S(C){let z=i.buffer,W=new Uint32Array(z)[C+Bb>>>2];return z.slice(C,C+W)}t.__getArrayBuffer=S;function I(C,z,W){return new C(j(C,z,W))}function j(C,z,W){let X=i.buffer,P=new Uint32Array(X),g=P[W+rx>>>2];return new C(X,g,P[g+Bb>>>2]>>>z)}t.__getInt8Array=I.bind(null,Int8Array,0),t.__getInt8ArrayView=j.bind(null,Int8Array,0),t.__getUint8Array=I.bind(null,Uint8Array,0),t.__getUint8ArrayView=j.bind(null,Uint8Array,0),t.__getUint8ClampedArray=I.bind(null,Uint8ClampedArray,0),t.__getUint8ClampedArrayView=j.bind(null,Uint8ClampedArray,0),t.__getInt16Array=I.bind(null,Int16Array,1),t.__getInt16ArrayView=j.bind(null,Int16Array,1),t.__getUint16Array=I.bind(null,Uint16Array,1),t.__getUint16ArrayView=j.bind(null,Uint16Array,1),t.__getInt32Array=I.bind(null,Int32Array,2),t.__getInt32ArrayView=j.bind(null,Int32Array,2),t.__getUint32Array=I.bind(null,Uint32Array,2),t.__getUint32ArrayView=j.bind(null,Uint32Array,2),ITe&&(t.__getInt64Array=I.bind(null,BigInt64Array,3),t.__getInt64ArrayView=j.bind(null,BigInt64Array,3),t.__getUint64Array=I.bind(null,BigUint64Array,3),t.__getUint64ArrayView=j.bind(null,BigUint64Array,3)),t.__getFloat32Array=I.bind(null,Float32Array,2),t.__getFloat32ArrayView=j.bind(null,Float32Array,2),t.__getFloat64Array=I.bind(null,Float64Array,3),t.__getFloat64ArrayView=j.bind(null,Float64Array,3);function B(C,z){let W=new Uint32Array(i.buffer);var X=W[C+tx>>>2];if(X<=W[a>>>2])do if(X==z)return!0;while(X=u(X));return!1}return t.__instanceof=B,t.memory=t.memory||i,t.table=t.table||n,H$(r,t)}function K$(t){return typeof Response!="undefined"&&t instanceof Response}async function V$(t,e){return K$(t=await t)?z$(t,e):nx(ix(e||(e={})),await WebAssembly.instantiate(t instanceof WebAssembly.Module?t:await WebAssembly.compile(t),e))}yg.instantiate=V$;function TTe(t,e){return nx(ix(e||(e={})),new WebAssembly.Instance(t instanceof WebAssembly.Module?t:new WebAssembly.Module(t),e))}yg.instantiateSync=TTe;async function z$(t,e){return WebAssembly.instantiateStreaming?nx(ix(e||(e={})),(await WebAssembly.instantiateStreaming(t,e)).instance):V$(K$(t=await t)?t.arrayBuffer():t,e)}yg.instantiateStreaming=z$;function H$(t,e){var r=e?Object.create(e):{},i=t.__argumentsLength?function(n){t.__argumentsLength.value=n}:t.__setArgumentsLength||t.__setargc||function(){};for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;let s=t[n],o=n.split("."),a=r;for(;o.length>1;){let f=o.shift();Object.prototype.hasOwnProperty.call(a,f)||(a[f]={}),a=a[f]}let c=o[0],u=c.indexOf("#");if(u>=0){let f=c.substring(0,u),d=a[f];if(typeof d=="undefined"||!d.prototype){let h=function(...p){return h.wrap(h.prototype.constructor(0,...p))};h.prototype={valueOf:function(){return this[hg]}},h.wrap=function(p){return Object.create(h.prototype,{[hg]:{value:p,writable:!1}})},d&&Object.getOwnPropertyNames(d).forEach(p=>Object.defineProperty(h,p,Object.getOwnPropertyDescriptor(d,p))),a[f]=h}if(c=c.substring(u+1),a=a[f].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(a,c=c.substring(4))){let h=t[n.replace("set:","get:")],p=t[n.replace("get:","set:")];Object.defineProperty(a,c,{get:function(){return h(this[hg])},set:function(y){p(this[hg],y)},enumerable:!0})}}else c==="constructor"?(a[c]=(...h)=>(i(h.length),s(...h))).original=s:(a[c]=function(...h){return i(h.length),s(this[hg],...h)}).original=s}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(a,c=c.substring(4))||Object.defineProperty(a,c,{get:t[n.replace("set:","get:")],set:t[n.replace("get:","set:")],enumerable:!0}):typeof s=="function"&&s!==i?(a[c]=(...f)=>(i(f.length),s(...f))).original=s:a[c]=s}return r}yg.demangle=H$});var W$=v((Mht,G$)=>{l();var{instantiate:RTe}=$$();sx.supported=typeof WebAssembly!="undefined";function sx(t={}){if(!sx.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return RTe(new Response(new Blob([e],{type:"application/wasm"})),t)}G$.exports=sx});var Q$=v((Lht,X$)=>{l();var Y$=D$(),PTe=W$(),CTe=async(t,e,r,i,n)=>{let s=await PTe();return new Y$(s,t,e,r,i,n)};X$.exports={Rabin:Y$,create:CTe}});var cG=v((t0t,aG)=>{l();"use strict";var Lb=7;aG.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,r){let i=this._internalPositionFor(e,!1);if(r===void 0)i!==-1&&(this._unsetInternalPos(i),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let n=!1;i===-1?(i=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(i,e,r,n),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let r=this._internalPositionFor(e,!0);if(r!==-1)return this._data[r][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let r=0;for(;r<this.length;)e(this.get(r),r,this),r++}map(e){let r=0,i=new Array(this.length);for(;r<this.length;)i[r]=e(this.get(r),r,this),r++;return i}reduce(e,r){let i=0,n=r;for(;i<this.length;){let s=this.get(i);n=e(n,s,i),i++}return n}find(e){let r=0,i,n;for(;r<this.length&&!i;)n=this.get(r),i=e(n),r++;return i?n:void 0}_internalPositionFor(e,r){let i=this._bytePosFor(e,r);if(i>=this._bitArrays.length)return-1;let n=this._bitArrays[i],s=e-i*Lb;if(!((n&1<<s)>0))return-1;let a=this._bitArrays.slice(0,i).reduce(jTe,0),c=~(4294967295<<s+1),u=oG(n&c);return a+u-1}_bytePosFor(e,r){let i=Math.floor(e/Lb),n=i+1;for(;!r&&this._bitArrays.length<n;)this._bitArrays.push(0);return i}_setBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]|=1<<e-r*Lb}_unsetBit(e){let r=this._bytePosFor(e,!1);this._bitArrays[r]&=~(1<<e-r*Lb)}_setInternalPos(e,r,i,n){let s=this._data,o=[r,i];if(n)this._sortData(),s[e]=o;else{if(s.length)if(s[s.length-1][0]>=r)s.push(o);else if(s[0][0]<=r)s.unshift(o);else{let a=Math.round(s.length/2);this._data=s.slice(0,a).concat(o).concat(s.slice(a))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(UTe),this._changedData=!1}bitField(){let e=[],r=8,i=0,n=0,s,o=this._bitArrays.slice();for(;o.length||i;){i===0&&(s=o.shift(),i=7);let c=Math.min(i,r),u=~(255<<c);n|=(s&u)<<8-r,s=s>>>c,i-=c,r-=c,(!r||!i&&!o.length)&&(e.push(n),n=0,r=8)}for(var a=e.length-1;a>0&&e[a]===0;a--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(FTe)}};function jTe(t,e){return t+oG(e)}function oG(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function UTe(t,e){return t[0]-e[0]}function FTe(t){return t[1]}});var lG=v((r0t,fG)=>{l();"use strict";var KTe=cG(),{fromString:VTe}=(dt(),bi),ca=class{constructor(e,r,i=0){this._options=e,this._popCount=0,this._parent=r,this._posAtParent=i,this._children=new KTe,this.key=null}async put(e,r){let i=await this._findNewBucketAndPos(e);await i.bucket._putAt(i,e,r)}async get(e){let r=await this._findChild(e);if(r)return r.value}async del(e){let r=await this._findPlace(e),i=r.bucket._at(r.pos);i&&i.key===e&&r.bucket._delAt(r.pos)}leafCount(){return this._children.compactArray().reduce((r,i)=>i instanceof ca?r+i.leafCount():r+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let r of e)r instanceof ca?yield*r.eachLeafSeries():yield r;return[]}serialize(e,r){let i=[];return r(this._children.reduce((n,s,o)=>(s&&(s instanceof ca?n.push(s.serialize(e,r)):n.push(e(s,o))),n),i))}asyncTransform(e,r){return uG(this,e,r)}toJSON(){return this.serialize(HTe,$Te)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let r=await this._findPlace(e),i=r.bucket._at(r.pos);if(!(i instanceof ca)&&i&&i.key===e)return i}async _findPlace(e){let r=this._options.hash(typeof e=="string"?VTe(e):e),i=await r.take(this._options.bits),n=this._children.get(i);return n instanceof ca?n._findPlace(r):{bucket:this,pos:i,hash:r,existingChild:n}}async _findNewBucketAndPos(e){let r=await this._findPlace(e);if(r.existingChild&&r.existingChild.key!==e){let i=new ca(this._options,r.bucket,r.pos);r.bucket._putObjectAt(r.pos,i);let n=await i._findPlace(r.existingChild.hash);return n.bucket._putAt(n,r.existingChild.key,r.existingChild.value),i._findNewBucketAndPos(r.hash)}return r}_putAt(e,r,i){this._putObjectAt(e.pos,{key:r,value:i,hash:e.hash})}_putObjectAt(e,r){this._children.get(e)||this._popCount++,this._children.set(e,r)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(zTe);if(e&&!(e instanceof ca)){let r=e.hash;r.untake(this._options.bits);let i={pos:this._posAtParent,hash:r,bucket:this._parent};this._parent._putAt(i,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function zTe(t){return Boolean(t)}function HTe(t,e){return t.key}function $Te(t){return t}async function uG(t,e,r){let i=[];for(let n of t._children.compactArray())if(n instanceof ca)await uG(n,e,r);else{let s=await e(n);i.push({bitField:t._children.bitField(),children:s})}return r(i)}fG.exports=ca});var hG=v((n0t,dG)=>{l();"use strict";var GTe=[255,254,252,248,240,224,192,128],WTe=[1,3,7,15,31,63,127,255];dG.exports=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let r=e,i=0;for(;r&&this._haveBits();){let n=this._value[this._currentBytePos],s=this._currentBitPos+1,o=Math.min(s,r),a=YTe(n,s-o,o);i=(i<<o)+a,r-=o,this._currentBitPos-=o,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return i}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function YTe(t,e,r){let i=XTe(e,r);return(t&i)>>>e}function XTe(t,e){return GTe[t]&WTe[Math.min(e+t-1,7)]}});var pG=v((s0t,ux)=>{l();"use strict";var QTe=hG(),{concat:ZTe}=(bn(),Gs);function JTe(t){function e(r){return r instanceof qb?r:new qb(r,t)}return e}var qb=class{constructor(e,r){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=r,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let r=e;for(;this._availableBits<r;)await this._produceMoreBits();let i=0;for(;r>0;){let n=this._buffers[this._currentBufferIndex],s=Math.min(n.availableBits(),r),o=n.take(s);i=(i<<s)+o,r-=s,this._availableBits-=s,n.availableBits()===0&&this._currentBufferIndex++}return i}untake(e){let r=e;for(;r>0;){let i=this._buffers[this._currentBufferIndex],n=Math.min(i.totalBits()-i.availableBits(),r);i.untake(n),r-=n,this._availableBits+=n,this._currentBufferIndex>0&&i.totalBits()===i.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth?ZTe([this._value,Uint8Array.from([this._depth])]):this._value,r=await this._hashFn(e),i=new QTe(r);this._buffers.push(i),this._availableBits+=i.availableBits()}};ux.exports=JTe;ux.exports.InfiniteHash=qb});var mg=v((o0t,gG)=>{l();"use strict";var yG=lG(),eRe=pG();function tRe(t){if(!t||!t.hashFn)throw new Error("please define an options.hashFn");let e={bits:t.bits||8,hash:eRe(t.hashFn)};return new yG(e)}gG.exports={createHAMT:tRe,Bucket:yG}});var vu=v((q0t,DG)=>{l();"use strict";function kG(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function lRe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return kG(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),kG(new n,r)}}DG.exports=lRe});var tW=v(Wb=>{l();var{Buffer:yx}=Yt(),vp=Pn(),ORe="0".charCodeAt(0),kRe=yx.from("ustar\0","binary"),DRe=yx.from("ustar ","binary"),BRe=yx.from(" \0","binary"),Gb=257,JG=263,NRe=function(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)},MRe=function(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null},eW=function(t,e,r,i){for(;r<i;r++)if(t.get(r)===e)return r;return i},LRe=function(t){let e=8*32;for(let r=0;r<148;r++)e+=t.get(r);for(let r=156;r<512;r++)e+=t.get(r);return e};function qRe(t){let e;if(t.get(0)===128)e=!0;else if(t.get(0)===255)e=!1;else return null;let r=!1,i=[];for(let o=t.length-1;o>0;o--){let a=t.get(o);e?i.push(a):r&&a===0?i.push(0):r?(r=!1,i.push(256-a)):i.push(255-a)}let n=0,s=i.length;for(let o=0;o<s;o++)n+=i[o]*Math.pow(256,o);return e?n:-1*n}var qf=function(t,e,r){if(t=t.shallowSlice(e,e+r),e=0,t.get(e)&128)return qRe(t);{for(;e<t.length&&t.get(e)===32;)e++;let i=NRe(eW(t,32,e,t.length),t.length,t.length);for(;e<i&&t.get(e)===0;)e++;return i===e?0:parseInt(t.shallowSlice(e,i).toString(),8)}},wp=function(t,e,r,i){return t.shallowSlice(e,eW(t,0,e,e+r)).toString(i)};Wb.decodeLongPath=function(t,e){return t=vp.isBufferList(t)?t:new vp(t),wp(t,0,t.length,e)};Wb.decodePax=function(t){t=vp.isBufferList(t)?t:new vp(t);let e={};for(;t.length;){let r=0;for(;r<t.length&&t.get(r)!==32;)r++;let i=parseInt(t.shallowSlice(0,r).toString(),10);if(!i)return e;let n=t.shallowSlice(r+1,i-1).toString(),s=n.indexOf("=");if(s===-1)return e;e[n.slice(0,s)]=n.slice(s+1),t=t.shallowSlice(i)}return e};Wb.decode=function(t,e){t=vp.isBufferList(t)?t:new vp(t);let r=t.get(156)===0?0:t.get(156)-ORe,i=wp(t,0,100,e),n=qf(t,100,8),s=qf(t,108,8),o=qf(t,116,8),a=qf(t,124,12),c=qf(t,136,12),u=MRe(r),f=t.get(157)===0?null:wp(t,157,100,e),d=wp(t,265,32),h=wp(t,297,32),p=qf(t,329,8),y=qf(t,337,8),m=LRe(t);if(m===8*32)return null;if(m!==qf(t,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(kRe.compare(t.slice(Gb,Gb+6))===0)t.get(345)&&(i=wp(t,345,155,e)+"/"+i);else if(!(DRe.compare(t.slice(Gb,Gb+6))===0&&BRe.compare(t.slice(JG,JG+2))===0))throw new Error("Invalid tar header: unknown format.");return r===0&&i&&i[i.length-1]==="/"&&(r=5),{name:i,mode:n,uid:s,gid:o,size:a,mtime:new Date(1e3*c),type:u,linkname:f,uname:d,gname:h,devmajor:p,devminor:y}}});var Yb=v((Npt,rW)=>{l();var gx=Pn();rW.exports=t=>{let e=async function*(){let r=yield,i=new gx;for await(let n of t){if(!r){r=yield i.append(n),i=new gx;continue}for(i.append(n);i.length>=r;){let s=i.shallowSlice(0,r);if(i.consume(r),r=yield s,!r){i.length&&(r=yield i,i=new gx);break}}}if(r)throw Object.assign(new Error(`stream ended before ${r} bytes became available`),{code:"ERR_UNDER_READ",buffer:i})}();return e.next(),e}});var nW=v((Mpt,iW)=>{l();var mx=Pn(),jRe=Yb();iW.exports=function(e){let r=jRe(e),i,n={[Symbol.asyncIterator]:()=>n,async next(s){if(i){let o;if(s==null||i.length===s)o=i,i=null;else if(i.length>s)o=i.shallowSlice(0,s),i=i.shallowSlice(s);else if(i.length<s){let{value:a,done:c}=await r.next(s-i.length);if(c)throw Object.assign(new Error(`stream ended before ${s-i.length} bytes became available`),{code:"ERR_UNDER_READ"});o=new mx([i,a]),i=null}return{value:o}}return r.next(s)},async nextLte(s){let{done:o,value:a}=await n.next();return o?{done:o}:a.length<=s?{value:a}:(a=mx.isBufferList(a)?a:new mx(a),i?i.append(a.shallowSlice(s)):i=a.shallowSlice(s),{value:a.shallowSlice(0,s)})},return(){return r.return()}};return n}});var oW=v((Lpt,sW)=>{l();var URe=gu(),vg=tW(),FRe=nW();function KRe(t){return t&=511,t&&512-t}async function wg(t,e){let r=KRe(e);r&&await t.next(r)}sW.exports=t=>(t=t||{},t.highWaterMark=t.highWaterMark||1024*16,e=>async function*(){let r=FRe(e),i,n,s,o;try{for(;;){let a;try{let{done:p,value:y}=await r.next(512);if(p)return;a=y}catch(p){if(p.code==="ERR_UNDER_READ")return;throw p}let c=vg.decode(a,t.filenameEncoding);if(!c)continue;if(c.type==="gnu-long-path"){let{done:p,value:y}=await r.next(c.size);if(p)return;i=vg.decodeLongPath(y,t.filenameEncoding),await wg(r,c.size);continue}if(c.type==="gnu-long-link-path"){let{done:p,value:y}=await r.next(c.size);if(p)return;n=vg.decodeLongPath(y,t.filenameEncoding),await wg(r,c.size);continue}if(c.type==="pax-global-header"){let{done:p,value:y}=await r.next(c.size);if(p)return;s=vg.decodePax(y,t.filenameEncoding),await wg(r,c.size);continue}if(c.type==="pax-header"){let{done:p,value:y}=await r.next(c.size);if(p)return;o=vg.decodePax(y,t.filenameEncoding),s&&(o={...s,...o}),await wg(r,c.size);continue}if(i&&(c.name=i,i=null),n&&(c.linkname=n,n=null),o&&(o.path&&(c.name=o.path),o.linkpath&&(c.linkname=o.linkpath),o.size&&(c.size=parseInt(o.size,10)),c.pax=o,o=null),!c.size||c.type==="directory"){yield{header:c,body:async function*(){}()};continue}let u=c.size,f=URe(),d=await r.nextLte(Math.min(u,t.highWaterMark));u-=d.value.length,u||f.resolve();let h=async function*(){try{for(yield d.value;u;){let{done:p,value:y}=await r.nextLte(u);if(p){u=0;return}u-=y.length,yield y}}finally{f.resolve()}}();if(yield{header:c,body:h},await f.promise,u)for await(let p of h);await wg(r,c.size)}}finally{await r.return()}}())});var cW=v((qpt,aW)=>{l();"use strict";aW.exports={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:8,RTLD_LOCAL:4,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGINFO:29,SIGSYS:12,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,UV_FS_O_FILEMAP:0,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_DSYNC:4194304,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488335,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}});var fW=v((jpt,uW)=>{l();var VRe=Pn(),bx={string:()=>"",buffer:()=>VRe()};uW.exports=async(t,e)=>{if(e=e||{},e.type&&!bx[e.type])throw new Error(`invalid type "${e.type}"`);let r,i;for await(let n of t)r||(i=e.type||(typeof n=="string"?"string":"buffer"),r=bx[i]()),i==="string"?r+=n:r.append(n);return r||bx[e.type||"buffer"]()}});var lW=v(wx=>{l();var{Buffer:dc}=Yt(),zRe=dc.alloc,HRe="0000000000000000000",$Re="7777777777777777777",GRe="0".charCodeAt(0),WRe=dc.from("ustar\0","binary"),YRe=dc.from("00","binary"),XRe=parseInt("7777",8),QRe=257,ZRe=263,JRe=function(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0},ePe=function(t){let e=8*32;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e},jf=function(t,e){return t=t.toString(8),t.length>e?$Re.slice(0,e)+" ":HRe.slice(0,e-t.length)+t+" "},vx=function(t){let e=dc.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t};wx.encodePax=function(t){let e="";t.name&&(e+=vx(" path="+t.name+`
`)),t.linkname&&(e+=vx(" linkpath="+t.linkname+`
`));let r=t.pax;if(r)for(let i in r)e+=vx(" "+i+"="+r[i]+`
`);return dc.from(e)};wx.encode=function(t){let e=zRe(512),r=t.name,i="";if(t.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),dc.byteLength(r)!==r.length)return null;for(;dc.byteLength(r)>100;){let n=r.indexOf("/");if(n===-1)return null;i+=i?"/"+r.slice(0,n):r.slice(0,n),r=r.slice(n+1)}return dc.byteLength(r)>100||dc.byteLength(i)>155||t.linkname&&dc.byteLength(t.linkname)>100?null:(e.write(r),e.write(jf(t.mode&XRe,6),100),e.write(jf(t.uid,6),108),e.write(jf(t.gid,6),116),e.write(jf(t.size,11),124),e.write(jf(t.mtime.getTime()/1e3|0,11),136),e[156]=GRe+JRe(t.type),t.linkname&&e.write(t.linkname,157),WRe.copy(e,QRe),YRe.copy(e,ZRe),t.uname&&e.write(t.uname,265),t.gname&&e.write(t.gname,297),e.write(jf(t.devmajor||0,6),329),e.write(jf(t.devminor||0,6),337),i&&e.write(i,345),e.write(jf(ePe(e),6),148),e)}});var pW=v((Fpt,hW)=>{l();var{Buffer:_x}=Yt(),_d=Pn(),{S_IFMT:tPe,S_IFBLK:rPe,S_IFCHR:iPe,S_IFDIR:nPe,S_IFIFO:sPe,S_IFLNK:oPe}=cW(),aPe=fW(),Xb=lW(),cPe=parseInt("755",8),uPe=parseInt("644",8),dW=_x.alloc(1024);function fPe(t){switch(t&tPe){case rPe:return"block-device";case iPe:return"character-device";case nPe:return"directory";case sPe:return"fifo";case oPe:return"symlink"}return"file"}function Ex(t){if(t&=511,t)return new _d(dW.slice(0,512-t))}function Sx(t){if(!t.pax){let e=Xb.encode(t);if(e)return e}return lPe(t)}function lPe(t){let e=Xb.encodePax({name:t.name,linkname:t.linkname,pax:t.pax}),r={name:"PaxHeader",mode:t.mode,uid:t.uid,gid:t.gid,size:e.length,mtime:t.mtime,type:"pax-header",linkname:t.linkname&&"PaxHeader",uname:t.uname,gname:t.gname,devmajor:t.devmajor,devminor:t.devminor};return new _d([Xb.encode(r),e,Ex(e.length),Xb.encode({...r,size:t.size,type:t.type})])}hW.exports=()=>async function*(t){for await(let{header:e,body:r}of t){if((!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=fPe(e.mode)),e.mode||(e.mode=e.type==="directory"?cPe:uPe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=_x.from(r)),_x.isBuffer(r)||_d.isBufferList(r)){e.size=r.length,yield new _d([Sx(e),r,Ex(e.size)]);continue}if(e.type==="symlink"&&!e.linkname){e.linkname=(await aPe(r)).toString(),yield Sx(e);continue}if(yield Sx(e),e.type!=="file"&&e.type!=="contiguous-file")continue;let i=0;for await(let s of r)i+=s.length,yield _d.isBufferList(s)?s:new _d(s);if(i!==e.size)throw new Error("size mismatch");let n=Ex(e.size);n&&(yield n)}yield new _d(dW)}});var yW=v(xx=>{l();xx.extract=oW();xx.pack=pW()});var wu=v(Vn=>{l();"use strict";var dPe=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function hPe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}Vn.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(!!r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var i in r)hPe(r,i)&&(t[i]=r[i])}}return t};Vn.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var pPe={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray){t.set(e.subarray(r,r+i),n);return}for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){var e,r,i,n,s,o;for(i=0,e=0,r=t.length;e<r;e++)i+=t[e].length;for(o=new Uint8Array(i),n=0,e=0,r=t.length;e<r;e++)s=t[e],o.set(s,n),n+=s.length;return o}},yPe={arraySet:function(t,e,r,i,n){for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};Vn.setTyped=function(t){t?(Vn.Buf8=Uint8Array,Vn.Buf16=Uint16Array,Vn.Buf32=Int32Array,Vn.assign(Vn,pPe)):(Vn.Buf8=Array,Vn.Buf16=Array,Vn.Buf32=Array,Vn.assign(Vn,yPe))};Vn.setTyped(dPe)});var qW=v(Sp=>{l();"use strict";var gPe=wu(),mPe=4,gW=0,mW=1,bPe=2;function _p(t){for(var e=t.length;--e>=0;)t[e]=0}var vPe=0,bW=1,wPe=2,_Pe=3,EPe=258,Ax=29,_g=256,Eg=_g+1+Ax,Ep=30,Ix=19,vW=2*Eg+1,Ed=15,Tx=16,SPe=7,Rx=256,wW=16,_W=17,EW=18,Px=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Qb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],xPe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],SW=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],APe=512,_u=new Array((Eg+2)*2);_p(_u);var Sg=new Array(Ep*2);_p(Sg);var xg=new Array(APe);_p(xg);var Ag=new Array(EPe-_Pe+1);_p(Ag);var Cx=new Array(Ax);_p(Cx);var Zb=new Array(Ep);_p(Zb);function Ox(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}var xW,AW,IW;function kx(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function TW(t){return t<256?xg[t]:xg[256+(t>>>7)]}function Ig(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function cs(t,e,r){t.bi_valid>Tx-r?(t.bi_buf|=e<<t.bi_valid&65535,Ig(t,t.bi_buf),t.bi_buf=e>>Tx-t.bi_valid,t.bi_valid+=r-Tx):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function hc(t,e,r){cs(t,r[e*2],r[e*2+1])}function RW(t,e){var r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1}function IPe(t){t.bi_valid===16?(Ig(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function TPe(t,e){var r=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,u,f,d,h,p,y,m=0;for(h=0;h<=Ed;h++)t.bl_count[h]=0;for(r[t.heap[t.heap_max]*2+1]=0,u=t.heap_max+1;u<vW;u++)f=t.heap[u],h=r[r[f*2+1]*2+1]+1,h>c&&(h=c,m++),r[f*2+1]=h,!(f>i)&&(t.bl_count[h]++,p=0,f>=a&&(p=o[f-a]),y=r[f*2],t.opt_len+=y*(h+p),s&&(t.static_len+=y*(n[f*2+1]+p)));if(m!==0){do{for(h=c-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[c]--,m-=2}while(m>0);for(h=c;h!==0;h--)for(f=t.bl_count[h];f!==0;)d=t.heap[--u],!(d>i)&&(r[d*2+1]!==h&&(t.opt_len+=(h-r[d*2+1])*r[d*2],r[d*2+1]=h),f--)}}function PW(t,e,r){var i=new Array(Ed+1),n=0,s,o;for(s=1;s<=Ed;s++)i[s]=n=n+r[s-1]<<1;for(o=0;o<=e;o++){var a=t[o*2+1];a!==0&&(t[o*2]=RW(i[a]++,a))}}function RPe(){var t,e,r,i,n,s=new Array(Ed+1);for(r=0,i=0;i<Ax-1;i++)for(Cx[i]=r,t=0;t<1<<Px[i];t++)Ag[r++]=i;for(Ag[r-1]=i,n=0,i=0;i<16;i++)for(Zb[i]=n,t=0;t<1<<Qb[i];t++)xg[n++]=i;for(n>>=7;i<Ep;i++)for(Zb[i]=n<<7,t=0;t<1<<Qb[i]-7;t++)xg[256+n++]=i;for(e=0;e<=Ed;e++)s[e]=0;for(t=0;t<=143;)_u[t*2+1]=8,t++,s[8]++;for(;t<=255;)_u[t*2+1]=9,t++,s[9]++;for(;t<=279;)_u[t*2+1]=7,t++,s[7]++;for(;t<=287;)_u[t*2+1]=8,t++,s[8]++;for(PW(_u,Eg+1,s),t=0;t<Ep;t++)Sg[t*2+1]=5,Sg[t*2]=RW(t,5);xW=new Ox(_u,Px,_g+1,Eg,Ed),AW=new Ox(Sg,Qb,0,Ep,Ed),IW=new Ox(new Array(0),xPe,0,Ix,SPe)}function CW(t){var e;for(e=0;e<Eg;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Ep;e++)t.dyn_dtree[e*2]=0;for(e=0;e<Ix;e++)t.bl_tree[e*2]=0;t.dyn_ltree[Rx*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function OW(t){t.bi_valid>8?Ig(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function PPe(t,e,r,i){OW(t),i&&(Ig(t,r),Ig(t,~r)),gPe.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function kW(t,e,r,i){var n=e*2,s=r*2;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]}function Dx(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&kW(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!kW(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function DW(t,e,r){var i,n,s=0,o,a;if(t.last_lit!==0)do i=t.pending_buf[t.d_buf+s*2]<<8|t.pending_buf[t.d_buf+s*2+1],n=t.pending_buf[t.l_buf+s],s++,i===0?hc(t,n,e):(o=Ag[n],hc(t,o+_g+1,e),a=Px[o],a!==0&&(n-=Cx[o],cs(t,n,a)),i--,o=TW(i),hc(t,o,r),a=Qb[o],a!==0&&(i-=Zb[o],cs(t,i,a)));while(s<t.last_lit);hc(t,Rx,e)}function Bx(t,e){var r=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems,o,a,c=-1,u;for(t.heap_len=0,t.heap_max=vW,o=0;o<s;o++)r[o*2]!==0?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):r[o*2+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,r[u*2]=1,t.depth[u]=0,t.opt_len--,n&&(t.static_len-=i[u*2+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)Dx(t,r,o);u=s;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Dx(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[u*2]=r[o*2]+r[a*2],t.depth[u]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[o*2+1]=r[a*2+1]=u,t.heap[1]=u++,Dx(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],TPe(t,e),PW(r,c,t.bl_count)}function BW(t,e,r){var i,n=-1,s,o=e[0*2+1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),e[(r+1)*2+1]=65535,i=0;i<=r;i++)s=o,o=e[(i+1)*2+1],!(++a<c&&s===o)&&(a<u?t.bl_tree[s*2]+=a:s!==0?(s!==n&&t.bl_tree[s*2]++,t.bl_tree[wW*2]++):a<=10?t.bl_tree[_W*2]++:t.bl_tree[EW*2]++,a=0,n=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4))}function NW(t,e,r){var i,n=-1,s,o=e[0*2+1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),i=0;i<=r;i++)if(s=o,o=e[(i+1)*2+1],!(++a<c&&s===o)){if(a<u)do hc(t,s,t.bl_tree);while(--a!=0);else s!==0?(s!==n&&(hc(t,s,t.bl_tree),a--),hc(t,wW,t.bl_tree),cs(t,a-3,2)):a<=10?(hc(t,_W,t.bl_tree),cs(t,a-3,3)):(hc(t,EW,t.bl_tree),cs(t,a-11,7));a=0,n=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4)}}function CPe(t){var e;for(BW(t,t.dyn_ltree,t.l_desc.max_code),BW(t,t.dyn_dtree,t.d_desc.max_code),Bx(t,t.bl_desc),e=Ix-1;e>=3&&t.bl_tree[SW[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function OPe(t,e,r,i){var n;for(cs(t,e-257,5),cs(t,r-1,5),cs(t,i-4,4),n=0;n<i;n++)cs(t,t.bl_tree[SW[n]*2+1],3);NW(t,t.dyn_ltree,e-1),NW(t,t.dyn_dtree,r-1)}function kPe(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return gW;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return mW;for(r=32;r<_g;r++)if(t.dyn_ltree[r*2]!==0)return mW;return gW}var MW=!1;function DPe(t){MW||(RPe(),MW=!0),t.l_desc=new kx(t.dyn_ltree,xW),t.d_desc=new kx(t.dyn_dtree,AW),t.bl_desc=new kx(t.bl_tree,IW),t.bi_buf=0,t.bi_valid=0,CW(t)}function LW(t,e,r,i){cs(t,(vPe<<1)+(i?1:0),3),PPe(t,e,r,!0)}function BPe(t){cs(t,bW<<1,3),hc(t,Rx,_u),IPe(t)}function NPe(t,e,r,i){var n,s,o=0;t.level>0?(t.strm.data_type===bPe&&(t.strm.data_type=kPe(t)),Bx(t,t.l_desc),Bx(t,t.d_desc),o=CPe(t),n=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=n&&(n=s)):n=s=r+5,r+4<=n&&e!==-1?LW(t,e,r,i):t.strategy===mPe||s===n?(cs(t,(bW<<1)+(i?1:0),3),DW(t,_u,Sg)):(cs(t,(wPe<<1)+(i?1:0),3),OPe(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),DW(t,t.dyn_ltree,t.dyn_dtree)),CW(t),i&&OW(t)}function MPe(t,e,r){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(Ag[r]+_g+1)*2]++,t.dyn_dtree[TW(e)*2]++),t.last_lit===t.lit_bufsize-1}Sp._tr_init=DPe;Sp._tr_stored_block=LW;Sp._tr_flush_block=NPe;Sp._tr_tally=MPe;Sp._tr_align=BPe});var Nx=v((Hpt,jW)=>{l();"use strict";function LPe(t,e,r,i){for(var n=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do n=n+e[i++]|0,s=s+n|0;while(--o);n%=65521,s%=65521}return n|s<<16|0}jW.exports=LPe});var Mx=v(($pt,UW)=>{l();"use strict";function qPe(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var jPe=qPe();function UPe(t,e,r,i){var n=jPe,s=i+r;t^=-1;for(var o=i;o<s;o++)t=t>>>8^n[(t^e[o])&255];return t^-1}UW.exports=UPe});var Jb=v((Gpt,FW)=>{l();"use strict";FW.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var XW=v(gc=>{l();"use strict";var zn=wu(),uo=qW(),KW=Nx(),Uf=Mx(),FPe=Jb(),Sd=0,KPe=1,VPe=3,Ff=4,VW=5,pc=0,zW=1,fo=-2,zPe=-3,Lx=-5,HPe=-1,$Pe=1,e5=2,GPe=3,WPe=4,YPe=0,XPe=2,t5=8,QPe=9,ZPe=15,JPe=8,eCe=29,tCe=256,qx=tCe+1+eCe,rCe=30,iCe=19,nCe=2*qx+1,sCe=15,Nt=3,Kf=258,ua=Kf+Nt+1,oCe=32,r5=42,jx=69,i5=73,n5=91,s5=103,xd=113,Tg=666,Bi=1,Rg=2,Ad=3,xp=4,aCe=3;function Vf(t,e){return t.msg=FPe[e],e}function HW(t){return(t<<1)-(t>4?9:0)}function zf(t){for(var e=t.length;--e>=0;)t[e]=0}function Hf(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(zn.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))}function ln(t,e){uo._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Hf(t.strm)}function Gt(t,e){t.pending_buf[t.pending++]=e}function Pg(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function cCe(t,e,r,i){var n=t.avail_in;return n>i&&(n=i),n===0?0:(t.avail_in-=n,zn.arraySet(e,t.input,t.next_in,n,r),t.state.wrap===1?t.adler=KW(t.adler,e,n,r):t.state.wrap===2&&(t.adler=Uf(t.adler,e,n,r)),t.next_in+=n,t.total_in+=n,n)}function $W(t,e){var r=t.max_chain_length,i=t.strstart,n,s,o=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-ua?t.strstart-(t.w_size-ua):0,u=t.window,f=t.w_mask,d=t.prev,h=t.strstart+Kf,p=u[i+o-1],y=u[i+o];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(n=e,!(u[n+o]!==y||u[n+o-1]!==p||u[n]!==u[i]||u[++n]!==u[i+1])){i+=2,n++;do;while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<h);if(s=Kf-(h-i),i=h-Kf,s>o){if(t.match_start=e,o=s,s>=a)break;p=u[i+o-1],y=u[i+o]}}while((e=d[e&f])>c&&--r!=0);return o<=t.lookahead?o:t.lookahead}function Id(t){var e=t.w_size,r,i,n,s,o;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-ua)){zn.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,i=t.hash_size,r=i;do n=t.head[--r],t.head[r]=n>=e?n-e:0;while(--i);i=e,r=i;do n=t.prev[--r],t.prev[r]=n>=e?n-e:0;while(--i);s+=e}if(t.strm.avail_in===0)break;if(i=cCe(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=i,t.lookahead+t.insert>=Nt)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+Nt-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<Nt)););}while(t.lookahead<ua&&t.strm.avail_in!==0)}function uCe(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Id(t),t.lookahead===0&&e===Sd)return Bi;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((t.strstart===0||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,ln(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-ua&&(ln(t,!1),t.strm.avail_out===0))return Bi}return t.insert=0,e===Ff?(ln(t,!0),t.strm.avail_out===0?Ad:xp):(t.strstart>t.block_start&&(ln(t,!1),t.strm.avail_out===0),Bi)}function Ux(t,e){for(var r,i;;){if(t.lookahead<ua){if(Id(t),t.lookahead<ua&&e===Sd)return Bi;if(t.lookahead===0)break}if(r=0,t.lookahead>=Nt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Nt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-ua&&(t.match_length=$W(t,r)),t.match_length>=Nt)if(i=uo._tr_tally(t,t.strstart-t.match_start,t.match_length-Nt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Nt){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Nt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!=0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=uo._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ln(t,!1),t.strm.avail_out===0))return Bi}return t.insert=t.strstart<Nt-1?t.strstart:Nt-1,e===Ff?(ln(t,!0),t.strm.avail_out===0?Ad:xp):t.last_lit&&(ln(t,!1),t.strm.avail_out===0)?Bi:Rg}function Ap(t,e){for(var r,i,n;;){if(t.lookahead<ua){if(Id(t),t.lookahead<ua&&e===Sd)return Bi;if(t.lookahead===0)break}if(r=0,t.lookahead>=Nt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Nt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Nt-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-ua&&(t.match_length=$W(t,r),t.match_length<=5&&(t.strategy===$Pe||t.match_length===Nt&&t.strstart-t.match_start>4096)&&(t.match_length=Nt-1)),t.prev_length>=Nt&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-Nt,i=uo._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-Nt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Nt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!=0);if(t.match_available=0,t.match_length=Nt-1,t.strstart++,i&&(ln(t,!1),t.strm.avail_out===0))return Bi}else if(t.match_available){if(i=uo._tr_tally(t,0,t.window[t.strstart-1]),i&&ln(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Bi}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=uo._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Nt-1?t.strstart:Nt-1,e===Ff?(ln(t,!0),t.strm.avail_out===0?Ad:xp):t.last_lit&&(ln(t,!1),t.strm.avail_out===0)?Bi:Rg}function fCe(t,e){for(var r,i,n,s,o=t.window;;){if(t.lookahead<=Kf){if(Id(t),t.lookahead<=Kf&&e===Sd)return Bi;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Nt&&t.strstart>0&&(n=t.strstart-1,i=o[n],i===o[++n]&&i===o[++n]&&i===o[++n])){s=t.strstart+Kf;do;while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<s);t.match_length=Kf-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Nt?(r=uo._tr_tally(t,1,t.match_length-Nt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=uo._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(ln(t,!1),t.strm.avail_out===0))return Bi}return t.insert=0,e===Ff?(ln(t,!0),t.strm.avail_out===0?Ad:xp):t.last_lit&&(ln(t,!1),t.strm.avail_out===0)?Bi:Rg}function lCe(t,e){for(var r;;){if(t.lookahead===0&&(Id(t),t.lookahead===0)){if(e===Sd)return Bi;break}if(t.match_length=0,r=uo._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(ln(t,!1),t.strm.avail_out===0))return Bi}return t.insert=0,e===Ff?(ln(t,!0),t.strm.avail_out===0?Ad:xp):t.last_lit&&(ln(t,!1),t.strm.avail_out===0)?Bi:Rg}function yc(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}var Ip;Ip=[new yc(0,0,0,0,uCe),new yc(4,4,8,4,Ux),new yc(4,5,16,8,Ux),new yc(4,6,32,32,Ux),new yc(4,4,16,16,Ap),new yc(8,16,32,32,Ap),new yc(8,16,128,128,Ap),new yc(8,32,128,256,Ap),new yc(32,128,258,1024,Ap),new yc(32,258,258,4096,Ap)];function dCe(t){t.window_size=2*t.w_size,zf(t.head),t.max_lazy_match=Ip[t.level].max_lazy,t.good_match=Ip[t.level].good_length,t.nice_match=Ip[t.level].nice_length,t.max_chain_length=Ip[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Nt-1,t.match_available=0,t.ins_h=0}function hCe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=t5,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new zn.Buf16(nCe*2),this.dyn_dtree=new zn.Buf16((2*rCe+1)*2),this.bl_tree=new zn.Buf16((2*iCe+1)*2),zf(this.dyn_ltree),zf(this.dyn_dtree),zf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new zn.Buf16(sCe+1),this.heap=new zn.Buf16(2*qx+1),zf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new zn.Buf16(2*qx+1),zf(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function GW(t){var e;return!t||!t.state?Vf(t,fo):(t.total_in=t.total_out=0,t.data_type=XPe,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?r5:xd,t.adler=e.wrap===2?0:1,e.last_flush=Sd,uo._tr_init(e),pc)}function WW(t){var e=GW(t);return e===pc&&dCe(t.state),e}function pCe(t,e){return!t||!t.state||t.state.wrap!==2?fo:(t.state.gzhead=e,pc)}function YW(t,e,r,i,n,s){if(!t)return fo;var o=1;if(e===HPe&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),n<1||n>QPe||r!==t5||i<8||i>15||e<0||e>9||s<0||s>WPe)return Vf(t,fo);i===8&&(i=9);var a=new hCe;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=n+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Nt-1)/Nt),a.window=new zn.Buf8(a.w_size*2),a.head=new zn.Buf16(a.hash_size),a.prev=new zn.Buf16(a.w_size),a.lit_bufsize=1<<n+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new zn.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=e,a.strategy=s,a.method=r,WW(t)}function yCe(t,e){return YW(t,e,t5,ZPe,JPe,YPe)}function gCe(t,e){var r,i,n,s;if(!t||!t.state||e>VW||e<0)return t?Vf(t,fo):fo;if(i=t.state,!t.output||!t.input&&t.avail_in!==0||i.status===Tg&&e!==Ff)return Vf(t,t.avail_out===0?Lx:fo);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===r5)if(i.wrap===2)t.adler=0,Gt(i,31),Gt(i,139),Gt(i,8),i.gzhead?(Gt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Gt(i,i.gzhead.time&255),Gt(i,i.gzhead.time>>8&255),Gt(i,i.gzhead.time>>16&255),Gt(i,i.gzhead.time>>24&255),Gt(i,i.level===9?2:i.strategy>=e5||i.level<2?4:0),Gt(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(Gt(i,i.gzhead.extra.length&255),Gt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Uf(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=jx):(Gt(i,0),Gt(i,0),Gt(i,0),Gt(i,0),Gt(i,0),Gt(i,i.level===9?2:i.strategy>=e5||i.level<2?4:0),Gt(i,aCe),i.status=xd);else{var o=t5+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=e5||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,o|=a<<6,i.strstart!==0&&(o|=oCe),o+=31-o%31,i.status=xd,Pg(i,o),i.strstart!==0&&(Pg(i,t.adler>>>16),Pg(i,t.adler&65535)),t.adler=1}if(i.status===jx)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=Uf(t.adler,i.pending_buf,i.pending-n,n)),Hf(t),n=i.pending,i.pending===i.pending_buf_size));)Gt(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=Uf(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=i5)}else i.status=i5;if(i.status===i5)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=Uf(t.adler,i.pending_buf,i.pending-n,n)),Hf(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.name.length?s=i.gzhead.name.charCodeAt(i.gzindex++)&255:s=0,Gt(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>n&&(t.adler=Uf(t.adler,i.pending_buf,i.pending-n,n)),s===0&&(i.gzindex=0,i.status=n5)}else i.status=n5;if(i.status===n5)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=Uf(t.adler,i.pending_buf,i.pending-n,n)),Hf(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}i.gzindex<i.gzhead.comment.length?s=i.gzhead.comment.charCodeAt(i.gzindex++)&255:s=0,Gt(i,s)}while(s!==0);i.gzhead.hcrc&&i.pending>n&&(t.adler=Uf(t.adler,i.pending_buf,i.pending-n,n)),s===0&&(i.status=s5)}else i.status=s5;if(i.status===s5&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Hf(t),i.pending+2<=i.pending_buf_size&&(Gt(i,t.adler&255),Gt(i,t.adler>>8&255),t.adler=0,i.status=xd)):i.status=xd),i.pending!==0){if(Hf(t),t.avail_out===0)return i.last_flush=-1,pc}else if(t.avail_in===0&&HW(e)<=HW(r)&&e!==Ff)return Vf(t,Lx);if(i.status===Tg&&t.avail_in!==0)return Vf(t,Lx);if(t.avail_in!==0||i.lookahead!==0||e!==Sd&&i.status!==Tg){var c=i.strategy===e5?lCe(i,e):i.strategy===GPe?fCe(i,e):Ip[i.level].func(i,e);if((c===Ad||c===xp)&&(i.status=Tg),c===Bi||c===Ad)return t.avail_out===0&&(i.last_flush=-1),pc;if(c===Rg&&(e===KPe?uo._tr_align(i):e!==VW&&(uo._tr_stored_block(i,0,0,!1),e===VPe&&(zf(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),Hf(t),t.avail_out===0))return i.last_flush=-1,pc}return e!==Ff?pc:i.wrap<=0?zW:(i.wrap===2?(Gt(i,t.adler&255),Gt(i,t.adler>>8&255),Gt(i,t.adler>>16&255),Gt(i,t.adler>>24&255),Gt(i,t.total_in&255),Gt(i,t.total_in>>8&255),Gt(i,t.total_in>>16&255),Gt(i,t.total_in>>24&255)):(Pg(i,t.adler>>>16),Pg(i,t.adler&65535)),Hf(t),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?pc:zW)}function mCe(t){var e;return!t||!t.state?fo:(e=t.state.status,e!==r5&&e!==jx&&e!==i5&&e!==n5&&e!==s5&&e!==xd&&e!==Tg?Vf(t,fo):(t.state=null,e===xd?Vf(t,zPe):pc))}function bCe(t,e){var r=e.length,i,n,s,o,a,c,u,f;if(!t||!t.state||(i=t.state,o=i.wrap,o===2||o===1&&i.status!==r5||i.lookahead))return fo;for(o===1&&(t.adler=KW(t.adler,e,r,0)),i.wrap=0,r>=i.w_size&&(o===0&&(zf(i.head),i.strstart=0,i.block_start=0,i.insert=0),f=new zn.Buf8(i.w_size),zn.arraySet(f,e,r-i.w_size,i.w_size,0),e=f,r=i.w_size),a=t.avail_in,c=t.next_in,u=t.input,t.avail_in=r,t.next_in=0,t.input=e,Id(i);i.lookahead>=Nt;){n=i.strstart,s=i.lookahead-(Nt-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+Nt-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++;while(--s);i.strstart=n,i.lookahead=Nt-1,Id(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Nt-1,i.match_available=0,t.next_in=c,t.input=u,t.avail_in=a,i.wrap=o,pc}gc.deflateInit=yCe;gc.deflateInit2=YW;gc.deflateReset=WW;gc.deflateResetKeep=GW;gc.deflateSetHeader=pCe;gc.deflate=gCe;gc.deflateEnd=mCe;gc.deflateSetDictionary=bCe;gc.deflateInfo="pako deflate (from Nodeca project)"});var Fx=v(Tp=>{l();"use strict";var o5=wu(),QW=!0,ZW=!0;try{String.fromCharCode.apply(null,[0])}catch(t){QW=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){ZW=!1}var Cg=new o5.Buf8(256);for(Eu=0;Eu<256;Eu++)Cg[Eu]=Eu>=252?6:Eu>=248?5:Eu>=240?4:Eu>=224?3:Eu>=192?2:1;var Eu;Cg[254]=Cg[254]=1;Tp.string2buf=function(t){var e,r,i,n,s,o=t.length,a=0;for(n=0;n<o;n++)r=t.charCodeAt(n),(r&64512)==55296&&n+1<o&&(i=t.charCodeAt(n+1),(i&64512)==56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new o5.Buf8(a),s=0,n=0;s<a;n++)r=t.charCodeAt(n),(r&64512)==55296&&n+1<o&&(i=t.charCodeAt(n+1),(i&64512)==56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};function JW(t,e){if(e<65534&&(t.subarray&&ZW||!t.subarray&&QW))return String.fromCharCode.apply(null,o5.shrinkBuf(t,e));for(var r="",i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}Tp.buf2binstring=function(t){return JW(t,t.length)};Tp.binstring2buf=function(t){for(var e=new o5.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e};Tp.buf2string=function(t,e){var r,i,n,s,o=e||t.length,a=new Array(o*2);for(i=0,r=0;r<o;){if(n=t[r++],n<128){a[i++]=n;continue}if(s=Cg[n],s>4){a[i++]=65533,r+=s-1;continue}for(n&=s===2?31:s===3?15:7;s>1&&r<o;)n=n<<6|t[r++]&63,s--;if(s>1){a[i++]=65533;continue}n<65536?a[i++]=n:(n-=65536,a[i++]=55296|n>>10&1023,a[i++]=56320|n&1023)}return JW(a,i)};Tp.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)==128;)r--;return r<0||r===0?e:r+Cg[t[r]]>e?r:e}});var Kx=v((Xpt,eY)=>{l();"use strict";function vCe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}eY.exports=vCe});var nY=v(Dg=>{l();"use strict";var Og=XW(),kg=wu(),Vx=Fx(),zx=Jb(),wCe=Kx(),tY=Object.prototype.toString,_Ce=0,Hx=4,Rp=0,rY=1,iY=2,ECe=-1,SCe=0,xCe=8;function Td(t){if(!(this instanceof Td))return new Td(t);this.options=kg.assign({level:ECe,method:xCe,chunkSize:16384,windowBits:15,memLevel:8,strategy:SCe,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wCe,this.strm.avail_out=0;var r=Og.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==Rp)throw new Error(zx[r]);if(e.header&&Og.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(typeof e.dictionary=="string"?i=Vx.string2buf(e.dictionary):tY.call(e.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(e.dictionary):i=e.dictionary,r=Og.deflateSetDictionary(this.strm,i),r!==Rp)throw new Error(zx[r]);this._dict_set=!0}}Td.prototype.push=function(t,e){var r=this.strm,i=this.options.chunkSize,n,s;if(this.ended)return!1;s=e===~~e?e:e===!0?Hx:_Ce,typeof t=="string"?r.input=Vx.string2buf(t):tY.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new kg.Buf8(i),r.next_out=0,r.avail_out=i),n=Og.deflate(r,s),n!==rY&&n!==Rp)return this.onEnd(n),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(s===Hx||s===iY))&&(this.options.to==="string"?this.onData(Vx.buf2binstring(kg.shrinkBuf(r.output,r.next_out))):this.onData(kg.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&n!==rY);return s===Hx?(n=Og.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Rp):(s===iY&&(this.onEnd(Rp),r.avail_out=0),!0)};Td.prototype.onData=function(t){this.chunks.push(t)};Td.prototype.onEnd=function(t){t===Rp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=kg.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function $x(t,e){var r=new Td(e);if(r.push(t,!0),r.err)throw r.msg||zx[r.err];return r.result}function ACe(t,e){return e=e||{},e.raw=!0,$x(t,e)}function ICe(t,e){return e=e||{},e.gzip=!0,$x(t,e)}Dg.Deflate=Td;Dg.deflate=$x;Dg.deflateRaw=ACe;Dg.gzip=ICe});var oY=v((Zpt,sY)=>{l();"use strict";var a5=30,TCe=12;sY.exports=function(e,r){var i,n,s,o,a,c,u,f,d,h,p,y,m,w,b,S,I,j,B,C,z,W,X,P,g;i=e.state,n=e.next_in,P=e.input,s=n+(e.avail_in-5),o=e.next_out,g=e.output,a=o-(r-e.avail_out),c=o+(e.avail_out-257),u=i.dmax,f=i.wsize,d=i.whave,h=i.wnext,p=i.window,y=i.hold,m=i.bits,w=i.lencode,b=i.distcode,S=(1<<i.lenbits)-1,I=(1<<i.distbits)-1;e:do{m<15&&(y+=P[n++]<<m,m+=8,y+=P[n++]<<m,m+=8),j=w[y&S];t:for(;;){if(B=j>>>24,y>>>=B,m-=B,B=j>>>16&255,B===0)g[o++]=j&65535;else if(B&16){C=j&65535,B&=15,B&&(m<B&&(y+=P[n++]<<m,m+=8),C+=y&(1<<B)-1,y>>>=B,m-=B),m<15&&(y+=P[n++]<<m,m+=8,y+=P[n++]<<m,m+=8),j=b[y&I];r:for(;;){if(B=j>>>24,y>>>=B,m-=B,B=j>>>16&255,B&16){if(z=j&65535,B&=15,m<B&&(y+=P[n++]<<m,m+=8,m<B&&(y+=P[n++]<<m,m+=8)),z+=y&(1<<B)-1,z>u){e.msg="invalid distance too far back",i.mode=a5;break e}if(y>>>=B,m-=B,B=o-a,z>B){if(B=z-B,B>d&&i.sane){e.msg="invalid distance too far back",i.mode=a5;break e}if(W=0,X=p,h===0){if(W+=f-B,B<C){C-=B;do g[o++]=p[W++];while(--B);W=o-z,X=g}}else if(h<B){if(W+=f+h-B,B-=h,B<C){C-=B;do g[o++]=p[W++];while(--B);if(W=0,h<C){B=h,C-=B;do g[o++]=p[W++];while(--B);W=o-z,X=g}}}else if(W+=h-B,B<C){C-=B;do g[o++]=p[W++];while(--B);W=o-z,X=g}for(;C>2;)g[o++]=X[W++],g[o++]=X[W++],g[o++]=X[W++],C-=3;C&&(g[o++]=X[W++],C>1&&(g[o++]=X[W++]))}else{W=o-z;do g[o++]=g[W++],g[o++]=g[W++],g[o++]=g[W++],C-=3;while(C>2);C&&(g[o++]=g[W++],C>1&&(g[o++]=g[W++]))}}else if((B&64)==0){j=b[(j&65535)+(y&(1<<B)-1)];continue r}else{e.msg="invalid distance code",i.mode=a5;break e}break}}else if((B&64)==0){j=w[(j&65535)+(y&(1<<B)-1)];continue t}else if(B&32){i.mode=TCe;break e}else{e.msg="invalid literal/length code",i.mode=a5;break e}break}}while(n<s&&o<c);C=m>>3,n-=C,m-=C<<3,y&=(1<<m)-1,e.next_in=n,e.next_out=o,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=o<c?257+(c-o):257-(o-c),i.hold=y,i.bits=m}});var hY=v((Jpt,dY)=>{l();"use strict";var aY=wu(),Pp=15,cY=852,uY=592,fY=0,Gx=1,lY=2,RCe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],PCe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],CCe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],OCe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];dY.exports=function(e,r,i,n,s,o,a,c){var u=c.bits,f=0,d=0,h=0,p=0,y=0,m=0,w=0,b=0,S=0,I=0,j,B,C,z,W,X=null,P=0,g,_=new aY.Buf16(Pp+1),x=new aY.Buf16(Pp+1),O=null,L=0,Y,V,q;for(f=0;f<=Pp;f++)_[f]=0;for(d=0;d<n;d++)_[r[i+d]]++;for(y=u,p=Pp;p>=1&&_[p]===0;p--);if(y>p&&(y=p),p===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,c.bits=1,0;for(h=1;h<p&&_[h]===0;h++);for(y<h&&(y=h),b=1,f=1;f<=Pp;f++)if(b<<=1,b-=_[f],b<0)return-1;if(b>0&&(e===fY||p!==1))return-1;for(x[1]=0,f=1;f<Pp;f++)x[f+1]=x[f]+_[f];for(d=0;d<n;d++)r[i+d]!==0&&(a[x[r[i+d]]++]=d);if(e===fY?(X=O=a,g=19):e===Gx?(X=RCe,P-=257,O=PCe,L-=257,g=256):(X=CCe,O=OCe,g=-1),I=0,d=0,f=h,W=o,m=y,w=0,C=-1,S=1<<y,z=S-1,e===Gx&&S>cY||e===lY&&S>uY)return 1;for(;;){Y=f-w,a[d]<g?(V=0,q=a[d]):a[d]>g?(V=O[L+a[d]],q=X[P+a[d]]):(V=32+64,q=0),j=1<<f-w,B=1<<m,h=B;do B-=j,s[W+(I>>w)+B]=Y<<24|V<<16|q|0;while(B!==0);for(j=1<<f-1;I&j;)j>>=1;if(j!==0?(I&=j-1,I+=j):I=0,d++,--_[f]==0){if(f===p)break;f=r[i+a[d]]}if(f>y&&(I&z)!==C){for(w===0&&(w=y),W+=h,m=f-w,b=1<<m;m+w<p&&(b-=_[m+w],!(b<=0));)m++,b<<=1;if(S+=1<<m,e===Gx&&S>cY||e===lY&&S>uY)return 1;C=I&z,s[C]=y<<24|m<<16|W-o|0}}return I!==0&&(s[W+I]=f-w<<24|64<<16|0),c.bits=y,0}});var WY=v(fa=>{l();"use strict";var Rs=wu(),Wx=Nx(),mc=Mx(),kCe=oY(),Bg=hY(),DCe=0,pY=1,yY=2,gY=4,BCe=5,c5=6,Rd=0,NCe=1,MCe=2,lo=-2,mY=-3,Yx=-4,LCe=-5,bY=8,vY=1,wY=2,_Y=3,EY=4,SY=5,xY=6,AY=7,IY=8,TY=9,RY=10,u5=11,Su=12,Xx=13,PY=14,Qx=15,CY=16,OY=17,kY=18,DY=19,f5=20,l5=21,BY=22,NY=23,MY=24,LY=25,qY=26,Zx=27,jY=28,UY=29,Pr=30,Jx=31,qCe=32,jCe=852,UCe=592,FCe=15,KCe=FCe;function FY(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function VCe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Rs.Buf16(320),this.work=new Rs.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function KY(t){var e;return!t||!t.state?lo:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=vY,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Rs.Buf32(jCe),e.distcode=e.distdyn=new Rs.Buf32(UCe),e.sane=1,e.back=-1,Rd)}function VY(t){var e;return!t||!t.state?lo:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,KY(t))}function zY(t,e){var r,i;return!t||!t.state||(i=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?lo:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,VY(t))}function HY(t,e){var r,i;return t?(i=new VCe,t.state=i,i.window=null,r=zY(t,e),r!==Rd&&(t.state=null),r):lo}function zCe(t){return HY(t,KCe)}var $Y=!0,eA,tA;function HCe(t){if($Y){var e;for(eA=new Rs.Buf32(512),tA=new Rs.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Bg(pY,t.lens,0,288,eA,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Bg(yY,t.lens,0,32,tA,0,t.work,{bits:5}),$Y=!1}t.lencode=eA,t.lenbits=9,t.distcode=tA,t.distbits=5}function GY(t,e,r,i){var n,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Rs.Buf8(s.wsize)),i>=s.wsize?(Rs.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),Rs.arraySet(s.window,e,r-i,n,s.wnext),i-=n,i?(Rs.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function $Ce(t,e){var r,i,n,s,o,a,c,u,f,d,h,p,y,m,w=0,b,S,I,j,B,C,z,W,X=new Rs.Buf8(4),P,g,_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return lo;r=t.state,r.mode===Su&&(r.mode=Xx),o=t.next_out,n=t.output,c=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,u=r.hold,f=r.bits,d=a,h=c,W=Rd;e:for(;;)switch(r.mode){case vY:if(r.wrap===0){r.mode=Xx;break}for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(r.wrap&2&&u===35615){r.check=0,X[0]=u&255,X[1]=u>>>8&255,r.check=mc(r.check,X,2,0),u=0,f=0,r.mode=wY;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Pr;break}if((u&15)!==bY){t.msg="unknown compression method",r.mode=Pr;break}if(u>>>=4,f-=4,z=(u&15)+8,r.wbits===0)r.wbits=z;else if(z>r.wbits){t.msg="invalid window size",r.mode=Pr;break}r.dmax=1<<z,t.adler=r.check=1,r.mode=u&512?RY:Su,u=0,f=0;break;case wY:for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(r.flags=u,(r.flags&255)!==bY){t.msg="unknown compression method",r.mode=Pr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Pr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&(X[0]=u&255,X[1]=u>>>8&255,r.check=mc(r.check,X,2,0)),u=0,f=0,r.mode=_Y;case _Y:for(;f<32;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.head&&(r.head.time=u),r.flags&512&&(X[0]=u&255,X[1]=u>>>8&255,X[2]=u>>>16&255,X[3]=u>>>24&255,r.check=mc(r.check,X,4,0)),u=0,f=0,r.mode=EY;case EY:for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&(X[0]=u&255,X[1]=u>>>8&255,r.check=mc(r.check,X,2,0)),u=0,f=0,r.mode=SY;case SY:if(r.flags&1024){for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&(X[0]=u&255,X[1]=u>>>8&255,r.check=mc(r.check,X,2,0)),u=0,f=0}else r.head&&(r.head.extra=null);r.mode=xY;case xY:if(r.flags&1024&&(p=r.length,p>a&&(p=a),p&&(r.head&&(z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Rs.arraySet(r.head.extra,i,s,p,z)),r.flags&512&&(r.check=mc(r.check,i,p,s)),a-=p,s+=p,r.length-=p),r.length))break e;r.length=0,r.mode=AY;case AY:if(r.flags&2048){if(a===0)break e;p=0;do z=i[s+p++],r.head&&z&&r.length<65536&&(r.head.name+=String.fromCharCode(z));while(z&&p<a);if(r.flags&512&&(r.check=mc(r.check,i,p,s)),a-=p,s+=p,z)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=IY;case IY:if(r.flags&4096){if(a===0)break e;p=0;do z=i[s+p++],r.head&&z&&r.length<65536&&(r.head.comment+=String.fromCharCode(z));while(z&&p<a);if(r.flags&512&&(r.check=mc(r.check,i,p,s)),a-=p,s+=p,z)break e}else r.head&&(r.head.comment=null);r.mode=TY;case TY:if(r.flags&512){for(;f<16;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Pr;break}u=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Su;break;case RY:for(;f<32;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}t.adler=r.check=FY(u),u=0,f=0,r.mode=u5;case u5:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=f,MCe;t.adler=r.check=1,r.mode=Su;case Su:if(e===BCe||e===c5)break e;case Xx:if(r.last){u>>>=f&7,f-=f&7,r.mode=Zx;break}for(;f<3;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}switch(r.last=u&1,u>>>=1,f-=1,u&3){case 0:r.mode=PY;break;case 1:if(HCe(r),r.mode=f5,e===c5){u>>>=2,f-=2;break e}break;case 2:r.mode=OY;break;case 3:t.msg="invalid block type",r.mode=Pr}u>>>=2,f-=2;break;case PY:for(u>>>=f&7,f-=f&7;f<32;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if((u&65535)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Pr;break}if(r.length=u&65535,u=0,f=0,r.mode=Qx,e===c5)break e;case Qx:r.mode=CY;case CY:if(p=r.length,p){if(p>a&&(p=a),p>c&&(p=c),p===0)break e;Rs.arraySet(n,i,s,p,o),a-=p,s+=p,c-=p,o+=p,r.length-=p;break}r.mode=Su;break;case OY:for(;f<14;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(r.nlen=(u&31)+257,u>>>=5,f-=5,r.ndist=(u&31)+1,u>>>=5,f-=5,r.ncode=(u&15)+4,u>>>=4,f-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Pr;break}r.have=0,r.mode=kY;case kY:for(;r.have<r.ncode;){for(;f<3;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.lens[_[r.have++]]=u&7,u>>>=3,f-=3}for(;r.have<19;)r.lens[_[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,P={bits:r.lenbits},W=Bg(DCe,r.lens,0,19,r.lencode,0,r.work,P),r.lenbits=P.bits,W){t.msg="invalid code lengths set",r.mode=Pr;break}r.have=0,r.mode=DY;case DY:for(;r.have<r.nlen+r.ndist;){for(;w=r.lencode[u&(1<<r.lenbits)-1],b=w>>>24,S=w>>>16&255,I=w&65535,!(b<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(I<16)u>>>=b,f-=b,r.lens[r.have++]=I;else{if(I===16){for(g=b+2;f<g;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(u>>>=b,f-=b,r.have===0){t.msg="invalid bit length repeat",r.mode=Pr;break}z=r.lens[r.have-1],p=3+(u&3),u>>>=2,f-=2}else if(I===17){for(g=b+3;f<g;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}u>>>=b,f-=b,z=0,p=3+(u&7),u>>>=3,f-=3}else{for(g=b+7;f<g;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}u>>>=b,f-=b,z=0,p=11+(u&127),u>>>=7,f-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Pr;break}for(;p--;)r.lens[r.have++]=z}}if(r.mode===Pr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Pr;break}if(r.lenbits=9,P={bits:r.lenbits},W=Bg(pY,r.lens,0,r.nlen,r.lencode,0,r.work,P),r.lenbits=P.bits,W){t.msg="invalid literal/lengths set",r.mode=Pr;break}if(r.distbits=6,r.distcode=r.distdyn,P={bits:r.distbits},W=Bg(yY,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,P),r.distbits=P.bits,W){t.msg="invalid distances set",r.mode=Pr;break}if(r.mode=f5,e===c5)break e;case f5:r.mode=l5;case l5:if(a>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=f,kCe(t,h),o=t.next_out,n=t.output,c=t.avail_out,s=t.next_in,i=t.input,a=t.avail_in,u=r.hold,f=r.bits,r.mode===Su&&(r.back=-1);break}for(r.back=0;w=r.lencode[u&(1<<r.lenbits)-1],b=w>>>24,S=w>>>16&255,I=w&65535,!(b<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(S&&(S&240)==0){for(j=b,B=S,C=I;w=r.lencode[C+((u&(1<<j+B)-1)>>j)],b=w>>>24,S=w>>>16&255,I=w&65535,!(j+b<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}u>>>=j,f-=j,r.back+=j}if(u>>>=b,f-=b,r.back+=b,r.length=I,S===0){r.mode=qY;break}if(S&32){r.back=-1,r.mode=Su;break}if(S&64){t.msg="invalid literal/length code",r.mode=Pr;break}r.extra=S&15,r.mode=BY;case BY:if(r.extra){for(g=r.extra;f<g;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=NY;case NY:for(;w=r.distcode[u&(1<<r.distbits)-1],b=w>>>24,S=w>>>16&255,I=w&65535,!(b<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if((S&240)==0){for(j=b,B=S,C=I;w=r.distcode[C+((u&(1<<j+B)-1)>>j)],b=w>>>24,S=w>>>16&255,I=w&65535,!(j+b<=f);){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}u>>>=j,f-=j,r.back+=j}if(u>>>=b,f-=b,r.back+=b,S&64){t.msg="invalid distance code",r.mode=Pr;break}r.offset=I,r.extra=S&15,r.mode=MY;case MY:if(r.extra){for(g=r.extra;f<g;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Pr;break}r.mode=LY;case LY:if(c===0)break e;if(p=h-c,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Pr;break}p>r.wnext?(p-=r.wnext,y=r.wsize-p):y=r.wnext-p,p>r.length&&(p=r.length),m=r.window}else m=n,y=o-r.offset,p=r.length;p>c&&(p=c),c-=p,r.length-=p;do n[o++]=m[y++];while(--p);r.length===0&&(r.mode=l5);break;case qY:if(c===0)break e;n[o++]=r.length,c--,r.mode=l5;break;case Zx:if(r.wrap){for(;f<32;){if(a===0)break e;a--,u|=i[s++]<<f,f+=8}if(h-=c,t.total_out+=h,r.total+=h,h&&(t.adler=r.check=r.flags?mc(r.check,n,h,o-h):Wx(r.check,n,h,o-h)),h=c,(r.flags?u:FY(u))!==r.check){t.msg="incorrect data check",r.mode=Pr;break}u=0,f=0}r.mode=jY;case jY:if(r.wrap&&r.flags){for(;f<32;){if(a===0)break e;a--,u+=i[s++]<<f,f+=8}if(u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Pr;break}u=0,f=0}r.mode=UY;case UY:W=NCe;break e;case Pr:W=mY;break e;case Jx:return Yx;case qCe:default:return lo}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=f,(r.wsize||h!==t.avail_out&&r.mode<Pr&&(r.mode<Zx||e!==gY))&&GY(t,t.output,t.next_out,h-t.avail_out)?(r.mode=Jx,Yx):(d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,r.total+=h,r.wrap&&h&&(t.adler=r.check=r.flags?mc(r.check,n,h,t.next_out-h):Wx(r.check,n,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Su?128:0)+(r.mode===f5||r.mode===Qx?256:0),(d===0&&h===0||e===gY)&&W===Rd&&(W=LCe),W)}function GCe(t){if(!t||!t.state)return lo;var e=t.state;return e.window&&(e.window=null),t.state=null,Rd}function WCe(t,e){var r;return!t||!t.state||(r=t.state,(r.wrap&2)==0)?lo:(r.head=e,e.done=!1,Rd)}function YCe(t,e){var r=e.length,i,n,s;return!t||!t.state||(i=t.state,i.wrap!==0&&i.mode!==u5)?lo:i.mode===u5&&(n=1,n=Wx(n,e,r,0),n!==i.check)?mY:(s=GY(t,e,r,r),s?(i.mode=Jx,Yx):(i.havedict=1,Rd))}fa.inflateReset=VY;fa.inflateReset2=zY;fa.inflateResetKeep=KY;fa.inflateInit=zCe;fa.inflateInit2=HY;fa.inflate=$Ce;fa.inflateEnd=GCe;fa.inflateGetHeader=WCe;fa.inflateSetDictionary=YCe;fa.inflateInfo="pako inflate (from Nodeca project)"});var rA=v((t1t,YY)=>{l();"use strict";YY.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var QY=v((r1t,XY)=>{l();"use strict";function XCe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}XY.exports=XCe});var JY=v(Mg=>{l();"use strict";var Cp=WY(),Ng=wu(),d5=Fx(),di=rA(),iA=Jb(),QCe=Kx(),ZCe=QY(),ZY=Object.prototype.toString;function Pd(t){if(!(this instanceof Pd))return new Pd(t);this.options=Ng.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)==0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new QCe,this.strm.avail_out=0;var r=Cp.inflateInit2(this.strm,e.windowBits);if(r!==di.Z_OK)throw new Error(iA[r]);if(this.header=new ZCe,Cp.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=d5.string2buf(e.dictionary):ZY.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Cp.inflateSetDictionary(this.strm,e.dictionary),r!==di.Z_OK)))throw new Error(iA[r])}Pd.prototype.push=function(t,e){var r=this.strm,i=this.options.chunkSize,n=this.options.dictionary,s,o,a,c,u,f=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?di.Z_FINISH:di.Z_NO_FLUSH,typeof t=="string"?r.input=d5.binstring2buf(t):ZY.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Ng.Buf8(i),r.next_out=0,r.avail_out=i),s=Cp.inflate(r,di.Z_NO_FLUSH),s===di.Z_NEED_DICT&&n&&(s=Cp.inflateSetDictionary(this.strm,n)),s===di.Z_BUF_ERROR&&f===!0&&(s=di.Z_OK,f=!1),s!==di.Z_STREAM_END&&s!==di.Z_OK)return this.onEnd(s),this.ended=!0,!1;r.next_out&&(r.avail_out===0||s===di.Z_STREAM_END||r.avail_in===0&&(o===di.Z_FINISH||o===di.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=d5.utf8border(r.output,r.next_out),c=r.next_out-a,u=d5.buf2string(r.output,a),r.next_out=c,r.avail_out=i-c,c&&Ng.arraySet(r.output,r.output,a,c,0),this.onData(u)):this.onData(Ng.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(f=!0)}while((r.avail_in>0||r.avail_out===0)&&s!==di.Z_STREAM_END);return s===di.Z_STREAM_END&&(o=di.Z_FINISH),o===di.Z_FINISH?(s=Cp.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===di.Z_OK):(o===di.Z_SYNC_FLUSH&&(this.onEnd(di.Z_OK),r.avail_out=0),!0)};Pd.prototype.onData=function(t){this.chunks.push(t)};Pd.prototype.onEnd=function(t){t===di.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ng.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function nA(t,e){var r=new Pd(e);if(r.push(t,!0),r.err)throw r.msg||iA[r.err];return r.result}function JCe(t,e){return e=e||{},e.raw=!0,nA(t,e)}Mg.Inflate=Pd;Mg.inflate=nA;Mg.inflateRaw=JCe;Mg.ungzip=nA});var rX=v((n1t,tX)=>{l();"use strict";var eOe=wu().assign,tOe=nY(),rOe=JY(),iOe=rA(),eX={};eOe(eX,tOe,rOe,iOe);tX.exports=eX});var nX=v((s1t,iX)=>{l();"use strict";var{concat:nOe}=(bn(),Gs);async function sOe(t){let e=new Uint8Array(0);for await(let r of t)e=nOe([e,r],e.length+r.length);return e}iX.exports=sOe});var lA=v((O1t,gX)=>{l();gX.exports=oOe;function oOe(t,e,r){var i,n;if(Array.isArray(e)&&(i=e.slice(0)),typeof e=="string"&&(i=e.split(".")),typeof e=="symbol"&&(i=[e]),!Array.isArray(i))throw new Error("props arg must be an array, a string or a symbol");if(n=i.pop(),!n)return!1;yX(n);for(var s;s=i.shift();)if(yX(s),typeof t[s]=="undefined"&&(t[s]={}),t=t[s],!t||typeof t!="object")return!1;return t[n]=r,!0}function yX(t){if(t==="__proto__"||t==="constructor"||t==="prototype")throw new Error("setting of prototype values not supported")}});var Od=v((s2t,CX)=>{l();"use strict";var bOe=async t=>{for await(let e of t)return e};CX.exports=bOe});var v5=v((T2t,$X)=>{l();var{Multiaddr:wOe}=rt(),b5=(t,e)=>e,_Oe=(t,e,r,i)=>{if(i&&i.assumeHttp===!1)return`tcp://${t}:${e}`;let n="tcp",s=`:${e}`;return r[r.length-1].protocol==="tcp"&&(n=e==="443"?"https":"http",s=e==="443"||e==="80"?"":s),`${n}://${t}${s}`},EOe={ip4:b5,ip6:(t,e,r,i)=>i.length===1&&i[0].protocol==="ip6"?e:`[${e}]`,tcp:(t,e,r,i,n)=>i.some(s=>["http","https","ws","wss"].includes(s.protocol))?`${t}:${e}`:_Oe(t,e,i,n),udp:(t,e)=>`udp://${t}:${e}`,dnsaddr:b5,dns4:b5,dns6:b5,ipfs:(t,e)=>`${t}/ipfs/${e}`,p2p:(t,e)=>`${t}/p2p/${e}`,http:t=>`http://${t}`,https:t=>`https://${t}`,ws:t=>`ws://${t}`,wss:t=>`wss://${t}`,"p2p-websocket-star":t=>`${t}/p2p-websocket-star`,"p2p-webrtc-star":t=>`${t}/p2p-webrtc-star`,"p2p-webrtc-direct":t=>`${t}/p2p-webrtc-direct`};$X.exports=(t,e)=>{let r=new wOe(t),i=t.toString().split("/").slice(1);return r.tuples().map(n=>({protocol:i.shift(),content:n[1]?i.shift():null})).reduce((n,s,o,a)=>{let c=EOe[s.protocol];if(!c)throw new Error(`Unsupported protocol ${s.protocol}`);return c(n,s.content,o,a,e)},"")}});var WX=v((R2t,GX)=>{l();"use strict";GX.exports=t=>{if(!Array.isArray(t))throw new TypeError(`Expected an array, got ${typeof t}`);t=[...t];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}});var xA=v((D2t,iQ)=>{l();iQ.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}});var nQ=v(()=>{l()});var pQ=v((M2t,hQ)=>{l();var IOe=vr().EventEmitter,{nanoid:TOe}=(V6(),r_),{WORKER_REQUEST_READ_LOCK:sQ,WORKER_RELEASE_READ_LOCK:oQ,MASTER_GRANT_READ_LOCK:aQ,WORKER_REQUEST_WRITE_LOCK:cQ,WORKER_RELEASE_WRITE_LOCK:uQ,MASTER_GRANT_WRITE_LOCK:fQ}=xA(),qg,lQ=(t,e,r,i,n)=>(s,o)=>{o&&o.type===r&&t.emit(e,o.name,()=>(s.send({type:n,name:o.name,identifier:o.identifier}),new Promise(a=>{let c=u=>{u&&u.type===i&&u.identifier===o.identifier&&(s.removeListener("message",c),a())};s.on("message",c)})))},dQ=(t,e,r,i)=>()=>{let n=TOe();return process.send({type:e,identifier:n,name:t}),new Promise(s=>{let o=a=>{a&&a.type===r&&a.identifier===n&&(process.removeListener("message",o),s(()=>{process.send({type:i,identifier:n,name:t})}))};process.on("message",o)})};hQ.exports=t=>{try{if(qg=nQ(),!Object.keys(qg).length)return}catch(e){return}if(qg.isMaster||t.singleProcess){let e=new IOe;return qg.on("message",lQ(e,"requestReadLock",sQ,oQ,aQ)),qg.on("message",lQ(e,"requestWriteLock",cQ,uQ,fQ)),e}return{isWorker:!0,readLock:e=>dQ(e,sQ,aQ,oQ),writeLock:e=>dQ(e,cQ,fQ,uQ)}}});var AA=v((L2t,yQ)=>{l();var Gf={},Mp=t=>{t.addEventListener("message",e=>{Mp.dispatchEvent("message",t,e)}),t.port&&t.port.addEventListener("message",e=>{Mp.dispatchEvent("message",t,e)})};Mp.addEventListener=(t,e)=>{Gf[t]||(Gf[t]=[]),Gf[t].push(e)};Mp.removeEventListener=(t,e)=>{!Gf[t]||(Gf[t]=Gf[t].filter(r=>r===e))};Mp.dispatchEvent=function(){let t=Array.prototype.slice.call(arguments),e=t.shift();!Gf[e]||Gf[e].forEach(r=>r.apply(null,t))};yQ.exports=Mp});var IQ=v((q2t,AQ)=>{l();var ROe=vr().EventEmitter,{nanoid:POe}=(V6(),r_),{WORKER_REQUEST_READ_LOCK:gQ,WORKER_RELEASE_READ_LOCK:mQ,MASTER_GRANT_READ_LOCK:bQ,WORKER_REQUEST_WRITE_LOCK:vQ,WORKER_RELEASE_WRITE_LOCK:wQ,MASTER_GRANT_WRITE_LOCK:_Q}=xA(),EQ=AA(),SQ=(t,e,r,i,n)=>(s,o)=>{if(!o||!o.data||o.data.type!==r)return;let a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};t.emit(e,a.name,()=>(s.postMessage({type:n,name:a.name,identifier:a.identifier}),new Promise(c=>{let u=f=>{if(!f||!f.data)return;let d={type:f.data.type,name:f.data.name,identifier:f.data.identifier};d&&d.type===i&&d.identifier===a.identifier&&(s.removeEventListener("message",u),c())};s.addEventListener("message",u)})))},xQ=(t,e,r,i)=>()=>{let n=POe();return globalThis.postMessage({type:e,identifier:n,name:t}),new Promise(s=>{let o=a=>{if(!a||!a.data)return;let c={type:a.data.type,identifier:a.data.identifier};c&&c.type===r&&c.identifier===n&&(globalThis.removeEventListener("message",o),s(()=>{globalThis.postMessage({type:i,identifier:n,name:t})}))};globalThis.addEventListener("message",o)})},COe={singleProcess:!1};AQ.exports=t=>{if(t=Object.assign({},COe,t),!!globalThis.document||t.singleProcess){let r=new ROe;return EQ.addEventListener("message",SQ(r,"requestReadLock",gQ,mQ,bQ)),EQ.addEventListener("message",SQ(r,"requestWriteLock",vQ,wQ,_Q)),r}return{isWorker:!0,readLock:r=>xQ(r,gQ,bQ,mQ),writeLock:r=>xQ(r,vQ,_Q,wQ)}}});var TQ=v((U2t,IA)=>{l();"use strict";var E5,j2t=IA.exports.timeout=function(t,e){var r=new E5,i;return Promise.race([t,new Promise(function(n,s){i=setTimeout(function(){s(r)},e)})]).then(function(n){return clearTimeout(i),n},function(n){throw clearTimeout(i),n})};E5=IA.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"};E5.prototype=Object.create(Error.prototype);E5.prototype.name="TimeoutError"});var PA=v((F2t,RA)=>{l();var OOe=pQ(),kOe=IQ(),{default:RQ}=Fa(),{timeout:DOe}=TQ(),BOe=AA(),kd={},Wf;function TA(t,e){let r,i=new Promise(n=>{r=n});return t.add(()=>DOe((()=>new Promise(n=>{r(()=>{n()})}))(),e.timeout)),i}var NOe=(t,e)=>{if(Wf.isWorker)return{readLock:Wf.readLock(t,e),writeLock:Wf.writeLock(t,e)};let r=new RQ({concurrency:1}),i=null;return{readLock:()=>{if(i)return TA(i,e);i=new RQ({concurrency:e.concurrency,autoStart:!1});let n=i,s=TA(i,e);return r.add(()=>(n.start(),n.onIdle().then(()=>{i===n&&(i=null)}))),s},writeLock:()=>(i=null,TA(r,e))}},MOe={concurrency:1/0,timeout:846e5,global:globalThis,singleProcess:!1};RA.exports=(t,e)=>(e||(e={}),typeof t=="object"&&(e=t,t="lock"),t||(t="lock"),e=Object.assign({},MOe,e),Wf||(Wf=OOe(e)||kOe(e),Wf.isWorker||(Wf.on("requestReadLock",(r,i)=>{!kd[r]||kd[r].readLock().then(n=>i().finally(()=>n()))}),Wf.on("requestWriteLock",async(r,i)=>{!kd[r]||kd[r].writeLock().then(n=>i().finally(()=>n()))}))),kd[t]||(kd[t]=NOe(t,e)),kd[t]);RA.exports.Worker=function(t,e){e=e||globalThis.Worker;let r;try{r=new e(t)}catch(i){i.message.includes("not a constructor")&&(r=e(t))}if(!r)throw new Error("Could not create Worker from",e);return BOe(r),r}});var HA=v((B6t,QZ)=>{l();QZ.exports=kke;function kke(t,e,r){if(!t)return r;var i,n;if(Array.isArray(e)&&(i=e.slice(0)),typeof e=="string"&&(i=e.split(".")),typeof e=="symbol"&&(i=[e]),!Array.isArray(i))throw new Error("props arg must be an array, a string or a symbol");for(;i.length;)if(n=i.shift(),!t||(t=t[n],t===void 0))return r;return t}});var Md=v((N6t,JZ)=>{l();"use strict";function ZZ(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Dke(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return ZZ(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),ZZ(new n,r)}}JZ.exports=Dke});var O5=v((M6t,eJ)=>{l();"use strict";var Bke=async t=>{let e=0;for await(let r of t)e++;return e};eJ.exports=Bke});var uJ=v((H6t,cJ)=>{l();$A.BASE=2166136261;function $A(t){for(var e=$A.BASE,r=0,i=t.length;r<i;r++)e^=t.charCodeAt(r),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}cJ.exports=$A});var XA={};zt(XA,{compare:()=>YA});function YA(t,e){for(let r=0;r<t.byteLength;r++){if(t[r]<e[r])return-1;if(t[r]>e[r])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}var B5=bt(()=>{l()});var PJ=v((K4t,j5)=>{l();"use strict";j5.exports=eDe;j5.exports.format=TJ;j5.exports.parse=RJ;var Qke=/\B(?=(\d{3})+(?!\d))/g,Zke=/(?:\.0*|(\.[^0]+)0+)$/,el={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},Jke=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function eDe(t,e){return typeof t=="string"?RJ(t):typeof t=="number"?TJ(t,e):null}function TJ(t,e){if(!Number.isFinite(t))return null;var r=Math.abs(t),i=e&&e.thousandsSeparator||"",n=e&&e.unitSeparator||"",s=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,o=Boolean(e&&e.fixedDecimals),a=e&&e.unit||"";(!a||!el[a.toLowerCase()])&&(r>=el.pb?a="PB":r>=el.tb?a="TB":r>=el.gb?a="GB":r>=el.mb?a="MB":r>=el.kb?a="KB":a="B");var c=t/el[a.toLowerCase()],u=c.toFixed(s);return o||(u=u.replace(Zke,"$1")),i&&(u=u.replace(Qke,i)),u+n+a}function RJ(t){if(typeof t=="number"&&!isNaN(t))return t;if(typeof t!="string")return null;var e=Jke.exec(t),r,i="b";return e?(r=parseFloat(e[1]),i=e[4].toLowerCase()):(r=parseInt(t,10),i="b"),Math.floor(el[i]*r)}});var jJ=v((ibt,qJ)=>{l();"use strict";qJ.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var FJ=v((nbt,UJ)=>{l();"use strict";var sI=jJ();UJ.exports=(t,e={})=>{if(!sI(t)&&!Array.isArray(t))throw new TypeError("Expected a plain object or array");let{deep:r}=e,i=[],n=[],s=a=>{let c=i.indexOf(a);if(c!==-1)return n[c];let u=[];return i.push(a),n.push(u),u.push(...a.map(f=>Array.isArray(f)?s(f):sI(f)?o(f):f)),u},o=a=>{let c=i.indexOf(a);if(c!==-1)return n[c];let u={},f=Object.keys(a).sort(e.compare);i.push(a),n.push(u);for(let d of f){let h=a[d],p;r&&Array.isArray(h)?p=s(h):p=r&&sI(h)?o(h):h,Object.defineProperty(u,d,{...Object.getOwnPropertyDescriptor(a,d),value:p})}return u};return Array.isArray(t)?r?s(t):t.slice():o(t)}});var wee=v((s5t,vee)=>{l();"use strict";var gDe=yd(),mDe=async function*(t,e){yield*(await gDe(t)).sort(e)};vee.exports=mDe});var pI=v((o5t,_ee)=>{l();"use strict";_ee.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[r]=n;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==n||o.enumerable!==!0)return!1}return!0}});var rm=v((a5t,Eee)=>{l();"use strict";var bDe=pI();Eee.exports=function(){return bDe()&&!!Symbol.toStringTag}});var Aee=v((c5t,xee)=>{l();"use strict";var See=typeof Symbol!="undefined"&&Symbol,vDe=pI();xee.exports=function(){return typeof See!="function"||typeof Symbol!="function"||typeof See("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:vDe()}});var Tee=v((u5t,Iee)=>{l();"use strict";var wDe="Function.prototype.bind called on incompatible ",yI=Array.prototype.slice,_De=Object.prototype.toString,EDe="[object Function]";Iee.exports=function(e){var r=this;if(typeof r!="function"||_De.call(r)!==EDe)throw new TypeError(wDe+r);for(var i=yI.call(arguments,1),n,s=function(){if(this instanceof n){var f=r.apply(this,i.concat(yI.call(arguments)));return Object(f)===f?f:this}else return r.apply(e,i.concat(yI.call(arguments)))},o=Math.max(0,r.length-i.length),a=[],c=0;c<o;c++)a.push("$"+c);if(n=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,n.prototype=new u,u.prototype=null}return n}});var $5=v((f5t,Ree)=>{l();"use strict";var SDe=Tee();Ree.exports=Function.prototype.bind||SDe});var Cee=v((l5t,Pee)=>{l();"use strict";var xDe=$5();Pee.exports=xDe.call(Function.call,Object.prototype.hasOwnProperty)});var X5=v((d5t,Bee)=>{l();"use strict";var qt,im=SyntaxError,Oee=Function,Wp=TypeError,gI=function(t){try{return Oee('"use strict"; return ('+t+").constructor;")()}catch(e){}},Vd=Object.getOwnPropertyDescriptor;if(Vd)try{Vd({},"")}catch(t){Vd=null}var mI=function(){throw new Wp},ADe=Vd?function(){try{return arguments.callee,mI}catch(t){try{return Vd(arguments,"callee").get}catch(e){return mI}}}():mI,Yp=Aee()(),rl=Object.getPrototypeOf||function(t){return t.__proto__},Xp={},IDe=typeof Uint8Array=="undefined"?qt:rl(Uint8Array),Qp={"%AggregateError%":typeof AggregateError=="undefined"?qt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?qt:ArrayBuffer,"%ArrayIteratorPrototype%":Yp?rl([][Symbol.iterator]()):qt,"%AsyncFromSyncIteratorPrototype%":qt,"%AsyncFunction%":Xp,"%AsyncGenerator%":Xp,"%AsyncGeneratorFunction%":Xp,"%AsyncIteratorPrototype%":Xp,"%Atomics%":typeof Atomics=="undefined"?qt:Atomics,"%BigInt%":typeof BigInt=="undefined"?qt:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?qt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?qt:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?qt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?qt:FinalizationRegistry,"%Function%":Oee,"%GeneratorFunction%":Xp,"%Int8Array%":typeof Int8Array=="undefined"?qt:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?qt:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?qt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Yp?rl(rl([][Symbol.iterator]())):qt,"%JSON%":typeof JSON=="object"?JSON:qt,"%Map%":typeof Map=="undefined"?qt:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Yp?qt:rl(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?qt:Promise,"%Proxy%":typeof Proxy=="undefined"?qt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?qt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?qt:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Yp?qt:rl(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?qt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Yp?rl(""[Symbol.iterator]()):qt,"%Symbol%":Yp?Symbol:qt,"%SyntaxError%":im,"%ThrowTypeError%":ADe,"%TypedArray%":IDe,"%TypeError%":Wp,"%Uint8Array%":typeof Uint8Array=="undefined"?qt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?qt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?qt:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?qt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?qt:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?qt:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?qt:WeakSet},TDe=function t(e){var r;if(e==="%AsyncFunction%")r=gI("async function () {}");else if(e==="%GeneratorFunction%")r=gI("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=gI("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&(r=rl(n.prototype))}return Qp[e]=r,r},kee={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},G5=$5(),W5=Cee(),RDe=G5.call(Function.call,Array.prototype.concat),PDe=G5.call(Function.apply,Array.prototype.splice),Dee=G5.call(Function.call,String.prototype.replace),Y5=G5.call(Function.call,String.prototype.slice),CDe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ODe=/\\(\\)?/g,kDe=function(e){var r=Y5(e,0,1),i=Y5(e,-1);if(r==="%"&&i!=="%")throw new im("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new im("invalid intrinsic syntax, expected opening `%`");var n=[];return Dee(e,CDe,function(s,o,a,c){n[n.length]=a?Dee(c,ODe,"$1"):o||s}),n},DDe=function(e,r){var i=e,n;if(W5(kee,i)&&(n=kee[i],i="%"+n[0]+"%"),W5(Qp,i)){var s=Qp[i];if(s===Xp&&(s=TDe(i)),typeof s=="undefined"&&!r)throw new Wp("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new im("intrinsic "+e+" does not exist!")};Bee.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Wp("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Wp('"allowMissing" argument must be a boolean');var i=kDe(e),n=i.length>0?i[0]:"",s=DDe("%"+n+"%",r),o=s.name,a=s.value,c=!1,u=s.alias;u&&(n=u[0],PDe(i,RDe([0,1],u)));for(var f=1,d=!0;f<i.length;f+=1){var h=i[f],p=Y5(h,0,1),y=Y5(h,-1);if((p==='"'||p==="'"||p==="`"||y==='"'||y==="'"||y==="`")&&p!==y)throw new im("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(c=!0),n+="."+h,o="%"+n+"%",W5(Qp,o))a=Qp[o];else if(a!=null){if(!(h in a)){if(!r)throw new Wp("base intrinsic for "+e+" exists, but the property is not available.");return}if(Vd&&f+1>=i.length){var m=Vd(a,h);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[h]}else d=W5(a,h),a=a[h];d&&!c&&(Qp[o]=a)}}return a}});var Uee=v((h5t,Q5)=>{l();"use strict";var bI=$5(),Zp=X5(),Nee=Zp("%Function.prototype.apply%"),Mee=Zp("%Function.prototype.call%"),Lee=Zp("%Reflect.apply%",!0)||bI.call(Mee,Nee),qee=Zp("%Object.getOwnPropertyDescriptor%",!0),zd=Zp("%Object.defineProperty%",!0),BDe=Zp("%Math.max%");if(zd)try{zd({},"a",{value:1})}catch(t){zd=null}Q5.exports=function(e){var r=Lee(bI,Mee,arguments);if(qee&&zd){var i=qee(r,"length");i.configurable&&zd(r,"length",{value:1+BDe(0,e.length-(arguments.length-1))})}return r};var jee=function(){return Lee(bI,Nee,arguments)};zd?zd(Q5.exports,"apply",{value:jee}):Q5.exports.apply=jee});var Z5=v((p5t,Vee)=>{l();"use strict";var Fee=X5(),Kee=Uee(),NDe=Kee(Fee("String.prototype.indexOf"));Vee.exports=function(e,r){var i=Fee(e,!!r);return typeof i=="function"&&NDe(e,".prototype.")>-1?Kee(i):i}});var $ee=v((y5t,Hee)=>{l();"use strict";var MDe=rm()(),LDe=Z5(),vI=LDe("Object.prototype.toString"),J5=function(e){return MDe&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:vI(e)==="[object Arguments]"},zee=function(e){return J5(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&vI(e)!=="[object Array]"&&vI(e.callee)==="[object Function]"},qDe=function(){return J5(arguments)}();J5.isLegacyArguments=zee;Hee.exports=qDe?J5:zee});var Yee=v((g5t,Wee)=>{l();"use strict";var jDe=Object.prototype.toString,UDe=Function.prototype.toString,FDe=/^\s*(?:function)?\*/,Gee=rm()(),wI=Object.getPrototypeOf,KDe=function(){if(!Gee)return!1;try{return Function("return function*() {}")()}catch(t){}},_I;Wee.exports=function(e){if(typeof e!="function")return!1;if(FDe.test(UDe.call(e)))return!0;if(!Gee){var r=jDe.call(e);return r==="[object GeneratorFunction]"}if(!wI)return!1;if(typeof _I=="undefined"){var i=KDe();_I=i?wI(i):!1}return wI(e)===_I}});var EI=v((m5t,Xee)=>{l();var VDe=Object.prototype.hasOwnProperty,zDe=Object.prototype.toString;Xee.exports=function(e,r,i){if(zDe.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var n=e.length;if(n===+n)for(var s=0;s<n;s++)r.call(i,e[s],s,e);else for(var o in e)VDe.call(e,o)&&r.call(i,e[o],o,e)}});var xI=v((b5t,Qee)=>{l();"use strict";var SI=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],HDe=globalThis;Qee.exports=function(){for(var e=[],r=0;r<SI.length;r++)typeof HDe[SI[r]]=="function"&&(e[e.length]=SI[r]);return e}});var AI=v((v5t,Zee)=>{l();"use strict";var $De=X5(),e8=$De("%Object.getOwnPropertyDescriptor%",!0);if(e8)try{e8([],"length")}catch(t){e8=null}Zee.exports=e8});var RI=v((w5t,ite)=>{l();"use strict";var Jee=EI(),GDe=xI(),II=Z5(),WDe=II("Object.prototype.toString"),ete=rm()(),YDe=globalThis,tte=GDe(),XDe=II("Array.prototype.indexOf",!0)||function(e,r){for(var i=0;i<e.length;i+=1)if(e[i]===r)return i;return-1},QDe=II("String.prototype.slice"),rte={},t8=AI(),TI=Object.getPrototypeOf;ete&&t8&&TI&&Jee(tte,function(t){var e=new YDe[t];if(Symbol.toStringTag in e){var r=TI(e),i=t8(r,Symbol.toStringTag);if(!i){var n=TI(r);i=t8(n,Symbol.toStringTag)}rte[t]=i.get}});var ZDe=function(e){var r=!1;return Jee(rte,function(i,n){if(!r)try{r=i.call(e)===n}catch(s){}}),r};ite.exports=function(e){if(!e||typeof e!="object")return!1;if(!ete||!(Symbol.toStringTag in e)){var r=QDe(WDe(e),8,-1);return XDe(tte,r)>-1}return t8?ZDe(e):!1}});var fte=v((_5t,ute)=>{l();"use strict";var nte=EI(),JDe=xI(),ste=Z5(),eBe=ste("Object.prototype.toString"),ote=rm()(),ate=globalThis,tBe=JDe(),rBe=ste("String.prototype.slice"),cte={},PI=AI(),CI=Object.getPrototypeOf;ote&&PI&&CI&&nte(tBe,function(t){if(typeof ate[t]=="function"){var e=new ate[t];if(Symbol.toStringTag in e){var r=CI(e),i=PI(r,Symbol.toStringTag);if(!i){var n=CI(r);i=PI(n,Symbol.toStringTag)}cte[t]=i.get}}});var iBe=function(e){var r=!1;return nte(cte,function(i,n){if(!r)try{var s=i.call(e);s===n&&(r=s)}catch(o){}}),r},nBe=RI();ute.exports=function(e){return nBe(e)?!ote||!(Symbol.toStringTag in e)?rBe(eBe(e),8,-1):iBe(e):!1}});var xte=v(xt=>{l();"use strict";var sBe=$ee(),oBe=Yee(),da=fte(),lte=RI();function Jp(t){return t.call.bind(t)}var dte=typeof BigInt!="undefined",hte=typeof Symbol!="undefined",go=Jp(Object.prototype.toString),aBe=Jp(Number.prototype.valueOf),cBe=Jp(String.prototype.valueOf),uBe=Jp(Boolean.prototype.valueOf);dte&&(pte=Jp(BigInt.prototype.valueOf));var pte;hte&&(yte=Jp(Symbol.prototype.valueOf));var yte;function nm(t,e){if(typeof t!="object")return!1;try{return e(t),!0}catch(r){return!1}}xt.isArgumentsObject=sBe;xt.isGeneratorFunction=oBe;xt.isTypedArray=lte;function fBe(t){return typeof Promise!="undefined"&&t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function"}xt.isPromise=fBe;function lBe(t){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(t):lte(t)||mte(t)}xt.isArrayBufferView=lBe;function dBe(t){return da(t)==="Uint8Array"}xt.isUint8Array=dBe;function hBe(t){return da(t)==="Uint8ClampedArray"}xt.isUint8ClampedArray=hBe;function pBe(t){return da(t)==="Uint16Array"}xt.isUint16Array=pBe;function yBe(t){return da(t)==="Uint32Array"}xt.isUint32Array=yBe;function gBe(t){return da(t)==="Int8Array"}xt.isInt8Array=gBe;function mBe(t){return da(t)==="Int16Array"}xt.isInt16Array=mBe;function bBe(t){return da(t)==="Int32Array"}xt.isInt32Array=bBe;function vBe(t){return da(t)==="Float32Array"}xt.isFloat32Array=vBe;function wBe(t){return da(t)==="Float64Array"}xt.isFloat64Array=wBe;function _Be(t){return da(t)==="BigInt64Array"}xt.isBigInt64Array=_Be;function EBe(t){return da(t)==="BigUint64Array"}xt.isBigUint64Array=EBe;function r8(t){return go(t)==="[object Map]"}r8.working=typeof Map!="undefined"&&r8(new Map);function SBe(t){return typeof Map=="undefined"?!1:r8.working?r8(t):t instanceof Map}xt.isMap=SBe;function i8(t){return go(t)==="[object Set]"}i8.working=typeof Set!="undefined"&&i8(new Set);function xBe(t){return typeof Set=="undefined"?!1:i8.working?i8(t):t instanceof Set}xt.isSet=xBe;function n8(t){return go(t)==="[object WeakMap]"}n8.working=typeof WeakMap!="undefined"&&n8(new WeakMap);function ABe(t){return typeof WeakMap=="undefined"?!1:n8.working?n8(t):t instanceof WeakMap}xt.isWeakMap=ABe;function OI(t){return go(t)==="[object WeakSet]"}OI.working=typeof WeakSet!="undefined"&&OI(new WeakSet);function IBe(t){return OI(t)}xt.isWeakSet=IBe;function s8(t){return go(t)==="[object ArrayBuffer]"}s8.working=typeof ArrayBuffer!="undefined"&&s8(new ArrayBuffer);function gte(t){return typeof ArrayBuffer=="undefined"?!1:s8.working?s8(t):t instanceof ArrayBuffer}xt.isArrayBuffer=gte;function o8(t){return go(t)==="[object DataView]"}o8.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&o8(new DataView(new ArrayBuffer(1),0,1));function mte(t){return typeof DataView=="undefined"?!1:o8.working?o8(t):t instanceof DataView}xt.isDataView=mte;var kI=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function sm(t){return go(t)==="[object SharedArrayBuffer]"}function bte(t){return typeof kI=="undefined"?!1:(typeof sm.working=="undefined"&&(sm.working=sm(new kI)),sm.working?sm(t):t instanceof kI)}xt.isSharedArrayBuffer=bte;function TBe(t){return go(t)==="[object AsyncFunction]"}xt.isAsyncFunction=TBe;function RBe(t){return go(t)==="[object Map Iterator]"}xt.isMapIterator=RBe;function PBe(t){return go(t)==="[object Set Iterator]"}xt.isSetIterator=PBe;function CBe(t){return go(t)==="[object Generator]"}xt.isGeneratorObject=CBe;function OBe(t){return go(t)==="[object WebAssembly.Module]"}xt.isWebAssemblyCompiledModule=OBe;function vte(t){return nm(t,aBe)}xt.isNumberObject=vte;function wte(t){return nm(t,cBe)}xt.isStringObject=wte;function _te(t){return nm(t,uBe)}xt.isBooleanObject=_te;function Ete(t){return dte&&nm(t,pte)}xt.isBigIntObject=Ete;function Ste(t){return hte&&nm(t,yte)}xt.isSymbolObject=Ste;function kBe(t){return vte(t)||wte(t)||_te(t)||Ete(t)||Ste(t)}xt.isBoxedPrimitive=kBe;function DBe(t){return typeof Uint8Array!="undefined"&&(gte(t)||bte(t))}xt.isAnyArrayBuffer=DBe;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(xt,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})});var Ite=v((S5t,Ate)=>{l();Ate.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var kte=v(At=>{l();var Tte=Object.getOwnPropertyDescriptors||function(e){for(var r=Object.keys(e),i={},n=0;n<r.length;n++)i[r[n]]=Object.getOwnPropertyDescriptor(e,r[n]);return i},BBe=/%[sdj%]/g;At.format=function(t){if(!l8(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(il(arguments[r]));return e.join(" ")}for(var r=1,i=arguments,n=i.length,s=String(t).replace(BBe,function(a){if(a==="%%")return"%";if(r>=n)return a;switch(a){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(c){return"[Circular]"}default:return a}}),o=i[r];r<n;o=i[++r])f8(o)||!e1(o)?s+=" "+o:s+=" "+il(o);return s};At.deprecate=function(t,e){if(typeof process!="undefined"&&process.noDeprecation===!0)return t;if(typeof process=="undefined")return function(){return At.deprecate(t,e).apply(this,arguments)};var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),r=!0}return t.apply(this,arguments)}return i};var a8={},Rte=/^$/;process.env.NODE_DEBUG&&(c8=process.env.NODE_DEBUG,c8=c8.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),Rte=new RegExp("^"+c8+"$","i"));var c8;At.debuglog=function(t){if(t=t.toUpperCase(),!a8[t])if(Rte.test(t)){var e=process.pid;a8[t]=function(){var r=At.format.apply(At,arguments);console.error("%s %d: %s",t,e,r)}}else a8[t]=function(){};return a8[t]};function il(t,e){var r={seen:[],stylize:MBe};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),NI(e)?r.showHidden=e:e&&At._extend(r,e),Hd(r.showHidden)&&(r.showHidden=!1),Hd(r.depth)&&(r.depth=2),Hd(r.colors)&&(r.colors=!1),Hd(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=NBe),u8(r,t,r.depth)}At.inspect=il;il.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};il.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function NBe(t,e){var r=il.styles[e];return r?"["+il.colors[r][0]+"m"+t+"["+il.colors[r][1]+"m":t}function MBe(t,e){return t}function LBe(t){var e={};return t.forEach(function(r,i){e[r]=!0}),e}function u8(t,e,r){if(t.customInspect&&e&&h8(e.inspect)&&e.inspect!==At.inspect&&!(e.constructor&&e.constructor.prototype===e)){var i=e.inspect(r,t);return l8(i)||(i=u8(t,i,r)),i}var n=qBe(t,e);if(n)return n;var s=Object.keys(e),o=LBe(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),am(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return DI(e);if(s.length===0){if(h8(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(om(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(d8(e))return t.stylize(Date.prototype.toString.call(e),"date");if(am(e))return DI(e)}var c="",u=!1,f=["{","}"];if(Pte(e)&&(u=!0,f=["[","]"]),h8(e)){var d=e.name?": "+e.name:"";c=" [Function"+d+"]"}if(om(e)&&(c=" "+RegExp.prototype.toString.call(e)),d8(e)&&(c=" "+Date.prototype.toUTCString.call(e)),am(e)&&(c=" "+DI(e)),s.length===0&&(!u||e.length==0))return f[0]+c+f[1];if(r<0)return om(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var h;return u?h=jBe(t,e,r,o,s):h=s.map(function(p){return BI(t,e,r,o,p,u)}),t.seen.pop(),UBe(h,c,f)}function qBe(t,e){if(Hd(e))return t.stylize("undefined","undefined");if(l8(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(Cte(e))return t.stylize(""+e,"number");if(NI(e))return t.stylize(""+e,"boolean");if(f8(e))return t.stylize("null","null")}function DI(t){return"["+Error.prototype.toString.call(t)+"]"}function jBe(t,e,r,i,n){for(var s=[],o=0,a=e.length;o<a;++o)Ote(e,String(o))?s.push(BI(t,e,r,i,String(o),!0)):s.push("");return n.forEach(function(c){c.match(/^\d+$/)||s.push(BI(t,e,r,i,c,!0))}),s}function BI(t,e,r,i,n,s){var o,a,c;if(c=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},c.get?c.set?a=t.stylize("[Getter/Setter]","special"):a=t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),Ote(i,n)||(o="["+n+"]"),a||(t.seen.indexOf(c.value)<0?(f8(r)?a=u8(t,c.value,null):a=u8(t,c.value,r-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=t.stylize("[Circular]","special")),Hd(o)){if(s&&n.match(/^\d+$/))return a;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function UBe(t,e,r){var i=0,n=t.reduce(function(s,o){return i++,o.indexOf(`
`)>=0&&i++,s+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(e===""?"":e+`
 `)+" "+t.join(`,
  `)+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}At.types=xte();function Pte(t){return Array.isArray(t)}At.isArray=Pte;function NI(t){return typeof t=="boolean"}At.isBoolean=NI;function f8(t){return t===null}At.isNull=f8;function FBe(t){return t==null}At.isNullOrUndefined=FBe;function Cte(t){return typeof t=="number"}At.isNumber=Cte;function l8(t){return typeof t=="string"}At.isString=l8;function KBe(t){return typeof t=="symbol"}At.isSymbol=KBe;function Hd(t){return t===void 0}At.isUndefined=Hd;function om(t){return e1(t)&&MI(t)==="[object RegExp]"}At.isRegExp=om;At.types.isRegExp=om;function e1(t){return typeof t=="object"&&t!==null}At.isObject=e1;function d8(t){return e1(t)&&MI(t)==="[object Date]"}At.isDate=d8;At.types.isDate=d8;function am(t){return e1(t)&&(MI(t)==="[object Error]"||t instanceof Error)}At.isError=am;At.types.isNativeError=am;function h8(t){return typeof t=="function"}At.isFunction=h8;function VBe(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t=="undefined"}At.isPrimitive=VBe;At.isBuffer=Ite();function MI(t){return Object.prototype.toString.call(t)}function LI(t){return t<10?"0"+t.toString(10):t.toString(10)}var zBe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function HBe(){var t=new Date,e=[LI(t.getHours()),LI(t.getMinutes()),LI(t.getSeconds())].join(":");return[t.getDate(),zBe[t.getMonth()],e].join(" ")}At.log=function(){console.log("%s - %s",HBe(),At.format.apply(At,arguments))};At.inherits=on();At._extend=function(t,e){if(!e||!e1(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t};function Ote(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var $d=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;At.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if($d&&e[$d]){var r=e[$d];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,$d,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var i,n,s=new Promise(function(c,u){i=c,n=u}),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push(function(c,u){c?n(c):i(u)});try{e.apply(this,o)}catch(c){n(c)}return s}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),$d&&Object.defineProperty(r,$d,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Tte(e))};At.promisify.custom=$d;function $Be(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function GBe(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return n.apply(s,arguments)};t.apply(this,r).then(function(a){process.nextTick(o.bind(null,null,a))},function(a){process.nextTick($Be.bind(null,a,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,Tte(t)),e}At.callbackify=GBe});var qI=v((A5t,Bte)=>{l();"use strict";Bte.exports=function(...e){let r=e.reduce((i,n)=>Object.assign(i,n),{});return Object.assign(r,{bufferKeys:r.bufferKeys||!1,snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,idempotentOpen:r.idempotentOpen||!1,passiveOpen:r.passiveOpen||!1,serialize:r.serialize||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,openCallback:r.openCallback||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Dte(r.encodings),events:Dte(r.events),additionalMethods:Object.assign({},r.additionalMethods)})};function Dte(t){return t?Object.assign({},t):!1}});var jI=v((I5t,Nte)=>{l();Nte.exports=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}});var Lte=v((T5t,Mte)=>{l();Mte.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var p8=v(UI=>{l();"use strict";var qte=Lte();UI.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(i,n){t=function(s,o){s?n(s):i(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};UI.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){qte(()=>e(null,r))}).catch(function(r){qte(()=>e(r))})}});var cm=v((P5t,Ute)=>{l();var jte;Ute.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:globalThis):t=>(jte||(jte=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var y8=v((C5t,Kte)=>{l();"use strict";var Fte=cm();Kte.exports=function(t,...e){e.length===0?Fte(t):Fte(()=>t(...e))}});var FI=v((O5t,Vte)=>{l();"use strict";function Au(t){if(typeof t!="object"||t===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._ended=!1,this._nexting=!1}Au.prototype.next=function(t){let e=this;if(t===void 0)e=new Promise(function(r,i){t=function(n,s,o){n?i(n):s===void 0&&o===void 0?r():r([s,o])}});else if(typeof t!="function")throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(t,new Error("cannot call next() after end()")),e):this._nexting?(this._nextTick(t,new Error("cannot call next() before previous next() has completed")),e):(this._nexting=!0,this._next((r,...i)=>{this._nexting=!1,t(r,...i)}),e)};Au.prototype._next=function(t){this._nextTick(t)};Au.prototype.seek=function(t){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");t=this.db._serializeKey(t),this._seek(t)};Au.prototype._seek=function(t){};Au.prototype.end=function(t){let e;if(t===void 0)e=new Promise(function(r,i){t=function(n){n?i(n):r()}});else if(typeof t!="function")throw new Error("end() requires a callback argument");return this._ended?(this._nextTick(t,new Error("end() already called on iterator")),e):(this._ended=!0,this._end(t),e)};Au.prototype._end=function(t){this._nextTick(t)};Au.prototype[Symbol.asyncIterator]=async function*(){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this._ended||await this.end()}};Au.prototype._nextTick=y8();Vte.exports=Au});var KI=v((k5t,Hte)=>{l();"use strict";var zte=Object.freeze({});function ha(t){if(typeof t!="object"||t===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._operations=[],this._written=!1}ha.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")};ha.prototype.put=function(t,e,r){this._checkWritten();let i=this.db._checkKey(t)||this.db._checkValue(e);if(i)throw i;return t=this.db._serializeKey(t),e=this.db._serializeValue(e),this._put(t,e,r??zte),this};ha.prototype._put=function(t,e,r){this._operations.push({...r,type:"put",key:t,value:e})};ha.prototype.del=function(t,e){this._checkWritten();let r=this.db._checkKey(t);if(r)throw r;return t=this.db._serializeKey(t),this._del(t,e??zte),this};ha.prototype._del=function(t,e){this._operations.push({...e,type:"del",key:t})};ha.prototype.clear=function(){return this._checkWritten(),this._clear(),this};ha.prototype._clear=function(){this._operations=[]};ha.prototype.write=function(t,e){if(this._checkWritten(),typeof t=="function"&&(e=t),typeof e!="function")throw new Error("write() requires a callback argument");(typeof t!="object"||t===null)&&(t={}),this._written=!0,this._write(t,e)};ha.prototype._write=function(t,e){this.db._batch(this._operations,t,e)};ha.prototype._nextTick=y8();Hte.exports=ha});var zI=v(VI=>{l();"use strict";VI.getCallback=function(t,e){return typeof t=="function"?t:e};VI.getOptions=function(t){return typeof t=="object"&&t!==null?t:{}}});var Wte=v((B5t,Gte)=>{l();"use strict";var WBe=qI(),YBe=jI(),XBe=p8(),QBe=FI(),ZBe=KI(),JBe=zI().getCallback,eNe=zI().getOptions,tNe=Object.prototype.hasOwnProperty,rNe=["lt","lte","gt","gte"];function sr(t){this.status="new",this.supports=WBe(t,{status:!0})}sr.prototype.open=function(t,e){let r=this.status;if(typeof t=="function"&&(e=t),typeof e!="function")throw new Error("open() requires a callback argument");(typeof t!="object"||t===null)&&(t={}),t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists,this.status="opening",this._open(t,i=>{if(i)return this.status=r,e(i);this.status="open",e()})};sr.prototype._open=function(t,e){this._nextTick(e)};sr.prototype.close=function(t){let e=this.status;if(typeof t!="function")throw new Error("close() requires a callback argument");this.status="closing",this._close(r=>{if(r)return this.status=e,t(r);this.status="closed",t()})};sr.prototype._close=function(t){this._nextTick(t)};sr.prototype.get=function(t,e,r){if(typeof e=="function"&&(r=e),typeof r!="function")throw new Error("get() requires a callback argument");let i=this._checkKey(t);if(i)return this._nextTick(r,i);t=this._serializeKey(t),(typeof e!="object"||e===null)&&(e={}),e.asBuffer=e.asBuffer!==!1,this._get(t,e,r)};sr.prototype._get=function(t,e,r){this._nextTick(function(){r(new Error("NotFound"))})};sr.prototype.getMany=function(t,e,r){if(r=JBe(e,r),r=XBe.fromCallback(r),e=eNe(e),nNe(this,r))return r.promise;if(!Array.isArray(t))return this._nextTick(r,new Error("getMany() requires an array argument")),r.promise;if(t.length===0)return this._nextTick(r,null,[]),r.promise;typeof e.asBuffer!="boolean"&&(e={...e,asBuffer:!0});let i=new Array(t.length);for(let n=0;n<t.length;n++){let s=t[n],o=this._checkKey(s);if(o)return this._nextTick(r,o),r.promise;i[n]=this._serializeKey(s)}return this._getMany(i,e,r),r.promise};sr.prototype._getMany=function(t,e,r){this._nextTick(r,null,new Array(t.length).fill(void 0))};sr.prototype.put=function(t,e,r,i){if(typeof r=="function"&&(i=r),typeof i!="function")throw new Error("put() requires a callback argument");let n=this._checkKey(t)||this._checkValue(e);if(n)return this._nextTick(i,n);t=this._serializeKey(t),e=this._serializeValue(e),(typeof r!="object"||r===null)&&(r={}),this._put(t,e,r,i)};sr.prototype._put=function(t,e,r,i){this._nextTick(i)};sr.prototype.del=function(t,e,r){if(typeof e=="function"&&(r=e),typeof r!="function")throw new Error("del() requires a callback argument");let i=this._checkKey(t);if(i)return this._nextTick(r,i);t=this._serializeKey(t),(typeof e!="object"||e===null)&&(e={}),this._del(t,e,r)};sr.prototype._del=function(t,e,r){this._nextTick(r)};sr.prototype.batch=function(t,e,r){if(!arguments.length)return this._chainedBatch();if(typeof e=="function"&&(r=e),typeof t=="function"&&(r=t),typeof r!="function")throw new Error("batch(array) requires a callback argument");if(!Array.isArray(t))return this._nextTick(r,new Error("batch(array) requires an array argument"));if(t.length===0)return this._nextTick(r);(typeof e!="object"||e===null)&&(e={});let i=new Array(t.length);for(let n=0;n<t.length;n++){if(typeof t[n]!="object"||t[n]===null)return this._nextTick(r,new Error("batch(array) element must be an object and not `null`"));let s=Object.assign({},t[n]);if(s.type!=="put"&&s.type!=="del")return this._nextTick(r,new Error("`type` must be 'put' or 'del'"));let o=this._checkKey(s.key);if(o)return this._nextTick(r,o);if(s.key=this._serializeKey(s.key),s.type==="put"){let a=this._checkValue(s.value);if(a)return this._nextTick(r,a);s.value=this._serializeValue(s.value)}i[n]=s}this._batch(i,e,r)};sr.prototype._batch=function(t,e,r){this._nextTick(r)};sr.prototype.clear=function(t,e){if(typeof t=="function")e=t;else if(typeof e!="function")throw new Error("clear() requires a callback argument");t=$te(this,t),t.reverse=!!t.reverse,t.limit="limit"in t?t.limit:-1,this._clear(t,e)};sr.prototype._clear=function(t,e){t.keys=!0,t.values=!1,t.keyAsBuffer=!0,t.valueAsBuffer=!0;let r=this._iterator(t),i={},n=s=>{if(s)return r.end(function(){e(s)});r.next((o,a)=>{if(o)return n(o);if(a===void 0)return r.end(e);this._del(a,i,n)})};n()};sr.prototype._setupIteratorOptions=function(t){return t=$te(this,t),t.reverse=!!t.reverse,t.keys=t.keys!==!1,t.values=t.values!==!1,t.limit="limit"in t?t.limit:-1,t.keyAsBuffer=t.keyAsBuffer!==!1,t.valueAsBuffer=t.valueAsBuffer!==!1,t};function $te(t,e){let r={};for(let i in e){if(!tNe.call(e,i))continue;if(i==="start"||i==="end")throw new Error('Legacy range options ("start" and "end") have been removed');let n=e[i];iNe(i)&&(n=t._serializeKey(n)),r[i]=n}return r}function iNe(t){return rNe.indexOf(t)!==-1}sr.prototype.iterator=function(t){return(typeof t!="object"||t===null)&&(t={}),t=this._setupIteratorOptions(t),this._iterator(t)};sr.prototype._iterator=function(t){return new QBe(this)};sr.prototype._chainedBatch=function(){return new ZBe(this)};sr.prototype._serializeKey=function(t){return t};sr.prototype._serializeValue=function(t){return t};sr.prototype._checkKey=function(t){if(t==null)return new Error("key cannot be `null` or `undefined`");if(YBe(t)&&t.length===0)return new Error("key cannot be an empty Buffer");if(t==="")return new Error("key cannot be an empty String");if(Array.isArray(t)&&t.length===0)return new Error("key cannot be an empty Array")};sr.prototype._checkValue=function(t){if(t==null)return new Error("value cannot be `null` or `undefined`")};sr.prototype.isOperational=function(){return this.status==="open"||this._isOperational()};sr.prototype._isOperational=function(){return!1};sr.prototype._nextTick=y8();Gte.exports=sr;function nNe(t,e){return t.isOperational()?!1:(t._nextTick(e,new Error("Database is not open")),!0)}});var Iu=v(g8=>{l();"use strict";g8.AbstractLevelDOWN=Wte();g8.AbstractIterator=FI();g8.AbstractChainedBatch=KI()});var HI=v(Yte=>{l();"use strict";Yte.getCallback=function(t,e,r){let i=t[t.length-1];if(typeof i!="function"){let n=new Promise((s,o)=>{t.push(i=function(a,...c){a?o(a):s(r?r(...c):c[0])})});i[e]=n}return i}});var ere=v((L5t,Jte)=>{l();"use strict";var{AbstractIterator:Xte}=Iu(),sNe=on(),Qte=HI().getCallback,Zte=Symbol("options"),t1=Symbol("iterator"),r1=Symbol("operations"),m8=Symbol("promise");function Gd(t,e){Xte.call(this,t),this[Zte]=e,this[t1]=null,this[r1]=[]}sNe(Gd,Xte);Gd.prototype.setDb=function(t){this[t1]=t.iterator(this[Zte]);for(let e of this[r1].splice(0,this[r1].length))this[t1][e.method](...e.args)};Gd.prototype.next=function(...t){if(this.db.status==="open")return this[t1].next(...t);let e=Qte(t,m8,function(i,n){if(!(i===void 0&&n===void 0))return[i,n]});return this.db.status==="opening"?this[r1].push({method:"next",args:t}):this._nextTick(e,new Error("Database is not open")),e[m8]||this};Gd.prototype.seek=function(...t){if(this.db.status==="open")this[t1].seek(...t);else if(this.db.status==="opening")this[r1].push({method:"seek",args:t});else throw new Error("Database is not open")};Gd.prototype.end=function(...t){if(this.db.status==="open")return this[t1].end(...t);let e=Qte(t,m8);return this.db.status==="opening"?this[r1].push({method:"end",args:t}):this._nextTick(e,new Error("Database is not open")),e[m8]||this};for(let t of["next","seek","end"])Gd.prototype["_"+t]=function(){throw new Error("Did not expect private method to be called: "+t)};Jte.exports=Gd});var rre=v((j5t,tre)=>{l();"use strict";var{AbstractChainedBatch:oNe}=Iu(),um=Symbol("operations");tre.exports=class extends oNe{constructor(e){super(e);this[um]=[]}_put(e,r,i){this[um].push({...i,type:"put",key:e,value:r})}_del(e,r){this[um].push({...r,type:"del",key:e})}_clear(){this[um]=[]}_write(e,r){this.db.batch(this[um],e,r)}}});var are=v((U5t,$I)=>{l();"use strict";var{AbstractLevelDOWN:ire}=Iu(),aNe=on(),nre=ere(),cNe=rre(),uNe=HI().getCallback,sre=["put","get","getMany","del","batch","clear"],fNe=["approximateSize","compactRange"],pa=Symbol("innerDb"),i1=Symbol("operations"),ore=Symbol("promise");function Wd(t){ire.call(this,t.supports||{});for(let e of fNe)typeof t[e]=="function"&&!this.supports.additionalMethods[e]&&(this.supports.additionalMethods[e]=!0);this[pa]=t,this[i1]=[],lNe(this)}aNe(Wd,ire);Wd.prototype.type="deferred-leveldown";Object.defineProperty(Wd.prototype,"_db",{enumerable:!0,get(){return this[pa]}});Wd.prototype._open=function(t,e){let r=i=>{if(i||this[pa].status!=="open")return e(i||new Error("Database is not open"));let n=this[i1];this[i1]=[];for(let s of n)s.iterator?s.iterator.setDb(this[pa]):this[pa][s.method](...s.args);if(this[i1].length>0)throw new Error("Did not expect further operations");e()};this[pa].status==="new"||this[pa].status==="closed"?this[pa].open(t,r):this._nextTick(r)};Wd.prototype._close=function(t){this[pa].close(t)};Wd.prototype._isOperational=function(){return this.status==="opening"};function lNe(t){let e=Object.keys(t.supports.additionalMethods);for(let r of sre.concat(e))t[r]=function(...i){if(r==="batch"&&i.length===0)return new cNe(this);if(this.status==="open")return this[pa][r](...i);let n=uNe(i,ore);return this.status==="opening"?this[i1].push({method:r,args:i}):this._nextTick(n,new Error("Database is not open")),n[ore]};t.iterator=function(r){if(this.status==="open")return this[pa].iterator(r);if(this.status==="opening"){let i=new nre(this,r);return this[i1].push({iterator:i}),i}else throw new Error("Database is not open")};for(let r of sre.concat(["iterator"]))t["_"+r]=function(){throw new Error("Did not expect private method to be called: "+r)}}$I.exports=Wd;$I.exports.DeferredIterator=nre});var GI=v((F5t,cre)=>{l();cre.exports=vr().EventEmitter});var WI=v(()=>{l()});var dre=v((z5t,lre)=>{l();"use strict";function ure(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function dNe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ure(Object(r),!0).forEach(function(i){hNe(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ure(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function hNe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fre(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yNe(t,e,r){return e&&fre(t.prototype,e),r&&fre(t,r),t}var gNe=Yt(),b8=gNe.Buffer,mNe=WI(),YI=mNe.inspect,bNe=YI&&YI.custom||"inspect";function vNe(t,e,r){b8.prototype.copy.call(t,e,r)}lre.exports=function(){function t(){pNe(this,t),this.head=null,this.tail=null,this.length=0}return yNe(t,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return b8.alloc(0);for(var i=b8.allocUnsafe(r>>>0),n=this.head,s=0;n;)vNe(n.data,i,s),s+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,s=i.data;for(r-=s.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++n}return this.length-=n,s}},{key:"_getBuffer",value:function(r){var i=b8.allocUnsafe(r),n=this.head,s=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,a),r-=a,r===0){a===o.length?(++s,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++s}return this.length-=s,i}},{key:bNe,value:function(r,i){return YI(this,dNe({},i,{depth:0,customInspect:!1}))}}]),t}()});var QI=v((H5t,pre)=>{l();"use strict";function wNe(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(XI,this,t)):process.nextTick(XI,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(v8,r):(r._writableState.errorEmitted=!0,process.nextTick(hre,r,s)):process.nextTick(hre,r,s):e?(process.nextTick(v8,r),e(s)):process.nextTick(v8,r)}),this)}function hre(t,e){XI(t,e),v8(t)}function v8(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function _Ne(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function XI(t,e){t.emit("error",e)}function ENe(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}pre.exports={destroy:wNe,undestroy:_Ne,errorOrDestroy:ENe}});var Yd=v(($5t,mre)=>{l();"use strict";function SNe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var yre={};function mo(t,e,r){r||(r=Error);function i(s,o,a){return typeof e=="string"?e:e(s,o,a)}var n=function(s){SNe(o,s);function o(a,c,u){return s.call(this,i(a,c,u))||this}return o}(r);n.prototype.name=r.name,n.prototype.code=t,yre[t]=n}function gre(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(i){return String(i)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function xNe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function ANe(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function INe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}mo("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);mo("ERR_INVALID_ARG_TYPE",function(t,e,r){var i;typeof e=="string"&&xNe(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be";var n;if(ANe(t," argument"))n="The ".concat(t," ").concat(i," ").concat(gre(e,"type"));else{var s=INe(t,".")?"property":"argument";n='The "'.concat(t,'" ').concat(s," ").concat(i," ").concat(gre(e,"type"))}return n+=". Received type ".concat(typeof r),n},TypeError);mo("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");mo("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});mo("ERR_STREAM_PREMATURE_CLOSE","Premature close");mo("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});mo("ERR_MULTIPLE_CALLBACK","Callback called multiple times");mo("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");mo("ERR_STREAM_WRITE_AFTER_END","write after end");mo("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);mo("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);mo("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");mre.exports.codes=yre});var ZI=v((G5t,bre)=>{l();"use strict";var TNe=Yd().codes.ERR_INVALID_OPT_VALUE;function RNe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function PNe(t,e,r,i){var n=RNe(e,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var s=i?r:"highWaterMark";throw new TNe(s,n)}return Math.floor(n)}return t.objectMode?16:16*1024}bre.exports={getHighWaterMark:PNe}});var wre=v((W5t,vre)=>{l();vre.exports=CNe;function CNe(t,e){if(JI("noDeprecation"))return t;var r=!1;function i(){if(!r){if(JI("throwDeprecation"))throw new Error(e);JI("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return i}function JI(t){try{if(!globalThis.localStorage)return!1}catch(r){return!1}var e=globalThis.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var rT=v((Y5t,Ire)=>{l();"use strict";Ire.exports=ti;function _re(t){var e=this;this.next=null,this.entry=null,this.finish=function(){iMe(e,t)}}var n1;ti.WritableState=fm;var ONe={deprecate:wre()},Ere=GI(),w8=Yt().Buffer,kNe=globalThis.Uint8Array||function(){};function DNe(t){return w8.from(t)}function BNe(t){return w8.isBuffer(t)||t instanceof kNe}var eT=QI(),NNe=ZI(),MNe=NNe.getHighWaterMark,nl=Yd().codes,LNe=nl.ERR_INVALID_ARG_TYPE,qNe=nl.ERR_METHOD_NOT_IMPLEMENTED,jNe=nl.ERR_MULTIPLE_CALLBACK,UNe=nl.ERR_STREAM_CANNOT_PIPE,FNe=nl.ERR_STREAM_DESTROYED,KNe=nl.ERR_STREAM_NULL_VALUES,VNe=nl.ERR_STREAM_WRITE_AFTER_END,zNe=nl.ERR_UNKNOWN_ENCODING,s1=eT.errorOrDestroy;on()(ti,Ere);function HNe(){}function fm(t,e,r){n1=n1||Xd(),t=t||{},typeof r!="boolean"&&(r=e instanceof n1),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=MNe(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){ZNe(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _re(this)}fm.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(fm.prototype,"buffer",{get:ONe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}})();var _8;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_8=Function.prototype[Symbol.hasInstance],Object.defineProperty(ti,Symbol.hasInstance,{value:function(e){return _8.call(this,e)?!0:this!==ti?!1:e&&e._writableState instanceof fm}})):_8=function(e){return e instanceof this};function ti(t){n1=n1||Xd();var e=this instanceof n1;if(!e&&!_8.call(ti,this))return new ti(t);this._writableState=new fm(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Ere.call(this)}ti.prototype.pipe=function(){s1(this,new UNe)};function $Ne(t,e){var r=new VNe;s1(t,r),process.nextTick(e,r)}function GNe(t,e,r,i){var n;return r===null?n=new KNe:typeof r!="string"&&!e.objectMode&&(n=new LNe("chunk",["string","Buffer"],r)),n?(s1(t,n),process.nextTick(i,n),!1):!0}ti.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&BNe(t);return s&&!w8.isBuffer(t)&&(t=DNe(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=HNe),i.ending?$Ne(this,r):(s||GNe(this,i,t,r))&&(i.pendingcb++,n=YNe(this,i,s,t,e,r)),n};ti.prototype.cork=function(){this._writableState.corked++};ti.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&xre(this,t))};ti.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new zNe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ti.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function WNe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=w8.from(e,r)),e}Object.defineProperty(ti.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function YNe(t,e,r,i,n,s){if(!r){var o=WNe(e,i,n);i!==o&&(r=!0,n="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else tT(t,e,!1,a,i,n,s);return c}function tT(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new FNe("write")):r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function XNe(t,e,r,i,n){--e.pendingcb,r?(process.nextTick(n,i),process.nextTick(lm,t,e),t._writableState.errorEmitted=!0,s1(t,i)):(n(i),t._writableState.errorEmitted=!0,s1(t,i),lm(t,e))}function QNe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function ZNe(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new jNe;if(QNe(r),e)XNe(t,r,i,e,n);else{var s=Are(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&xre(t,r),i?process.nextTick(Sre,t,r,s,n):Sre(t,r,s,n)}}function Sre(t,e,r,i){r||JNe(t,e),e.pendingcb--,i(),lm(t,e)}function JNe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function xre(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,tT(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new _re(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,f=r.callback,d=e.objectMode?1:c.length;if(tT(t,e,!1,d,c,u,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ti.prototype._write=function(t,e,r){r(new qNe("_write()"))};ti.prototype._writev=null;ti.prototype.end=function(t,e,r){var i=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||rMe(this,i,r),this};Object.defineProperty(ti.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Are(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function eMe(t,e){t._final(function(r){e.pendingcb--,r&&s1(t,r),e.prefinished=!0,t.emit("prefinish"),lm(t,e)})}function tMe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(eMe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function lm(t,e){var r=Are(e);if(r&&(tMe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}function rMe(t,e,r){e.ending=!0,lm(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function iMe(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree.next=t}Object.defineProperty(ti.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});ti.prototype.destroy=eT.destroy;ti.prototype._undestroy=eT.undestroy;ti.prototype._destroy=function(t,e){e(t)}});var Xd=v((X5t,Rre)=>{l();"use strict";var nMe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Rre.exports=xc;var Tre=sT(),iT=rT();on()(xc,Tre);for(nT=nMe(iT.prototype),E8=0;E8<nT.length;E8++)S8=nT[E8],xc.prototype[S8]||(xc.prototype[S8]=iT.prototype[S8]);var nT,S8,E8;function xc(t){if(!(this instanceof xc))return new xc(t);Tre.call(this,t),iT.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",sMe)))}Object.defineProperty(xc.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(xc.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(xc.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function sMe(){this._writableState.ended||process.nextTick(oMe,this)}function oMe(t){t.end()}Object.defineProperty(xc.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var aT=v((oT,Cre)=>{l();var x8=Yt(),Ac=x8.Buffer;function Pre(t,e){for(var r in t)e[r]=t[r]}Ac.from&&Ac.alloc&&Ac.allocUnsafe&&Ac.allocUnsafeSlow?Cre.exports=x8:(Pre(x8,oT),oT.Buffer=Qd);function Qd(t,e,r){return Ac(t,e,r)}Qd.prototype=Object.create(Ac.prototype);Pre(Ac,Qd);Qd.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ac(t,e,r)};Qd.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=Ac(t);return e!==void 0?typeof r=="string"?i.fill(e,r):i.fill(e):i.fill(0),i};Qd.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ac(t)};Qd.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return x8.SlowBuffer(t)}});var fT=v(kre=>{l();"use strict";var cT=aT().Buffer,Ore=cT.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function aMe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function cMe(t){var e=aMe(t);if(typeof e!="string"&&(cT.isEncoding===Ore||!Ore(t)))throw new Error("Unknown encoding: "+t);return e||t}kre.StringDecoder=dm;function dm(t){this.encoding=cMe(t);var e;switch(this.encoding){case"utf16le":this.text=pMe,this.end=yMe,e=4;break;case"utf8":this.fillLast=lMe,e=4;break;case"base64":this.text=gMe,this.end=mMe,e=3;break;default:this.write=bMe,this.end=vMe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=cT.allocUnsafe(e)}dm.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};dm.prototype.end=hMe;dm.prototype.text=dMe;dm.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function uT(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function uMe(t,e,r){var i=e.length-1;if(i<r)return 0;var n=uT(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||n===-2?0:(n=uT(e[i]),n>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||n===-2?0:(n=uT(e[i]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function fMe(t,e,r){if((e[0]&192)!=128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!=128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!=128)return t.lastNeed=2,"\uFFFD"}}function lMe(t){var e=this.lastTotal-this.lastNeed,r=fMe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function dMe(t,e){var r=uMe(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function hMe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function pMe(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function yMe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function gMe(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function mMe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function bMe(t){return t.toString(this.encoding)}function vMe(t){return t&&t.length?this.write(t):""}});var A8=v((Z5t,Nre)=>{l();"use strict";var Dre=Yd().codes.ERR_STREAM_PREMATURE_CLOSE;function wMe(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}function _Me(){}function EMe(t){return t.setHeader&&typeof t.abort=="function"}function Bre(t,e,r){if(typeof e=="function")return Bre(t,null,e);e||(e={}),r=wMe(r||_Me);var i=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){n=!1,o=!0,i||r.call(t)},c=t._readableState&&t._readableState.endEmitted,u=function(){i=!1,c=!0,n||r.call(t)},f=function(y){r.call(t,y)},d=function(){var y;if(i&&!c)return(!t._readableState||!t._readableState.ended)&&(y=new Dre),r.call(t,y);if(n&&!o)return(!t._writableState||!t._writableState.ended)&&(y=new Dre),r.call(t,y)},h=function(){t.req.on("finish",a)};return EMe(t)?(t.on("complete",a),t.on("abort",d),t.req?h():t.on("request",h)):n&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",d),function(){t.removeListener("complete",a),t.removeListener("abort",d),t.removeListener("request",h),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",d)}}Nre.exports=Bre});var Lre=v((J5t,Mre)=>{l();"use strict";var I8;function sl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var SMe=A8(),ol=Symbol("lastResolve"),Zd=Symbol("lastReject"),hm=Symbol("error"),T8=Symbol("ended"),Jd=Symbol("lastPromise"),lT=Symbol("handlePromise"),eh=Symbol("stream");function al(t,e){return{value:t,done:e}}function xMe(t){var e=t[ol];if(e!==null){var r=t[eh].read();r!==null&&(t[Jd]=null,t[ol]=null,t[Zd]=null,e(al(r,!1)))}}function AMe(t){process.nextTick(xMe,t)}function IMe(t,e){return function(r,i){t.then(function(){if(e[T8]){r(al(void 0,!0));return}e[lT](r,i)},i)}}var TMe=Object.getPrototypeOf(function(){}),RMe=Object.setPrototypeOf((I8={get stream(){return this[eh]},next:function(){var e=this,r=this[hm];if(r!==null)return Promise.reject(r);if(this[T8])return Promise.resolve(al(void 0,!0));if(this[eh].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[hm]?a(e[hm]):o(al(void 0,!0))})});var i=this[Jd],n;if(i)n=new Promise(IMe(i,this));else{var s=this[eh].read();if(s!==null)return Promise.resolve(al(s,!1));n=new Promise(this[lT])}return this[Jd]=n,n}},sl(I8,Symbol.asyncIterator,function(){return this}),sl(I8,"return",function(){var e=this;return new Promise(function(r,i){e[eh].destroy(null,function(n){if(n){i(n);return}r(al(void 0,!0))})})}),I8),TMe),PMe=function(e){var r,i=Object.create(RMe,(r={},sl(r,eh,{value:e,writable:!0}),sl(r,ol,{value:null,writable:!0}),sl(r,Zd,{value:null,writable:!0}),sl(r,hm,{value:null,writable:!0}),sl(r,T8,{value:e._readableState.endEmitted,writable:!0}),sl(r,lT,{value:function(s,o){var a=i[eh].read();a?(i[Jd]=null,i[ol]=null,i[Zd]=null,s(al(a,!1))):(i[ol]=s,i[Zd]=o)},writable:!0}),r));return i[Jd]=null,SMe(e,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=i[Zd];s!==null&&(i[Jd]=null,i[ol]=null,i[Zd]=null,s(n)),i[hm]=n;return}var o=i[ol];o!==null&&(i[Jd]=null,i[ol]=null,i[Zd]=null,o(al(void 0,!0))),i[T8]=!0}),e.on("readable",AMe.bind(null,i)),i};Mre.exports=PMe});var jre=v((e8t,qre)=>{l();qre.exports=function(){throw new Error("Readable.from is not available in the browser")}});var sT=v((r8t,Yre)=>{l();"use strict";Yre.exports=Kt;var o1;Kt.ReadableState=Fre;var t8t=vr().EventEmitter,Ure=function(e,r){return e.listeners(r).length},pm=GI(),R8=Yt().Buffer,CMe=globalThis.Uint8Array||function(){};function OMe(t){return R8.from(t)}function kMe(t){return R8.isBuffer(t)||t instanceof CMe}var dT=WI(),wt;dT&&dT.debuglog?wt=dT.debuglog("stream"):wt=function(){};var DMe=dre(),hT=QI(),BMe=ZI(),NMe=BMe.getHighWaterMark,P8=Yd().codes,MMe=P8.ERR_INVALID_ARG_TYPE,LMe=P8.ERR_STREAM_PUSH_AFTER_EOF,qMe=P8.ERR_METHOD_NOT_IMPLEMENTED,jMe=P8.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,a1,pT,yT;on()(Kt,pm);var ym=hT.errorOrDestroy,gT=["error","close","destroy","pause","resume"];function UMe(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Fre(t,e,r){o1=o1||Xd(),t=t||{},typeof r!="boolean"&&(r=e instanceof o1),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=NMe(this,t,"readableHighWaterMark",r),this.buffer=new DMe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a1||(a1=fT().StringDecoder),this.decoder=new a1(t.encoding),this.encoding=t.encoding)}function Kt(t){if(o1=o1||Xd(),!(this instanceof Kt))return new Kt(t);var e=this instanceof o1;this._readableState=new Fre(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),pm.call(this)}Object.defineProperty(Kt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});Kt.prototype.destroy=hT.destroy;Kt.prototype._undestroy=hT.undestroy;Kt.prototype._destroy=function(t,e){e(t)};Kt.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=R8.from(t,e),e=""),i=!0),Kre(this,t,e,!1,i)};Kt.prototype.unshift=function(t){return Kre(this,t,null,!0,!1)};function Kre(t,e,r,i,n){wt("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,VMe(t,s);else{var o;if(n||(o=FMe(s,e)),o)ym(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==R8.prototype&&(e=OMe(e)),i)s.endEmitted?ym(t,new jMe):mT(t,s,e,!0);else if(s.ended)ym(t,new LMe);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?mT(t,s,e,!1):bT(t,s)):mT(t,s,e,!1)}else i||(s.reading=!1,bT(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function mT(t,e,r,i){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&C8(t)),bT(t,e)}function FMe(t,e){var r;return!kMe(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new MMe("chunk",["string","Buffer","Uint8Array"],e)),r}Kt.prototype.isPaused=function(){return this._readableState.flowing===!1};Kt.prototype.setEncoding=function(t){a1||(a1=fT().StringDecoder);var e=new a1(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var Vre=1073741824;function KMe(t){return t>=Vre?t=Vre:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function zre(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=KMe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Kt.prototype.read=function(t){wt("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return wt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?wT(this):C8(this),null;if(t=zre(t,e),t===0&&e.ended)return e.length===0&&wT(this),null;var i=e.needReadable;wt("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,wt("length less than watermark",i)),e.ended||e.reading?(i=!1,wt("reading or ended",i)):i&&(wt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=zre(r,e)));var n;return t>0?n=Gre(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&wT(this)),n!==null&&this.emit("data",n),n};function VMe(t,e){if(wt("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?C8(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Hre(t)))}}function C8(t){var e=t._readableState;wt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(wt("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(Hre,t))}function Hre(t){var e=t._readableState;wt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,vT(t)}function bT(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(zMe,t,e))}function zMe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(wt("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Kt.prototype._read=function(t){ym(this,new qMe("_read()"))};Kt.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,wt("pipe count=%d opts=%j",i.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=n?a:m;i.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(w,b){wt("onunpipe"),w===r&&b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,f())}function a(){wt("onend"),t.end()}var c=HMe(r);t.on("drain",c);var u=!1;function f(){wt("cleanup"),t.removeListener("close",p),t.removeListener("finish",y),t.removeListener("drain",c),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",d),u=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}r.on("data",d);function d(w){wt("ondata");var b=t.write(w);wt("dest.write",b),b===!1&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&Wre(i.pipes,t)!==-1)&&!u&&(wt("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(w){wt("onerror",w),m(),t.removeListener("error",h),Ure(t,"error")===0&&ym(t,w)}UMe(t,"error",h);function p(){t.removeListener("finish",y),m()}t.once("close",p);function y(){wt("onfinish"),t.removeListener("close",p),m()}t.once("finish",y);function m(){wt("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(wt("pipe resume"),r.resume()),t};function HMe(t){return function(){var r=t._readableState;wt("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Ure(t,"data")&&(r.flowing=!0,vT(t))}}Kt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Wre(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Kt.prototype.on=function(t,e){var r=pm.prototype.on.call(this,t,e),i=this._readableState;return t==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):t==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,wt("on readable",i.length,i.reading),i.length?C8(this):i.reading||process.nextTick($Me,this)),r};Kt.prototype.addListener=Kt.prototype.on;Kt.prototype.removeListener=function(t,e){var r=pm.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick($re,this),r};Kt.prototype.removeAllListeners=function(t){var e=pm.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick($re,this),e};function $re(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function $Me(t){wt("readable nexttick read 0"),t.read(0)}Kt.prototype.resume=function(){var t=this._readableState;return t.flowing||(wt("resume"),t.flowing=!t.readableListening,GMe(this,t)),t.paused=!1,this};function GMe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(WMe,t,e))}function WMe(t,e){wt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),vT(t),e.flowing&&!e.reading&&t.read(0)}Kt.prototype.pause=function(){return wt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(wt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function vT(t){var e=t._readableState;for(wt("flow",e.flowing);e.flowing&&t.read()!==null;);}Kt.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;t.on("end",function(){if(wt("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(wt("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(i=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(a){return function(){return t[a].apply(t,arguments)}}(n));for(var s=0;s<gT.length;s++)t.on(gT[s],this.emit.bind(this,gT[s]));return this._read=function(o){wt("wrapped _read",o),i&&(i=!1,t.resume())},this};typeof Symbol=="function"&&(Kt.prototype[Symbol.asyncIterator]=function(){return pT===void 0&&(pT=Lre()),pT(this)});Object.defineProperty(Kt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Kt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Kt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Kt._fromList=Gre;Object.defineProperty(Kt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Gre(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function wT(t){var e=t._readableState;wt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(YMe,e,t))}function YMe(t,e){if(wt("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Kt.from=function(t,e){return yT===void 0&&(yT=jre()),yT(Kt,t,e)});function Wre(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}});var _T=v((i8t,Qre)=>{l();"use strict";Qre.exports=Tu;var O8=Yd().codes,XMe=O8.ERR_METHOD_NOT_IMPLEMENTED,QMe=O8.ERR_MULTIPLE_CALLBACK,ZMe=O8.ERR_TRANSFORM_ALREADY_TRANSFORMING,JMe=O8.ERR_TRANSFORM_WITH_LENGTH_0,k8=Xd();on()(Tu,k8);function eLe(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new QMe);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function Tu(t){if(!(this instanceof Tu))return new Tu(t);k8.call(this,t),this._transformState={afterTransform:eLe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",tLe)}function tLe(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Xre(t,e,r)}):Xre(this,null,null)}Tu.prototype.push=function(t,e){return this._transformState.needTransform=!1,k8.prototype.push.call(this,t,e)};Tu.prototype._transform=function(t,e,r){r(new XMe("_transform()"))};Tu.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};Tu.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Tu.prototype._destroy=function(t,e){k8.prototype._destroy.call(this,t,function(r){e(r)})};function Xre(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new JMe;if(t._transformState.transforming)throw new ZMe;return t.push(null)}});var eie=v((n8t,Jre)=>{l();"use strict";Jre.exports=gm;var Zre=_T();on()(gm,Zre);function gm(t){if(!(this instanceof gm))return new gm(t);Zre.call(this,t)}gm.prototype._transform=function(t,e,r){r(null,t)}});var sie=v((s8t,nie)=>{l();"use strict";var ET;function rLe(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var tie=Yd().codes,iLe=tie.ERR_MISSING_ARGS,nLe=tie.ERR_STREAM_DESTROYED;function rie(t){if(t)throw t}function sLe(t){return t.setHeader&&typeof t.abort=="function"}function oLe(t,e,r,i){i=rLe(i);var n=!1;t.on("close",function(){n=!0}),ET===void 0&&(ET=A8()),ET(t,{readable:e,writable:r},function(o){if(o)return i(o);n=!0,i()});var s=!1;return function(o){if(!n&&!s){if(s=!0,sLe(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();i(o||new nLe("pipe"))}}}function iie(t){t()}function aLe(t,e){return t.pipe(e)}function cLe(t){return!t.length||typeof t[t.length-1]!="function"?rie:t.pop()}function uLe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=cLe(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new iLe("streams");var n,s=e.map(function(o,a){var c=a<e.length-1,u=a>0;return oLe(o,c,u,function(f){n||(n=f),f&&s.forEach(iie),!c&&(s.forEach(iie),i(n))})});return e.reduce(aLe)}nie.exports=uLe});var ST=v((bo,oie)=>{l();bo=oie.exports=sT();bo.Stream=bo;bo.Readable=bo;bo.Writable=rT();bo.Duplex=Xd();bo.Transform=_T();bo.PassThrough=eie();bo.finished=A8();bo.pipeline=sie()});var uie=v((o8t,cie)=>{l();"use strict";var fLe=on(),{Readable:aie}=ST();cie.exports=c1;fLe(c1,aie);function c1(t,e){if(!(this instanceof c1))return new c1(t,e);e=e||{},aie.call(this,Object.assign({},e,{objectMode:!0})),this._iterator=t,this._options=e,this.on("end",this.destroy.bind(this,null,null))}c1.prototype._read=function(){this.destroyed||this._iterator.next((t,e,r)=>{if(!this.destroyed){if(t)return this.destroy(t);e===void 0&&r===void 0?this.push(null):this._options.keys!==!1&&this._options.values===!1?this.push(e):this._options.keys===!1&&this._options.values!==!1?this.push(r):this.push({key:e,value:r})}})};c1.prototype._destroy=function(t,e){this._iterator.end(function(r){e(t||r)})}});var B8=v((a8t,D8)=>{l();"use strict";function th(t,e){let r=function(i,n){if(typeof i=="object"&&i!==null&&(n=n||i,i=i.message||i.name),i=i||"",n=n||void 0,typeof n=="object"&&n.type===t&&n.message===i)return n;Object.defineProperty(this,"type",{value:t,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:t,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:n,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:i,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,r)};return r.prototype=new e,r}var rh=th("LevelUPError",Error);D8.exports={LevelUPError:rh,InitializationError:th("InitializationError",rh),OpenError:th("OpenError",rh),ReadError:th("ReadError",rh),WriteError:th("WriteError",rh),NotFoundError:th("NotFoundError",rh),EncodingError:th("EncodingError",rh)};D8.exports.NotFoundError.prototype.notFound=!0;D8.exports.NotFoundError.prototype.status=404});var mm=v(xT=>{l();"use strict";xT.getCallback=function(t,e){return typeof t=="function"?t:e};xT.getOptions=function(t){return typeof t=="object"&&t!==null?t:{}}});var lie=v((u8t,fie)=>{l();"use strict";var bm=B8().WriteError,lLe=p8(),dLe=mm().getCallback,hLe=mm().getOptions;function vm(t){this.db=t,this.batch=t.db.batch(),this.ops=[],this.length=0}vm.prototype.put=function(t,e,r){try{this.batch.put(t,e,r)}catch(i){throw new bm(i)}return this.ops.push({...r,type:"put",key:t,value:e}),this.length++,this};vm.prototype.del=function(t,e){try{this.batch.del(t,e)}catch(r){throw new bm(r)}return this.ops.push({...e,type:"del",key:t}),this.length++,this};vm.prototype.clear=function(){try{this.batch.clear()}catch(t){throw new bm(t)}return this.ops=[],this.length=0,this};vm.prototype.write=function(t,e){let r=this.db,i=this.ops;e=dLe(t,e),e=lLe.fromCallback(e),t=hLe(t);try{this.batch.write(t,function(n){if(n)return e(new bm(n));r.emit("batch",i),e()})}catch(n){throw new bm(n)}return e.promise};fie.exports=vm});var pie=v((f8t,hie)=>{l();"use strict";var die=cm();hie.exports=function(t,...e){e.length===0?die(t):die(()=>t(...e))}});var mie=v((l8t,gie)=>{l();"use strict";var N8=vr().EventEmitter,pLe=kte().inherits,yLe=are(),gLe=uie(),mLe=lie(),u1=B8(),bLe=qI(),ih=p8(),wm=mm().getCallback,f1=mm().getOptions,_m=pie(),M8=u1.WriteError,yie=u1.ReadError,vLe=u1.NotFoundError,wLe=u1.OpenError,_Le=u1.InitializationError;function Zt(t,e,r){if(!(this instanceof Zt))return new Zt(t,e,r);let i;if(N8.call(this),this.setMaxListeners(1/0),typeof e=="function"&&(r=e,e={}),e=e||{},!t||typeof t!="object"){if(i=new _Le("First argument must be an abstract-leveldown compliant store"),typeof r=="function")return _m(r,i);throw i}if(typeof t.status!="string")throw new Error(".status required, old abstract-leveldown");this.options=f1(e),this._db=t,this.db=null,this.open(r||(n=>{n&&this.emit("error",n)})),this.supports=bLe(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(let n of Object.keys(this.supports.additionalMethods))this[n]==null&&(this[n]=function(...s){return this.db[n](...s)})}Zt.prototype.emit=N8.prototype.emit;Zt.prototype.once=N8.prototype.once;pLe(Zt,N8);Object.defineProperty(Zt.prototype,"status",{enumerable:!0,get(){return this.db.status}});Zt.prototype.isOperational=function(){return this.db.status==="open"||this.db.status==="opening"};Zt.prototype.open=function(t,e){return typeof t=="function"&&(e=t,t=null),e=ih.fromCallback(e),t||(t=this.options),this.db&&this.isOpen()?(_m(e,null,this),e.promise):this.db&&this._isOpening()?(this.once("open",()=>{e(null,this)}),e.promise):(this.db=new yLe(this._db),this.emit("opening"),this.db.open(t,r=>{if(r)return e(new wLe(r));this.db=this._db,e(null,this),this.emit("open"),this.emit("ready")}),e.promise)};Zt.prototype.close=function(t){return t=ih.fromCallback(t),this.isOpen()?(this.db.close((e,...r)=>{this.emit("closed"),t(e,...r)}),this.emit("closing")):this.isClosed()?_m(t):this.db.status==="closing"?this.once("closed",t):this._isOpening()&&this.once("open",()=>{this.close(t)}),t.promise};Zt.prototype.isOpen=function(){return this.db.status==="open"};Zt.prototype._isOpening=function(){return this.db.status==="opening"};Zt.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)};Zt.prototype.get=function(t,e,r){return r=wm(e,r),r=ih.fromCallback(r),Em(this,r)||(e=f1(e),this.db.get(t,e,function(i,n){if(i)return/notfound/i.test(i)||i.notFound?i=new vLe("Key not found in database ["+t+"]",i):i=new yie(i),r(i);r(null,n)})),r.promise};Zt.prototype.getMany=function(t,e,r){return this.db.getMany(t,e,r)};Zt.prototype.put=function(t,e,r,i){return i=wm(r,i),i=ih.fromCallback(i),Em(this,i)||(r=f1(r),this.db.put(t,e,r,n=>{if(n)return i(new M8(n));this.emit("put",t,e),i()})),i.promise};Zt.prototype.del=function(t,e,r){return r=wm(e,r),r=ih.fromCallback(r),Em(this,r)||(e=f1(e),this.db.del(t,e,i=>{if(i)return r(new M8(i));this.emit("del",t),r()})),r.promise};Zt.prototype.batch=function(t,e,r){return arguments.length?(typeof t=="function"?r=t:r=wm(e,r),r=ih.fromCallback(r),Em(this,r)||(e=f1(e),this.db.batch(t,e,i=>{if(i)return r(new M8(i));this.emit("batch",t),r()})),r.promise):new mLe(this)};Zt.prototype.iterator=function(t){return this.db.iterator(t)};Zt.prototype.clear=function(t,e){return e=wm(t,e),t=f1(t),e=ih.fromCallback(e),Em(this,e)||this.db.clear(t,r=>{if(r)return e(new M8(r));this.emit("clear",t),e()}),e.promise};Zt.prototype.readStream=Zt.prototype.createReadStream=function(t){return t=Object.assign({keys:!0,values:!0},t),typeof t.limit!="number"&&(t.limit=-1),new gLe(this.db.iterator(t),t)};Zt.prototype.keyStream=Zt.prototype.createKeyStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!0,values:!1}))};Zt.prototype.valueStream=Zt.prototype.createValueStream=function(t){return this.createReadStream(Object.assign({},t,{keys:!1,values:!0}))};Zt.prototype.toString=function(){return"LevelUP"};Zt.prototype.type="levelup";Zt.prototype._nextTick=_m;function Em(t,e){return t.isOperational()?!1:(_m(e,new yie("Database is not open")),!0)}Zt.errors=u1;gie.exports=Zt});var bie=v(Ru=>{l();"use strict";var{Buffer:AT}=Yt();Ru.utf8=Ru["utf-8"]={encode:function(t){return IT(t)?t:String(t)},decode:L8,buffer:!1,type:"utf8"};Ru.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"};Ru.binary={encode:function(t){return IT(t)?t:AT.from(t)},decode:L8,buffer:!0,type:"binary"};Ru.none={encode:L8,decode:L8,buffer:!1,type:"id"};Ru.id=Ru.none;var ELe=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];for(let t of ELe)Ru[t]={encode:function(e){return IT(e)?e:AT.from(e,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t};function L8(t){return t}function IT(t){return t==null||AT.isBuffer(t)}});var wie=v((h8t,vie)=>{l();"use strict";var TT=bie(),SLe=new Set(["lt","gt","lte","gte"]);vie.exports=Hn;function Hn(t){if(!(this instanceof Hn))return new Hn(t);this.opts=t||{},this.encodings=TT}Hn.prototype._encoding=function(t){return typeof t=="string"&&(t=TT[t]),t||(t=TT.id),t};Hn.prototype._keyEncoding=function(t,e){return this._encoding(e&&e.keyEncoding||t&&t.keyEncoding||this.opts.keyEncoding)};Hn.prototype._valueEncoding=function(t,e){return this._encoding(e&&(e.valueEncoding||e.encoding)||t&&(t.valueEncoding||t.encoding)||this.opts.valueEncoding||this.opts.encoding)};Hn.prototype.encodeKey=function(t,e,r){return this._keyEncoding(e,r).encode(t)};Hn.prototype.encodeValue=function(t,e,r){return this._valueEncoding(e,r).encode(t)};Hn.prototype.decodeKey=function(t,e){return this._keyEncoding(e).decode(t)};Hn.prototype.decodeValue=function(t,e){return this._valueEncoding(e).decode(t)};Hn.prototype.encodeBatch=function(t,e){return t.map(r=>{let i={type:r.type,key:this.encodeKey(r.key,e,r)};return this.keyAsBuffer(e,r)&&(i.keyEncoding="binary"),r.prefix&&(i.prefix=r.prefix),"value"in r&&(i.value=this.encodeValue(r.value,e,r),this.valueAsBuffer(e,r)&&(i.valueEncoding="binary")),i})};Hn.prototype.encodeLtgt=function(t){let e={};for(let r of Object.keys(t)){if(r==="start"||r==="end")throw new Error('Legacy range options ("start" and "end") have been removed');e[r]=SLe.has(r)?this.encodeKey(t[r],t):t[r]}return e};Hn.prototype.createStreamDecoder=function(t){return t.keys&&t.values?(e,r)=>({key:this.decodeKey(e,t),value:this.decodeValue(r,t)}):t.keys?e=>this.decodeKey(e,t):t.values?(e,r)=>this.decodeValue(r,t):function(){}};Hn.prototype.keyAsBuffer=function(t){return this._keyEncoding(t).buffer};Hn.prototype.valueAsBuffer=function(t){return this._valueEncoding(t).buffer}});var Aie=v((p8t,xie)=>{l();"use strict";var _ie=Iu().AbstractLevelDOWN,Eie=Iu().AbstractChainedBatch,Sie=Iu().AbstractIterator,RT=on(),xLe=wie(),PT=B8().EncodingError,ALe=["approximateSize","compactRange"];xie.exports=dn;function dn(t,e){if(!(this instanceof dn))return new dn(t,e);let r=t.supports||{},i=r.additionalMethods||{};_ie.call(this,r),this.supports.encodings=!0,this.supports.additionalMethods={},ALe.forEach(function(n){let s=typeof t[n]=="function";(i[n]||s)&&(this.supports.additionalMethods[n]=!0,this[n]=function(o,a,c,u){return o=this.codec.encodeKey(o,c),a=this.codec.encodeKey(a,c),this.db[n](o,a,c,u)})},this),e=e||{},typeof e.keyEncoding=="undefined"&&(e.keyEncoding="utf8"),typeof e.valueEncoding=="undefined"&&(e.valueEncoding="utf8"),this.db=t,this.codec=new xLe(e)}RT(dn,_ie);dn.prototype.type="encoding-down";dn.prototype._serializeKey=dn.prototype._serializeValue=function(t){return t};dn.prototype._open=function(t,e){this.db.open(t,e)};dn.prototype._close=function(t){this.db.close(t)};dn.prototype._put=function(t,e,r,i){t=this.codec.encodeKey(t,r),e=this.codec.encodeValue(e,r),this.db.put(t,e,r,i)};dn.prototype._get=function(t,e,r){t=this.codec.encodeKey(t,e),e.asBuffer=this.codec.valueAsBuffer(e),this.db.get(t,e,(i,n)=>{if(i)return r(i);try{n=this.codec.decodeValue(n,e)}catch(s){return r(new PT(s))}r(null,n)})};dn.prototype._getMany=function(t,e,r){t=t.map(i=>this.codec.encodeKey(i,e)),e.asBuffer=this.codec.valueAsBuffer(e),this.db.getMany(t,e,(i,n)=>{if(i)return r(i);let s=new Array(n.length);for(let o=0;o<n.length;o++){if(n[o]===void 0){s[o]=void 0;continue}try{s[o]=this.codec.decodeValue(n[o],e)}catch(a){return r(new PT(a))}}r(null,s)})};dn.prototype._del=function(t,e,r){t=this.codec.encodeKey(t,e),this.db.del(t,e,r)};dn.prototype._chainedBatch=function(){return new l1(this)};dn.prototype._batch=function(t,e,r){t=this.codec.encodeBatch(t,e),this.db.batch(t,e,r)};dn.prototype._iterator=function(t){return t.keyAsBuffer=this.codec.keyAsBuffer(t),t.valueAsBuffer=this.codec.valueAsBuffer(t),new Sm(this,t)};dn.prototype._clear=function(t,e){t=this.codec.encodeLtgt(t),this.db.clear(t,e)};function Sm(t,e){Sie.call(this,t),this.codec=t.codec,this.keys=e.keys,this.values=e.values,this.opts=this.codec.encodeLtgt(e),this.it=t.db.iterator(this.opts)}RT(Sm,Sie);Sm.prototype._next=function(t){this.it.next((e,r,i)=>{if(e)return t(e);try{this.keys&&typeof r!="undefined"?r=this.codec.decodeKey(r,this.opts):r=void 0,this.values&&typeof i!="undefined"?i=this.codec.decodeValue(i,this.opts):i=void 0}catch(n){return t(new PT(n))}t(null,r,i)})};Sm.prototype._seek=function(t){t=this.codec.encodeKey(t,this.opts),this.it.seek(t)};Sm.prototype._end=function(t){this.it.end(t)};function l1(t,e){Eie.call(this,t),this.codec=t.codec,this.batch=t.db.batch()}RT(l1,Eie);l1.prototype._put=function(t,e,r){t=this.codec.encodeKey(t,r),e=this.codec.encodeValue(e,r),this.batch.put(t,e)};l1.prototype._del=function(t,e){t=this.codec.encodeKey(t,e),this.batch.del(t)};l1.prototype._clear=function(){this.batch.clear()};l1.prototype._write=function(t,e){this.batch.write(t,e)}});var Rie=v((y8t,Tie)=>{l();"use strict";var Iie=mie(),ILe=Aie();function TLe(t){function e(i,n,s){return typeof i=="function"?s=i:typeof n=="function"&&(s=n),r(n)||(n=r(i)?i:{}),Iie(ILe(t(i,n),n),n,s)}function r(i){return typeof i=="object"&&i!==null}for(let i of["destroy","repair"])typeof t[i]=="function"&&(e[i]=function(...n){t[i](...n)});return e.errors=Iie.errors,e}Tie.exports=TLe});var Cie=v((g8t,Pie)=>{l();Pie.exports=PLe;var RLe=cm();function PLe(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let i,n,s,o,a,c=!0,u;Array.isArray(t)?(i=[],s=n=t.length):(o=Object.keys(t),i={},s=n=o.length);function f(h){function p(){r&&r(h,i),r=null}c?RLe(p):p()}function d(h,p,y){if(i[h]=y,p&&(a=!0),--s==0||p)f(p);else if(!a&&u<n){let m;o?(m=o[u],u+=1,t[m](function(w,b){d(m,w,b)})):(m=u,u+=1,t[m](function(w,b){d(m,w,b)}))}}u=e,s?o?o.some(function(h,p){return t[h](function(y,m){d(h,y,m)}),p===e-1}):t.some(function(h,p){return h(function(y,m){d(p,y,m)}),p===e-1}):f(null),c=!1}});var kie=v(hi=>{l();hi.compare=function(t,e){if(Buffer.isBuffer(t)){for(var r=Math.min(t.length,e.length),i=0;i<r;i++){var n=t[i]-e[i];if(n)return n}return t.length-e.length}return t<e?-1:t>e?1:0};function Oie(t){return t!==void 0&&t!==""}function d1(t,e){return Object.hasOwnProperty.call(t,e)}function Ic(t,e){return Object.hasOwnProperty.call(t,e)&&e}var CLe=hi.lowerBoundKey=function(t){return Ic(t,"gt")||Ic(t,"gte")||Ic(t,"min")||(t.reverse?Ic(t,"end"):Ic(t,"start"))||void 0},CT=hi.lowerBound=function(t,e){var r=CLe(t);return r?t[r]:e},OT=hi.lowerBoundInclusive=function(t){return!d1(t,"gt")},kT=hi.upperBoundInclusive=function(t){return!d1(t,"lt")},OLe=hi.lowerBoundExclusive=function(t){return!OT(t)},kLe=hi.upperBoundExclusive=function(t){return!kT(t)},DLe=hi.upperBoundKey=function(t){return Ic(t,"lt")||Ic(t,"lte")||Ic(t,"max")||(t.reverse?Ic(t,"start"):Ic(t,"end"))||void 0},DT=hi.upperBound=function(t,e){var r=DLe(t);return r?t[r]:e};hi.start=function(t,e){return t.reverse?DT(t,e):CT(t,e)};hi.end=function(t,e){return t.reverse?CT(t,e):DT(t,e)};hi.startInclusive=function(t){return t.reverse?kT(t):OT(t)};hi.endInclusive=function(t){return t.reverse?OT(t):kT(t)};function BLe(t){return t}hi.toLtgt=function(t,e,r,i,n){e=e||{},r=r||BLe;var s=arguments.length>3,o=hi.lowerBoundKey(t),a=hi.upperBoundKey(t);return o?o==="gt"?e.gt=r(t.gt,!1):e.gte=r(t[o],!1):s&&(e.gte=r(i,!1)),a?a==="lt"?e.lt=r(t.lt,!0):e.lte=r(t[a],!0):s&&(e.lte=r(n,!0)),t.reverse!=null&&(e.reverse=!!t.reverse),d1(e,"max")&&delete e.max,d1(e,"min")&&delete e.min,d1(e,"start")&&delete e.start,d1(e,"end")&&delete e.end,e};hi.contains=function(t,e,r){r=r||hi.compare;var i=CT(t);if(Oie(i)){var n=r(e,i);if(n<0||n===0&&OLe(t))return!1}var s=DT(t);if(Oie(s)){var n=r(e,s);if(n>0||n===0&&kLe(t))return!1}return!0};hi.filter=function(t,e){return function(r){return hi.contains(t,r,e)}}});var BT=v((b8t,Die)=>{l();"use strict";var q8=kie(),cl=Symbol("none");Die.exports=function(e){let r=q8.lowerBound(e,cl),i=q8.upperBound(e,cl),n=q8.lowerBoundExclusive(e,cl),s=q8.upperBoundExclusive(e,cl);return r!==cl&&i!==cl?IDBKeyRange.bound(r,i,n,s):r!==cl?IDBKeyRange.lowerBound(r,n):i!==cl?IDBKeyRange.upperBound(i,s):null}});var NT=v((v8t,Nie)=>{l();"use strict";var j8=Yt().Buffer,NLe=function(){if(globalThis.TextDecoder){let t=new TextDecoder("utf-8");return t.decode.bind(t)}else return function(e){return Bie(e).toString()}}(),MLe=function(){if(globalThis.TextDecoder){let t=new TextDecoder("utf-8");return t.decode.bind(t)}else return function(e){return j8.from(e).toString()}}();function Bie(t){let e=j8.from(t.buffer);return t.byteLength===t.buffer.byteLength?e:e.slice(t.byteOffset,t.byteOffset+t.byteLength)}Nie.exports=function(t,e){return t instanceof Uint8Array?e?Bie(t):NLe(t):t instanceof ArrayBuffer?e?j8.from(t):MLe(t):e?j8.from(String(t)):String(t)}});var jie=v((w8t,qie)=>{l();"use strict";var LLe=on(),Mie=Iu().AbstractIterator,qLe=BT(),Lie=NT(),jLe=function(){};qie.exports=ya;function ya(t,e,r){if(Mie.call(this,t),this._limit=r.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=r.keys,this._values=r.values,this._keyAsBuffer=r.keyAsBuffer,this._valueAsBuffer=r.valueAsBuffer,this._limit===0){this._completed=!0;return}let i;try{i=qLe(r)}catch(n){this._completed=!0;return}this.createIterator(e,i,r.reverse)}LLe(ya,Mie);ya.prototype.createIterator=function(t,e,r){let i=this.db.db.transaction([t],"readonly"),s=i.objectStore(t).openCursor(e,r?"prev":"next");s.onsuccess=o=>{let a=o.target.result;a&&this.onItem(a)},this._transaction=i,i.onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},i.oncomplete=()=>{this.onComplete()}};ya.prototype.onItem=function(t){this._cache.push(t.key,t.value),(this._limit<=0||++this._count<this._limit)&&t.continue(),this.maybeNext()};ya.prototype.onAbort=function(t){this._aborted=!0,this._error=t,this.maybeNext()};ya.prototype.onComplete=function(){this._completed=!0,this.maybeNext()};ya.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)};ya.prototype._next=function(t){if(this._aborted){let e=this._error;this._error=null,this._nextTick(t,e)}else if(this._cache.length>0){let e=this._cache.shift(),r=this._cache.shift();this._keys&&e!==void 0?e=this._deserializeKey(e,this._keyAsBuffer):e=void 0,this._values&&r!==void 0?r=this._deserializeValue(r,this._valueAsBuffer):r=void 0,this._nextTick(t,null,e,r)}else this._completed?this._nextTick(t):this._callback=t};ya.prototype._deserializeKey=Lie;ya.prototype._deserializeValue=Lie;ya.prototype._end=function(t){if(this._aborted||this._completed)return this._nextTick(t,this._error);this.onItem=jLe,this.onAbort=t,this.onComplete=t}});var Kie=v((_8t,Fie)=>{l();"use strict";var Uie=Yt().Buffer,ULe=function(){if(globalThis.TextEncoder){let t=new TextEncoder("utf-8");return t.encode.bind(t)}else return Uie.from}();Fie.exports=function(t,e){return e?Uie.isBuffer(t)?t:ULe(String(t)):String(t)}});var Vie=v(U8=>{l();"use strict";var FLe=Yt().Buffer;U8.test=function(t){return function(r){try{return r.cmp(t,0),!0}catch(i){return!1}}};U8.bufferKeys=U8.test(FLe.alloc(0))});var Hie=v((S8t,zie)=>{l();"use strict";zie.exports=function(e,r,i,n,s){if(n.limit===0)return e._nextTick(s);let o=e.db.transaction([r],"readwrite"),a=o.objectStore(r),c=0;o.oncomplete=function(){s()},o.onabort=function(){s(o.error||new Error("aborted by user"))};let u=a.openKeyCursor?"openKeyCursor":"openCursor",f=n.reverse?"prev":"next";a[u](i,f).onsuccess=function(d){let h=d.target.result;h&&(a.delete(h.key).onsuccess=function(){(n.limit<=0||++c<n.limit)&&h.continue()})}}});var Xie=v((x8t,Yie)=>{l();"use strict";Yie.exports=_i;var $ie=Iu().AbstractLevelDOWN,KLe=on(),VLe=Cie(),zLe=jie(),Gie=Kie(),F8=NT(),HLe=Vie(),$Le=Hie(),GLe=BT(),Wie="level-js-";function _i(t,e){if(!(this instanceof _i))return new _i(t,e);if($ie.call(this,{bufferKeys:HLe.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),e=e||{},typeof t!="string")throw new Error("constructor requires a location string argument");this.location=t,this.prefix=e.prefix==null?Wie:e.prefix,this.version=parseInt(e.version||1,10)}KLe(_i,$ie);_i.prototype.type="level-js";_i.prototype._open=function(t,e){let r=indexedDB.open(this.prefix+this.location,this.version);r.onerror=function(){e(r.error||new Error("unknown error"))},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=i=>{let n=i.target.result;n.objectStoreNames.contains(this.location)||n.createObjectStore(this.location)}};_i.prototype.store=function(t){return this.db.transaction([this.location],t).objectStore(this.location)};_i.prototype.await=function(t,e){let r=t.transaction;r.onabort=function(){e(r.error||new Error("aborted by user"))},r.oncomplete=function(){e(null,t.result)}};_i.prototype._get=function(t,e,r){let i=this.store("readonly"),n;try{n=i.get(t)}catch(s){return this._nextTick(r,s)}this.await(n,function(s,o){if(s)return r(s);if(o===void 0)return r(new Error("NotFound"));r(null,F8(o,e.asBuffer))})};_i.prototype._getMany=function(t,e,r){let i=e.asBuffer,n=this.store("readonly"),s=t.map(o=>a=>{let c;try{c=n.get(o)}catch(u){return a(u)}c.onsuccess=()=>{let u=c.result;a(null,u===void 0?u:F8(u,i))},c.onerror=u=>{u.stopPropagation(),a(c.error)}});VLe(s,16,r)};_i.prototype._del=function(t,e,r){let i=this.store("readwrite"),n;try{n=i.delete(t)}catch(s){return this._nextTick(r,s)}this.await(n,r)};_i.prototype._put=function(t,e,r,i){let n=this.store("readwrite"),s;try{s=n.put(e,t)}catch(o){return this._nextTick(i,o)}this.await(s,i)};_i.prototype._serializeKey=function(t){return Gie(t,this.supports.bufferKeys)};_i.prototype._serializeValue=function(t){return Gie(t,!0)};_i.prototype._iterator=function(t){return new zLe(this,this.location,t)};_i.prototype._batch=function(t,e,r){if(t.length===0)return this._nextTick(r);let i=this.store("readwrite"),n=i.transaction,s=0,o;n.onabort=function(){r(o||n.error||new Error("aborted by user"))},n.oncomplete=function(){r()};function a(){let c=t[s++],u=c.key,f;try{f=c.type==="del"?i.delete(u):i.put(c.value,u)}catch(d){o=d,n.abort();return}s<t.length&&(f.onsuccess=a)}a()};_i.prototype._clear=function(t,e){let r,i;try{r=GLe(t)}catch(n){return this._nextTick(e)}if(t.limit>=0)return $Le(this,this.location,r,t,e);try{let n=this.store("readwrite");i=r?n.delete(r):n.clear()}catch(n){return this._nextTick(e,n)}this.await(i,e)};_i.prototype._close=function(t){this.db.close(),this._nextTick(t)};_i.prototype.upgrade=function(t){if(this.status!=="open")return this._nextTick(t,new Error("cannot upgrade() before open()"));let e=this.iterator(),r={},i=this;e._deserializeKey=e._deserializeValue=a,n();function n(c){if(c)return o(c);e.next(s)}function s(c,u,f){if(c||u===void 0)return o(c);let d=i._serializeKey(F8(u,!0)),h=i._serializeValue(F8(f,!0));i._batch([{type:"del",key:u},{type:"put",key:d,value:h}],r,n)}function o(c){e.end(function(u){t(c||u)})}function a(c){return c}};_i.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=Wie);let i=indexedDB.deleteDatabase(e+t);i.onsuccess=function(){r()},i.onerror=function(n){r(n)}}});var Zie=v((A8t,Qie)=>{l();Qie.exports=Rie()(Xie())});var ine=v((P8t,rne)=>{l();"use strict";function tne(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function YLe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return tne(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),tne(new n,r)}}rne.exports=YLe});var zT=v((z8t,une)=>{l();"use strict";function cne(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function ZLe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return cne(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),cne(new n,r)}}une.exports=ZLe});var HT=v((H8t,hne)=>{l();"use strict";var fne=()=>{},lne=Symbol.for("@libp2p/js-interfaces/topology"),dne=class{constructor({min:e=0,max:r=1/0,handlers:i={}}){this.min=e,this.max=r,this._onConnect=i.onConnect||fne,this._onDisconnect=i.onDisconnect||fne,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[lne](){return!0}static isTopology(e){return Boolean(e&&e[lne])}set registrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};hne.exports=dne});var K8=v(($8t,gne)=>{l();"use strict";var JLe=HT(),pne=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),yne=class extends JLe{constructor({min:e,max:r,multicodecs:i,handlers:n}){super({min:e,max:r,handlers:n});if(!i)throw new Error("one or more multicodec should be provided");if(!n)throw new Error("the handlers should be provided");if(typeof n.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof n.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(i)?i:[i],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[pne](){return!0}static isMulticodecTopology(e){return Boolean(e&&e[pne])}set registrar(e){this._registrar=e,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),this._updatePeers(this._registrar.peerStore.peers.values())}_updatePeers(e){for(let{id:r,protocols:i}of e)if(this.multicodecs.filter(n=>i.includes(n)).length){this.peers.add(r.toB58String());let n=this._registrar.getConnection(r);n&&this._onConnect(r,n)}else this.peers.delete(r.toB58String())}_onProtocolChange({peerId:e,protocols:r}){let i=this.peers.has(e.toB58String()),n=r.filter(s=>this.multicodecs.includes(s));i&&n.length===0&&this._onDisconnect(e);for(let s of r)if(this.multicodecs.includes(s)){let o=this._registrar.peerStore.get(e);this._updatePeers([o]);return}}_onPeerConnect(e){let r=e.remotePeer,i=this._registrar.peerStore.protoBook.get(r);!i||this.multicodecs.find(n=>i.includes(n))&&(this.peers.add(r.toB58String()),this._onConnect(r,e))}};gne.exports=yne});var V8=v(mne=>{l();"use strict";mne.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}});var GT=v((W8t,bne)=>{l();"use strict";var fl=Vi(),p1=fl.Reader,$T=fl.Writer,It=fl.util,Ni=fl.roots["libp2p-pubsub-rpc"]||(fl.roots["libp2p-pubsub-rpc"]={});Ni.RPC=function(){function t(e){if(this.subscriptions=[],this.msgs=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.subscriptions=It.emptyArray,t.prototype.msgs=It.emptyArray,t.encode=function(r,i){if(i||(i=$T.create()),r.subscriptions!=null&&r.subscriptions.length)for(var n=0;n<r.subscriptions.length;++n)Ni.RPC.SubOpts.encode(r.subscriptions[n],i.uint32(10).fork()).ldelim();if(r.msgs!=null&&r.msgs.length)for(var n=0;n<r.msgs.length;++n)Ni.RPC.Message.encode(r.msgs[n],i.uint32(18).fork()).ldelim();return i},t.decode=function(r,i){r instanceof p1||(r=p1.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Ni.RPC;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(Ni.RPC.SubOpts.decode(r,r.uint32()));break;case 2:s.msgs&&s.msgs.length||(s.msgs=[]),s.msgs.push(Ni.RPC.Message.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Ni.RPC)return r;var i=new Ni.RPC;if(r.subscriptions){if(!Array.isArray(r.subscriptions))throw TypeError(".RPC.subscriptions: array expected");i.subscriptions=[];for(var n=0;n<r.subscriptions.length;++n){if(typeof r.subscriptions[n]!="object")throw TypeError(".RPC.subscriptions: object expected");i.subscriptions[n]=Ni.RPC.SubOpts.fromObject(r.subscriptions[n])}}if(r.msgs){if(!Array.isArray(r.msgs))throw TypeError(".RPC.msgs: array expected");i.msgs=[];for(var n=0;n<r.msgs.length;++n){if(typeof r.msgs[n]!="object")throw TypeError(".RPC.msgs: object expected");i.msgs[n]=Ni.RPC.Message.fromObject(r.msgs[n])}}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.subscriptions=[],n.msgs=[]),r.subscriptions&&r.subscriptions.length){n.subscriptions=[];for(var s=0;s<r.subscriptions.length;++s)n.subscriptions[s]=Ni.RPC.SubOpts.toObject(r.subscriptions[s],i)}if(r.msgs&&r.msgs.length){n.msgs=[];for(var s=0;s<r.msgs.length;++s)n.msgs[s]=Ni.RPC.Message.toObject(r.msgs[s],i)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,fl.util.toJSONOptions)},t.SubOpts=function(){function e(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.subscribe=null,e.prototype.topicID=null;var r;return Object.defineProperty(e.prototype,"_subscribe",{get:It.oneOfGetter(r=["subscribe"]),set:It.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_topicID",{get:It.oneOfGetter(r=["topicID"]),set:It.oneOfSetter(r)}),e.encode=function(n,s){return s||(s=$T.create()),n.subscribe!=null&&Object.hasOwnProperty.call(n,"subscribe")&&s.uint32(8).bool(n.subscribe),n.topicID!=null&&Object.hasOwnProperty.call(n,"topicID")&&s.uint32(18).string(n.topicID),s},e.decode=function(n,s){n instanceof p1||(n=p1.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new Ni.RPC.SubOpts;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.subscribe=n.bool();break;case 2:a.topicID=n.string();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof Ni.RPC.SubOpts)return n;var s=new Ni.RPC.SubOpts;return n.subscribe!=null&&(s.subscribe=Boolean(n.subscribe)),n.topicID!=null&&(s.topicID=String(n.topicID)),s},e.toObject=function(n,s){s||(s={});var o={};return n.subscribe!=null&&n.hasOwnProperty("subscribe")&&(o.subscribe=n.subscribe,s.oneofs&&(o._subscribe="subscribe")),n.topicID!=null&&n.hasOwnProperty("topicID")&&(o.topicID=n.topicID,s.oneofs&&(o._topicID="topicID")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,fl.util.toJSONOptions)},e}(),t.Message=function(){function e(i){if(this.topicIDs=[],i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}e.prototype.from=null,e.prototype.data=null,e.prototype.seqno=null,e.prototype.topicIDs=It.emptyArray,e.prototype.signature=null,e.prototype.key=null;var r;return Object.defineProperty(e.prototype,"_from",{get:It.oneOfGetter(r=["from"]),set:It.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_data",{get:It.oneOfGetter(r=["data"]),set:It.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_seqno",{get:It.oneOfGetter(r=["seqno"]),set:It.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_signature",{get:It.oneOfGetter(r=["signature"]),set:It.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_key",{get:It.oneOfGetter(r=["key"]),set:It.oneOfSetter(r)}),e.encode=function(n,s){if(s||(s=$T.create()),n.from!=null&&Object.hasOwnProperty.call(n,"from")&&s.uint32(10).bytes(n.from),n.data!=null&&Object.hasOwnProperty.call(n,"data")&&s.uint32(18).bytes(n.data),n.seqno!=null&&Object.hasOwnProperty.call(n,"seqno")&&s.uint32(26).bytes(n.seqno),n.topicIDs!=null&&n.topicIDs.length)for(var o=0;o<n.topicIDs.length;++o)s.uint32(34).string(n.topicIDs[o]);return n.signature!=null&&Object.hasOwnProperty.call(n,"signature")&&s.uint32(42).bytes(n.signature),n.key!=null&&Object.hasOwnProperty.call(n,"key")&&s.uint32(50).bytes(n.key),s},e.decode=function(n,s){n instanceof p1||(n=p1.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new Ni.RPC.Message;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.from=n.bytes();break;case 2:a.data=n.bytes();break;case 3:a.seqno=n.bytes();break;case 4:a.topicIDs&&a.topicIDs.length||(a.topicIDs=[]),a.topicIDs.push(n.string());break;case 5:a.signature=n.bytes();break;case 6:a.key=n.bytes();break;default:n.skipType(c&7);break}}return a},e.fromObject=function(n){if(n instanceof Ni.RPC.Message)return n;var s=new Ni.RPC.Message;if(n.from!=null&&(typeof n.from=="string"?It.base64.decode(n.from,s.from=It.newBuffer(It.base64.length(n.from)),0):n.from.length&&(s.from=n.from)),n.data!=null&&(typeof n.data=="string"?It.base64.decode(n.data,s.data=It.newBuffer(It.base64.length(n.data)),0):n.data.length&&(s.data=n.data)),n.seqno!=null&&(typeof n.seqno=="string"?It.base64.decode(n.seqno,s.seqno=It.newBuffer(It.base64.length(n.seqno)),0):n.seqno.length&&(s.seqno=n.seqno)),n.topicIDs){if(!Array.isArray(n.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");s.topicIDs=[];for(var o=0;o<n.topicIDs.length;++o)s.topicIDs[o]=String(n.topicIDs[o])}return n.signature!=null&&(typeof n.signature=="string"?It.base64.decode(n.signature,s.signature=It.newBuffer(It.base64.length(n.signature)),0):n.signature.length&&(s.signature=n.signature)),n.key!=null&&(typeof n.key=="string"?It.base64.decode(n.key,s.key=It.newBuffer(It.base64.length(n.key)),0):n.key.length&&(s.key=n.key)),s},e.toObject=function(n,s){s||(s={});var o={};if((s.arrays||s.defaults)&&(o.topicIDs=[]),n.from!=null&&n.hasOwnProperty("from")&&(o.from=s.bytes===String?It.base64.encode(n.from,0,n.from.length):s.bytes===Array?Array.prototype.slice.call(n.from):n.from,s.oneofs&&(o._from="from")),n.data!=null&&n.hasOwnProperty("data")&&(o.data=s.bytes===String?It.base64.encode(n.data,0,n.data.length):s.bytes===Array?Array.prototype.slice.call(n.data):n.data,s.oneofs&&(o._data="data")),n.seqno!=null&&n.hasOwnProperty("seqno")&&(o.seqno=s.bytes===String?It.base64.encode(n.seqno,0,n.seqno.length):s.bytes===Array?Array.prototype.slice.call(n.seqno):n.seqno,s.oneofs&&(o._seqno="seqno")),n.topicIDs&&n.topicIDs.length){o.topicIDs=[];for(var a=0;a<n.topicIDs.length;++a)o.topicIDs[a]=n.topicIDs[a]}return n.signature!=null&&n.hasOwnProperty("signature")&&(o.signature=s.bytes===String?It.base64.encode(n.signature,0,n.signature.length):s.bytes===Array?Array.prototype.slice.call(n.signature):n.signature,s.oneofs&&(o._signature="signature")),n.key!=null&&n.hasOwnProperty("key")&&(o.key=s.bytes===String?It.base64.encode(n.key,0,n.key.length):s.bytes===Array?Array.prototype.slice.call(n.key):n.key,s.oneofs&&(o._key="key")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,fl.util.toJSONOptions)},e}(),t}();bne.exports=Ni});var WT=v((Y8t,_ne)=>{l();"use strict";var vne=Ss(),{Buffer:eqe}=Yt(),wne=(t,e,r)=>{let i=vne.encode(t,e,r);return wne.bytes=vne.encode.bytes,e||eqe.from(i)};_ne.exports=wne});var Tne=v((X8t,z8)=>{l();"use strict";var{Buffer:Ene}=Yt(),Sne=Pn(),xne=WT(),YT=8,Ane=10*1024;function Ine(t){t=t||{};let e=Math.max(t.poolSize||Ane,t.minPoolSize||YT),r=t.lengthEncoder||xne;return async function*(n){let s=Ene.alloc(e),o=0;for await(let a of n){r(a.length,s,o);let c=s.slice(o,o+r.bytes);o+=r.bytes,s.length-o<YT&&(s=Ene.alloc(e),o=0),yield new Sne().append(c).append(a)}}}Ine.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||xne;return new Sne([r(t.length),t.slice()])};z8.exports=Ine;z8.exports.MIN_POOL_SIZE=YT;z8.exports.DEFAULT_POOL_SIZE=Ane});var XT=v((Q8t,Cne)=>{l();"use strict";var Rne=Ss(),{Buffer:tqe}=Yt(),rqe=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),Pne=t=>{let e=Rne.decode(tqe.isBuffer(t)?t:rqe(t));return Pne.bytes=Rne.decode.bytes,e};Cne.exports=Pne});var Bne=v((Z8t,H8)=>{l();"use strict";var{Buffer:iqe}=Yt(),QT=Pn(),nqe=XT(),One=8,kne=1024*1024*4,Dne=iqe.alloc(0),ll={LENGTH:"readLength",DATA:"readData"},sqe={[ll.LENGTH]:(t,e,r,i)=>{e=e.append(t);let n;try{n=i.lengthDecoder(e)}catch(s){if(e.length>i.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:ll.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(n>i.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(i.lengthDecoder.bytes),e=new QT,i.onLength&&i.onLength(n),n<=0?(i.onData&&i.onData(Dne),{mode:ll.LENGTH,chunk:t,buffer:e,data:Dne}):{mode:ll.DATA,chunk:t,buffer:e,state:{dataLength:n},data:void 0}},[ll.DATA]:(t,e,r,i)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:ll.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:n}=r,s=e.shallowSlice(0,n),o=e.length>n?e.shallowSlice(n):void 0;return e=new QT,i.onData&&i.onData(s),{mode:ll.LENGTH,chunk:o,buffer:e,state:void 0,data:s}}};function ZT(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||nqe,maxLengthLength:t.maxLengthLength||One,maxDataLength:t.maxDataLength||kne,onLength:t.onLength,onData:t.onData};return async function*(i){let n=new QT,s=ll.LENGTH,o;for await(let a of i){let c=a;for(;c;){let u=sqe[s](c,n,o,e);s=u.mode,c=u.chunk,n=u.buffer,o=u.state,u.data&&(yield u.data)}}if(n.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}ZT.fromReader=(t,e)=>{let r=1,i={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}};return ZT({...e||{},onLength:s=>{r=s}})(i)};H8.exports=ZT;H8.exports.MAX_LENGTH_LENGTH=One;H8.exports.MAX_DATA_LENGTH=kne});var Lne=v((J8t,Mne)=>{l();"use strict";var{Buffer:oqe}=Yt(),Nne=(t,e,r)=>(e=e||oqe.allocUnsafe(4),e.writeInt32BE(t,r),e);Nne.bytes=4;Mne.exports=Nne});var Une=v((evt,jne)=>{l();"use strict";var qne=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};qne.bytes=4;jne.exports=qne});var ga=v(oh=>{l();"use strict";oh.encode=Tne();oh.decode=Bne();oh.varintEncode=WT();oh.varintDecode=XT();oh.int32BEEncode=Lne();oh.int32BEDecode=Une()});var $8=v((rvt,Fne)=>{l();Fne.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var Vne=v((nvt,Kne)=>{l();Kne.exports=class extends Error{constructor(e,r){super(e||"The operation was aborted");this.type="aborted",this.code=r||"ABORT_ERR"}}});var Tc=v((svt,ah)=>{l();var aqe=$8(),JT=Vne(),zne=(t,e,r)=>eR(t,Array.isArray(e)?e:[{signal:e,options:r}]),eR=(t,e)=>{t=aqe(t),e=e.map(({signal:i,options:n})=>({signal:i,options:n||{}}));async function*r(){let i,n=()=>{i&&i()};for(let{signal:s}of e)s.addEventListener("abort",n);for(;;){let s;try{for(let{signal:a,options:c}of e)if(a.aborted){let{abortMessage:u,abortCode:f}=c;throw new JT(u,f)}let o=new Promise((a,c)=>{i=()=>{let{options:u}=e.find(({signal:h})=>h.aborted),{abortMessage:f,abortCode:d}=u;c(new JT(f,d))}});s=await Promise.race([o,t.next()]),i=null}catch(o){for(let{signal:u}of e)u.removeEventListener("abort",n);let a=e.find(({signal:u})=>u.aborted),c=o.type==="aborted"&&a;if(c&&a.options.onAbort&&await a.options.onAbort(t),typeof t.return=="function"&&await t.return(),c&&a.options.returnOnAbort)return;throw o}if(s.done)break;yield s.value}for(let{signal:s}of e)s.removeEventListener("abort",n)}return r()},Hne=(t,e,r)=>$ne(t,Array.isArray(e)?e:[{signal:e,options:r}]),$ne=(t,e)=>r=>t(eR(r,e)),cqe=(t,e,r)=>uqe(t,Array.isArray(e)?e:[{signal:e,options:r}]),uqe=(t,e)=>({sink:$ne(t.sink,e),source:eR(t.source,e)});ah.exports=zne;ah.exports.AbortError=JT;ah.exports.source=zne;ah.exports.sink=Hne;ah.exports.transform=Hne;ah.exports.duplex=cqe});var Zne=v((ovt,Qne)=>{l();"use strict";var Gne=Ee(),fqe=Object.assign(Gne("libp2p-pubsub:peer-streams"),{error:Gne("libp2p-pubsub:peer-streams:err")}),{EventEmitter:lqe}=vr(),Wne=ga(),dqe=lc(),{pipe:Yne}=Nr(),{source:hqe}=Tc(),pqe=E0().default,Xne=class extends lqe{constructor({id:e,protocol:r}){super();this.id=e,this.protocol=r,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new pqe,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(e){if(!this.outboundStream){let r=this.id.toB58String();throw new Error("No writable connection to "+r)}this.outboundStream.push(e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=hqe(Yne(this._rawInboundStream,Wne.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(e){let r=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=dqe({onEnd:i=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,i&&this.emit("close")}}),Yne(this.outboundStream,Wne.encode(),this._rawOutboundStream).catch(i=>{fqe.error(i)}),r||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}};Qne.exports=Xne});var ese=v(Jne=>{l();"use strict";var yqe={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};Jne.SignaturePolicy=yqe});var tR=v((cvt,ise)=>{l();"use strict";var gqe=My(),{toString:mqe}=(tt(),pr),{fromString:tse}=(dt(),bi),rse=it(),{sha256:bqe}=(mi(),zs),vqe=()=>gqe(8),wqe=(t,e)=>{let r;t instanceof Uint8Array?r=rse.createFromBytes(t).id:r=rse.parse(t).id;let i=new Uint8Array(r.length+e.length);return i.set(r,0),i.set(e,r.length),i},_qe=t=>bqe.encode(t),Eqe=(t,e)=>{let r;Array.isArray(e)?r=i=>e.indexOf(i)>-1:r=i=>e.has(i);for(let i of t)if(r(i))return!0;return!1},Sqe=t=>Array.isArray(t)?t:[t],xqe=(t,e)=>{let r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=mqe(t.from,"base58btc")),e&&(r.receivedFrom=e),r},Aqe=t=>{let e=Object.assign({},t);return typeof t.from=="string"&&(e.from=tse(t.from,"base58btc")),typeof t.data=="string"&&(e.data=tse(t.data)),e};ise.exports={randomSeqno:vqe,msgId:wqe,noSignMsgId:_qe,anyMatch:Eqe,ensureArray:Sqe,normalizeInRpcMessage:xqe,normalizeOutRpcMessage:Aqe}});var cse=v((uvt,ase)=>{l();"use strict";var rR=it(),{RPC:nse}=GT(),{concat:sse}=(bn(),Gs),{fromString:Iqe}=(dt(),bi),iR=Iqe("libp2p-pubsub:"),{normalizeOutRpcMessage:Tqe}=tR();async function Rqe(t,e){let r=sse([iR,nse.Message.encode(Tqe(e)).finish()]),i=await t.privKey.sign(r);return{...e,signature:i,key:t.pubKey.bytes}}async function Pqe(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");let e=sse([iR,nse.Message.encode({...t,from:rR.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await ose(t)).verify(e,t.signature)}async function ose(t){if(!t.from)throw new Error("Could not get the public key from the originator id");let e=rR.createFromB58String(t.from);if(t.key){let r=await rR.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}else{if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}}ase.exports={messagePublicKey:ose,signMessage:Rqe,SignPrefix:iR,verifySignature:Pqe}});var dse=v((fvt,lse)=>{l();"use strict";var use=Ee(),{EventEmitter:Cqe}=vr(),ls=zT(),{pipe:Oqe}=Nr(),{default:kqe}=Fa(),Dqe=K8(),{codes:ma}=V8(),{RPC:fse}=GT(),Bqe=Zne(),{SignaturePolicy:Cu}=ese(),dl=tR(),{signMessage:Nqe,verifySignature:Mqe}=cse(),G8=class extends Cqe{constructor({debugName:e,multicodecs:r,libp2p:i,globalSignaturePolicy:n=Cu.StrictSign,canRelayMessage:s=!1,emitSelf:o=!1,messageProcessingConcurrency:a=10}){if(typeof e!="string")throw new Error("a debugname `string` is required");if(!r)throw new Error("multicodecs are required");if(!i)throw new Error("libp2p is required");super();if(this.log=Object.assign(use(e),{err:use(`${e}:error`)}),this.multicodecs=dl.ensureArray(r),this._libp2p=i,this.registrar=i.registrar,this.peerId=i.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!Cu[n])throw ls(new Error("Invalid global signature policy"),ma.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=n,this.canRelayMessage=s,this.emitSelf=o,this.topicValidators=new Map,this.queue=new kqe({concurrency:a}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);let e=new Dqe({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=this.registrar.register(e),this.log("started"),this.started=!0}stop(){!this.started||(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach(e=>e.close()),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:e,stream:r,connection:i}){let n=i.remotePeer,s=n.toB58String(),o=this._addPeer(n,e),a=o.attachInboundStream(r);this._processMessages(s,a,o)}async _onPeerConnected(e,r){let i=e.toB58String();this.log("connected",i);try{let{stream:n,protocol:s}=await r.newStream(this.multicodecs);await this._addPeer(e,s).attachOutboundStream(n)}catch(n){this.log.err(n)}this._sendSubscriptions(i,Array.from(this.subscriptions),!0)}_onPeerDisconnected(e,r){let i=e.toB58String();this.log("connection ended",i,r?r.message:""),this._removePeer(e)}_addPeer(e,r){let i=e.toB58String(),n=this.peers.get(i);if(n)return n;this.log("new peer",i);let s=new Bqe({id:e,protocol:r});return this.peers.set(i,s),s.once("close",()=>this._removePeer(e)),s}_removePeer(e){if(!e)return;let r=e.toB58String(),i=this.peers.get(r);if(!!i){i.removeAllListeners(),i.close(),this.log("delete peer",r),this.peers.delete(r);for(let n of this.topics.values())n.delete(r);return i}}async _processMessages(e,r,i){try{await Oqe(r,async n=>{for await(let s of n){let o=s instanceof Uint8Array?s:s.slice(),a=this._decodeRpc(o);(async()=>{try{await this._processRpc(e,i,a)}catch(c){this.log.err(c)}})()}})}catch(n){this._onPeerDisconnected(i.id,n)}}async _processRpc(e,r,i){this.log("rpc from",e);let n=i.subscriptions,s=i.msgs;return n.length&&(n.forEach(o=>{this._processRpcSubOpt(e,o)}),this.emit("pubsub:subscription-change",r.id,n)),this._acceptFrom(e)?(s.length&&this.queue.addAll(s.map(o=>async()=>{if(!(this.canRelayMessage||o.topicIDs&&o.topicIDs.some(a=>this.subscriptions.has(a)))){this.log("received message we didn't subscribe to. Dropping.");return}try{let a=dl.normalizeInRpcMessage(o,e);await this._processRpcMessage(a)}catch(a){this.log.err(a)}})),!0):(this.log("received message from unacceptable peer %s",e),!1)}_processRpcSubOpt(e,r){let i=r.topicID;if(!i)return;let n=this.topics.get(i);n||(n=new Set,this.topics.set(i,n)),r.subscribe?n.add(e):n.delete(e)}async _processRpcMessage(e){if(!(this.peerId.toB58String()===e.from&&!this.emitSelf)){try{await this.validate(e)}catch(r){this.log("Message is invalid, dropping it. %O",r);return}return this._emitMessage(e),this._publish(dl.normalizeOutRpcMessage(e))}}_emitMessage(e){e.topicIDs.forEach(r=>{this.subscriptions.has(r)&&this.emit(r,e)})}getMsgId(e){let r=this.globalSignaturePolicy;switch(r){case Cu.StrictSign:return dl.msgId(e.from,e.seqno);case Cu.StrictNoSign:return dl.noSignMsgId(e.data);default:throw ls(new Error("Cannot get message id: unhandled signature policy: "+r),ma.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(e){return!0}_decodeRpc(e){return fse.decode(e)}_encodeRpc(e){return fse.encode(e).finish()}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable){let n=`Cannot send RPC to ${e} as there is no open stream to it available`;this.log.err(n);return}i.write(this._encodeRpc(r))}_sendSubscriptions(e,r,i){return this._sendRpc(e,{subscriptions:r.map(n=>({topicID:n,subscribe:i}))})}async validate(e){let r=this.globalSignaturePolicy;switch(r){case Cu.StrictNoSign:if(e.from)throw ls(new Error("StrictNoSigning: from should not be present"),ma.ERR_UNEXPECTED_FROM);if(e.signature)throw ls(new Error("StrictNoSigning: signature should not be present"),ma.ERR_UNEXPECTED_SIGNATURE);if(e.key)throw ls(new Error("StrictNoSigning: key should not be present"),ma.ERR_UNEXPECTED_KEY);if(e.seqno)throw ls(new Error("StrictNoSigning: seqno should not be present"),ma.ERR_UNEXPECTED_SEQNO);break;case Cu.StrictSign:if(!e.signature)throw ls(new Error("StrictSigning: Signing required and no signature was present"),ma.ERR_MISSING_SIGNATURE);if(!e.seqno)throw ls(new Error("StrictSigning: Signing required and no seqno was present"),ma.ERR_MISSING_SEQNO);if(!await Mqe(e))throw ls(new Error("StrictSigning: Invalid message signature"),ma.ERR_INVALID_SIGNATURE);break;default:throw ls(new Error("Cannot validate message: unhandled signature policy: "+r),ma.ERR_UNHANDLED_SIGNATURE_POLICY)}for(let i of e.topicIDs){let n=this.topicValidators.get(i);n&&await n(i,e)}}_buildMessage(e){let r=this.globalSignaturePolicy;switch(r){case Cu.StrictSign:return e.from=this.peerId.toB58String(),e.seqno=dl.randomSeqno(),Nqe(this.peerId,e);case Cu.StrictNoSign:return Promise.resolve(e);default:throw ls(new Error("Cannot build message: unhandled signature policy: "+r),ma.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw ls(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!e||typeof e!="string")throw ls(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");let r=this.topics.get(e);return r?Array.from(r):[]}async publish(e,r){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",e,r);let n={receivedFrom:this.peerId.toB58String(),data:r,topicIDs:[e]},s=await this._buildMessage(n),o=dl.normalizeInRpcMessage(s);this.emitSelf&&this._emitMessage(o),await this._publish(o)}_publish(e){throw ls(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(e)||(this.subscriptions.add(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!0)))}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(e)&&this.listenerCount(e)===0&&(this.subscriptions.delete(e),this.peers.forEach((r,i)=>this._sendSubscriptions(i,[e],!1)))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}};G8.utils=dl;G8.SignaturePolicy=Cu;lse.exports=G8});var hse=v(W8=>{l();"use strict";Object.defineProperty(W8,"__esModule",{value:!0});W8.createGossipRpc=void 0;function Lqe(t=[],e={}){return{subscriptions:[],msgs:t,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},e)}}W8.createGossipRpc=Lqe});var pse=v(Y8=>{l();"use strict";Object.defineProperty(Y8,"__esModule",{value:!0});Y8.shuffle=void 0;function qqe(t){if(t.length<=1)return t;let e=()=>Math.floor(Math.random()*Math.floor(t.length));for(let r=0;r<t.length;r++){let i=e(),n=t[r];t[r]=t[i],t[i]=n}return t}Y8.shuffle=qqe});var ch=v(Ce=>{l();"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.ERR_TOPIC_VALIDATOR_IGNORE=Ce.ERR_TOPIC_VALIDATOR_REJECT=Ce.TimeCacheDuration=Ce.GossipsubSeenTTL=Ce.GossipsubIWantFollowupTime=Ce.GossipsubMaxIHaveMessages=Ce.GossipsubMaxIHaveLength=Ce.GossipsubGraftFloodThreshold=Ce.GossipsubOpportunisticGraftPeers=Ce.GossipsubOpportunisticGraftTicks=Ce.GossipsubDirectConnectInitialDelay=Ce.GossipsubDirectConnectTicks=Ce.GossipsubConnectionTimeout=Ce.GossipsubMaxPendingConnections=Ce.GossipsubConnectors=Ce.GossipsubPruneBackoffTicks=Ce.GossipsubPruneBackoff=Ce.GossipsubPrunePeers=Ce.GossipsubFanoutTTL=Ce.GossipsubHeartbeatInterval=Ce.GossipsubHeartbeatInitialDelay=Ce.GossipsubGossipRetransmission=Ce.GossipsubGossipFactor=Ce.GossipsubDlazy=Ce.GossipsubHistoryGossip=Ce.GossipsubHistoryLength=Ce.GossipsubDout=Ce.GossipsubDscore=Ce.GossipsubDhi=Ce.GossipsubDlo=Ce.GossipsubD=Ce.GossipsubIDv11=Ce.GossipsubIDv10=Ce.FloodsubID=Ce.minute=Ce.second=void 0;Ce.second=1e3;Ce.minute=60*Ce.second;Ce.FloodsubID="/floodsub/1.0.0";Ce.GossipsubIDv10="/meshsub/1.0.0";Ce.GossipsubIDv11="/meshsub/1.1.0";Ce.GossipsubD=6;Ce.GossipsubDlo=4;Ce.GossipsubDhi=12;Ce.GossipsubDscore=4;Ce.GossipsubDout=2;Ce.GossipsubHistoryLength=5;Ce.GossipsubHistoryGossip=3;Ce.GossipsubDlazy=6;Ce.GossipsubGossipFactor=.25;Ce.GossipsubGossipRetransmission=3;Ce.GossipsubHeartbeatInitialDelay=100;Ce.GossipsubHeartbeatInterval=Ce.second;Ce.GossipsubFanoutTTL=Ce.minute;Ce.GossipsubPrunePeers=16;Ce.GossipsubPruneBackoff=Ce.minute;Ce.GossipsubPruneBackoffTicks=15;Ce.GossipsubConnectors=8;Ce.GossipsubMaxPendingConnections=128;Ce.GossipsubConnectionTimeout=30*Ce.second;Ce.GossipsubDirectConnectTicks=300;Ce.GossipsubDirectConnectInitialDelay=Ce.second;Ce.GossipsubOpportunisticGraftTicks=60;Ce.GossipsubOpportunisticGraftPeers=2;Ce.GossipsubGraftFloodThreshold=10*Ce.second;Ce.GossipsubMaxIHaveLength=5e3;Ce.GossipsubMaxIHaveMessages=10;Ce.GossipsubIWantFollowupTime=3*Ce.second;Ce.GossipsubSeenTTL=30*Ce.second;Ce.TimeCacheDuration=120*1e3;Ce.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT";Ce.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE"});var gse=v(X8=>{l();"use strict";Object.defineProperty(X8,"__esModule",{value:!0});X8.hasGossipProtocol=void 0;var yse=ch();function jqe(t){return t===yse.GossipsubIDv10||t===yse.GossipsubIDv11}X8.hasGossipProtocol=jqe});var mse=v(Q8=>{l();"use strict";Object.defineProperty(Q8,"__esModule",{value:!0});Q8.messageIdToString=void 0;var Uqe=(tt(),pr);function Fqe(t){return Uqe.toString(t,"base64")}Q8.messageIdToString=Fqe});var uh=v(Rc=>{l();"use strict";var Kqe=Rc&&Rc.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Z8=Rc&&Rc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Kqe(e,t,r)};Object.defineProperty(Rc,"__esModule",{value:!0});Z8(hse(),Rc);Z8(pse(),Rc);Z8(gse(),Rc);Z8(mse(),Rc)});var vse=v(y1=>{l();"use strict";var Vqe=y1&&y1.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{u(i.next(f))}catch(d){o(d)}}function c(f){try{u(i.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):n(f.value).then(a,c)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(y1,"__esModule",{value:!0});y1.MessageCache=void 0;var J8=uh(),bse=class{constructor(e,r,i){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let n=0;n<r;n++)this.history[n]=[];this.gossip=e,this.msgIdFn=i}put(e){return Vqe(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=J8.messageIdToString(r);this.msgs.set(i,e),this.history[0].push({msgID:r,topics:e.topicIDs})})}getMsgId(e){return this.msgIdFn(e)}get(e){return this.msgs.get(J8.messageIdToString(e))}getForPeer(e,r){let i=J8.messageIdToString(e),n=this.msgs.get(i);if(!n)return[void 0,0];let s=this.peertx.get(i);s||(s=new Map,this.peertx.set(i,s));let o=(s.get(r)||0)+1;return s.set(r,o),[n,o]}getGossipIDs(e){let r=[];for(let i=0;i<this.gossip;i++)this.history[i].forEach(n=>{for(let s of n.topics)if(s===e){r.push(n.msgID);break}});return r}shift(){this.history[this.history.length-1].forEach(r=>{let i=J8.messageIdToString(r.msgID);this.msgs.delete(i),this.peertx.delete(i)}),this.history.pop(),this.history.unshift([])}};y1.MessageCache=bse});var _se=v((wse,Am)=>{l();(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof Ra=="function"&&typeof Am=="object"&&Am&&Am.exports&&(Am.exports=e(Vi()))})(wse,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots.default||(t.roots.default={});return n.RPC=function(){function s(a){if(this.subscriptions=[],this.msgs=[],a)for(var c=Object.keys(a),u=0;u<c.length;++u)a[c[u]]!=null&&(this[c[u]]=a[c[u]])}s.prototype.subscriptions=i.emptyArray,s.prototype.msgs=i.emptyArray,s.prototype.control=null;var o;return Object.defineProperty(s.prototype,"_control",{get:i.oneOfGetter(o=["control"]),set:i.oneOfSetter(o)}),s.encode=function(c,u){if(u||(u=r.create()),c.subscriptions!=null&&c.subscriptions.length)for(var f=0;f<c.subscriptions.length;++f)n.RPC.SubOpts.encode(c.subscriptions[f],u.uint32(10).fork()).ldelim();if(c.msgs!=null&&c.msgs.length)for(var f=0;f<c.msgs.length;++f)n.RPC.Message.encode(c.msgs[f],u.uint32(18).fork()).ldelim();return c.control!=null&&Object.hasOwnProperty.call(c,"control")&&n.RPC.ControlMessage.encode(c.control,u.uint32(26).fork()).ldelim(),u},s.decode=function(c,u){c instanceof e||(c=e.create(c));for(var f=u===void 0?c.len:c.pos+u,d=new n.RPC;c.pos<f;){var h=c.uint32();switch(h>>>3){case 1:d.subscriptions&&d.subscriptions.length||(d.subscriptions=[]),d.subscriptions.push(n.RPC.SubOpts.decode(c,c.uint32()));break;case 2:d.msgs&&d.msgs.length||(d.msgs=[]),d.msgs.push(n.RPC.Message.decode(c,c.uint32()));break;case 3:d.control=n.RPC.ControlMessage.decode(c,c.uint32());break;default:c.skipType(h&7);break}}return d},s.fromObject=function(c){if(c instanceof n.RPC)return c;var u=new n.RPC;if(c.subscriptions){if(!Array.isArray(c.subscriptions))throw TypeError(".RPC.subscriptions: array expected");u.subscriptions=[];for(var f=0;f<c.subscriptions.length;++f){if(typeof c.subscriptions[f]!="object")throw TypeError(".RPC.subscriptions: object expected");u.subscriptions[f]=n.RPC.SubOpts.fromObject(c.subscriptions[f])}}if(c.msgs){if(!Array.isArray(c.msgs))throw TypeError(".RPC.msgs: array expected");u.msgs=[];for(var f=0;f<c.msgs.length;++f){if(typeof c.msgs[f]!="object")throw TypeError(".RPC.msgs: object expected");u.msgs[f]=n.RPC.Message.fromObject(c.msgs[f])}}if(c.control!=null){if(typeof c.control!="object")throw TypeError(".RPC.control: object expected");u.control=n.RPC.ControlMessage.fromObject(c.control)}return u},s.toObject=function(c,u){u||(u={});var f={};if((u.arrays||u.defaults)&&(f.subscriptions=[],f.msgs=[]),c.subscriptions&&c.subscriptions.length){f.subscriptions=[];for(var d=0;d<c.subscriptions.length;++d)f.subscriptions[d]=n.RPC.SubOpts.toObject(c.subscriptions[d],u)}if(c.msgs&&c.msgs.length){f.msgs=[];for(var d=0;d<c.msgs.length;++d)f.msgs[d]=n.RPC.Message.toObject(c.msgs[d],u)}return c.control!=null&&c.hasOwnProperty("control")&&(f.control=n.RPC.ControlMessage.toObject(c.control,u),u.oneofs&&(f._control="control")),f},s.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},s.SubOpts=function(){function a(u){if(u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.subscribe=null,a.prototype.topicID=null;var c;return Object.defineProperty(a.prototype,"_subscribe",{get:i.oneOfGetter(c=["subscribe"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){return d||(d=r.create()),f.subscribe!=null&&Object.hasOwnProperty.call(f,"subscribe")&&d.uint32(8).bool(f.subscribe),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&d.uint32(18).string(f.topicID),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new n.RPC.SubOpts;f.pos<h;){var y=f.uint32();switch(y>>>3){case 1:p.subscribe=f.bool();break;case 2:p.topicID=f.string();break;default:f.skipType(y&7);break}}return p},a.fromObject=function(f){if(f instanceof n.RPC.SubOpts)return f;var d=new n.RPC.SubOpts;return f.subscribe!=null&&(d.subscribe=Boolean(f.subscribe)),f.topicID!=null&&(d.topicID=String(f.topicID)),d},a.toObject=function(f,d){d||(d={});var h={};return f.subscribe!=null&&f.hasOwnProperty("subscribe")&&(h.subscribe=f.subscribe,d.oneofs&&(h._subscribe="subscribe")),f.topicID!=null&&f.hasOwnProperty("topicID")&&(h.topicID=f.topicID,d.oneofs&&(h._topicID="topicID")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.Message=function(){function a(u){if(this.topicIDs=[],u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.from=null,a.prototype.data=null,a.prototype.seqno=null,a.prototype.topicIDs=i.emptyArray,a.prototype.signature=null,a.prototype.key=null;var c;return Object.defineProperty(a.prototype,"_from",{get:i.oneOfGetter(c=["from"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_data",{get:i.oneOfGetter(c=["data"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_seqno",{get:i.oneOfGetter(c=["seqno"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signature",{get:i.oneOfGetter(c=["signature"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_key",{get:i.oneOfGetter(c=["key"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){if(d||(d=r.create()),f.from!=null&&Object.hasOwnProperty.call(f,"from")&&d.uint32(10).bytes(f.from),f.data!=null&&Object.hasOwnProperty.call(f,"data")&&d.uint32(18).bytes(f.data),f.seqno!=null&&Object.hasOwnProperty.call(f,"seqno")&&d.uint32(26).bytes(f.seqno),f.topicIDs!=null&&f.topicIDs.length)for(var h=0;h<f.topicIDs.length;++h)d.uint32(34).string(f.topicIDs[h]);return f.signature!=null&&Object.hasOwnProperty.call(f,"signature")&&d.uint32(42).bytes(f.signature),f.key!=null&&Object.hasOwnProperty.call(f,"key")&&d.uint32(50).bytes(f.key),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new n.RPC.Message;f.pos<h;){var y=f.uint32();switch(y>>>3){case 1:p.from=f.bytes();break;case 2:p.data=f.bytes();break;case 3:p.seqno=f.bytes();break;case 4:p.topicIDs&&p.topicIDs.length||(p.topicIDs=[]),p.topicIDs.push(f.string());break;case 5:p.signature=f.bytes();break;case 6:p.key=f.bytes();break;default:f.skipType(y&7);break}}return p},a.fromObject=function(f){if(f instanceof n.RPC.Message)return f;var d=new n.RPC.Message;if(f.from!=null&&(typeof f.from=="string"?i.base64.decode(f.from,d.from=i.newBuffer(i.base64.length(f.from)),0):f.from.length&&(d.from=f.from)),f.data!=null&&(typeof f.data=="string"?i.base64.decode(f.data,d.data=i.newBuffer(i.base64.length(f.data)),0):f.data.length&&(d.data=f.data)),f.seqno!=null&&(typeof f.seqno=="string"?i.base64.decode(f.seqno,d.seqno=i.newBuffer(i.base64.length(f.seqno)),0):f.seqno.length&&(d.seqno=f.seqno)),f.topicIDs){if(!Array.isArray(f.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");d.topicIDs=[];for(var h=0;h<f.topicIDs.length;++h)d.topicIDs[h]=String(f.topicIDs[h])}return f.signature!=null&&(typeof f.signature=="string"?i.base64.decode(f.signature,d.signature=i.newBuffer(i.base64.length(f.signature)),0):f.signature.length&&(d.signature=f.signature)),f.key!=null&&(typeof f.key=="string"?i.base64.decode(f.key,d.key=i.newBuffer(i.base64.length(f.key)),0):f.key.length&&(d.key=f.key)),d},a.toObject=function(f,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.topicIDs=[]),f.from!=null&&f.hasOwnProperty("from")&&(h.from=d.bytes===String?i.base64.encode(f.from,0,f.from.length):d.bytes===Array?Array.prototype.slice.call(f.from):f.from,d.oneofs&&(h._from="from")),f.data!=null&&f.hasOwnProperty("data")&&(h.data=d.bytes===String?i.base64.encode(f.data,0,f.data.length):d.bytes===Array?Array.prototype.slice.call(f.data):f.data,d.oneofs&&(h._data="data")),f.seqno!=null&&f.hasOwnProperty("seqno")&&(h.seqno=d.bytes===String?i.base64.encode(f.seqno,0,f.seqno.length):d.bytes===Array?Array.prototype.slice.call(f.seqno):f.seqno,d.oneofs&&(h._seqno="seqno")),f.topicIDs&&f.topicIDs.length){h.topicIDs=[];for(var p=0;p<f.topicIDs.length;++p)h.topicIDs[p]=f.topicIDs[p]}return f.signature!=null&&f.hasOwnProperty("signature")&&(h.signature=d.bytes===String?i.base64.encode(f.signature,0,f.signature.length):d.bytes===Array?Array.prototype.slice.call(f.signature):f.signature,d.oneofs&&(h._signature="signature")),f.key!=null&&f.hasOwnProperty("key")&&(h.key=d.bytes===String?i.base64.encode(f.key,0,f.key.length):d.bytes===Array?Array.prototype.slice.call(f.key):f.key,d.oneofs&&(h._key="key")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlMessage=function(){function a(c){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],c)for(var u=Object.keys(c),f=0;f<u.length;++f)c[u[f]]!=null&&(this[u[f]]=c[u[f]])}return a.prototype.ihave=i.emptyArray,a.prototype.iwant=i.emptyArray,a.prototype.graft=i.emptyArray,a.prototype.prune=i.emptyArray,a.encode=function(u,f){if(f||(f=r.create()),u.ihave!=null&&u.ihave.length)for(var d=0;d<u.ihave.length;++d)n.RPC.ControlIHave.encode(u.ihave[d],f.uint32(10).fork()).ldelim();if(u.iwant!=null&&u.iwant.length)for(var d=0;d<u.iwant.length;++d)n.RPC.ControlIWant.encode(u.iwant[d],f.uint32(18).fork()).ldelim();if(u.graft!=null&&u.graft.length)for(var d=0;d<u.graft.length;++d)n.RPC.ControlGraft.encode(u.graft[d],f.uint32(26).fork()).ldelim();if(u.prune!=null&&u.prune.length)for(var d=0;d<u.prune.length;++d)n.RPC.ControlPrune.encode(u.prune[d],f.uint32(34).fork()).ldelim();return f},a.decode=function(u,f){u instanceof e||(u=e.create(u));for(var d=f===void 0?u.len:u.pos+f,h=new n.RPC.ControlMessage;u.pos<d;){var p=u.uint32();switch(p>>>3){case 1:h.ihave&&h.ihave.length||(h.ihave=[]),h.ihave.push(n.RPC.ControlIHave.decode(u,u.uint32()));break;case 2:h.iwant&&h.iwant.length||(h.iwant=[]),h.iwant.push(n.RPC.ControlIWant.decode(u,u.uint32()));break;case 3:h.graft&&h.graft.length||(h.graft=[]),h.graft.push(n.RPC.ControlGraft.decode(u,u.uint32()));break;case 4:h.prune&&h.prune.length||(h.prune=[]),h.prune.push(n.RPC.ControlPrune.decode(u,u.uint32()));break;default:u.skipType(p&7);break}}return h},a.fromObject=function(u){if(u instanceof n.RPC.ControlMessage)return u;var f=new n.RPC.ControlMessage;if(u.ihave){if(!Array.isArray(u.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");f.ihave=[];for(var d=0;d<u.ihave.length;++d){if(typeof u.ihave[d]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");f.ihave[d]=n.RPC.ControlIHave.fromObject(u.ihave[d])}}if(u.iwant){if(!Array.isArray(u.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");f.iwant=[];for(var d=0;d<u.iwant.length;++d){if(typeof u.iwant[d]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");f.iwant[d]=n.RPC.ControlIWant.fromObject(u.iwant[d])}}if(u.graft){if(!Array.isArray(u.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");f.graft=[];for(var d=0;d<u.graft.length;++d){if(typeof u.graft[d]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");f.graft[d]=n.RPC.ControlGraft.fromObject(u.graft[d])}}if(u.prune){if(!Array.isArray(u.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");f.prune=[];for(var d=0;d<u.prune.length;++d){if(typeof u.prune[d]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");f.prune[d]=n.RPC.ControlPrune.fromObject(u.prune[d])}}return f},a.toObject=function(u,f){f||(f={});var d={};if((f.arrays||f.defaults)&&(d.ihave=[],d.iwant=[],d.graft=[],d.prune=[]),u.ihave&&u.ihave.length){d.ihave=[];for(var h=0;h<u.ihave.length;++h)d.ihave[h]=n.RPC.ControlIHave.toObject(u.ihave[h],f)}if(u.iwant&&u.iwant.length){d.iwant=[];for(var h=0;h<u.iwant.length;++h)d.iwant[h]=n.RPC.ControlIWant.toObject(u.iwant[h],f)}if(u.graft&&u.graft.length){d.graft=[];for(var h=0;h<u.graft.length;++h)d.graft[h]=n.RPC.ControlGraft.toObject(u.graft[h],f)}if(u.prune&&u.prune.length){d.prune=[];for(var h=0;h<u.prune.length;++h)d.prune[h]=n.RPC.ControlPrune.toObject(u.prune[h],f)}return d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlIHave=function(){function a(u){if(this.messageIDs=[],u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.topicID=null,a.prototype.messageIDs=i.emptyArray;var c;return Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){if(d||(d=r.create()),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&d.uint32(10).string(f.topicID),f.messageIDs!=null&&f.messageIDs.length)for(var h=0;h<f.messageIDs.length;++h)d.uint32(18).bytes(f.messageIDs[h]);return d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new n.RPC.ControlIHave;f.pos<h;){var y=f.uint32();switch(y>>>3){case 1:p.topicID=f.string();break;case 2:p.messageIDs&&p.messageIDs.length||(p.messageIDs=[]),p.messageIDs.push(f.bytes());break;default:f.skipType(y&7);break}}return p},a.fromObject=function(f){if(f instanceof n.RPC.ControlIHave)return f;var d=new n.RPC.ControlIHave;if(f.topicID!=null&&(d.topicID=String(f.topicID)),f.messageIDs){if(!Array.isArray(f.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");d.messageIDs=[];for(var h=0;h<f.messageIDs.length;++h)typeof f.messageIDs[h]=="string"?i.base64.decode(f.messageIDs[h],d.messageIDs[h]=i.newBuffer(i.base64.length(f.messageIDs[h])),0):f.messageIDs[h].length&&(d.messageIDs[h]=f.messageIDs[h])}return d},a.toObject=function(f,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.messageIDs=[]),f.topicID!=null&&f.hasOwnProperty("topicID")&&(h.topicID=f.topicID,d.oneofs&&(h._topicID="topicID")),f.messageIDs&&f.messageIDs.length){h.messageIDs=[];for(var p=0;p<f.messageIDs.length;++p)h.messageIDs[p]=d.bytes===String?i.base64.encode(f.messageIDs[p],0,f.messageIDs[p].length):d.bytes===Array?Array.prototype.slice.call(f.messageIDs[p]):f.messageIDs[p]}return h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlIWant=function(){function a(c){if(this.messageIDs=[],c)for(var u=Object.keys(c),f=0;f<u.length;++f)c[u[f]]!=null&&(this[u[f]]=c[u[f]])}return a.prototype.messageIDs=i.emptyArray,a.encode=function(u,f){if(f||(f=r.create()),u.messageIDs!=null&&u.messageIDs.length)for(var d=0;d<u.messageIDs.length;++d)f.uint32(10).bytes(u.messageIDs[d]);return f},a.decode=function(u,f){u instanceof e||(u=e.create(u));for(var d=f===void 0?u.len:u.pos+f,h=new n.RPC.ControlIWant;u.pos<d;){var p=u.uint32();switch(p>>>3){case 1:h.messageIDs&&h.messageIDs.length||(h.messageIDs=[]),h.messageIDs.push(u.bytes());break;default:u.skipType(p&7);break}}return h},a.fromObject=function(u){if(u instanceof n.RPC.ControlIWant)return u;var f=new n.RPC.ControlIWant;if(u.messageIDs){if(!Array.isArray(u.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");f.messageIDs=[];for(var d=0;d<u.messageIDs.length;++d)typeof u.messageIDs[d]=="string"?i.base64.decode(u.messageIDs[d],f.messageIDs[d]=i.newBuffer(i.base64.length(u.messageIDs[d])),0):u.messageIDs[d].length&&(f.messageIDs[d]=u.messageIDs[d])}return f},a.toObject=function(u,f){f||(f={});var d={};if((f.arrays||f.defaults)&&(d.messageIDs=[]),u.messageIDs&&u.messageIDs.length){d.messageIDs=[];for(var h=0;h<u.messageIDs.length;++h)d.messageIDs[h]=f.bytes===String?i.base64.encode(u.messageIDs[h],0,u.messageIDs[h].length):f.bytes===Array?Array.prototype.slice.call(u.messageIDs[h]):u.messageIDs[h]}return d},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlGraft=function(){function a(u){if(u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.topicID=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){return d||(d=r.create()),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&d.uint32(10).string(f.topicID),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new n.RPC.ControlGraft;f.pos<h;){var y=f.uint32();switch(y>>>3){case 1:p.topicID=f.string();break;default:f.skipType(y&7);break}}return p},a.fromObject=function(f){if(f instanceof n.RPC.ControlGraft)return f;var d=new n.RPC.ControlGraft;return f.topicID!=null&&(d.topicID=String(f.topicID)),d},a.toObject=function(f,d){d||(d={});var h={};return f.topicID!=null&&f.hasOwnProperty("topicID")&&(h.topicID=f.topicID,d.oneofs&&(h._topicID="topicID")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.ControlPrune=function(){function a(u){if(this.peers=[],u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.topicID=null,a.prototype.peers=i.emptyArray,a.prototype.backoff=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:i.oneOfGetter(c=["topicID"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_backoff",{get:i.oneOfGetter(c=["backoff"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){if(d||(d=r.create()),f.topicID!=null&&Object.hasOwnProperty.call(f,"topicID")&&d.uint32(10).string(f.topicID),f.peers!=null&&f.peers.length)for(var h=0;h<f.peers.length;++h)n.RPC.PeerInfo.encode(f.peers[h],d.uint32(18).fork()).ldelim();return f.backoff!=null&&Object.hasOwnProperty.call(f,"backoff")&&d.uint32(24).uint64(f.backoff),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new n.RPC.ControlPrune;f.pos<h;){var y=f.uint32();switch(y>>>3){case 1:p.topicID=f.string();break;case 2:p.peers&&p.peers.length||(p.peers=[]),p.peers.push(n.RPC.PeerInfo.decode(f,f.uint32()));break;case 3:p.backoff=f.uint64();break;default:f.skipType(y&7);break}}return p},a.fromObject=function(f){if(f instanceof n.RPC.ControlPrune)return f;var d=new n.RPC.ControlPrune;if(f.topicID!=null&&(d.topicID=String(f.topicID)),f.peers){if(!Array.isArray(f.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");d.peers=[];for(var h=0;h<f.peers.length;++h){if(typeof f.peers[h]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");d.peers[h]=n.RPC.PeerInfo.fromObject(f.peers[h])}}return f.backoff!=null&&(i.Long?(d.backoff=i.Long.fromValue(f.backoff)).unsigned=!0:typeof f.backoff=="string"?d.backoff=parseInt(f.backoff,10):typeof f.backoff=="number"?d.backoff=f.backoff:typeof f.backoff=="object"&&(d.backoff=new i.LongBits(f.backoff.low>>>0,f.backoff.high>>>0).toNumber(!0))),d},a.toObject=function(f,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.peers=[]),f.topicID!=null&&f.hasOwnProperty("topicID")&&(h.topicID=f.topicID,d.oneofs&&(h._topicID="topicID")),f.peers&&f.peers.length){h.peers=[];for(var p=0;p<f.peers.length;++p)h.peers[p]=n.RPC.PeerInfo.toObject(f.peers[p],d)}return f.backoff!=null&&f.hasOwnProperty("backoff")&&(typeof f.backoff=="number"?h.backoff=d.longs===String?String(f.backoff):f.backoff:h.backoff=d.longs===String?i.Long.prototype.toString.call(f.backoff):d.longs===Number?new i.LongBits(f.backoff.low>>>0,f.backoff.high>>>0).toNumber(!0):f.backoff,d.oneofs&&(h._backoff="backoff")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s.PeerInfo=function(){function a(u){if(u)for(var f=Object.keys(u),d=0;d<f.length;++d)u[f[d]]!=null&&(this[f[d]]=u[f[d]])}a.prototype.peerID=null,a.prototype.signedPeerRecord=null;var c;return Object.defineProperty(a.prototype,"_peerID",{get:i.oneOfGetter(c=["peerID"]),set:i.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signedPeerRecord",{get:i.oneOfGetter(c=["signedPeerRecord"]),set:i.oneOfSetter(c)}),a.encode=function(f,d){return d||(d=r.create()),f.peerID!=null&&Object.hasOwnProperty.call(f,"peerID")&&d.uint32(10).bytes(f.peerID),f.signedPeerRecord!=null&&Object.hasOwnProperty.call(f,"signedPeerRecord")&&d.uint32(18).bytes(f.signedPeerRecord),d},a.decode=function(f,d){f instanceof e||(f=e.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new n.RPC.PeerInfo;f.pos<h;){var y=f.uint32();switch(y>>>3){case 1:p.peerID=f.bytes();break;case 2:p.signedPeerRecord=f.bytes();break;default:f.skipType(y&7);break}}return p},a.fromObject=function(f){if(f instanceof n.RPC.PeerInfo)return f;var d=new n.RPC.PeerInfo;return f.peerID!=null&&(typeof f.peerID=="string"?i.base64.decode(f.peerID,d.peerID=i.newBuffer(i.base64.length(f.peerID)),0):f.peerID.length&&(d.peerID=f.peerID)),f.signedPeerRecord!=null&&(typeof f.signedPeerRecord=="string"?i.base64.decode(f.signedPeerRecord,d.signedPeerRecord=i.newBuffer(i.base64.length(f.signedPeerRecord)),0):f.signedPeerRecord.length&&(d.signedPeerRecord=f.signedPeerRecord)),d},a.toObject=function(f,d){d||(d={});var h={};return f.peerID!=null&&f.hasOwnProperty("peerID")&&(h.peerID=d.bytes===String?i.base64.encode(f.peerID,0,f.peerID.length):d.bytes===Array?Array.prototype.slice.call(f.peerID):f.peerID,d.oneofs&&(h._peerID="peerID")),f.signedPeerRecord!=null&&f.hasOwnProperty("signedPeerRecord")&&(h.signedPeerRecord=d.bytes===String?i.base64.encode(f.signedPeerRecord,0,f.signedPeerRecord.length):d.bytes===Array?Array.prototype.slice.call(f.signedPeerRecord):f.signedPeerRecord,d.oneofs&&(h._signedPeerRecord="signedPeerRecord")),h},a.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},a}(),s}(),n})});var nR=v(ev=>{l();"use strict";Object.defineProperty(ev,"__esModule",{value:!0});ev.getGossipPeers=void 0;var Ese=uh();function zqe(t,e,r,i=()=>!0){let n=t.topics.get(e);if(!n)return new Set;let s=[];return n.forEach(o=>{let a=t.peers.get(o);!a||Ese.hasGossipProtocol(a.protocol)&&i(o)&&s.push(o)}),s=Ese.shuffle(s),r>0&&s.length>r&&(s=s.slice(0,r)),new Set(s)}ev.getGossipPeers=zqe});var xse=v(Pc=>{l();"use strict";var Hqe=Pc&&Pc.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),$qe=Pc&&Pc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gqe=Pc&&Pc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Hqe(e,t,r);return $qe(e,t),e};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.Heartbeat=void 0;var sR=Gqe(ch()),tv=nR(),Wqe=uh(),Sse=class{constructor(e){this.gossipsub=e}start(){if(this._heartbeatTimer)return;let e=this._heartbeat.bind(this),r=setTimeout(()=>{e(),this._heartbeatTimer.runPeriodically(e,this.gossipsub._options.heartbeatInterval)},sR.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(i,n)=>{this._heartbeatTimer._intervalId=setInterval(i,n)},cancel:()=>{clearTimeout(r),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){!this._heartbeatTimer||(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){let{D:e,Dlo:r,Dhi:i,Dscore:n,Dout:s,fanoutTTL:o}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;let a=new Map,c=p=>{let y=a.get(p);return y===void 0&&(y=this.gossipsub.score.score(p),a.set(p,y)),y},u=new Map,f=new Map,d=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach((p,y)=>{let m=b=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",b,y),this.gossipsub.score.prune(b,y),this.gossipsub._addBackoff(b,y),p.delete(b);let S=f.get(b);S?S.push(y):f.set(b,[y])},w=b=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",b,y),this.gossipsub.score.graft(b,y),p.add(b);let S=u.get(b);S?S.push(y):u.set(b,[y])};if(p.forEach(b=>{let S=c(b);S<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",b,S,y),m(b),d.set(b,!0))}),p.size<r){let b=this.gossipsub.backoff.get(y),S=e-p.size;tv.getGossipPeers(this.gossipsub,y,S,j=>!p.has(j)&&!this.gossipsub.direct.has(j)&&(!b||!b.has(j))&&c(j)>=0).forEach(w)}if(p.size>i){let b=Array.from(p);b.sort((I,j)=>c(j)-c(I)),b=b.slice(0,n).concat(Wqe.shuffle(b.slice(n)));let S=0;if(b.slice(0,e).forEach(I=>{this.gossipsub.outbound.get(I)&&S++}),S<s){let I=B=>{let C=b[B];for(let z=B;z>0;z--)b[z]=b[z-1];b[0]=C};if(S>0){let B=S;for(let C=1;C<e&&B>0;C++)this.gossipsub.outbound.get(b[C])&&(I(C),B--)}let j=e-S;for(let B=e;B<b.length&&j>0;B++)this.gossipsub.outbound.get(b[B])&&(I(B),j--)}b.slice(e).forEach(m)}if(p.size>=r){let b=0;if(p.forEach(S=>{this.gossipsub.outbound.get(S)&&b++}),b<s){let S=s-b,I=this.gossipsub.backoff.get(y);tv.getGossipPeers(this.gossipsub,y,S,j=>!p.has(j)&&!this.gossipsub.direct.has(j)&&(!I||!I.has(j))&&c(j)>=0).forEach(w)}}if(this.gossipsub.heartbeatTicks%sR.GossipsubOpportunisticGraftTicks==0&&p.size>1){let b=Array.from(p).sort((j,B)=>c(j)-c(B)),S=Math.floor(p.size/2),I=c(b[S]);if(I<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){let j=this.gossipsub.backoff.get(y);tv.getGossipPeers(this.gossipsub,y,sR.GossipsubOpportunisticGraftPeers,C=>p.has(C)&&!this.gossipsub.direct.has(C)&&(!j||!j.has(C))&&c(C)>I).forEach(C=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",C,y),w(C)})}}this.gossipsub._emitGossip(y,p)});let h=this.gossipsub._now();this.gossipsub.lastpub.forEach((p,y)=>{p+o<h&&(this.gossipsub.fanout.delete(y),this.gossipsub.lastpub.delete(y))}),this.gossipsub.fanout.forEach((p,y)=>{let m=this.gossipsub.topics.get(y);if(p.forEach(w=>{(!m.has(w)||c(w)<this.gossipsub._options.scoreThresholds.publishThreshold)&&p.delete(w)}),p.size<e){let w=e-p.size;tv.getGossipPeers(this.gossipsub,y,w,S=>!p.has(S)&&!this.gossipsub.direct.has(S)&&c(S)>=this.gossipsub._options.scoreThresholds.publishThreshold).forEach(S=>{p.add(S)})}this.gossipsub._emitGossip(y,p)}),this.gossipsub._sendGraftPrune(u,f,d),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}};Pc.Heartbeat=Sse});var oR=v(g1=>{l();"use strict";Object.defineProperty(g1,"__esModule",{value:!0});g1.ERR_INVALID_PEER_SCORE_THRESHOLDS=g1.ERR_INVALID_PEER_SCORE_PARAMS=void 0;g1.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS";g1.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"});var aR=v((_vt,Ise)=>{l();"use strict";function Ase(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Yqe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Ase(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Ase(new n,r)}}Ise.exports=Yqe});var cR=v(Cn=>{l();"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.validateTopicScoreParams=Cn.validatePeerScoreParams=Cn.createTopicScoreParams=Cn.createPeerScoreParams=Cn.defaultTopicScoreParams=Cn.defaultPeerScoreParams=void 0;var fr=oR(),lr=aR();Cn.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3};Cn.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function Xqe(t={}){return Object.assign(Object.assign(Object.assign({},Cn.defaultPeerScoreParams),t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=Tse(i),e),{}):{}})}Cn.createPeerScoreParams=Xqe;function Tse(t={}){return Object.assign(Object.assign({},Cn.defaultTopicScoreParams),t)}Cn.createTopicScoreParams=Tse;function Qqe(t){for(let[e,r]of Object.entries(t.topics))try{Rse(r)}catch(i){throw lr(new Error(`invalid score parameters for topic ${e}: ${i.message}`),fr.ERR_INVALID_PEER_SCORE_PARAMS)}if(t.topicScoreCap<0)throw lr(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.appSpecificScore===null||t.appSpecificScore===void 0)throw lr(new Error("missing application specific score function"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight>0)throw lr(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.IPColocationFactorWeight!==0&&t.IPColocationFactorThreshold<1)throw lr(new Error("invalid IPColocationFactorThreshold; must be at least 1"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight>0)throw lr(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.behaviourPenaltyWeight!==0&&(t.behaviourPenaltyDecay<=0||t.behaviourPenaltyDecay>=1))throw lr(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayInterval<1e3)throw lr(new Error("invalid DecayInterval; must be at least 1s"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.decayToZero<=0||t.decayToZero>=1)throw lr(new Error("invalid DecayToZero; must be between 0 and 1"),fr.ERR_INVALID_PEER_SCORE_PARAMS)}Cn.validatePeerScoreParams=Qqe;function Rse(t){if(t.topicWeight<0)throw lr(new Error("invalid topic weight; must be >= 0"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshQuantum===0)throw lr(new Error("invalid TimeInMeshQuantum; must be non zero"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight<0)throw lr(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshQuantum<=0)throw lr(new Error("invalid TimeInMeshQuantum; must be positive"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.timeInMeshWeight!==0&&t.timeInMeshCap<=0)throw lr(new Error("invalid TimeInMeshCap; must be positive"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight<0)throw lr(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&(t.firstMessageDeliveriesDecay<=0||t.firstMessageDeliveriesDecay>=1))throw lr(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.firstMessageDeliveriesWeight!==0&&t.firstMessageDeliveriesCap<=0)throw lr(new Error("invalid FirstMessageDeliveriesCap; must be positive"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight>0)throw lr(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&(t.meshMessageDeliveriesDecay<=0||t.meshMessageDeliveriesDecay>=1))throw lr(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesCap<=0)throw lr(new Error("invalid MeshMessageDeliveriesCap; must be positive"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesThreshold<=0)throw lr(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWindow<0)throw lr(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshMessageDeliveriesWeight!==0&&t.meshMessageDeliveriesActivation<1e3)throw lr(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight>0)throw lr(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.meshFailurePenaltyWeight!==0&&(t.meshFailurePenaltyDecay<=0||t.meshFailurePenaltyDecay>=1))throw lr(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesWeight>0)throw lr(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),fr.ERR_INVALID_PEER_SCORE_PARAMS);if(t.invalidMessageDeliveriesDecay<=0||t.invalidMessageDeliveriesDecay>=1)throw lr(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),fr.ERR_INVALID_PEER_SCORE_PARAMS)}Cn.validateTopicScoreParams=Rse});var Pse=v(Ou=>{l();"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.validatePeerScoreThresholds=Ou.createPeerScoreThresholds=Ou.defaultPeerScoreThresholds=void 0;var Im=oR(),Tm=aR();Ou.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function Zqe(t={}){return Object.assign(Object.assign({},Ou.defaultPeerScoreThresholds),t)}Ou.createPeerScoreThresholds=Zqe;function Jqe(t){if(t.gossipThreshold>0)throw Tm(new Error("invalid gossip threshold; it must be <= 0"),Im.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.publishThreshold>0||t.publishThreshold>t.gossipThreshold)throw Tm(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),Im.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.graylistThreshold>0||t.graylistThreshold>t.publishThreshold)throw Tm(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),Im.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.acceptPXThreshold<0)throw Tm(new Error("invalid accept PX threshold; it must be >= 0"),Im.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(t.opportunisticGraftThreshold<0)throw Tm(new Error("invalid opportunistic grafting threshold; it must be >= 0"),Im.ERR_INVALID_PEER_SCORE_THRESHOLDS)}Ou.validatePeerScoreThresholds=Jqe});var Cse=v(hl=>{l();"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.ensureTopicStats=hl.createTopicStats=hl.createPeerStats=void 0;function eje(t={}){return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},t),{topics:t.topics?Object.entries(t.topics).reduce((e,[r,i])=>(e[r]=uR(i),e),{}):{}})}hl.createPeerStats=eje;function uR(t={}){return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},t)}hl.createTopicStats=uR;function tje(t,e,r){let i=e.topics[t];if(i)return i;if(!!r.topics[t])return e.topics[t]=i=uR(),i}hl.ensureTopicStats=tje});var Ose=v(rv=>{l();"use strict";Object.defineProperty(rv,"__esModule",{value:!0});rv.computeScore=void 0;function rje(t,e,r,i){let n=0;return Object.entries(e.topics).forEach(([a,c])=>{let u=r.topics[a];if(!u)return;let f=0;if(c.inMesh){let y=c.meshTime/u.timeInMeshQuantum;y>u.timeInMeshCap&&(y=u.timeInMeshCap),f+=y*u.timeInMeshWeight}if(f+=c.firstMessageDeliveries*u.firstMessageDeliveriesWeight,c.meshMessageDeliveriesActive&&c.meshMessageDeliveries<u.meshMessageDeliveriesThreshold){let y=u.meshMessageDeliveriesThreshold-c.meshMessageDeliveries;f+=y*y*u.meshMessageDeliveriesWeight}f+=c.meshFailurePenalty*u.meshFailurePenaltyWeight,f+=c.invalidMessageDeliveries*c.invalidMessageDeliveries*u.invalidMessageDeliveriesWeight,n+=f*u.topicWeight}),r.topicScoreCap>0&&n>r.topicScoreCap&&(n=r.topicScoreCap),n+=r.appSpecificScore(t)*r.appSpecificWeight,e.ips.forEach(a=>{if(r.IPColocationFactorWhitelist.has(a))return;let c=i.get(a),u=c?c.size:0;if(u>r.IPColocationFactorThreshold){let f=u-r.IPColocationFactorThreshold;n+=f*f*r.IPColocationFactorWeight}}),n+=e.behaviourPenalty*e.behaviourPenalty*r.behaviourPenaltyWeight,n}rv.computeScore=rje});var Dse=v((Ivt,kse)=>{l();"use strict";function ri(t,e){var e=e||{};this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}ri.prototype.peekAt=function(e){var r=e;if(r===(r|0)){var i=this.size();if(!(r>=i||r<-i))return r<0&&(r+=i),r=this._head+r&this._capacityMask,this._list[r]}};ri.prototype.get=function(e){return this.peekAt(e)};ri.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};ri.prototype.peekFront=function(){return this.peek()};ri.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(ri.prototype,"length",{get:function(){return this.size()}});ri.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ri.prototype.unshift=function(e){if(e===void 0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ri.prototype.shift=function(){var e=this._head;if(e!==this._tail){var r=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}};ri.prototype.push=function(e){if(e===void 0)return this.size();var r=this._tail;return this._list[r]=e,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};ri.prototype.pop=function(){var e=this._tail;if(e!==this._head){var r=this._list.length;this._tail=e-1+r&this._capacityMask;var i=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=r>>>2&&this._shrinkArray(),i}};ri.prototype.removeOne=function(e){var r=e;if(r===(r|0)&&this._head!==this._tail){var i=this.size(),n=this._list.length;if(!(r>=i||r<-i)){r<0&&(r+=i),r=this._head+r&this._capacityMask;var s=this._list[r],o;if(e<i/2){for(o=e;o>0;o--)this._list[r]=this._list[r=r-1+n&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(o=i-1-e;o>0;o--)this._list[r]=this._list[r=r+1+n&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}};ri.prototype.remove=function(e,r){var i=e,n,s=r;if(i===(i|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(i>=o||i<-o||r<1)){if(i<0&&(i+=o),r===1||!r)return n=new Array(1),n[0]=this.removeOne(i),n;if(i===0&&i+r>=o)return n=this.toArray(),this.clear(),n;i+r>o&&(r=o-i);var c;for(n=new Array(r),c=0;c<r;c++)n[c]=this._list[this._head+i+c&this._capacityMask];if(i=this._head+i&this._capacityMask,e+r===o){for(this._tail=this._tail-r+a&this._capacityMask,c=r;c>0;c--)this._list[i=i+1+a&this._capacityMask]=void 0;return n}if(e===0){for(this._head=this._head+r+a&this._capacityMask,c=r-1;c>0;c--)this._list[i=i+1+a&this._capacityMask]=void 0;return n}if(i<o/2){for(this._head=this._head+e+r+a&this._capacityMask,c=e;c>0;c--)this.unshift(this._list[i=i-1+a&this._capacityMask]);for(i=this._head-1+a&this._capacityMask;s>0;)this._list[i=i-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=i)}else{for(this._tail=i,i=i+r+a&this._capacityMask,c=o-(r+e);c>0;c--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),n}}};ri.prototype.splice=function(e,r){var i=e;if(i===(i|0)){var n=this.size();if(i<0&&(i+=n),!(i>n))if(arguments.length>2){var s,o,a,c=arguments.length,u=this._list.length,f=2;if(!n||i<n/2){for(o=new Array(i),s=0;s<i;s++)o[s]=this._list[this._head+s&this._capacityMask];for(r===0?(a=[],i>0&&(this._head=this._head+i+u&this._capacityMask)):(a=this.remove(i,r),this._head=this._head+i+u&this._capacityMask);c>f;)this.unshift(arguments[--c]);for(s=i;s>0;s--)this.unshift(o[s-1])}else{o=new Array(n-(i+r));var d=o.length;for(s=0;s<d;s++)o[s]=this._list[this._head+i+r+s&this._capacityMask];for(r===0?(a=[],i!=n&&(this._tail=this._head+i+u&this._capacityMask)):(a=this.remove(i,r),this._tail=this._tail-d+u&this._capacityMask);f<c;)this.push(arguments[f++]);for(s=0;s<d;s++)this.push(o[s])}return a}else return this.remove(i,r)}};ri.prototype.clear=function(){this._head=0,this._tail=0};ri.prototype.isEmpty=function(){return this._head===this._tail};ri.prototype.toArray=function(){return this._copyArray(!1)};ri.prototype._fromArray=function(e){for(var r=0;r<e.length;r++)this.push(e[r])};ri.prototype._copyArray=function(e){var r=[],i=this._list,n=i.length,s;if(e||this._head>this._tail){for(s=this._head;s<n;s++)r.push(i[s]);for(s=0;s<this._tail;s++)r.push(i[s])}else for(s=this._head;s<this._tail;s++)r.push(i[s]);return r};ri.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};ri.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};kse.exports=ri});var Mse=v(ku=>{l();"use strict";var ije=ku&&ku.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ku,"__esModule",{value:!0});ku.MessageDeliveries=ku.DeliveryRecordStatus=void 0;var nje=ch(),sje=ije(Dse()),oje=uh(),Bse;(function(t){t[t.unknown=0]="unknown",t[t.valid=1]="valid",t[t.invalid=2]="invalid",t[t.ignored=3]="ignored"})(Bse=ku.DeliveryRecordStatus||(ku.DeliveryRecordStatus={}));var Nse=class{constructor(){this.records=new Map,this.queue=new sje.default}ensureRecord(e){let r=oje.messageIdToString(e),i=this.records.get(r);if(i)return i;i={status:Bse.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(r,i);let n={msgId:r,expire:Date.now()+nje.TimeCacheDuration};return this.queue.push(n),i}gc(){let e=Date.now(),r=this.queue.peekFront();for(;r&&r.expire<e;)this.records.delete(r.msgId),this.queue.shift(),r=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}};ku.MessageDeliveries=Nse});var qse=v(pl=>{l();"use strict";var iv=pl&&pl.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{u(i.next(f))}catch(d){o(d)}}function c(f){try{u(i.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):n(f.value).then(a,c)}u((i=i.apply(t,e||[])).next())})},aje=pl&&pl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pl,"__esModule",{value:!0});pl.PeerScore=void 0;var cje=cR(),m1=Cse(),uje=Ose(),ba=Mse(),fje=ch(),lje=aje(it()),dje=Ee(),hje=V8(),{ERR_INVALID_SIGNATURE:pje,ERR_MISSING_SIGNATURE:yje}=hje.codes,b1=dje("libp2p:gossipsub:score"),Lse=class{constructor(e,r,i){cje.validatePeerScoreParams(e),this.params=e,this._connectionManager=r,this.peerStats=new Map,this.peerIPs=new Map,this.deliveryRecords=new ba.MessageDeliveries,this.msgId=i}start(){if(this._backgroundInterval){b1("Peer score already running");return}this._backgroundInterval=setInterval(()=>this.background(),this.params.decayInterval),b1("started")}stop(){if(!this._backgroundInterval){b1("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),b1("stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){let e=Date.now(),r=this.params.decayToZero;this.peerStats.forEach((i,n)=>{if(!i.connected){e>i.expire&&(this._removeIPs(n,i.ips),this.peerStats.delete(n));return}Object.entries(i.topics).forEach(([s,o])=>{let a=this.params.topics[s];!a||(o.firstMessageDeliveries*=a.firstMessageDeliveriesDecay,o.firstMessageDeliveries<r&&(o.firstMessageDeliveries=0),o.meshMessageDeliveries*=a.meshMessageDeliveriesDecay,o.meshMessageDeliveries<r&&(o.meshMessageDeliveries=0),o.meshFailurePenalty*=a.meshFailurePenaltyDecay,o.meshFailurePenalty<r&&(o.meshFailurePenalty=0),o.invalidMessageDeliveries*=a.invalidMessageDeliveriesDecay,o.invalidMessageDeliveries<r&&(o.invalidMessageDeliveries=0),o.inMesh&&(o.meshTime=e-o.graftTime,o.meshTime>a.meshMessageDeliveriesActivation&&(o.meshMessageDeliveriesActive=!0)))}),i.behaviourPenalty*=this.params.behaviourPenaltyDecay,i.behaviourPenalty<r&&(i.behaviourPenalty=0)})}score(e){let r=this.peerStats.get(e);return r?uje.computeScore(e,r,this.params,this.peerIPs):0}addPenalty(e,r){let i=this.peerStats.get(e);!i||(i.behaviourPenalty+=r)}addPeer(e){let r=m1.createPeerStats({connected:!0});this.peerStats.set(e,r);let i=this._getIPs(e);this._setIPs(e,i,r.ips),r.ips=i}removePeer(e){let r=this.peerStats.get(e);if(!!r){if(this.score(e)>0){this._removeIPs(e,r.ips),this.peerStats.delete(e);return}Object.entries(r.topics).forEach(([i,n])=>{n.firstMessageDeliveries=0;let s=this.params.topics[i].meshMessageDeliveriesThreshold;if(n.inMesh&&n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let o=s-n.meshMessageDeliveries;n.meshFailurePenalty+=o*o}n.inMesh=!1}),r.connected=!1,r.expire=Date.now()+this.params.retainScore}}graft(e,r){let i=this.peerStats.get(e);if(!i)return;let n=m1.ensureTopicStats(r,i,this.params);!n||(n.inMesh=!0,n.graftTime=Date.now(),n.meshTime=0,n.meshMessageDeliveriesActive=!1)}prune(e,r){let i=this.peerStats.get(e);if(!i)return;let n=m1.ensureTopicStats(r,i,this.params);if(!n)return;let s=this.params.topics[r].meshMessageDeliveriesThreshold;if(n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s){let o=s-n.meshMessageDeliveries;n.meshFailurePenalty+=o*o}n.inMesh=!1}validateMessage(e){return iv(this,void 0,void 0,function*(){this.deliveryRecords.ensureRecord(yield this.msgId(e))})}deliverMessage(e){return iv(this,void 0,void 0,function*(){let r=e.receivedFrom;this._markFirstMessageDelivery(r,e);let i=this.deliveryRecords.ensureRecord(yield this.msgId(e)),n=Date.now();if(i.status!==ba.DeliveryRecordStatus.unknown){b1("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",r,n-i.firstSeen,ba.DeliveryRecordStatus[i.status]);return}i.status=ba.DeliveryRecordStatus.valid,i.validated=n,i.peers.forEach(s=>{s!==r&&this._markDuplicateMessageDelivery(s,e)})})}rejectMessage(e,r){return iv(this,void 0,void 0,function*(){let i=e.receivedFrom;switch(r){case yje:case pje:this._markInvalidMessageDelivery(i,e);return}let n=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(n.status!==ba.DeliveryRecordStatus.unknown){b1("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",i,Date.now()-n.firstSeen,ba.DeliveryRecordStatus[n.status]);return}switch(r){case fje.ERR_TOPIC_VALIDATOR_IGNORE:n.status=ba.DeliveryRecordStatus.ignored;return}n.status=ba.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(i,e),n.peers.forEach(s=>{this._markInvalidMessageDelivery(s,e)})})}duplicateMessage(e){return iv(this,void 0,void 0,function*(){let r=e.receivedFrom,i=this.deliveryRecords.ensureRecord(yield this.msgId(e));if(!i.peers.has(r))switch(i.status){case ba.DeliveryRecordStatus.unknown:i.peers.add(r);break;case ba.DeliveryRecordStatus.valid:i.peers.add(r),this._markDuplicateMessageDelivery(r,e,i.validated);break;case ba.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(r,e);break}})}_markInvalidMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=m1.ensureTopicStats(n,i,this.params);!s||(s.invalidMessageDeliveries+=1)})}_markFirstMessageDelivery(e,r){let i=this.peerStats.get(e);!i||r.topicIDs.forEach(n=>{let s=m1.ensureTopicStats(n,i,this.params);if(!s)return;let o=this.params.topics[n].firstMessageDeliveriesCap;s.firstMessageDeliveries+=1,s.firstMessageDeliveries>o&&(s.firstMessageDeliveries=o),!!s.inMesh&&(o=this.params.topics[n].meshMessageDeliveriesCap,s.meshMessageDeliveries+=1,s.meshMessageDeliveries>o&&(s.meshMessageDeliveries=o))})}_markDuplicateMessageDelivery(e,r,i=0){let n=this.peerStats.get(e);if(!n)return;let s=i?Date.now():0;r.topicIDs.forEach(o=>{let a=m1.ensureTopicStats(o,n,this.params);if(!a||!a.inMesh)return;let c=this.params.topics[o];if(i&&s>i+c.meshMessageDeliveriesWindow)return;let u=c.meshMessageDeliveriesCap;a.meshMessageDeliveries+=1,a.meshMessageDeliveries>u&&(a.meshMessageDeliveries=u)})}_getIPs(e){return this._connectionManager.getAll(lje.default.createFromB58String(e)).map(r=>r.remoteAddr.toOptions().host)}_setIPs(e,r,i){e:for(let n of r){for(let o of i)if(n===o)continue e;let s=this.peerIPs.get(n);s||(s=new Set,this.peerIPs.set(n,s)),s.add(e)}e:for(let n of i){for(let o of r)if(n===o)continue e;let s=this.peerIPs.get(n);!s||(s.delete(e),s.size||this.peerIPs.delete(n))}}_removeIPs(e,r){r.forEach(i=>{let n=this.peerIPs.get(i);!n||(n.delete(e),n.size||this.peerIPs.delete(i))})}_updateIPs(){this.peerStats.forEach((e,r)=>{let i=this._getIPs(r);this._setIPs(r,i,e.ips),e.ips=i})}};pl.PeerScore=Lse});var jse=v(Du=>{l();"use strict";var gje=Du&&Du.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),fR=Du&&Du.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&gje(e,t,r)};Object.defineProperty(Du,"__esModule",{value:!0});fR(cR(),Du);fR(Pse(),Du);fR(qse(),Du)});var Kse=v(v1=>{l();"use strict";var Use=v1&&v1.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{u(i.next(f))}catch(d){o(d)}}function c(f){try{u(i.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):n(f.value).then(a,c)}u((i=i.apply(t,e||[])).next())})};Object.defineProperty(v1,"__esModule",{value:!0});v1.IWantTracer=void 0;var mje=ch(),lR=uh(),bje=V8(),{ERR_INVALID_SIGNATURE:vje,ERR_MISSING_SIGNATURE:wje}=bje.codes,Fse=class{constructor(e){this.getMsgId=e,this.promises=new Map}addPromise(e,r){let i=Math.floor(Math.random()*r.length),n=r[i],s=lR.messageIdToString(n),o=this.promises.get(s);o||(o=new Map,this.promises.set(s,o)),o.has(e)||o.set(e,Date.now()+mje.GossipsubIWantFollowupTime)}getBrokenPromises(){let e=Date.now(),r=new Map;return this.promises.forEach((i,n)=>{i.forEach((s,o)=>{s<e&&(r.set(o,(r.get(o)||0)+1),i.delete(o))}),i.size||this.promises.delete(n)}),r}deliverMessage(e){return Use(this,void 0,void 0,function*(){let r=yield this.getMsgId(e),i=lR.messageIdToString(r);this.promises.delete(i)})}rejectMessage(e,r){return Use(this,void 0,void 0,function*(){switch(r){case vje:case wje:return}let i=yield this.getMsgId(e),n=lR.messageIdToString(i);this.promises.delete(n)})}clear(){this.promises.clear()}};v1.IWantTracer=Fse});var Gse=v((Ovt,$se)=>{l();var Vse="Expected a function",zse=0/0,_je="[object Symbol]",Eje=/^\s+|\s+$/g,Sje=/^[-+]0x[0-9a-f]+$/i,xje=/^0b[01]+$/i,Aje=/^0o[0-7]+$/i,Ije=parseInt,Tje=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Rje=typeof self=="object"&&self&&self.Object===Object&&self,Pje=Tje||Rje||Function("return this")(),Cje=Object.prototype,Oje=Cje.toString,kje=Math.max,Dje=Math.min,dR=function(){return Pje.Date.now()};function Bje(t,e,r){var i,n,s,o,a,c,u=0,f=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(Vse);e=Hse(e)||0,nv(r)&&(f=!!r.leading,d="maxWait"in r,s=d?kje(Hse(r.maxWait)||0,e):s,h="trailing"in r?!!r.trailing:h);function p(C){var z=i,W=n;return i=n=void 0,u=C,o=t.apply(W,z),o}function y(C){return u=C,a=setTimeout(b,e),f?p(C):o}function m(C){var z=C-c,W=C-u,X=e-z;return d?Dje(X,s-W):X}function w(C){var z=C-c,W=C-u;return c===void 0||z>=e||z<0||d&&W>=s}function b(){var C=dR();if(w(C))return S(C);a=setTimeout(b,m(C))}function S(C){return a=void 0,h&&i?p(C):(i=n=void 0,o)}function I(){a!==void 0&&clearTimeout(a),u=0,i=c=n=a=void 0}function j(){return a===void 0?o:S(dR())}function B(){var C=dR(),z=w(C);if(i=arguments,n=this,c=C,z){if(a===void 0)return y(c);if(d)return a=setTimeout(b,e),p(c)}return a===void 0&&(a=setTimeout(b,e)),o}return B.cancel=I,B.flush=j,B}function Nje(t,e,r){var i=!0,n=!0;if(typeof t!="function")throw new TypeError(Vse);return nv(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),Bje(t,e,{leading:i,maxWait:e,trailing:n})}function nv(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Mje(t){return!!t&&typeof t=="object"}function Lje(t){return typeof t=="symbol"||Mje(t)&&Oje.call(t)==_je}function Hse(t){if(typeof t=="number")return t;if(Lje(t))return zse;if(nv(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=nv(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Eje,"");var r=xje.test(t);return r||Aje.test(t)?Ije(t.slice(2),r?2:8):Sje.test(t)?zse:+t}$se.exports=Nje});var Xse=v((Wse,Yse)=>{l();"use strict";var qje=Gse();Wse=Yse.exports=hR;function hR(t){if(!(this instanceof hR))return new hR(t);t=t||{};let e=t.validity||30,r=new Map,i=qje(()=>{r.forEach((n,s)=>{let o=n.validity||e;jje(n.timestamp)>o&&r.delete(s)})},200);this.put=(n,s,o)=>{this.has(n)||r.set(n,{value:s,timestamp:new Date,validity:o}),i()},this.get=n=>{if(r.has(n))return r.get(n).value;throw new Error("key does not exist")},this.has=n=>r.has(n)}function jje(t){let r=new Date().getTime()-t.getTime();return Math.floor(r/1e3)}});var _r=v((kvt,Zse)=>{l();"use strict";function Qse(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Uje(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Qse(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Qse(new n,r)}}Zse.exports=Uje});var Ei=v(pR=>{l();"use strict";pR.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required"};pR.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"}});var toe=v((Bvt,eoe)=>{l();"use strict";var w1=Vi(),Jse=w1.Reader,Fje=w1.Writer,Cr=w1.util,Rm=w1.roots["libp2p-envelope"]||(w1.roots["libp2p-envelope"]={});Rm.Envelope=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.publicKey=Cr.newBuffer([]),t.prototype.payloadType=Cr.newBuffer([]),t.prototype.payload=Cr.newBuffer([]),t.prototype.signature=Cr.newBuffer([]),t.encode=function(r,i){return i||(i=Fje.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&i.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&i.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&i.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&i.uint32(42).bytes(r.signature),i},t.decode=function(r,i){r instanceof Jse||(r=Jse.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Rm.Envelope;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.publicKey=r.bytes();break;case 2:s.payloadType=r.bytes();break;case 3:s.payload=r.bytes();break;case 5:s.signature=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Rm.Envelope)return r;var i=new Rm.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?Cr.base64.decode(r.publicKey,i.publicKey=Cr.newBuffer(Cr.base64.length(r.publicKey)),0):r.publicKey.length&&(i.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?Cr.base64.decode(r.payloadType,i.payloadType=Cr.newBuffer(Cr.base64.length(r.payloadType)),0):r.payloadType.length&&(i.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?Cr.base64.decode(r.payload,i.payload=Cr.newBuffer(Cr.base64.length(r.payload)),0):r.payload.length&&(i.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?Cr.base64.decode(r.signature,i.signature=Cr.newBuffer(Cr.base64.length(r.signature)),0):r.signature.length&&(i.signature=r.signature)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(i.bytes===String?n.publicKey="":(n.publicKey=[],i.bytes!==Array&&(n.publicKey=Cr.newBuffer(n.publicKey))),i.bytes===String?n.payloadType="":(n.payloadType=[],i.bytes!==Array&&(n.payloadType=Cr.newBuffer(n.payloadType))),i.bytes===String?n.payload="":(n.payload=[],i.bytes!==Array&&(n.payload=Cr.newBuffer(n.payload))),i.bytes===String?n.signature="":(n.signature=[],i.bytes!==Array&&(n.signature=Cr.newBuffer(n.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=i.bytes===String?Cr.base64.encode(r.publicKey,0,r.publicKey.length):i.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(n.payloadType=i.bytes===String?Cr.base64.encode(r.payloadType,0,r.payloadType.length):i.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(n.payload=i.bytes===String?Cr.base64.encode(r.payload,0,r.payload.length):i.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=i.bytes===String?Cr.base64.encode(r.signature,0,r.signature.length):i.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,w1.util.toJSONOptions)},t}();eoe.exports=Rm});var Pm=v((Nvt,noe)=>{l();"use strict";var Kje=_r(),{concat:Vje}=(bn(),Gs),{fromString:zje}=(dt(),bi),Hje=W4(),$je=it(),yR=Ss(),{equals:sv}=(wi(),vn),{codes:Gje}=Ei(),{Envelope:roe}=toe(),yl=class{constructor({peerId:e,payloadType:r,payload:i,signature:n}){this.peerId=e,this.payloadType=r,this.payload=i,this.signature=n,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;let e=Hje.marshalPublicKey(this.peerId.pubKey);return this._marshal=roe.encode({publicKey:e,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(e){return sv(this.peerId.pubKey.bytes,e.peerId.pubKey.bytes)&&sv(this.payloadType,e.payloadType)&&sv(this.payload,e.payload)&&sv(this.signature,e.signature)}validate(e){let r=ioe(e,this.payloadType,this.payload);return this.peerId.pubKey.verify(r,this.signature)}},ioe=(t,e,r)=>{let i=zje(t),n=yR.encode(i.byteLength),s=yR.encode(e.length),o=yR.encode(r.length);return Vje([new Uint8Array(n),i,new Uint8Array(s),e,new Uint8Array(o),r])};yl.createFromProtobuf=async t=>{let e=roe.decode(t),r=await $je.createFromPubKey(e.publicKey);return new yl({peerId:r,payloadType:e.payloadType,payload:e.payload,signature:e.signature})};yl.seal=async(t,e)=>{let r=t.domain,i=t.codec,n=t.marshal(),s=ioe(r,i,n),o=await e.privKey.sign(s);return new yl({peerId:e,payloadType:i,payload:n,signature:o})};yl.openAndCertify=async(t,e)=>{let r=await yl.createFromProtobuf(t);if(!await r.validate(e))throw Kje(new Error("envelope signature is not valid for the given domain"),Gje.ERR_SIGNATURE_NOT_VALID);return r};noe.exports=yl});var _R=v((Bu,ooe)=>{l();"use strict";var Wje=Bu&&Bu.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Yje=Bu&&Bu.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),soe=Bu&&Bu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Wje(e,t,r);return Yje(e,t),e},_1=Bu&&Bu.__awaiter||function(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(f){try{u(i.next(f))}catch(d){o(d)}}function c(f){try{u(i.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):n(f.value).then(a,c)}u((i=i.apply(t,e||[])).next())})},gR=soe(dse()),Xje=vse(),mR=_se(),Ot=soe(ch()),Qje=xse(),ov=nR(),Ji=uh(),bR=jse(),Zje=Kse(),Jje=Xse(),vR=it(),eUe=Pm(),wR=class extends gR.default{constructor(e,r={}){let i=[Ot.GossipsubIDv11,Ot.GossipsubIDv10],n=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:Ot.GossipsubD,Dlo:Ot.GossipsubDlo,Dhi:Ot.GossipsubDhi,Dscore:Ot.GossipsubDscore,Dout:Ot.GossipsubDout,Dlazy:Ot.GossipsubDlazy,heartbeatInterval:Ot.GossipsubHeartbeatInterval,fanoutTTL:Ot.GossipsubFanoutTTL,mcacheLength:Ot.GossipsubHistoryLength,mcacheGossip:Ot.GossipsubHistoryGossip,seenTTL:Ot.GossipsubSeenTTL},r),{scoreParams:bR.createPeerScoreParams(r.scoreParams),scoreThresholds:bR.createPeerScoreThresholds(r.scoreThresholds)});n.fallbackToFloodsub&&i.push(Ot.FloodsubID);super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:i,libp2p:e},n));this._options=n,this.direct=new Set(n.directPeers.map(s=>s.id.toB58String())),n.directPeers.forEach(s=>{e.peerStore.addressBook.add(s.id,s.addrs)}),this.seenCache=new Jje({validity:n.seenTTL/1e3}),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=r.messageCache||new Xje.MessageCache(n.mcacheGossip,n.mcacheLength,this.getMsgId.bind(this)),this.heartbeat=new Qje.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new Zje.IWantTracer(this.getMsgId.bind(this)),this._libp2p=e,this.score=new bR.PeerScore(this._options.scoreParams,e.connectionManager,this.getMsgId.bind(this))}_decodeRpc(e){return mR.RPC.decode(e)}_encodeRpc(e){return mR.RPC.encode(e).finish()}_addPeer(e,r){let i=super._addPeer(e,r);this.score.addPeer(e.toB58String());let n=!1;for(let s of this._libp2p.connectionManager.getAll(e))if(s.stat.direction==="outbound"&&Array.from(s.registry.values()).some(o=>r===o.protocol)){n=!0;break}return this.outbound.set(i.id.toB58String(),n),i}_removePeer(e){let r=super._removePeer(e),i=e.toB58String();for(let n of this.mesh.values())n.delete(i);for(let n of this.fanout.values())n.delete(i);return this.gossip.delete(i),this.control.delete(i),this.outbound.delete(i),this.score.removePeer(i),r}_processRpc(e,r,i){let n=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return _1(this,void 0,void 0,function*(){return(yield n._processRpc.call(this,e,r,i))?(i.control&&this._processRpcControlMessage(e,i.control),!0):!1})}_processRpcControlMessage(e,r){if(!r)return;let i=r.ihave?this._handleIHave(e,r.ihave):[],n=r.iwant?this._handleIWant(e,r.iwant):[],s=r.graft?this._handleGraft(e,r.graft):[];if(r.prune&&this._handlePrune(e,r.prune),!i.length&&!n.length&&!s.length)return;let o=Ji.createGossipRpc(n,{iwant:i,prune:s});this._sendRpc(e,o)}_processRpcMessage(e){let r=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return _1(this,void 0,void 0,function*(){let i=yield this.getMsgId(e),n=Ji.messageIdToString(i);if(this.seenCache.has(n)){this.score.duplicateMessage(e);return}this.seenCache.put(n),yield this.score.validateMessage(e),yield r._processRpcMessage.call(this,e)})}_acceptFrom(e){return this.direct.has(e)||this.score.score(e)>=this._options.scoreThresholds.graylistThreshold}validate(e){let r=Object.create(null,{validate:{get:()=>super.validate}});return _1(this,void 0,void 0,function*(){try{yield r.validate.call(this,e)}catch(i){throw this.score.rejectMessage(e,i.code),this.gossipTracer.rejectMessage(e,i.code),i}})}_handleIHave(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,i),[];let n=(this.peerhave.get(e)||0)+1;if(this.peerhave.set(e,n),n>Ot.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,n),[];let s=this.iasked.get(e)||0;if(s>=Ot.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,s),[];let o=new Map;if(r.forEach(({topicID:u,messageIDs:f})=>{!u||!f||!this.mesh.has(u)||f.forEach(d=>{let h=Ji.messageIdToString(d);this.seenCache.has(h)||o.set(h,d)})}),!o.size)return[];let a=o.size;a+s>Ot.GossipsubMaxIHaveLength&&(a=Ot.GossipsubMaxIHaveLength-s),this.log("IHAVE: Asking for %d out of %d messages from %s",a,o.size,e);let c=Array.from(o.values());return Ji.shuffle(c),c=c.slice(0,a),this.iasked.set(e,s+a),this.gossipTracer.addPromise(e,c),[{messageIDs:c}]}_handleIWant(e,r){if(!r.length)return[];let i=this.score.score(e);if(i<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,i),[];let n=new Map;return r.forEach(({messageIDs:s})=>{s&&s.forEach(o=>{let[a,c]=this.messageCache.getForPeer(o,e);if(!!a){if(c>Ot.GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,o);return}n.set(Ji.messageIdToString(o),a)}})}),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,e),Array.from(n.values()).map(gR.utils.normalizeOutRpcMessage)):[]}_handleGraft(e,r){let i=[],n=this.score.score(e),s=this._now(),o=this._options.doPX;return r.forEach(({topicID:a})=>{var c;if(!a)return;let u=this.mesh.get(a);if(!u){o=!1;return}if(u.has(e))return;if(this.direct.has(e)){this.log("GRAFT: ignoring request from direct peer %s",e),i.push(a),o=!1;return}let f=(c=this.backoff.get(a))===null||c===void 0?void 0:c.get(e);if(typeof f=="number"&&s<f){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1),o=!1;let d=f+Ot.GossipsubGraftFloodThreshold-Ot.GossipsubPruneBackoff;s<d&&this.score.addPenalty(e,1),this._addBackoff(e,a),i.push(a);return}if(n<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,a),i.push(a),o=!1,this._addBackoff(e,a);return}if(u.size>=this._options.Dhi&&!this.outbound.get(e)){i.push(a),this._addBackoff(e,a);return}this.log("GRAFT: Add mesh link from %s in %s",e,a),this.score.graft(e,a),u.add(e)}),i.length?i.map(a=>this._makePrune(e,a,o)):[]}_handlePrune(e,r){let i=this.score.score(e);r.forEach(({topicID:n,backoff:s,peers:o})=>{if(!n)return;let a=this.mesh.get(n);if(!!a&&(this.log("PRUNE: Remove mesh link to %s in %s",e,n),this.score.prune(e,n),a.delete(e),typeof s=="number"&&s>0?this._doAddBackoff(e,n,s*1e3):this._addBackoff(e,n),o&&o.length)){if(i<this._options.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,i,n);return}this._pxConnect(o)}})}_addBackoff(e,r){this._doAddBackoff(e,r,Ot.GossipsubPruneBackoff)}_doAddBackoff(e,r,i){let n=this.backoff.get(r);n||(n=new Map,this.backoff.set(r,n));let s=this._now()+i;(n.get(e)||0)<s&&n.set(e,s)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,r)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",r,e),this.score.addPenalty(r,e)})}_clearBackoff(){if(this.heartbeatTicks%Ot.GossipsubPruneBackoffTicks!=0)return;let e=this._now();this.backoff.forEach((r,i)=>{r.forEach((n,s)=>{n<e&&r.delete(s)}),r.size===0&&this.backoff.delete(i)})}_directConnect(){if(this.heartbeatTicks%Ot.GossipsubDirectConnectTicks!=0)return;let e=[];this.direct.forEach(r=>{let i=this.peers.get(r);(!i||!i.isWritable)&&e.push(r)}),e.length&&e.forEach(r=>{this._connect(r)})}_pxConnect(e){return _1(this,void 0,void 0,function*(){e.length>Ot.GossipsubPrunePeers&&(Ji.shuffle(e),e=e.slice(0,Ot.GossipsubPrunePeers));let r=[];yield Promise.all(e.map(i=>_1(this,void 0,void 0,function*(){if(!i.peerID)return;let s=vR.createFromBytes(i.peerID).toB58String();if(!this.peers.has(s)){if(!i.signedPeerRecord){r.push(s);return}try{let o=yield eUe.openAndCertify(i.signedPeerRecord,"libp2p-peer-record"),a=o.peerId.toB58String();if(s!==a){this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",a,s);return}if(!this._libp2p.peerStore.addressBook.consumePeerRecord(o)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}r.push(s)}catch(o){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}}))),!!r.length&&r.forEach(i=>this._connect(i))})}start(){super.start(),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout(()=>{this.direct.forEach(e=>{this._connect(e)})},Ot.GossipsubDirectConnectInitialDelay)}stop(){super.stop(),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),clearTimeout(this._directPeerInitial)}_connect(e){this.log("Initiating connection with %s",e),this._libp2p.dialProtocol(vR.createFromB58String(e),this.multicodecs)}subscribe(e){super.subscribe(e),this.join(e)}unsubscribe(e){super.unsubscribe(e),this.leave(e)}join(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",e);let r=this.fanout.get(e);if(r)r.forEach(i=>{this.score.score(i)<0&&r.delete(i)}),r.size<this._options.D&&ov.getGossipPeers(this,e,this._options.D-r.size,i=>!r.has(i)&&!this.direct.has(i)&&this.score.score(i)>=0).forEach(i=>r.add(i)),this.mesh.set(e,r),this.fanout.delete(e),this.lastpub.delete(e);else{let i=ov.getGossipPeers(this,e,this._options.D,n=>!this.direct.has(n)&&this.score.score(n)>=0);this.mesh.set(e,i)}this.mesh.get(e).forEach(i=>{this.log("JOIN: Add mesh link to %s in %s",i,e),this._sendGraft(i,e)})}leave(e){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e);let r=this.mesh.get(e);r&&(r.forEach(i=>{this.log("LEAVE: Remove mesh link to %s in %s",i,e),this._sendPrune(i,e)}),this.mesh.delete(e))}_publish(e){return _1(this,void 0,void 0,function*(){e.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(e),this.gossipTracer.deliverMessage(e));let r=yield this.getMsgId(e),i=Ji.messageIdToString(r);this.seenCache.put(i),this.messageCache.put(e);let n=new Set;e.topicIDs.forEach(o=>{let a=this.topics.get(o);if(!!a)if(this._options.floodPublish&&e.from===this.peerId.toB58String())a.forEach(c=>{(this.direct.has(c)||this.score.score(c)>=this._options.scoreThresholds.publishThreshold)&&n.add(c)});else{this.direct.forEach(u=>{n.add(u)}),a.forEach(u=>{let f=this.score.score(u),d=this.peers.get(u);!d||d.protocol===Ot.FloodsubID&&f>=this._options.scoreThresholds.publishThreshold&&n.add(u)});let c=this.mesh.get(o);if(!c||!c.size){if(c=this.fanout.get(o),!c){let u=ov.getGossipPeers(this,o,this._options.D,f=>this.score.score(f)>=this._options.scoreThresholds.publishThreshold);u.size>0?(c=u,this.fanout.set(o,u)):c=new Set}this.lastpub.set(o,this._now())}c.forEach(u=>{n.add(u)})}});let s=Ji.createGossipRpc([gR.utils.normalizeOutRpcMessage(e)]);n.forEach(o=>{o!==e.from&&this._sendRpc(o,s)})})}_sendGraft(e,r){let i=[{topicID:r}],n=Ji.createGossipRpc([],{graft:i});this._sendRpc(e,n)}_sendPrune(e,r){let i=[this._makePrune(e,r,this._options.doPX)],n=Ji.createGossipRpc([],{prune:i});this._sendRpc(e,n)}_sendRpc(e,r){let i=this.peers.get(e);if(!i||!i.isWritable)return;let n=this.control.get(e);n&&(this._piggybackControl(e,r,n),this.control.delete(e));let s=this.gossip.get(e);s&&(this._piggybackGossip(e,r,s),this.gossip.delete(e)),i.write(mR.RPC.encode(r).finish())}_piggybackControl(e,r,i){let n=(i.graft||[]).filter(({topicID:o})=>(o&&this.mesh.get(o)||new Set).has(e)),s=(i.prune||[]).filter(({topicID:o})=>!(o&&this.mesh.get(o)||new Set).has(e));!n.length&&!s.length||(r.control?(r.control.graft=r.control.graft&&r.control.graft.concat(n),r.control.prune=r.control.prune&&r.control.prune.concat(s)):r.control={ihave:[],iwant:[],graft:n,prune:s})}_piggybackGossip(e,r,i){r.control||(r.control={ihave:[],iwant:[],graft:[],prune:[]}),r.control.ihave=i}_sendGraftPrune(e,r,i){let n=this._options.doPX;for(let[s,o]of e){let a=o.map(d=>({topicID:d})),c=[],u=r.get(s);u&&(c=u.map(d=>this._makePrune(s,d,n&&!i.get(s))),r.delete(s));let f=Ji.createGossipRpc([],{graft:a,prune:c});this._sendRpc(s,f)}for(let[s,o]of r){let a=o.map(u=>this._makePrune(s,u,n&&!i.get(s))),c=Ji.createGossipRpc([],{prune:a});this._sendRpc(s,c)}}_emitGossip(e,r){let i=this.messageCache.getGossipIDs(e);if(!i.length)return;Ji.shuffle(i),i.length>Ot.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",i.length);let n=[],s=this.topics.get(e);if(!s)return;s.forEach(c=>{let u=this.peers.get(c);!u||!r.has(c)&&!this.direct.has(c)&&Ji.hasGossipProtocol(u.protocol)&&this.score.score(c)>=this._options.scoreThresholds.gossipThreshold&&n.push(c)});let o=this._options.Dlazy,a=Ot.GossipsubGossipFactor*n.length;a>o&&(o=a),o>n.length?o=n.length:Ji.shuffle(n),n.slice(0,o).forEach(c=>{let u=i;i.length>Ot.GossipsubMaxIHaveLength&&(u=Ji.shuffle(u.slice()).slice(0,Ot.GossipsubMaxIHaveLength)),this._pushGossip(c,{topicID:e,messageIDs:u})})}_flush(){for(let[e,r]of this.gossip.entries()){this.gossip.delete(e);let i=Ji.createGossipRpc([],{ihave:r});this._sendRpc(e,i)}for(let[e,r]of this.control.entries()){this.control.delete(e);let i=Ji.createGossipRpc([],{graft:r.graft,prune:r.prune});this._sendRpc(e,i)}}_pushGossip(e,r){this.log("Add gossip to %s",e);let i=this.gossip.get(e)||[];this.gossip.set(e,i.concat(r))}_now(){return Date.now()}_makePrune(e,r,i){if(this.peers.get(e).protocol===Ot.GossipsubIDv10)return{topicID:r,peers:[]};let n=Ot.GossipsubPruneBackoff/1e3,s=[];return i&&ov.getGossipPeers(this,r,Ot.GossipsubPrunePeers,a=>a!==e&&this.score.score(a)>=0).forEach(a=>{let c=vR.createFromB58String(a);s.push({peerID:c.toBytes(),signedPeerRecord:this._libp2p.peerStore.addressBook.getRawEnvelope(c)})}),{topicID:r,peers:s,backoff:n}}};wR.multicodec=Ot.GossipsubIDv11;ooe.exports=wR});var hoe=v((Lvt,doe)=>{l();"use strict";var SR=it(),{base58btc:tUe}=(li(),Fs),{default:rUe}=Fa(),coe=gu(),uoe=Ee(),gl=uoe("libp2p-delegated-peer-routing");gl.error=uoe("libp2p-delegated-peer-routing:error");var foe=3e4,iUe=4,loe=class{constructor(e){if(e==null)throw new Error("missing ipfs http client");this._client=e,this._httpQueue=new rUe({concurrency:iUe});let{protocol:r,host:i,port:n}=e.getEndpointConfig();gl(`enabled DelegatedPeerRouting via ${r}://${i}:${n}`)}async findPeer(e,r={}){let i=e;SR.isPeerId(i)&&(i=e.toB58String()),gl("findPeer starts: "+e),r.timeout=r.timeout||foe;try{return await this._httpQueue.add(async()=>{let{addrs:n}=await this._client.dht.findPeer(i,{timeout:r.timeout});return{id:e,multiaddrs:n}})}catch(n){if(n.message.includes("not found"))return;throw n}finally{gl("findPeer finished: "+e)}}async*getClosestPeers(e,r={}){let i=tUe.encode(e).substring(1);gl("getClosestPeers starts:",i),r.timeout=r.timeout||foe;let n=coe(),s=coe();this._httpQueue.add(()=>(n.resolve(),s.promise));try{await n.promise;let o=new Map;for await(let a of this._client.dht.query(i,{timeout:r.timeout}))switch(a.type){case 1:a.responses.forEach(c=>{o.set(c.id,{id:SR.parse(c.id),multiaddrs:c.addrs})});break;case 2:yield o.get(a.id.string)||{id:SR.createFromCID(a.id),multiaddrs:[]};break;default:gl("getClosestPeers unhandled response",a)}}catch(o){throw gl.error("getClosestPeers errored:",o),o}finally{s.resolve(),gl("getClosestPeers finished:",i)}}};doe.exports=loe});var voe=v((qvt,boe)=>{l();"use strict";var poe=Ee(),nUe=it(),sUe=fc(),{default:yoe}=Fa(),goe=gu(),fh=poe("libp2p-delegated-content-routing");fh.error=poe("libp2p-delegated-content-routing:error");var oUe=3e4,aUe=4,moe=class{constructor(e,r){if(e==null)throw new Error("missing self peerId");if(r==null)throw new Error("missing ipfs http client");this._client=r,this.peerId=e;let i={concurrency:aUe};this._httpQueue=new yoe(i),this._httpQueueRefs=new yoe(Object.assign({},i,{concurrency:2}));let{protocol:n,host:s,port:o}=r.getEndpointConfig();fh(`enabled DelegatedContentRouting via ${n}://${s}:${o}`)}async*findProviders(e,r={}){fh(`findProviders starts: ${e}`),r.timeout=r.timeout||oUe;let i=0,n=goe(),s=goe();this._httpQueue.add(()=>(n.resolve(),s.promise));try{await n.promise;for await(let{id:o,addrs:a}of this._client.dht.findProvs(e,{numProviders:r.numProviders,timeout:r.timeout}))yield{id:nUe.parse(o),multiaddrs:a},i++}catch(o){throw fh.error("findProviders errored:",o),o}finally{s.resolve(),fh(`findProviders finished: ${e} found ${i} providers`)}}async provide(e){fh(`provide starts: ${e}`),await this._httpQueueRefs.add(async()=>{await this._client.block.stat(e),await sUe(this._client.dht.provide(e))}),fh(`provide finished: ${e}`)}};boe.exports=moe});var hh=v((Jvt,Toe)=>{l();"use strict";function Ioe(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function vUe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Ioe(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Ioe(new n,r)}}Toe.exports=vUe});var Bm=v((Z_t,Xae)=>{l();Xae.exports=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){let e=t.getReader();try{for(;;){let{done:r,value:i}=await e.read();if(r)return;yield i}}finally{e.releaseLock()}}();throw new Error("unknown stream")}});var PR=v(()=>{l()});var CR=v((kRt,Yue)=>{l();"use strict";var DUe=Iy(),BUe=(t,e)=>({path:decodeURIComponent(new URL(t).pathname.split("/").pop()||""),content:NUe(t,e)});async function*NUe(t,e){yield*(await new DUe().get(t,e)).iterator()}Yue.exports=BUe});var Que=v(()=>{l()});var Jue=v((EPt,Zue)=>{l();Zue.exports=typeof WebSocket=="undefined"?Que():WebSocket});var tfe=v(vv=>{l();"use strict";Object.defineProperty(vv,"__esModule",{value:!0});var efe=class{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;let r={value:e,done:!1};if(this.pullQueue.length){let i=this.pullQueue.shift();i&&i.resolve(r)}else this.pushQueue.push(Promise.resolve(r)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(let e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(let r of this.pullQueue)r.reject(e);this.pullQueue.length=0}else{let r=Promise.reject(e);r.catch(()=>{}),this.pushQueue.push(r)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:e=>{let r=this.pushQueue.shift();return r?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),r):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((i,n)=>{this.pullQueue.push({resolve:i,reject:n})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}},OR=class{constructor(e,{highWaterMark:r=100,lowWaterMark:i=1}={}){let n=new efe;n.highWaterMark=r,n.lowWaterMark=i,n.removeCallback=e({push:s=>n.push(s),stop:()=>n.stop(),fail:s=>n.fail(s),on:(s,o)=>{n.eventHandlers[s]=o}})||(()=>{}),this[Symbol.asyncIterator]=()=>n[Symbol.asyncIterator](),Object.freeze(this)}};vv.EventIterator=OR;vv.default=OR});var rfe=v(Nm=>{l();"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});var kR=tfe();Nm.EventIterator=kR.EventIterator;function jUe(t,e,r){return new kR.EventIterator(({push:i})=>(this.addEventListener(t,i,e),()=>this.removeEventListener(t,i,e)),r)}Nm.subscribe=jUe;Nm.default=kR.EventIterator});var nfe=v((APt,ife)=>{l();var{Buffer:UUe}=Yt(),{EventIterator:FUe}=rfe();function KUe(t){return t instanceof ArrayBuffer||t!=null&&t.constructor!=null&&t.constructor.name==="ArrayBuffer"&&typeof t.byteLength=="number"}ife.exports=t=>{let e=t.removeEventListener||t.removeListener,r=async function*(){let s=new FUe(({push:o,stop:a,fail:c})=>(t.addEventListener("message",o),t.addEventListener("error",c),t.addEventListener("close",a),()=>{e.call(t,"message",o),e.call(t,"error",c),e.call(t,"close",a)}),{highWaterMark:1/0});for await(let{data:o}of s)yield KUe(o)?UUe.from(o):o}(),i=t.readyState===1,n;return t.addEventListener("open",()=>{i=!0,n=null}),t.addEventListener("close",()=>{i=!1,n=null}),t.addEventListener("error",s=>{i||(n=s)}),r.connected=()=>new Promise((s,o)=>{if(i)return s();if(n)return o(n);let a=f=>{e.call(t,"open",c),e.call(t,"error",u),f()},c=()=>a(s),u=f=>a(()=>o(f));t.addEventListener("open",c),t.addEventListener("error",u)}),r}});var ofe=v((IPt,sfe)=>{l();sfe.exports=async t=>{if(t.readyState>=2)throw new Error("socket closed");if(t.readyState!==1)return new Promise((e,r)=>{let i=t&&(t.removeEventListener||t.removeListener);function n(){typeof i=="function"&&(i.call(t,"open",s),i.call(t,"error",o))}function s(){n(),e()}function o(a){n(),r(a)}t.addEventListener("open",s),t.addEventListener("error",o)})}});var cfe=v((TPt,afe)=>{l();var VUe=ofe();afe.exports=(t,e)=>(e=e||{},e.closeOnEnd=e.closeOnEnd!==!1,async r=>{for await(let i of r){try{await VUe(t)}catch(n){if(n.message==="socket closed")break;throw n}t.send(i)}if(e.closeOnEnd&&t.readyState<=1)return new Promise((i,n)=>{t.addEventListener("close",s=>{if(s.wasClean||s.code===1006)i();else{let o=Object.assign(new Error("ws error"),{event:s});n(o)}}),setTimeout(()=>t.close())})})});var ffe=v((RPt,ufe)=>{l();var zUe=nfe(),HUe=cfe();ufe.exports=(t,e)=>{e=e||{},e.binaryType?t.binaryType=e.binaryType:e.binary&&(t.binaryType="arraybuffer");let r={sink:HUe(t,e),source:zUe(t,e),connected:()=>r.source.connected()};return r}});var dfe=v((PPt,lfe)=>{l();var{relative:$Ue}=F6(),GUe={http:"ws",https:"wss"},WUe="ws";lfe.exports=(t,e)=>$Ue(t,e,GUe,WUe)});var hfe=v((CPt,wv)=>{l();"use strict";var YUe=Jue(),XUe=ffe(),QUe=dfe();wv.exports=function(t,e={}){let r=typeof window=="undefined"?{}:window.location,i=QUe(t,r),n=new YUe(i,e.websocket),s=XUe(n,e);return s.remoteAddress=i,s.close=()=>new Promise((o,a)=>{n.addEventListener("close",o),n.close()}),s.destroy=()=>{n.terminate?n.terminate():n.close()},s.socket=n,s};wv.exports.connect=wv.exports});var yfe=v((OPt,pfe)=>{l();"use strict";pfe.exports=function(){throw new Error("WebSocket Servers can not be created in the browser!")}});var DR=v(ph=>{l();"use strict";ph.CODE_P2P=421;ph.CODE_CIRCUIT=290;ph.CODE_TCP=6;ph.CODE_WS=477;ph.CODE_WSS=478;ph.CLOSE_TIMEOUT=2e3});var bfe=v((DPt,mfe)=>{l();"use strict";function gfe(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function ZUe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return gfe(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),gfe(new n,r)}}mfe.exports=ZUe});var BR=v(S1=>{l();"use strict";Object.defineProperty(S1,"__esModule",{value:!0});S1.isCorrect=S1.isInSubnet=void 0;function JUe(t){return this.subnetMask<t.subnetMask?!1:this.mask(t.subnetMask)===t.mask()}S1.isInSubnet=JUe;function eFe(t){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===t&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}S1.isCorrect=eFe});var NR=v(Oc=>{l();"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.RE_SUBNET_STRING=Oc.RE_ADDRESS=Oc.GROUPS=Oc.BITS=void 0;Oc.BITS=32;Oc.GROUPS=4;Oc.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;Oc.RE_SUBNET_STRING=/\/\d{1,2}$/});var _v=v(x1=>{l();"use strict";var tFe=x1&&x1.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(x1,"__esModule",{value:!0});x1.AddressError=void 0;var rFe=function(t){tFe(e,t);function e(r,i){var n=t.call(this,r)||this;return n.name="AddressError",i!==null&&(n.parseMessage=i),n}return e}(Error);x1.AddressError=rFe});var MR=v((Ev,vfe)=>{l();(function(){var t,e=244837814094590,r=(e&16777215)==15715070;function i(A,R,$){A!=null&&(typeof A=="number"?this.fromNumber(A,R,$):R==null&&typeof A!="string"?this.fromString(A,256):this.fromString(A,R))}function n(){return new i(null)}function s(A,R,$,ae,ve,Ae){for(;--Ae>=0;){var Ne=R*this[A++]+$[ae]+ve;ve=Math.floor(Ne/67108864),$[ae++]=Ne&67108863}return ve}function o(A,R,$,ae,ve,Ae){for(var Ne=R&32767,Ue=R>>15;--Ae>=0;){var xr=this[A]&32767,Ui=this[A++]>>15,Ls=Ue*xr+Ui*Ne;xr=Ne*xr+((Ls&32767)<<15)+$[ae]+(ve&1073741823),ve=(xr>>>30)+(Ls>>>15)+Ue*Ui+(ve>>>30),$[ae++]=xr&1073741823}return ve}function a(A,R,$,ae,ve,Ae){for(var Ne=R&16383,Ue=R>>14;--Ae>=0;){var xr=this[A]&16383,Ui=this[A++]>>14,Ls=Ue*xr+Ui*Ne;xr=Ne*xr+((Ls&16383)<<14)+$[ae]+ve,ve=(xr>>28)+(Ls>>14)+Ue*Ui,$[ae++]=xr&268435455}return ve}var c=typeof navigator!="undefined";c&&r&&navigator.appName=="Microsoft Internet Explorer"?(i.prototype.am=o,t=30):c&&r&&navigator.appName!="Netscape"?(i.prototype.am=s,t=26):(i.prototype.am=a,t=28),i.prototype.DB=t,i.prototype.DM=(1<<t)-1,i.prototype.DV=1<<t;var u=52;i.prototype.FV=Math.pow(2,u),i.prototype.F1=u-t,i.prototype.F2=2*t-u;var f="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array,h,p;for(h="0".charCodeAt(0),p=0;p<=9;++p)d[h++]=p;for(h="a".charCodeAt(0),p=10;p<36;++p)d[h++]=p;for(h="A".charCodeAt(0),p=10;p<36;++p)d[h++]=p;function y(A){return f.charAt(A)}function m(A,R){var $=d[A.charCodeAt(R)];return $??-1}function w(A){for(var R=this.t-1;R>=0;--R)A[R]=this[R];A.t=this.t,A.s=this.s}function b(A){this.t=1,this.s=A<0?-1:0,A>0?this[0]=A:A<-1?this[0]=A+this.DV:this.t=0}function S(A){var R=n();return R.fromInt(A),R}function I(A,R){var $;if(R==16)$=4;else if(R==8)$=3;else if(R==256)$=8;else if(R==2)$=1;else if(R==32)$=5;else if(R==4)$=2;else{this.fromRadix(A,R);return}this.t=0,this.s=0;for(var ae=A.length,ve=!1,Ae=0;--ae>=0;){var Ne=$==8?A[ae]&255:m(A,ae);if(Ne<0){A.charAt(ae)=="-"&&(ve=!0);continue}ve=!1,Ae==0?this[this.t++]=Ne:Ae+$>this.DB?(this[this.t-1]|=(Ne&(1<<this.DB-Ae)-1)<<Ae,this[this.t++]=Ne>>this.DB-Ae):this[this.t-1]|=Ne<<Ae,Ae+=$,Ae>=this.DB&&(Ae-=this.DB)}$==8&&(A[0]&128)!=0&&(this.s=-1,Ae>0&&(this[this.t-1]|=(1<<this.DB-Ae)-1<<Ae)),this.clamp(),ve&&i.ZERO.subTo(this,this)}function j(){for(var A=this.s&this.DM;this.t>0&&this[this.t-1]==A;)--this.t}function B(A){if(this.s<0)return"-"+this.negate().toString(A);var R;if(A==16)R=4;else if(A==8)R=3;else if(A==2)R=1;else if(A==32)R=5;else if(A==4)R=2;else return this.toRadix(A);var $=(1<<R)-1,ae,ve=!1,Ae="",Ne=this.t,Ue=this.DB-Ne*this.DB%R;if(Ne-- >0)for(Ue<this.DB&&(ae=this[Ne]>>Ue)>0&&(ve=!0,Ae=y(ae));Ne>=0;)Ue<R?(ae=(this[Ne]&(1<<Ue)-1)<<R-Ue,ae|=this[--Ne]>>(Ue+=this.DB-R)):(ae=this[Ne]>>(Ue-=R)&$,Ue<=0&&(Ue+=this.DB,--Ne)),ae>0&&(ve=!0),ve&&(Ae+=y(ae));return ve?Ae:"0"}function C(){var A=n();return i.ZERO.subTo(this,A),A}function z(){return this.s<0?this.negate():this}function W(A){var R=this.s-A.s;if(R!=0)return R;var $=this.t;if(R=$-A.t,R!=0)return this.s<0?-R:R;for(;--$>=0;)if((R=this[$]-A[$])!=0)return R;return 0}function X(A){var R=1,$;return($=A>>>16)!=0&&(A=$,R+=16),($=A>>8)!=0&&(A=$,R+=8),($=A>>4)!=0&&(A=$,R+=4),($=A>>2)!=0&&(A=$,R+=2),($=A>>1)!=0&&(A=$,R+=1),R}function P(){return this.t<=0?0:this.DB*(this.t-1)+X(this[this.t-1]^this.s&this.DM)}function g(A,R){var $;for($=this.t-1;$>=0;--$)R[$+A]=this[$];for($=A-1;$>=0;--$)R[$]=0;R.t=this.t+A,R.s=this.s}function _(A,R){for(var $=A;$<this.t;++$)R[$-A]=this[$];R.t=Math.max(this.t-A,0),R.s=this.s}function x(A,R){var $=A%this.DB,ae=this.DB-$,ve=(1<<ae)-1,Ae=Math.floor(A/this.DB),Ne=this.s<<$&this.DM,Ue;for(Ue=this.t-1;Ue>=0;--Ue)R[Ue+Ae+1]=this[Ue]>>ae|Ne,Ne=(this[Ue]&ve)<<$;for(Ue=Ae-1;Ue>=0;--Ue)R[Ue]=0;R[Ae]=Ne,R.t=this.t+Ae+1,R.s=this.s,R.clamp()}function O(A,R){R.s=this.s;var $=Math.floor(A/this.DB);if($>=this.t){R.t=0;return}var ae=A%this.DB,ve=this.DB-ae,Ae=(1<<ae)-1;R[0]=this[$]>>ae;for(var Ne=$+1;Ne<this.t;++Ne)R[Ne-$-1]|=(this[Ne]&Ae)<<ve,R[Ne-$]=this[Ne]>>ae;ae>0&&(R[this.t-$-1]|=(this.s&Ae)<<ve),R.t=this.t-$,R.clamp()}function L(A,R){for(var $=0,ae=0,ve=Math.min(A.t,this.t);$<ve;)ae+=this[$]-A[$],R[$++]=ae&this.DM,ae>>=this.DB;if(A.t<this.t){for(ae-=A.s;$<this.t;)ae+=this[$],R[$++]=ae&this.DM,ae>>=this.DB;ae+=this.s}else{for(ae+=this.s;$<A.t;)ae-=A[$],R[$++]=ae&this.DM,ae>>=this.DB;ae-=A.s}R.s=ae<0?-1:0,ae<-1?R[$++]=this.DV+ae:ae>0&&(R[$++]=ae),R.t=$,R.clamp()}function Y(A,R){var $=this.abs(),ae=A.abs(),ve=$.t;for(R.t=ve+ae.t;--ve>=0;)R[ve]=0;for(ve=0;ve<ae.t;++ve)R[ve+$.t]=$.am(0,ae[ve],R,ve,0,$.t);R.s=0,R.clamp(),this.s!=A.s&&i.ZERO.subTo(R,R)}function V(A){for(var R=this.abs(),$=A.t=2*R.t;--$>=0;)A[$]=0;for($=0;$<R.t-1;++$){var ae=R.am($,R[$],A,2*$,0,1);(A[$+R.t]+=R.am($+1,2*R[$],A,2*$+1,ae,R.t-$-1))>=R.DV&&(A[$+R.t]-=R.DV,A[$+R.t+1]=1)}A.t>0&&(A[A.t-1]+=R.am($,R[$],A,2*$,0,1)),A.s=0,A.clamp()}function q(A,R,$){var ae=A.abs();if(!(ae.t<=0)){var ve=this.abs();if(ve.t<ae.t){R!=null&&R.fromInt(0),$!=null&&this.copyTo($);return}$==null&&($=n());var Ae=n(),Ne=this.s,Ue=A.s,xr=this.DB-X(ae[ae.t-1]);xr>0?(ae.lShiftTo(xr,Ae),ve.lShiftTo(xr,$)):(ae.copyTo(Ae),ve.copyTo($));var Ui=Ae.t,Ls=Ae[Ui-1];if(Ls!=0){var gs=Ls*(1<<this.F1)+(Ui>1?Ae[Ui-2]>>this.F2:0),Hc=this.FV/gs,Y3=(1<<this.F1)/gs,qo=1<<this.F2,jo=$.t,X3=jo-Ui,Qu=R??n();for(Ae.dlShiftTo(X3,Qu),$.compareTo(Qu)>=0&&($[$.t++]=1,$.subTo(Qu,$)),i.ONE.dlShiftTo(Ui,Qu),Qu.subTo(Ae,Ae);Ae.t<Ui;)Ae[Ae.t++]=0;for(;--X3>=0;){var xw=$[--jo]==Ls?this.DM:Math.floor($[jo]*Hc+($[jo-1]+qo)*Y3);if(($[jo]+=Ae.am(0,xw,$,X3,0,Ui))<xw)for(Ae.dlShiftTo(X3,Qu),$.subTo(Qu,$);$[jo]<--xw;)$.subTo(Qu,$)}R!=null&&($.drShiftTo(Ui,R),Ne!=Ue&&i.ZERO.subTo(R,R)),$.t=Ui,$.clamp(),xr>0&&$.rShiftTo(xr,$),Ne<0&&i.ZERO.subTo($,$)}}}function E(A){var R=n();return this.abs().divRemTo(A,null,R),this.s<0&&R.compareTo(i.ZERO)>0&&A.subTo(R,R),R}function U(A){this.m=A}function de(A){return A.s<0||A.compareTo(this.m)>=0?A.mod(this.m):A}function Q(A){return A}function ue(A){A.divRemTo(this.m,null,A)}function le(A,R,$){A.multiplyTo(R,$),this.reduce($)}function me(A,R){A.squareTo(R),this.reduce(R)}U.prototype.convert=de,U.prototype.revert=Q,U.prototype.reduce=ue,U.prototype.mulTo=le,U.prototype.sqrTo=me;function be(){if(this.t<1)return 0;var A=this[0];if((A&1)==0)return 0;var R=A&3;return R=R*(2-(A&15)*R)&15,R=R*(2-(A&255)*R)&255,R=R*(2-((A&65535)*R&65535))&65535,R=R*(2-A*R%this.DV)%this.DV,R>0?this.DV-R:-R}function xe(A){this.m=A,this.mp=A.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<A.DB-15)-1,this.mt2=2*A.t}function D(A){var R=n();return A.abs().dlShiftTo(this.m.t,R),R.divRemTo(this.m,null,R),A.s<0&&R.compareTo(i.ZERO)>0&&this.m.subTo(R,R),R}function K(A){var R=n();return A.copyTo(R),this.reduce(R),R}function G(A){for(;A.t<=this.mt2;)A[A.t++]=0;for(var R=0;R<this.m.t;++R){var $=A[R]&32767,ae=$*this.mpl+(($*this.mph+(A[R]>>15)*this.mpl&this.um)<<15)&A.DM;for($=R+this.m.t,A[$]+=this.m.am(0,ae,A,R,0,this.m.t);A[$]>=A.DV;)A[$]-=A.DV,A[++$]++}A.clamp(),A.drShiftTo(this.m.t,A),A.compareTo(this.m)>=0&&A.subTo(this.m,A)}function ee(A,R){A.squareTo(R),this.reduce(R)}function T(A,R,$){A.multiplyTo(R,$),this.reduce($)}xe.prototype.convert=D,xe.prototype.revert=K,xe.prototype.reduce=G,xe.prototype.mulTo=T,xe.prototype.sqrTo=ee;function F(){return(this.t>0?this[0]&1:this.s)==0}function H(A,R){if(A>4294967295||A<1)return i.ONE;var $=n(),ae=n(),ve=R.convert(this),Ae=X(A)-1;for(ve.copyTo($);--Ae>=0;)if(R.sqrTo($,ae),(A&1<<Ae)>0)R.mulTo(ae,ve,$);else{var Ne=$;$=ae,ae=Ne}return R.revert($)}function M(A,R){var $;return A<256||R.isEven()?$=new U(R):$=new xe(R),this.exp(A,$)}i.prototype.copyTo=w,i.prototype.fromInt=b,i.prototype.fromString=I,i.prototype.clamp=j,i.prototype.dlShiftTo=g,i.prototype.drShiftTo=_,i.prototype.lShiftTo=x,i.prototype.rShiftTo=O,i.prototype.subTo=L,i.prototype.multiplyTo=Y,i.prototype.squareTo=V,i.prototype.divRemTo=q,i.prototype.invDigit=be,i.prototype.isEven=F,i.prototype.exp=H,i.prototype.toString=B,i.prototype.negate=C,i.prototype.abs=z,i.prototype.compareTo=W,i.prototype.bitLength=P,i.prototype.mod=E,i.prototype.modPowInt=M,i.ZERO=S(0),i.ONE=S(1);function Z(){var A=n();return this.copyTo(A),A}function ie(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function te(){return this.t==0?this.s:this[0]<<24>>24}function he(){return this.t==0?this.s:this[0]<<16>>16}function we(A){return Math.floor(Math.LN2*this.DB/Math.log(A))}function _e(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Ke(A){if(A==null&&(A=10),this.signum()==0||A<2||A>36)return"0";var R=this.chunkSize(A),$=Math.pow(A,R),ae=S($),ve=n(),Ae=n(),Ne="";for(this.divRemTo(ae,ve,Ae);ve.signum()>0;)Ne=($+Ae.intValue()).toString(A).substr(1)+Ne,ve.divRemTo(ae,ve,Ae);return Ae.intValue().toString(A)+Ne}function Pe(A,R){this.fromInt(0),R==null&&(R=10);for(var $=this.chunkSize(R),ae=Math.pow(R,$),ve=!1,Ae=0,Ne=0,Ue=0;Ue<A.length;++Ue){var xr=m(A,Ue);if(xr<0){A.charAt(Ue)=="-"&&this.signum()==0&&(ve=!0);continue}Ne=R*Ne+xr,++Ae>=$&&(this.dMultiply(ae),this.dAddOffset(Ne,0),Ae=0,Ne=0)}Ae>0&&(this.dMultiply(Math.pow(R,Ae)),this.dAddOffset(Ne,0)),ve&&i.ZERO.subTo(this,this)}function Ve(A,R,$){if(typeof R=="number")if(A<2)this.fromInt(1);else for(this.fromNumber(A,$),this.testBit(A-1)||this.bitwiseTo(i.ONE.shiftLeft(A-1),Xt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(R);)this.dAddOffset(2,0),this.bitLength()>A&&this.subTo(i.ONE.shiftLeft(A-1),this);else{var ae=new Array,ve=A&7;ae.length=(A>>3)+1,R.nextBytes(ae),ve>0?ae[0]&=(1<<ve)-1:ae[0]=0,this.fromString(ae,256)}}function et(){var A=this.t,R=new Array;R[0]=this.s;var $=this.DB-A*this.DB%8,ae,ve=0;if(A-- >0)for($<this.DB&&(ae=this[A]>>$)!=(this.s&this.DM)>>$&&(R[ve++]=ae|this.s<<this.DB-$);A>=0;)$<8?(ae=(this[A]&(1<<$)-1)<<8-$,ae|=this[--A]>>($+=this.DB-8)):(ae=this[A]>>($-=8)&255,$<=0&&($+=this.DB,--A)),(ae&128)!=0&&(ae|=-256),ve==0&&(this.s&128)!=(ae&128)&&++ve,(ve>0||ae!=this.s)&&(R[ve++]=ae);return R}function He(A){return this.compareTo(A)==0}function ze(A){return this.compareTo(A)<0?this:A}function mt(A){return this.compareTo(A)>0?this:A}function rr(A,R,$){var ae,ve,Ae=Math.min(A.t,this.t);for(ae=0;ae<Ae;++ae)$[ae]=R(this[ae],A[ae]);if(A.t<this.t){for(ve=A.s&this.DM,ae=Ae;ae<this.t;++ae)$[ae]=R(this[ae],ve);$.t=this.t}else{for(ve=this.s&this.DM,ae=Ae;ae<A.t;++ae)$[ae]=R(ve,A[ae]);$.t=A.t}$.s=R(this.s,A.s),$.clamp()}function dr(A,R){return A&R}function Bn(A){var R=n();return this.bitwiseTo(A,dr,R),R}function Xt(A,R){return A|R}function kt(A){var R=n();return this.bitwiseTo(A,Xt,R),R}function ci(A,R){return A^R}function nt(A){var R=n();return this.bitwiseTo(A,ci,R),R}function Dr(A,R){return A&~R}function U3(A){var R=n();return this.bitwiseTo(A,Dr,R),R}function Mr(){for(var A=n(),R=0;R<this.t;++R)A[R]=this.DM&~this[R];return A.t=this.t,A.s=~this.s,A}function Lr(A){var R=n();return A<0?this.rShiftTo(-A,R):this.lShiftTo(A,R),R}function F3(A){var R=n();return A<0?this.lShiftTo(-A,R):this.rShiftTo(A,R),R}function qr(A){if(A==0)return-1;var R=0;return(A&65535)==0&&(A>>=16,R+=16),(A&255)==0&&(A>>=8,R+=8),(A&15)==0&&(A>>=4,R+=4),(A&3)==0&&(A>>=2,R+=2),(A&1)==0&&++R,R}function jr(){for(var A=0;A<this.t;++A)if(this[A]!=0)return A*this.DB+qr(this[A]);return this.s<0?this.t*this.DB:-1}function K3(A){for(var R=0;A!=0;)A&=A-1,++R;return R}function Ur(){for(var A=0,R=this.s&this.DM,$=0;$<this.t;++$)A+=K3(this[$]^R);return A}function Fr(A){var R=Math.floor(A/this.DB);return R>=this.t?this.s!=0:(this[R]&1<<A%this.DB)!=0}function V3(A,R){var $=i.ONE.shiftLeft(A);return this.bitwiseTo($,R,$),$}function Kr(A){return this.changeBit(A,Xt)}function Vr(A){return this.changeBit(A,Dr)}function z3(A){return this.changeBit(A,ci)}function zr(A,R){for(var $=0,ae=0,ve=Math.min(A.t,this.t);$<ve;)ae+=this[$]+A[$],R[$++]=ae&this.DM,ae>>=this.DB;if(A.t<this.t){for(ae+=A.s;$<this.t;)ae+=this[$],R[$++]=ae&this.DM,ae>>=this.DB;ae+=this.s}else{for(ae+=this.s;$<A.t;)ae+=A[$],R[$++]=ae&this.DM,ae>>=this.DB;ae+=A.s}R.s=ae<0?-1:0,ae>0?R[$++]=ae:ae<-1&&(R[$++]=this.DV+ae),R.t=$,R.clamp()}function Hr(A){var R=n();return this.addTo(A,R),R}function H3(A){var R=n();return this.subTo(A,R),R}function $r(A){var R=n();return this.multiplyTo(A,R),R}function Gr(){var A=n();return this.squareTo(A),A}function $3(A){var R=n();return this.divRemTo(A,R,null),R}function Wr(A){var R=n();return this.divRemTo(A,null,R),R}function Yr(A){var R=n(),$=n();return this.divRemTo(A,R,$),new Array(R,$)}function G3(A){this[this.t]=this.am(0,A-1,this,0,0,this.t),++this.t,this.clamp()}function Xr(A,R){if(A!=0){for(;this.t<=R;)this[this.t++]=0;for(this[R]+=A;this[R]>=this.DV;)this[R]-=this.DV,++R>=this.t&&(this[this.t++]=0),++this[R]}}function hr(){}function Uh(A){return A}function I2(A,R,$){A.multiplyTo(R,$)}function T2(A,R){A.squareTo(R)}hr.prototype.convert=Uh,hr.prototype.revert=Uh,hr.prototype.mulTo=I2,hr.prototype.sqrTo=T2;function R2(A){return this.exp(A,new hr)}function P2(A,R,$){var ae=Math.min(this.t+A.t,R);for($.s=0,$.t=ae;ae>0;)$[--ae]=0;var ve;for(ve=$.t-this.t;ae<ve;++ae)$[ae+this.t]=this.am(0,A[ae],$,ae,0,this.t);for(ve=Math.min(A.t,R);ae<ve;++ae)this.am(0,A[ae],$,ae,0,R-ae);$.clamp()}function C2(A,R,$){--R;var ae=$.t=this.t+A.t-R;for($.s=0;--ae>=0;)$[ae]=0;for(ae=Math.max(R-this.t,0);ae<A.t;++ae)$[this.t+ae-R]=this.am(R-ae,A[ae],$,0,0,this.t+ae-R);$.clamp(),$.drShiftTo(1,$)}function Mo(A){this.r2=n(),this.q3=n(),i.ONE.dlShiftTo(2*A.t,this.r2),this.mu=this.r2.divide(A),this.m=A}function O2(A){if(A.s<0||A.t>2*this.m.t)return A.mod(this.m);if(A.compareTo(this.m)<0)return A;var R=n();return A.copyTo(R),this.reduce(R),R}function k2(A){return A}function D2(A){for(A.drShiftTo(this.m.t-1,this.r2),A.t>this.m.t+1&&(A.t=this.m.t+1,A.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);A.compareTo(this.r2)<0;)A.dAddOffset(1,this.m.t+1);for(A.subTo(this.r2,A);A.compareTo(this.m)>=0;)A.subTo(this.m,A)}function B2(A,R){A.squareTo(R),this.reduce(R)}function N2(A,R,$){A.multiplyTo(R,$),this.reduce($)}Mo.prototype.convert=O2,Mo.prototype.revert=k2,Mo.prototype.reduce=D2,Mo.prototype.mulTo=N2,Mo.prototype.sqrTo=B2;function M2(A,R){var $=A.bitLength(),ae,ve=S(1),Ae;if($<=0)return ve;$<18?ae=1:$<48?ae=3:$<144?ae=4:$<768?ae=5:ae=6,$<8?Ae=new U(R):R.isEven()?Ae=new Mo(R):Ae=new xe(R);var Ne=new Array,Ue=3,xr=ae-1,Ui=(1<<ae)-1;if(Ne[1]=Ae.convert(this),ae>1){var Ls=n();for(Ae.sqrTo(Ne[1],Ls);Ue<=Ui;)Ne[Ue]=n(),Ae.mulTo(Ls,Ne[Ue-2],Ne[Ue]),Ue+=2}var gs=A.t-1,Hc,Y3=!0,qo=n(),jo;for($=X(A[gs])-1;gs>=0;){for($>=xr?Hc=A[gs]>>$-xr&Ui:(Hc=(A[gs]&(1<<$+1)-1)<<xr-$,gs>0&&(Hc|=A[gs-1]>>this.DB+$-xr)),Ue=ae;(Hc&1)==0;)Hc>>=1,--Ue;if(($-=Ue)<0&&($+=this.DB,--gs),Y3)Ne[Hc].copyTo(ve),Y3=!1;else{for(;Ue>1;)Ae.sqrTo(ve,qo),Ae.sqrTo(qo,ve),Ue-=2;Ue>0?Ae.sqrTo(ve,qo):(jo=ve,ve=qo,qo=jo),Ae.mulTo(qo,Ne[Hc],ve)}for(;gs>=0&&(A[gs]&1<<$)==0;)Ae.sqrTo(ve,qo),jo=ve,ve=qo,qo=jo,--$<0&&($=this.DB-1,--gs)}return Ae.revert(ve)}function L2(A){var R=this.s<0?this.negate():this.clone(),$=A.s<0?A.negate():A.clone();if(R.compareTo($)<0){var ae=R;R=$,$=ae}var ve=R.getLowestSetBit(),Ae=$.getLowestSetBit();if(Ae<0)return R;for(ve<Ae&&(Ae=ve),Ae>0&&(R.rShiftTo(Ae,R),$.rShiftTo(Ae,$));R.signum()>0;)(ve=R.getLowestSetBit())>0&&R.rShiftTo(ve,R),(ve=$.getLowestSetBit())>0&&$.rShiftTo(ve,$),R.compareTo($)>=0?(R.subTo($,R),R.rShiftTo(1,R)):($.subTo(R,$),$.rShiftTo(1,$));return Ae>0&&$.lShiftTo(Ae,$),$}function q2(A){if(A<=0)return 0;var R=this.DV%A,$=this.s<0?A-1:0;if(this.t>0)if(R==0)$=this[0]%A;else for(var ae=this.t-1;ae>=0;--ae)$=(R*$+this[ae])%A;return $}function j2(A){var R=A.isEven();if(this.isEven()&&R||A.signum()==0)return i.ZERO;for(var $=A.clone(),ae=this.clone(),ve=S(1),Ae=S(0),Ne=S(0),Ue=S(1);$.signum()!=0;){for(;$.isEven();)$.rShiftTo(1,$),R?((!ve.isEven()||!Ae.isEven())&&(ve.addTo(this,ve),Ae.subTo(A,Ae)),ve.rShiftTo(1,ve)):Ae.isEven()||Ae.subTo(A,Ae),Ae.rShiftTo(1,Ae);for(;ae.isEven();)ae.rShiftTo(1,ae),R?((!Ne.isEven()||!Ue.isEven())&&(Ne.addTo(this,Ne),Ue.subTo(A,Ue)),Ne.rShiftTo(1,Ne)):Ue.isEven()||Ue.subTo(A,Ue),Ue.rShiftTo(1,Ue);$.compareTo(ae)>=0?($.subTo(ae,$),R&&ve.subTo(Ne,ve),Ae.subTo(Ue,Ae)):(ae.subTo($,ae),R&&Ne.subTo(ve,Ne),Ue.subTo(Ae,Ue))}if(ae.compareTo(i.ONE)!=0)return i.ZERO;if(Ue.compareTo(A)>=0)return Ue.subtract(A);if(Ue.signum()<0)Ue.addTo(A,Ue);else return Ue;return Ue.signum()<0?Ue.add(A):Ue}var Ri=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],U2=(1<<26)/Ri[Ri.length-1];function F2(A){var R,$=this.abs();if($.t==1&&$[0]<=Ri[Ri.length-1]){for(R=0;R<Ri.length;++R)if($[0]==Ri[R])return!0;return!1}if($.isEven())return!1;for(R=1;R<Ri.length;){for(var ae=Ri[R],ve=R+1;ve<Ri.length&&ae<U2;)ae*=Ri[ve++];for(ae=$.modInt(ae);R<ve;)if(ae%Ri[R++]==0)return!1}return $.millerRabin(A)}function pbe(A){var R=this.subtract(i.ONE),$=R.getLowestSetBit();if($<=0)return!1;var ae=R.shiftRight($);A=A+1>>1,A>Ri.length&&(A=Ri.length);for(var ve=n(),Ae=0;Ae<A;++Ae){ve.fromInt(Ri[Math.floor(Math.random()*Ri.length)]);var Ne=ve.modPow(ae,this);if(Ne.compareTo(i.ONE)!=0&&Ne.compareTo(R)!=0){for(var Ue=1;Ue++<$&&Ne.compareTo(R)!=0;)if(Ne=Ne.modPowInt(2,this),Ne.compareTo(i.ONE)==0)return!1;if(Ne.compareTo(R)!=0)return!1}}return!0}i.prototype.chunkSize=we,i.prototype.toRadix=Ke,i.prototype.fromRadix=Pe,i.prototype.fromNumber=Ve,i.prototype.bitwiseTo=rr,i.prototype.changeBit=V3,i.prototype.addTo=zr,i.prototype.dMultiply=G3,i.prototype.dAddOffset=Xr,i.prototype.multiplyLowerTo=P2,i.prototype.multiplyUpperTo=C2,i.prototype.modInt=q2,i.prototype.millerRabin=pbe,i.prototype.clone=Z,i.prototype.intValue=ie,i.prototype.byteValue=te,i.prototype.shortValue=he,i.prototype.signum=_e,i.prototype.toByteArray=et,i.prototype.equals=He,i.prototype.min=ze,i.prototype.max=mt,i.prototype.and=Bn,i.prototype.or=kt,i.prototype.xor=nt,i.prototype.andNot=U3,i.prototype.not=Mr,i.prototype.shiftLeft=Lr,i.prototype.shiftRight=F3,i.prototype.getLowestSetBit=jr,i.prototype.bitCount=Ur,i.prototype.testBit=Fr,i.prototype.setBit=Kr,i.prototype.clearBit=Vr,i.prototype.flipBit=z3,i.prototype.add=Hr,i.prototype.subtract=H3,i.prototype.multiply=$r,i.prototype.divide=$3,i.prototype.remainder=Wr,i.prototype.divideAndRemainder=Yr,i.prototype.modPow=M2,i.prototype.modInverse=j2,i.prototype.pow=R2,i.prototype.gcd=L2,i.prototype.isProbablePrime=F2,i.prototype.square=Gr,i.prototype.Barrett=Mo;var W3,ys,ji;function ybe(A){ys[ji++]^=A&255,ys[ji++]^=A>>8&255,ys[ji++]^=A>>16&255,ys[ji++]^=A>>24&255,ji>=Sw&&(ji-=Sw)}function lk(){ybe(new Date().getTime())}if(ys==null){ys=new Array,ji=0;var Lo;if(typeof window!="undefined"&&window.crypto){if(window.crypto.getRandomValues){var dk=new Uint8Array(32);for(window.crypto.getRandomValues(dk),Lo=0;Lo<32;++Lo)ys[ji++]=dk[Lo]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var hk=window.crypto.random(32);for(Lo=0;Lo<hk.length;++Lo)ys[ji++]=hk.charCodeAt(Lo)&255}}for(;ji<Sw;)Lo=Math.floor(65536*Math.random()),ys[ji++]=Lo>>>8,ys[ji++]=Lo&255;ji=0,lk()}function gbe(){if(W3==null){for(lk(),W3=wbe(),W3.init(ys),ji=0;ji<ys.length;++ji)ys[ji]=0;ji=0}return W3.next()}function mbe(A){var R;for(R=0;R<A.length;++R)A[R]=gbe()}function _w(){}_w.prototype.nextBytes=mbe;function Ew(){this.i=0,this.j=0,this.S=new Array}function bbe(A){var R,$,ae;for(R=0;R<256;++R)this.S[R]=R;for($=0,R=0;R<256;++R)$=$+this.S[R]+A[R%A.length]&255,ae=this.S[R],this.S[R]=this.S[$],this.S[$]=ae;this.i=0,this.j=0}function vbe(){var A;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,A=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=A,this.S[A+this.S[this.i]&255]}Ew.prototype.init=bbe,Ew.prototype.next=vbe;function wbe(){return new Ew}var Sw=256;typeof Ev!="undefined"?Ev=vfe.exports={default:i,BigInteger:i,SecureRandom:_w}:this.jsbn={BigInteger:i,SecureRandom:_w}}).call(Ev)});var Mm=v(Sv=>{l();(function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(o){return i(s(o),arguments)}function r(o,a){return e.apply(null,[o].concat(a||[]))}function i(o,a){var c=1,u=o.length,f,d="",h,p,y,m,w,b,S,I;for(h=0;h<u;h++)if(typeof o[h]=="string")d+=o[h];else if(typeof o[h]=="object"){if(y=o[h],y.keys)for(f=a[c],p=0;p<y.keys.length;p++){if(f==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[p],y.keys[p-1]));f=f[y.keys[p]]}else y.param_no?f=a[y.param_no]:f=a[c++];if(t.not_type.test(y.type)&&t.not_primitive.test(y.type)&&f instanceof Function&&(f=f()),t.numeric_arg.test(y.type)&&typeof f!="number"&&isNaN(f))throw new TypeError(e("[sprintf] expecting number but found %T",f));switch(t.number.test(y.type)&&(S=f>=0),y.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,y.width?parseInt(y.width):0);break;case"e":f=y.precision?parseFloat(f).toExponential(y.precision):parseFloat(f).toExponential();break;case"f":f=y.precision?parseFloat(f).toFixed(y.precision):parseFloat(f);break;case"g":f=y.precision?String(Number(f.toPrecision(y.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=y.precision?f.substring(0,y.precision):f;break;case"t":f=String(!!f),f=y.precision?f.substring(0,y.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=y.precision?f.substring(0,y.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=y.precision?f.substring(0,y.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase();break}t.json.test(y.type)?d+=f:(t.number.test(y.type)&&(!S||y.sign)?(I=S?"+":"-",f=f.toString().replace(t.sign,"")):I="",w=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",b=y.width-(I+f).length,m=y.width&&b>0?w.repeat(b):"",d+=y.align?I+f+m:w==="0"?I+m+f:m+I+f)}return d}var n=Object.create(null);function s(o){if(n[o])return n[o];for(var a=o,c,u=[],f=0;a;){if((c=t.text.exec(a))!==null)u.push(c[0]);else if((c=t.modulo.exec(a))!==null)u.push("%");else if((c=t.placeholder.exec(a))!==null){if(c[2]){f|=1;var d=[],h=c[2],p=[];if((p=t.key.exec(h))!==null)for(d.push(p[1]);(h=h.substring(p[0].length))!=="";)if((p=t.key_access.exec(h))!==null)d.push(p[1]);else if((p=t.index_access.exec(h))!==null)d.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=d}else f|=2;if(f===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");a=a.substring(c[0].length)}return n[o]=u}typeof Sv!="undefined"&&(Sv.sprintf=e,Sv.vsprintf=r),typeof window!="undefined"&&(window.sprintf=e,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:e,vsprintf:r}}))})()});var LR=v(kc=>{l();"use strict";var iFe=kc&&kc.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),nFe=kc&&kc.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wfe=kc&&kc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&iFe(e,t,r);return nFe(e,t),e};Object.defineProperty(kc,"__esModule",{value:!0});kc.Address4=void 0;var _fe=wfe(BR()),va=wfe(NR()),Efe=_v(),Lm=MR(),A1=Mm(),sFe=function(){function t(e){this.groups=va.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=_fe.isCorrect(va.BITS),this.isInSubnet=_fe.isInSubnet,this.address=e;var r=va.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>va.BITS)throw new Efe.AddressError("Invalid subnet mask.");e=e.replace(va.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}return t.isValid=function(e){try{return new t(e),!0}catch(r){return!1}},t.prototype.parse=function(e){var r=e.split(".");if(!e.match(va.RE_ADDRESS))throw new Efe.AddressError("Invalid IPv4 address.");return r},t.prototype.correctForm=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)}).join(".")},t.fromHex=function(e){var r=e.replace(/:/g,"").padStart(8,"0"),i=[],n;for(n=0;n<8;n+=2){var s=r.slice(n,n+2);i.push(parseInt(s,16))}return new t(i.join("."))},t.fromInteger=function(e){return t.fromHex(e.toString(16))},t.fromArpa=function(e){var r=e.replace(/(\.in-addr\.arpa)?\.$/,""),i=r.split(".").reverse().join(".");return new t(i)},t.prototype.toHex=function(){return this.parsedAddress.map(function(e){return A1.sprintf("%02x",parseInt(e,10))}).join(":")},t.prototype.toArray=function(){return this.parsedAddress.map(function(e){return parseInt(e,10)})},t.prototype.toGroup6=function(){var e=[],r;for(r=0;r<va.GROUPS;r+=2){var i=A1.sprintf("%02x%02x",parseInt(this.parsedAddress[r],10),parseInt(this.parsedAddress[r+1],10));e.push(A1.sprintf("%x",parseInt(i,16)))}return e.join(":")},t.prototype.bigInteger=function(){return new Lm.BigInteger(this.parsedAddress.map(function(e){return A1.sprintf("%02x",parseInt(e,10))}).join(""),16)},t.prototype._startAddress=function(){return new Lm.BigInteger(this.mask()+"0".repeat(va.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new Lm.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new Lm.BigInteger(this.mask()+"1".repeat(va.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new Lm.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.fromBigInteger=function(e){return t.fromInteger(parseInt(e.toString(),10))},t.prototype.mask=function(e){return e===void 0&&(e=this.subnetMask),this.getBitsBase2(0,e)},t.prototype.getBitsBase2=function(e,r){return this.binaryZeroPad().slice(e,r)},t.prototype.reverseForm=function(e){e||(e={});var r=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?r:A1.sprintf("%s.in-addr.arpa.",r)},t.prototype.isMulticast=function(){return this.isInSubnet(new t("224.0.0.0/4"))},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(va.BITS,"0")},t.prototype.groupForV6=function(){var e=this.parsedAddress;return this.address.replace(va.RE_ADDRESS,A1.sprintf('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',e.slice(0,2).join("."),e.slice(2,4).join(".")))},t}();kc.Address4=sFe});var qR=v(ii=>{l();"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.RE_URL_WITH_PORT=ii.RE_URL=ii.RE_ZONE_STRING=ii.RE_SUBNET_STRING=ii.RE_BAD_ADDRESS=ii.RE_BAD_CHARACTERS=ii.TYPES=ii.SCOPES=ii.GROUPS=ii.BITS=void 0;ii.BITS=128;ii.GROUPS=8;ii.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};ii.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};ii.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;ii.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;ii.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;ii.RE_ZONE_STRING=/%.*$/;ii.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/);ii.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)});var jR=v(Dc=>{l();"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.simpleGroup=Dc.spanLeadingZeroes=Dc.spanAll=Dc.spanAllZeroes=void 0;var Sfe=Mm();function xfe(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}Dc.spanAllZeroes=xfe;function oFe(t,e){e===void 0&&(e=0);var r=t.split("");return r.map(function(i,n){return Sfe.sprintf('<span class="digit value-%s position-%d">%s</span>',i,n+e,xfe(i))}).join("")}Dc.spanAll=oFe;function Afe(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}function aFe(t){var e=t.split(":");return e.map(function(r){return Afe(r)}).join(":")}Dc.spanLeadingZeroes=aFe;function cFe(t,e){e===void 0&&(e=0);var r=t.split(":");return r.map(function(i,n){return/group-v4/.test(i)?i:Sfe.sprintf('<span class="hover-group group-%d">%s</span>',n+e,Afe(i))})}Dc.simpleGroup=cFe});var Ife=v(en=>{l();"use strict";var uFe=en&&en.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),fFe=en&&en.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lFe=en&&en.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uFe(e,t,r);return fFe(e,t),e};Object.defineProperty(en,"__esModule",{value:!0});en.possibleElisions=en.simpleRegularExpression=en.ADDRESS_BOUNDARY=en.padGroup=en.groupPossibilities=void 0;var dFe=lFe(qR()),I1=Mm();function xv(t){return I1.sprintf("(%s)",t.join("|"))}en.groupPossibilities=xv;function Av(t){return t.length<4?I1.sprintf("0{0,%d}%s",4-t.length,t):t}en.padGroup=Av;en.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function hFe(t){var e=[];t.forEach(function(i,n){var s=parseInt(i,16);s===0&&e.push(n)});var r=e.map(function(i){return t.map(function(n,s){if(s===i){var o=s===0||s===dFe.GROUPS-1?":":"";return xv([Av(n),o])}return Av(n)}).join(":")});return r.push(t.map(Av).join(":")),xv(r)}en.simpleRegularExpression=hFe;function pFe(t,e,r){var i=e?"":":",n=r?"":":",s=[];!e&&!r&&s.push("::"),e&&r&&s.push(""),(r&&!e||!r&&e)&&s.push(":"),s.push(I1.sprintf("%s(:0{1,4}){1,%d}",i,t-1)),s.push(I1.sprintf("(0{1,4}:){1,%d}%s",t-1,n)),s.push(I1.sprintf("(0{1,4}:){%d}0{1,4}",t-1));for(var o=1;o<t-1;o++)for(var a=1;a<t-o;a++)s.push(I1.sprintf("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",a,t-a-o-1));return xv(s)}en.possibleElisions=pFe});var Ofe=v(vo=>{l();"use strict";var yFe=vo&&vo.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),gFe=vo&&vo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Iv=vo&&vo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&yFe(e,t,r);return gFe(e,t),e},Tfe=vo&&vo.__spreadArray||function(t,e){for(var r=0,i=e.length,n=t.length;r<i;r++,n++)t[n]=e[r];return t};Object.defineProperty(vo,"__esModule",{value:!0});vo.Address6=void 0;var Rfe=Iv(BR()),UR=Iv(NR()),Er=Iv(qR()),FR=Iv(jR()),yh=LR(),gh=Ife(),Nu=_v(),$n=MR(),Gn=Mm();function Tv(t){if(!t)throw new Error("Assertion failed.")}function mFe(t){for(var e=/(\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t}function bFe(t){return t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),t=t.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),t}function vFe(t,e){var r=[],i=[],n;for(n=0;n<t.length;n++)n<e[0]?r.push(t[n]):n>e[1]&&i.push(t[n]);return r.concat(["compact"]).concat(i)}function Pfe(t){return Gn.sprintf("%04x",parseInt(t,16))}function Cfe(t){return t&255}var wFe=function(){function t(e,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=Rfe.isInSubnet,this.isCorrect=Rfe.isCorrect(Er.BITS),r===void 0?this.groups=Er.GROUPS:this.groups=r,this.address=e;var i=Er.RE_SUBNET_STRING.exec(e);if(i){if(this.parsedSubnet=i[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>Er.BITS)throw new Nu.AddressError("Invalid subnet mask.");e=e.replace(Er.RE_SUBNET_STRING,"")}else if(/\//.test(e))throw new Nu.AddressError("Invalid subnet mask.");var n=Er.RE_ZONE_STRING.exec(e);n&&(this.zone=n[0],e=e.replace(Er.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}return t.isValid=function(e){try{return new t(e),!0}catch(r){return!1}},t.fromBigInteger=function(e){var r=e.toString(16).padStart(32,"0"),i=[],n;for(n=0;n<Er.GROUPS;n++)i.push(r.slice(n*4,(n+1)*4));return new t(i.join(":"))},t.fromURL=function(e){var r,i=null,n;if(e.indexOf("[")!==-1&&e.indexOf("]:")!==-1){if(n=Er.RE_URL_WITH_PORT.exec(e),n===null)return{error:"failed to parse address with port",address:null,port:null};r=n[1],i=n[2]}else if(e.indexOf("/")!==-1){if(e=e.replace(/^[a-z0-9]+:\/\//,""),n=Er.RE_URL.exec(e),n===null)return{error:"failed to parse address from URL",address:null,port:null};r=n[1]}else r=e;return i?(i=parseInt(i,10),(i<0||i>65536)&&(i=null)):i=null,{address:new t(r),port:i}},t.fromAddress4=function(e){var r=new yh.Address4(e),i=Er.BITS-(UR.BITS-r.subnetMask);return new t("::ffff:"+r.correctForm()+"/"+i)},t.fromArpa=function(e){var r=e.replace(/(\.ip6\.arpa)?\.$/,""),i=7;if(r.length!==63)throw new Nu.AddressError("Invalid 'ip6.arpa' form.");for(var n=r.split(".").reverse(),s=i;s>0;s--){var o=s*4;n.splice(o,0,":")}return r=n.join(""),new t(r)},t.prototype.microsoftTranscription=function(){return Gn.sprintf("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))},t.prototype.mask=function(e){return e===void 0&&(e=this.subnetMask),this.getBitsBase2(0,e)},t.prototype.possibleSubnets=function(e){e===void 0&&(e=128);var r=Er.BITS-this.subnetMask,i=Math.abs(e-Er.BITS),n=r-i;return n<0?"0":mFe(new $n.BigInteger("2",10).pow(n).toString(10))},t.prototype._startAddress=function(){return new $n.BigInteger(this.mask()+"0".repeat(Er.BITS-this.subnetMask),2)},t.prototype.startAddress=function(){return t.fromBigInteger(this._startAddress())},t.prototype.startAddressExclusive=function(){var e=new $n.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))},t.prototype._endAddress=function(){return new $n.BigInteger(this.mask()+"1".repeat(Er.BITS-this.subnetMask),2)},t.prototype.endAddress=function(){return t.fromBigInteger(this._endAddress())},t.prototype.endAddressExclusive=function(){var e=new $n.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))},t.prototype.getScope=function(){var e=Er.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&e!=="Link local"&&(e="Global"),e||"Unknown"},t.prototype.getType=function(){for(var e=0,r=Object.keys(Er.TYPES);e<r.length;e++){var i=r[e];if(this.isInSubnet(new t(i)))return Er.TYPES[i]}return"Global unicast"},t.prototype.getBits=function(e,r){return new $n.BigInteger(this.getBitsBase2(e,r),2)},t.prototype.getBitsBase2=function(e,r){return this.binaryZeroPad().slice(e,r)},t.prototype.getBitsBase16=function(e,r){var i=r-e;if(i%4!=0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,r).toString(16).padStart(i/4,"0")},t.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,Er.BITS)},t.prototype.reverseForm=function(e){e||(e={});var r=Math.floor(this.subnetMask/4),i=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?e.omitSuffix?i:Gn.sprintf("%s.ip6.arpa.",i):e.omitSuffix?"":"ip6.arpa."},t.prototype.correctForm=function(){var e,r=[],i=0,n=[];for(e=0;e<this.parsedAddress.length;e++){var s=parseInt(this.parsedAddress[e],16);s===0&&i++,s!==0&&i>0&&(i>1&&n.push([e-i,e-1]),i=0)}i>1&&n.push([this.parsedAddress.length-i,this.parsedAddress.length-1]);var o=n.map(function(u){return u[1]-u[0]+1});if(n.length>0){var a=o.indexOf(Math.max.apply(Math,o));r=vFe(this.parsedAddress,n[a])}else r=this.parsedAddress;for(e=0;e<r.length;e++)r[e]!=="compact"&&(r[e]=parseInt(r[e],16).toString(16));var c=r.join(":");return c=c.replace(/^compact$/,"::"),c=c.replace(/^compact|compact$/,":"),c=c.replace(/compact/,""),c},t.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(Er.BITS,"0")},t.prototype.parse4in6=function(e){var r=e.split(":"),i=r.slice(-1)[0],n=i.match(UR.RE_ADDRESS);if(n){this.parsedAddress4=n[0],this.address4=new yh.Address4(this.parsedAddress4);for(var s=0;s<this.address4.groups;s++)if(/^0[0-9]+/.test(this.address4.parsedAddress[s]))throw new Nu.AddressError("IPv4 addresses can't have leading zeroes.",e.replace(UR.RE_ADDRESS,this.address4.parsedAddress.map(bFe).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),e=r.join(":")}return e},t.prototype.parse=function(e){e=this.parse4in6(e);var r=e.match(Er.RE_BAD_CHARACTERS);if(r)throw new Nu.AddressError(Gn.sprintf("Bad character%s detected in address: %s",r.length>1?"s":"",r.join("")),e.replace(Er.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));var i=e.match(Er.RE_BAD_ADDRESS);if(i)throw new Nu.AddressError(Gn.sprintf("Address failed regex: %s",i.join("")),e.replace(Er.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));var n=[],s=e.split("::");if(s.length===2){var o=s[0].split(":"),a=s[1].split(":");o.length===1&&o[0]===""&&(o=[]),a.length===1&&a[0]===""&&(a=[]);var c=this.groups-(o.length+a.length);if(!c)throw new Nu.AddressError("Error parsing groups");this.elidedGroups=c,this.elisionBegin=o.length,this.elisionEnd=o.length+this.elidedGroups,n=n.concat(o);for(var u=0;u<c;u++)n.push("0");n=n.concat(a)}else if(s.length===1)n=e.split(":"),this.elidedGroups=0;else throw new Nu.AddressError("Too many :: groups found");if(n=n.map(function(f){return Gn.sprintf("%x",parseInt(f,16))}),n.length!==this.groups)throw new Nu.AddressError("Incorrect number of groups found");return n},t.prototype.canonicalForm=function(){return this.parsedAddress.map(Pfe).join(":")},t.prototype.decimal=function(){return this.parsedAddress.map(function(e){return Gn.sprintf("%05d",parseInt(e,16))}).join(":")},t.prototype.bigInteger=function(){return new $n.BigInteger(this.parsedAddress.map(Pfe).join(""),16)},t.prototype.to4=function(){var e=this.binaryZeroPad().split("");return yh.Address4.fromHex(new $n.BigInteger(e.slice(96,128).join(""),2).toString(16))},t.prototype.to4in6=function(){var e=this.to4(),r=new t(this.parsedAddress.slice(0,6).join(":"),6),i=r.correctForm(),n="";return/:$/.test(i)||(n=":"),i+n+e.address},t.prototype.inspectTeredo=function(){var e=this.getBitsBase16(0,32),r=this.getBits(80,96).xor(new $n.BigInteger("ffff",16)).toString(),i=yh.Address4.fromHex(this.getBitsBase16(32,64)),n=yh.Address4.fromHex(this.getBits(96,128).xor(new $n.BigInteger("ffffffff",16)).toString(16)),s=this.getBits(64,80),o=this.getBitsBase2(64,80),a=s.testBit(15),c=s.testBit(14),u=s.testBit(8),f=s.testBit(9),d=new $n.BigInteger(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:Gn.sprintf("%s:%s",e.slice(0,4),e.slice(4,8)),server4:i.address,client4:n.address,flags:o,coneNat:a,microsoft:{reserved:c,universalLocal:f,groupIndividual:u,nonce:d},udpPort:r}},t.prototype.inspect6to4=function(){var e=this.getBitsBase16(0,16),r=yh.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:Gn.sprintf("%s",e.slice(0,4)),gateway:r.address}},t.prototype.to6to4=function(){if(!this.is4())return null;var e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new t(e)},t.prototype.toByteArray=function(){var e=this.bigInteger().toByteArray();return e.length===17&&e[0]===0?e.slice(1):e},t.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(Cfe)},t.fromByteArray=function(e){return this.fromUnsignedByteArray(e.map(Cfe))},t.fromUnsignedByteArray=function(e){for(var r=new $n.BigInteger("256",10),i=new $n.BigInteger("0",10),n=new $n.BigInteger("1",10),s=e.length-1;s>=0;s--)i=i.add(n.multiply(new $n.BigInteger(e[s].toString(10),10))),n=n.multiply(r);return t.fromBigInteger(i)},t.prototype.isCanonical=function(){return this.addressMinusSuffix===this.canonicalForm()},t.prototype.isLinkLocal=function(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"},t.prototype.isMulticast=function(){return this.getType()==="Multicast"},t.prototype.is4=function(){return this.v4},t.prototype.isTeredo=function(){return this.isInSubnet(new t("2001::/32"))},t.prototype.is6to4=function(){return this.isInSubnet(new t("2002::/16"))},t.prototype.isLoopback=function(){return this.getType()==="Loopback"},t.prototype.href=function(e){return e===void 0?e="":e=Gn.sprintf(":%s",e),Gn.sprintf("http://[%s]%s/",this.correctForm(),e)},t.prototype.link=function(e){e||(e={}),e.className===void 0&&(e.className=""),e.prefix===void 0&&(e.prefix="/#address="),e.v4===void 0&&(e.v4=!1);var r=this.correctForm;return e.v4&&(r=this.to4in6),e.className?Gn.sprintf('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,r.call(this),e.className):Gn.sprintf('<a href="%1$s%2$s">%2$s</a>',e.prefix,r.call(this))},t.prototype.group=function(){if(this.elidedGroups===0)return FR.simpleGroup(this.address).join(":");Tv(typeof this.elidedGroups=="number"),Tv(typeof this.elisionBegin=="number");var e=[],r=this.address.split("::"),i=r[0],n=r[1];i.length?e.push.apply(e,FR.simpleGroup(i)):e.push("");for(var s=["hover-group"],o=this.elisionBegin;o<this.elisionBegin+this.elidedGroups;o++)s.push(Gn.sprintf("group-%d",o));return e.push(Gn.sprintf('<span class="%s"></span>',s.join(" "))),n.length?e.push.apply(e,FR.simpleGroup(n,this.elisionEnd)):e.push(""),this.is4()&&(Tv(this.address4 instanceof yh.Address4),e.pop(),e.push(this.address4.groupForV6())),e.join(":")},t.prototype.regularExpressionString=function(e){e===void 0&&(e=!1);var r=[],i=new t(this.correctForm());if(i.elidedGroups===0)r.push(gh.simpleRegularExpression(i.parsedAddress));else if(i.elidedGroups===Er.GROUPS)r.push(gh.possibleElisions(Er.GROUPS));else{var n=i.address.split("::");n[0].length&&r.push(gh.simpleRegularExpression(n[0].split(":"))),Tv(typeof i.elidedGroups=="number"),r.push(gh.possibleElisions(i.elidedGroups,n[0].length!==0,n[1].length!==0)),n[1].length&&r.push(gh.simpleRegularExpression(n[1].split(":"))),r=[r.join(":")]}return e||(r=Tfe(Tfe(["(?=^|",gh.ADDRESS_BOUNDARY,"|[^\\w\\:])("],r),[")(?=[^\\w\\:]|",gh.ADDRESS_BOUNDARY,"|$)"])),r.join("")},t.prototype.regularExpression=function(e){return e===void 0&&(e=!1),new RegExp(this.regularExpressionString(e),"i")},t}();vo.Address6=wFe});var kfe=v(On=>{l();"use strict";var _Fe=On&&On.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),EFe=On&&On.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),SFe=On&&On.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_Fe(e,t,r);return EFe(e,t),e};Object.defineProperty(On,"__esModule",{value:!0});On.v6=On.AddressError=On.Address6=On.Address4=void 0;var xFe=LR();Object.defineProperty(On,"Address4",{enumerable:!0,get:function(){return xFe.Address4}});var AFe=Ofe();Object.defineProperty(On,"Address6",{enumerable:!0,get:function(){return AFe.Address6}});var IFe=_v();Object.defineProperty(On,"AddressError",{enumerable:!0,get:function(){return IFe.AddressError}});var TFe=SFe(jR());On.v6={helpers:TFe}});var HR=v((zPt,zR)=>{l();"use strict";var Dfe=Ee(),RFe=Object.assign(Dfe("libp2p:ip-port-to-multiaddr"),{error:Dfe("libp2p:ip-port-to-multiaddr:err")}),{Multiaddr:KR}=rt(),VR=bfe(),{Address4:PFe,Address6:CFe}=kfe(),Rv={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function OFe(t,e){if(typeof t!="string")throw VR(new Error(`invalid ip provided: ${t}`),Rv.ERR_INVALID_IP_PARAMETER);if(typeof e=="string"&&(e=parseInt(e)),isNaN(e))throw VR(new Error(`invalid port provided: ${e}`),Rv.ERR_INVALID_PORT_PARAMETER);try{return new PFe(t),new KR(`/ip4/${t}/tcp/${e}`)}catch{}try{let r=new CFe(t);return r.is4()?new KR(`/ip4/${r.to4().correctForm()}/tcp/${e}`):new KR(`/ip6/${t}/tcp/${e}`)}catch(r){let i=`invalid ip:port for creating a multiaddr: ${t}:${e}`;throw RFe.error(i),VR(new Error(i),Rv.ERR_INVALID_IP)}}zR.exports=OFe;zR.exports.Errors=Rv});var Nfe=v((HPt,Pv)=>{l();"use strict";var $R=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},Bfe=(t,e,r,i)=>{let n,s=new Promise((o,a)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){o(t);return}i={customTimers:{setTimeout,clearTimeout},...i},n=i.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{o(r())}catch(f){a(f)}return}let c=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,u=r instanceof Error?r:new $R(c);typeof t.cancel=="function"&&t.cancel(),a(u)},e),(async()=>{try{o(await t)}catch(c){a(c)}finally{i.customTimers.clearTimeout.call(void 0,n)}})()});return s.clear=()=>{clearTimeout(n),n=void 0},s};Pv.exports=Bfe;Pv.exports.default=Bfe;Pv.exports.TimeoutError=$R});var Ufe=v(($Pt,jfe)=>{l();"use strict";var Mfe=Tc(),{CLOSE_TIMEOUT:kFe}=DR(),Lfe=HR(),DFe=Nfe(),qfe=Ee(),GR=qfe("libp2p:websockets:socket");GR.error=qfe("libp2p:websockets:socket:error");jfe.exports=(t,e={})=>{let r={async sink(i){e.signal&&(i=Mfe(i,e.signal));try{await t.sink(async function*(){for await(let n of i)yield n instanceof Uint8Array?n:n.slice()}())}catch(n){n.type!=="aborted"&&GR.error(n)}},source:e.signal?Mfe(t.source,e.signal):t.source,conn:t,localAddr:e.localAddr||(t.localAddress&&t.localPort?Lfe(t.localAddress,t.localPort):void 0),remoteAddr:e.remoteAddr||Lfe(t.remoteAddress,t.remotePort),timeline:{open:Date.now()},async close(){let i=Date.now();try{await DFe(t.close(),kFe)}catch(n){let{host:s,port:o}=r.remoteAddr.toOptions();GR("timeout closing stream to %s:%s after %dms, destroying it manually",s,o,Date.now()-i),t.destroy()}finally{r.timeline.close=Date.now()}}};return t.socket.once&&t.socket.once("close",()=>{r.timeline.close||(r.timeline.close=Date.now())}),r}});var Vfe=v((GPt,Kfe)=>{l();"use strict";var ml=zl(),{CODE_CIRCUIT:WR,CODE_P2P:YR,CODE_TCP:XR,CODE_WS:BFe,CODE_WSS:Ffe}=DR();Kfe.exports={all:t=>t.filter(e=>{if(e.protoCodes().includes(WR))return!1;let r=e.decapsulateCode(YR);return ml.WebSockets.matches(r)||ml.WebSocketsSecure.matches(r)}),dnsWss:t=>t.filter(e=>{if(e.protoCodes().includes(WR))return!1;let r=e.decapsulateCode(YR);return ml.WebSocketsSecure.matches(r)&&ml.DNS.matches(r.decapsulateCode(XR).decapsulateCode(Ffe))}),dnsWsOrWss:t=>t.filter(e=>{if(e.protoCodes().includes(WR))return!1;let r=e.decapsulateCode(YR);return ml.WebSockets.matches(r)?ml.DNS.matches(r.decapsulateCode(XR).decapsulateCode(BFe)):ml.WebSocketsSecure.matches(r)&&ml.DNS.matches(r.decapsulateCode(XR).decapsulateCode(Ffe))})}});var Xfe=v((WPt,Yfe)=>{l();"use strict";var NFe=hfe(),MFe=Y4(),LFe=v5(),{AbortError:zfe}=Tc(),qFe=gu(),Hfe=Ee(),bl=Hfe("libp2p:websockets");bl.error=Hfe("libp2p:websockets:error");var $fe=z2(),jFe=yfe(),UFe=Ufe(),Gfe=Vfe(),Wfe=class{constructor({upgrader:e,filter:r}){if(!e)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=e,this._filter=r}async dial(e,r={}){bl("dialing %s",e);let i=await this._connect(e,r),n=UFe(i,{remoteAddr:e,signal:r.signal});bl("new outbound connection %s",n.remoteAddr);let s=await this._upgrader.upgradeOutbound(n);return bl("outbound connection %s upgraded",n.remoteAddr),s}async _connect(e,r={}){if(r.signal&&r.signal.aborted)throw new zfe;let i=e.toOptions();bl("dialing %s:%s",i.host,i.port);let n=qFe(),s=u=>{let f=`connection error: ${u.message}`;bl.error(f),n.reject(u)},o=NFe(LFe(e),Object.assign({binary:!0},r));if(o.socket.on?o.socket.on("error",s):o.socket.onerror=s,!r.signal)return await Promise.race([o.connected(),n.promise]),bl("connected %s",e),o;let a,c=new Promise((u,f)=>{if(a=()=>{f(new zfe),setTimeout(()=>{o.close()})},r.signal.aborted)return a();r.signal.addEventListener("abort",a)});try{await Promise.race([c,n.promise,o.connected()])}finally{r.signal.removeEventListener("abort",a)}return bl("connected %s",e),o}createListener(e={},r){return typeof e=="function"&&(r=e,e={}),jFe({handler:r,upgrader:this._upgrader},e)}filter(e){return e=Array.isArray(e)?e:[e],this._filter?this._filter(e):$fe.isBrowser||$fe.isWebWorker?Gfe.dnsWss(e):Gfe.all(e)}};Yfe.exports=MFe(Wfe,{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"})});var QR=v((YPt,Zfe)=>{l();"use strict";function Qfe(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function FFe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Qfe(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Qfe(new n,r)}}Zfe.exports=FFe});var ele=v((XPt,Jfe)=>{l();Jfe.exports=function(){if(typeof globalThis=="undefined")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}});var eP=v((QPt,JR)=>{l();"use strict";var ZR=65536,KFe=4294967295;function VFe(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var zFe=aT().Buffer,Cv=globalThis.crypto||globalThis.msCrypto;Cv&&Cv.getRandomValues?JR.exports=HFe:JR.exports=VFe;function HFe(t,e){if(t>KFe)throw new RangeError("requested too many random bytes");var r=zFe.allocUnsafe(t);if(t>0)if(t>ZR)for(var i=0;i<t;i+=ZR)Cv.getRandomValues(r.slice(i,i+ZR));else Cv.getRandomValues(r);return typeof e=="function"?process.nextTick(function(){e(null,r)}):r}});var ile=v((ZPt,rle)=>{l();"use strict";function tle(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function $Fe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=void 0),e!=null&&(r.code=e);try{return tle(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),tle(new n,r)}}rle.exports=$Fe});var iP=v((JPt,ale)=>{l();var GFe=Ee()("simple-peer"),nle=ele(),sle=eP(),WFe=ST(),tP=cm(),Sr=ile(),rP=64*1024,YFe=5*1e3,XFe=5*1e3;function ole(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}function QFe(t){console.warn(t)}var vl=class extends WFe.Duplex{constructor(e){e=Object.assign({allowHalfOpen:!1},e);super(e);if(this._id=sle(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||sle(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||vl.channelConfig,this.negotiated=this.channelConfig.negotiated,this.config=Object.assign({},vl.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(r=>r),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||YFe,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:nle(),!this._wrtc)throw Sr(typeof window=="undefined"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=this.negotiated?!1:!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(r){tP(()=>this.destroy(Sr(r,"ERR_PC_CONSTRUCTOR")));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=r=>{this._onIceCandidate(r)},this.initiator||this.negotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=r=>{this._setupData(r)},this.streams&&this.streams.forEach(r=>{this.addStream(r)}),this._pc.ontrack=r=>{this._onTrack(r)},this.initiator&&this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw Sr(new Error("cannot signal after peer is destroyed"),"ERR_SIGNALING");if(typeof e=="string")try{e=JSON.parse(e)}catch(r){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(r=>{this._addIceCandidate(r)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(r=>{this.destroy(Sr(r,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(Sr(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}_addIceCandidate(e){var r=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(r).catch(i=>{!r.address||r.address.endsWith(".local")?QFe("Ignoring unsupported ICE candidate."):this.destroy(Sr(i,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,r){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,r),this._needsNegotiation()}catch(i){this.destroy(Sr(i,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:r}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(r=>{this.addTrack(r,e)})}addTrack(e,r){this._debug("addTrack()");var i=this._senderMap.get(e)||new Map,n=i.get(r);if(!n)n=this._pc.addTrack(e,r),i.set(r,n),this._senderMap.set(e,i),this._needsNegotiation();else throw n.removed?Sr(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):Sr(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,r,i){this._debug("replaceTrack()");var n=this._senderMap.get(e),s=n?n.get(i):null;if(!s)throw Sr(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");r&&this._senderMap.set(r,n),s.replaceTrack!=null?s.replaceTrack(r):this.destroy(Sr(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,r){this._debug("removeSender()");var i=this._senderMap.get(e),n=i?i.get(r):null;if(!n)throw Sr(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(s){s.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(n):this.destroy(Sr(s,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(r=>{this.removeTrack(r,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,tP(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}_destroy(e,r){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(i){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(i){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,r(e)}_setupData(e){if(!e.channel)return this.destroy(Sr(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=rP),this.channelName=this._channel.label,this._channel.onmessage=i=>{this._onChannelMessage(i)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=i=>{this.destroy(Sr(i,"ERR_DATA_CHANNEL"))};var r=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(r&&this._onChannelClose(),r=!0):r=!1},XFe)}_read(){}_write(e,r,i){if(this.destroyed)return i(Sr(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(n){return this.destroy(Sr(n,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>rP?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=i):i(null)}else this._debug("write before connect"),this._chunk=e,this._cb=i}_onFinish(){if(this.destroyed)return;let e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=ole(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let r=()=>{if(!this.destroyed){var s=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp})}},i=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},n=s=>{this.destroy(Sr(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(i).catch(n)}).catch(e=>{this.destroy(Sr(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=ole(e.sdp)),e.sdp=this.sdpTransform(e.sdp);let r=()=>{if(!this.destroyed){var s=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp}),this.initiator||this._requestMissingTransceivers()}},i=()=>{this.destroyed||(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},n=s=>{this.destroy(Sr(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(i).catch(n)}).catch(e=>{this.destroy(Sr(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(Sr(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,r=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,r),this.emit("iceStateChange",e,r),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy(Sr(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy(Sr(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){let r=i=>(Object.prototype.toString.call(i.values)==="[object Array]"&&i.values.forEach(n=>{Object.assign(i,n)}),i);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(i=>{var n=[];i.forEach(s=>{n.push(r(s))}),e(null,n)},i=>e(i)):this._pc.getStats.length>0?this._pc.getStats(i=>{if(!this.destroyed){var n=[];i.result().forEach(s=>{var o={};s.names().forEach(a=>{o[a]=s.stat(a)}),o.id=s.id,o.type=s.type,o.timestamp=s.timestamp,n.push(r(o))}),e(null,n)}},i=>e(i)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;let e=()=>{this.destroyed||this.getStats((r,i)=>{if(this.destroyed)return;r&&(i=[]);var n={},s={},o={},a=!1;i.forEach(f=>{(f.type==="remotecandidate"||f.type==="remote-candidate")&&(n[f.id]=f),(f.type==="localcandidate"||f.type==="local-candidate")&&(s[f.id]=f),(f.type==="candidatepair"||f.type==="candidate-pair")&&(o[f.id]=f)});let c=f=>{a=!0;var d=s[f.localCandidateId];d&&(d.ip||d.address)?(this.localAddress=d.ip||d.address,this.localPort=Number(d.port)):d&&d.ipAddress?(this.localAddress=d.ipAddress,this.localPort=Number(d.portNumber)):typeof f.googLocalAddress=="string"&&(d=f.googLocalAddress.split(":"),this.localAddress=d[0],this.localPort=Number(d[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var h=n[f.remoteCandidateId];h&&(h.ip||h.address)?(this.remoteAddress=h.ip||h.address,this.remotePort=Number(h.port)):h&&h.ipAddress?(this.remoteAddress=h.ipAddress,this.remotePort=Number(h.portNumber)):typeof f.googRemoteAddress=="string"&&(h=f.googRemoteAddress.split(":"),this.remoteAddress=h[0],this.remotePort=Number(h[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach(f=>{f.type==="transport"&&f.selectedCandidatePairId&&c(o[f.selectedCandidatePairId]),(f.type==="googCandidatePair"&&f.googActiveConnection==="true"||(f.type==="candidatepair"||f.type==="candidate-pair")&&f.selected)&&c(f)}),!a&&(!Object.keys(o).length||Object.keys(s).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(f){return this.destroy(Sr(f,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var u=this._cb;this._cb=null,u(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>rP||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&!this._firstStable&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(!this.destroyed){var r=e.data;r instanceof ArrayBuffer&&(r=new Uint8Array(r)),this.push(r)}}_onChannelBufferedAmountLow(){if(!(this.destroyed||!this._cb)){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(r=>{this._debug("on track"),this.emit("track",e.track,r),this._remoteTracks.push({track:e.track,stream:r}),!this._remoteStreams.some(i=>i.id===r.id)&&(this._remoteStreams.push(r),tP(()=>{this.emit("stream",r)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],GFe.apply(null,e)}};vl.WEBRTC_SUPPORT=!!nle();vl.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};vl.channelConfig={};ale.exports=vl});var ule=v((eCt,cle)=>{l();"use strict";cle.exports={supportsFileReader:typeof self!="undefined"&&"FileReader"in self,supportsWebRTC:"RTCPeerConnection"in globalThis&&typeof navigator!="undefined"&&typeof navigator.mediaDevices!="undefined"&&"getUserMedia"in navigator.mediaDevices,supportsWebRTCDataChannels:"RTCPeerConnection"in globalThis}});var kv=v(Ov=>{l();"use strict";Ov.CODE_P2P=421;Ov.CODE_CIRCUIT=290;Ov.CLOSE_TIMEOUT=2e3});var nP=v((rCt,fle)=>{l();var ZFe=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,JFe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];fle.exports=function(e){var r=e,i=e.indexOf("["),n=e.indexOf("]");i!=-1&&n!=-1&&(e=e.substring(0,i)+e.substring(i,n).replace(/:/g,";")+e.substring(n,e.length));for(var s=ZFe.exec(e||""),o={},a=14;a--;)o[JFe[a]]=s[a]||"";return i!=-1&&n!=-1&&(o.source=r,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=eKe(o,o.path),o.queryKey=tKe(o,o.query),o};function eKe(t,e){var r=/\/{2,9}/g,i=e.replace(r,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&i.splice(0,1),e.substr(e.length-1,1)=="/"&&i.splice(i.length-1,1),i}function tKe(t,e){var r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,s){n&&(r[n]=s)}),r}});var hle=v(T1=>{l();"use strict";var lle=T1&&T1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(T1,"__esModule",{value:!0});T1.url=void 0;var rKe=lle(nP()),iKe=lle(Ee()),dle=iKe.default("socket.io-client:url");function nKe(t,e="",r){let i=t;r=r||typeof location!="undefined"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(dle("protocol-less url %s",t),typeof r!="undefined"?t=r.protocol+"//"+t:t="https://"+t),dle("parse %s",t),i=rKe.default(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let s=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+s+":"+i.port+e,i.href=i.protocol+"://"+s+(r&&r.port===i.port?"":":"+i.port),i}T1.url=nKe});var ple=v((nCt,sP)=>{l();try{sP.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(t){sP.exports=!1}});var qm=v(oP=>{l();"use strict";Object.defineProperty(oP,"__esModule",{value:!0});oP.default=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())()});var gle=v(jm=>{l();"use strict";var yle=jm&&jm.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jm,"__esModule",{value:!0});var sKe=yle(ple()),oKe=yle(qm());function aKe(t){let e=t.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||sKe.default))return new XMLHttpRequest}catch(r){}if(!e)try{return new oKe.default[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(r){}}jm.default=aKe});var R1=v(wl=>{l();"use strict";var cKe=wl&&wl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wl,"__esModule",{value:!0});wl.installTimerFunctions=wl.pick=void 0;var Dv=cKe(qm());function uKe(t,...e){return e.reduce((r,i)=>(t.hasOwnProperty(i)&&(r[i]=t[i]),r),{})}wl.pick=uKe;var fKe=setTimeout,lKe=clearTimeout;function dKe(t,e){e.useNativeTimers?(t.setTimeoutFn=fKe.bind(Dv.default),t.clearTimeoutFn=lKe.bind(Dv.default)):(t.setTimeoutFn=setTimeout.bind(Dv.default),t.clearTimeoutFn=clearTimeout.bind(Dv.default))}wl.installTimerFunctions=dKe});var mh=v(mle=>{l();mle.Emitter=Wn;function Wn(t){if(t)return hKe(t)}function hKe(t){for(var e in Wn.prototype)t[e]=Wn.prototype[e];return t}Wn.prototype.on=Wn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Wn.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};Wn.prototype.off=Wn.prototype.removeListener=Wn.prototype.removeAllListeners=Wn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,n=0;n<r.length;n++)if(i=r[n],i===e||i.fn===e){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};Wn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,n=r.length;i<n;++i)r[i].apply(this,e)}return this};Wn.prototype.emitReserved=Wn.prototype.emit;Wn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Wn.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var aP=v(_l=>{l();"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.ERROR_PACKET=_l.PACKET_TYPES_REVERSE=_l.PACKET_TYPES=void 0;var Bc=Object.create(null);_l.PACKET_TYPES=Bc;Bc.open="0";Bc.close="1";Bc.ping="2";Bc.pong="3";Bc.message="4";Bc.upgrade="5";Bc.noop="6";var ble=Object.create(null);_l.PACKET_TYPES_REVERSE=ble;Object.keys(Bc).forEach(t=>{ble[Bc[t]]=t});var pKe={type:"error",data:"parser error"};_l.ERROR_PACKET=pKe});var wle=v(cP=>{l();"use strict";Object.defineProperty(cP,"__esModule",{value:!0});var yKe=aP(),gKe=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",mKe=typeof ArrayBuffer=="function",bKe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,vKe=({type:t,data:e},r,i)=>gKe&&e instanceof Blob?r?i(e):vle(e,i):mKe&&(e instanceof ArrayBuffer||bKe(e))?r?i(e):vle(new Blob([e]),i):i(yKe.PACKET_TYPES[t]+(e||"")),vle=(t,e)=>{let r=new FileReader;return r.onload=function(){let i=r.result.split(",")[1];e("b"+i)},r.readAsDataURL(t)};cP.default=vKe});var Ele=v((Bv,_le)=>{l();(function(t,e){typeof Bv=="object"&&typeof _le!="undefined"?e(Bv):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t["base64-arraybuffer"]={}))})(Bv,function(t){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),i=0;i<e.length;i++)r[e.charCodeAt(i)]=i;var n=function(o){var a=new Uint8Array(o),c,u=a.length,f="";for(c=0;c<u;c+=3)f+=e[a[c]>>2],f+=e[(a[c]&3)<<4|a[c+1]>>4],f+=e[(a[c+1]&15)<<2|a[c+2]>>6],f+=e[a[c+2]&63];return u%3==2?f=f.substring(0,f.length-1)+"=":u%3==1&&(f=f.substring(0,f.length-2)+"=="),f},s=function(o){var a=o.length*.75,c=o.length,u,f=0,d,h,p,y;o[o.length-1]==="="&&(a--,o[o.length-2]==="="&&a--);var m=new ArrayBuffer(a),w=new Uint8Array(m);for(u=0;u<c;u+=4)d=r[o.charCodeAt(u)],h=r[o.charCodeAt(u+1)],p=r[o.charCodeAt(u+2)],y=r[o.charCodeAt(u+3)],w[f++]=d<<2|h>>4,w[f++]=(h&15)<<4|p>>2,w[f++]=(p&3)<<6|y&63;return m};t.decode=s,t.encode=n,Object.defineProperty(t,"__esModule",{value:!0})})});var xle=v(uP=>{l();"use strict";Object.defineProperty(uP,"__esModule",{value:!0});var Nv=aP(),wKe=Ele(),_Ke=typeof ArrayBuffer=="function",EKe=(t,e)=>{if(typeof t!="string")return{type:"message",data:Sle(t,e)};let r=t.charAt(0);return r==="b"?{type:"message",data:SKe(t.substring(1),e)}:Nv.PACKET_TYPES_REVERSE[r]?t.length>1?{type:Nv.PACKET_TYPES_REVERSE[r],data:t.substring(1)}:{type:Nv.PACKET_TYPES_REVERSE[r]}:Nv.ERROR_PACKET},SKe=(t,e)=>{if(_Ke){let r=(0,wKe.decode)(t);return Sle(r,e)}else return{base64:!0,data:t}},Sle=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};uP.default=EKe});var Um=v(wo=>{l();"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.decodePayload=wo.decodePacket=wo.encodePayload=wo.encodePacket=wo.protocol=void 0;var Ale=wle();wo.encodePacket=Ale.default;var Ile=xle();wo.decodePacket=Ile.default;var Tle=String.fromCharCode(30),xKe=(t,e)=>{let r=t.length,i=new Array(r),n=0;t.forEach((s,o)=>{(0,Ale.default)(s,!1,a=>{i[o]=a,++n===r&&e(i.join(Tle))})})};wo.encodePayload=xKe;var AKe=(t,e)=>{let r=t.split(Tle),i=[];for(let n=0;n<r.length;n++){let s=(0,Ile.default)(r[n],e);if(i.push(s),s.type==="error")break}return i};wo.decodePayload=AKe;wo.protocol=4});var Mv=v(P1=>{l();"use strict";var IKe=P1&&P1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(P1,"__esModule",{value:!0});P1.Transport=void 0;var TKe=Um(),RKe=mh(),PKe=R1(),CKe=IKe(Ee()),OKe=(0,CKe.default)("engine.io-client:transport"),Rle=class extends RKe.Emitter{constructor(e){super();this.writable=!1,(0,PKe.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,r){let i=new Error(e);return i.type="TransportError",i.description=r,super.emit("error",i),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"?this.write(e):OKe("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(e){let r=(0,TKe.decodePacket)(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emit("packet",e)}onClose(){this.readyState="closed",super.emit("close")}};P1.Transport=Rle});var dP=v((pCt,Dle)=>{l();"use strict";var Ple="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Lv=64,Cle={},Ole=0,El=0,kle;function fP(t){var e="";do e=Ple[t%Lv]+e,t=Math.floor(t/Lv);while(t>0);return e}function kKe(t){var e=0;for(El=0;El<t.length;El++)e=e*Lv+Cle[t.charAt(El)];return e}function lP(){var t=fP(+new Date);return t!==kle?(Ole=0,kle=t):t+"."+fP(Ole++)}for(;El<Lv;El++)Cle[Ple[El]]=El;lP.encode=fP;lP.decode=kKe;Dle.exports=lP});var qv=v(hP=>{l();hP.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e};hP.decode=function(t){for(var e={},r=t.split("&"),i=0,n=r.length;i<n;i++){var s=r[i].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}});var Mle=v(C1=>{l();"use strict";var pP=C1&&C1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(C1,"__esModule",{value:!0});C1.Polling=void 0;var DKe=Mv(),BKe=pP(Ee()),NKe=pP(dP()),MKe=pP(qv()),Ble=Um(),wa=(0,BKe.default)("engine.io-client:polling"),Nle=class extends DKe.Transport{constructor(){super(...arguments);this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let r=()=>{wa("paused"),this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(wa("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){wa("pre-pause polling complete"),--i||r()})),this.writable||(wa("we are currently writing - waiting to pause"),i++,this.once("drain",function(){wa("pre-pause writing complete"),--i||r()}))}else r()}poll(){wa("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){wa("polling got data %s",e);let r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose(),!1;this.onPacket(i)};(0,Ble.decodePayload)(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():wa('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{wa("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(wa("transport open - closing"),e()):(wa("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,(0,Ble.encodePayload)(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emit("drain")})})}uri(){let e=this.query||{},r=this.opts.secure?"https":"http",i="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=(0,NKe.default)()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port);let n=MKe.default.encode(e),s=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(n.length?"?"+n:"")}};C1.Polling=Nle});var Fle=v(Sl=>{l();"use strict";var yP=Sl&&Sl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.Request=Sl.XHR=void 0;var Lle=yP(gle()),LKe=yP(Ee()),qKe=yP(qm()),qle=R1(),jKe=mh(),UKe=Mle(),gP=(0,LKe.default)("engine.io-client:polling-xhr");function FKe(){}var KKe=function(){return new Lle.default({xdomain:!1}).responseType!=null}(),jle=class extends UKe.Polling{constructor(e){super(e);if(typeof location!="undefined"){let i=location.protocol==="https:",n=location.port;n||(n=i?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==i}let r=e&&e.forceBase64;this.supportsBinary=KKe&&!r}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new _o(this.uri(),e)}doWrite(e,r){let i=this.request({method:"POST",data:e});i.on("success",r),i.on("error",n=>{this.onError("xhr post error",n)})}doPoll(){gP("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",r=>{this.onError("xhr poll error",r)}),this.pollXhr=e}};Sl.XHR=jle;var _o=class extends jKe.Emitter{constructor(e,r){super();(0,qle.installTimerFunctions)(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){let e=(0,qle.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;let r=this.xhr=new Lle.default(e);try{gP("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch(i){}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{r.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},gP("xhr data %s",this.data),r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document!="undefined"&&(this.index=_o.requestsCount++,_o.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=FKe,e)try{this.xhr.abort()}catch(r){}typeof document!="undefined"&&delete _o.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;e!==null&&this.onData(e)}abort(){this.cleanup()}};Sl.Request=_o;_o.requestsCount=0;_o.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Ule);else if(typeof addEventListener=="function"){let t="onpagehide"in qKe.default?"pagehide":"unload";addEventListener(t,Ule,!1)}}function Ule(){for(let t in _o.requests)_o.requests.hasOwnProperty(t)&&_o.requests[t].abort()}});var Vle=v(Eo=>{l();"use strict";var VKe=Eo&&Eo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.defaultBinaryType=Eo.usingBrowserWebSocket=Eo.WebSocket=Eo.nextTick=void 0;var Kle=VKe(qm());Eo.nextTick=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0))();Eo.WebSocket=Kle.default.WebSocket||Kle.default.MozWebSocket;Eo.usingBrowserWebSocket=!0;Eo.defaultBinaryType="arraybuffer"});var Hle=v(O1=>{l();"use strict";var mP=O1&&O1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(O1,"__esModule",{value:!0});O1.WS=void 0;var zKe=Mv(),HKe=mP(qv()),$Ke=mP(dP()),GKe=R1(),Nc=Vle(),WKe=mP(Ee()),YKe=Um(),XKe=(0,WKe.default)("engine.io-client:websocket"),zle=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",jv=class extends zKe.Transport{constructor(e){super(e);this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),r=this.opts.protocols,i=zle?{}:(0,GKe.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Nc.usingBrowserWebSocket&&!zle?r?new Nc.WebSocket(e,r):new Nc.WebSocket(e):new Nc.WebSocket(e,r,i)}catch(n){return this.emit("error",n)}this.ws.binaryType=this.socket.binaryType||Nc.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){let i=e[r],n=r===e.length-1;(0,YKe.encodePacket)(i,this.supportsBinary,s=>{let o={};Nc.usingBrowserWebSocket||(i.options&&(o.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof s=="string"?Buffer.byteLength(s):s.length)<this.opts.perMessageDeflate.threshold&&(o.compress=!1));try{Nc.usingBrowserWebSocket?this.ws.send(s):this.ws.send(s,o)}catch(a){XKe("websocket closed before onclose event")}n&&(0,Nc.nextTick)(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{},r=this.opts.secure?"wss":"ws",i="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=(0,$Ke.default)()),this.supportsBinary||(e.b64=1);let n=HKe.default.encode(e),s=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(n.length?"?"+n:"")}check(){return!!Nc.WebSocket&&!("__initialize"in Nc.WebSocket&&this.name===jv.prototype.name)}};O1.WS=jv});var bP=v(Uv=>{l();"use strict";Object.defineProperty(Uv,"__esModule",{value:!0});Uv.transports=void 0;var QKe=Fle(),ZKe=Hle();Uv.transports={websocket:ZKe.WS,polling:QKe.XHR}});var Wle=v(k1=>{l();"use strict";var vP=k1&&k1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(k1,"__esModule",{value:!0});k1.Socket=void 0;var JKe=bP(),eVe=R1(),tVe=vP(qv()),$le=vP(nP()),rVe=vP(Ee()),iVe=mh(),Gle=Um(),pi=(0,rVe.default)("engine.io-client:socket"),Mu=class extends iVe.Emitter{constructor(e,r={}){super();e&&typeof e=="object"&&(r=e,e=null),e?(e=(0,$le.default)(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=(0,$le.default)(r.host).host),(0,eVe.installTimerFunctions)(this,r),this.secure=r.secure!=null?r.secure:typeof location!="undefined"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=r.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=tVe.default.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){pi('creating transport "%s"',e);let r=nVe(this.opts.query);r.EIO=Gle.protocol,r.transport=e,this.id&&(r.sid=this.id);let i=Object.assign({},this.opts.transportOptions[e],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return pi("options: %j",i),new JKe.transports[e](i)}open(){let e;if(this.opts.rememberUpgrade&&Mu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(r){pi("error while creating transport: %s",r),this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){pi("setting transport %s",e.name),this.transport&&(pi("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(e){pi('probing transport "%s"',e);let r=this.createTransport(e),i=!1;Mu.priorWebsocketSuccess=!1;let n=()=>{i||(pi('probe transport "%s" opened',e),r.send([{type:"ping",data:"probe"}]),r.once("packet",d=>{if(!i)if(d.type==="pong"&&d.data==="probe"){if(pi('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Mu.priorWebsocketSuccess=r.name==="websocket",pi('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{i||this.readyState!=="closed"&&(pi("changing transport and sending upgrade packet"),f(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{pi('probe transport "%s" failed',e);let h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function s(){i||(i=!0,f(),r.close(),r=null)}let o=d=>{let h=new Error("probe error: "+d);h.transport=r.name,s(),pi('probe transport "%s" failed because of error: %s',e,d),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function c(){o("socket closed")}function u(d){r&&d.name!==r.name&&(pi('"%s" works - aborting "%s"',d.name,r.name),s())}let f=()=>{r.removeListener("open",n),r.removeListener("error",o),r.removeListener("close",a),this.off("close",c),this.off("upgrading",u)};r.once("open",n),r.once("error",o),r.once("close",a),this.once("close",c),this.once("upgrading",u),r.open()}onOpen(){if(pi("socket open"),this.readyState="open",Mu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){pi("starting upgrade probes");let e=0,r=this.upgrades.length;for(;e<r;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(pi('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}else pi('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(pi("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(e,r,i){return this.sendPacket("message",e,r,i),this}send(e,r,i){return this.sendPacket("message",e,r,i),this}sendPacket(e,r,i,n){if(typeof r=="function"&&(n=r,r=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;let s={type:e,data:r,options:i};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),n&&this.once("flush",n),this.flush()}close(){let e=()=>{this.onClose("forced close"),pi("socket closing - telling transport to close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){pi("socket error %j",e),Mu.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(pi('socket close with reason: "%s"',e),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let r=[],i=0,n=e.length;for(;i<n;i++)~this.transports.indexOf(e[i])&&r.push(e[i]);return r}};k1.Socket=Mu;Mu.protocol=Gle.protocol;function nVe(t){let e={};for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}});var Xle=v(So=>{l();"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.installTimerFunctions=So.transports=So.Transport=So.protocol=So.Socket=void 0;var Yle=Wle();Object.defineProperty(So,"Socket",{enumerable:!0,get:function(){return Yle.Socket}});So.protocol=Yle.Socket.protocol;var sVe=Mv();Object.defineProperty(So,"Transport",{enumerable:!0,get:function(){return sVe.Transport}});var oVe=bP();Object.defineProperty(So,"transports",{enumerable:!0,get:function(){return oVe.transports}});var aVe=R1();Object.defineProperty(So,"installTimerFunctions",{enumerable:!0,get:function(){return aVe.installTimerFunctions}})});var wP=v(D1=>{l();"use strict";Object.defineProperty(D1,"__esModule",{value:!0});D1.hasBinary=D1.isBinary=void 0;var cVe=typeof ArrayBuffer=="function",uVe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Qle=Object.prototype.toString,fVe=typeof Blob=="function"||typeof Blob!="undefined"&&Qle.call(Blob)==="[object BlobConstructor]",lVe=typeof File=="function"||typeof File!="undefined"&&Qle.call(File)==="[object FileConstructor]";function Zle(t){return cVe&&(t instanceof ArrayBuffer||uVe(t))||fVe&&t instanceof Blob||lVe&&t instanceof File}D1.isBinary=Zle;function Fv(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,i=t.length;r<i;r++)if(Fv(t[r]))return!0;return!1}if(Zle(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Fv(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Fv(t[r]))return!0;return!1}D1.hasBinary=Fv});var Jle=v(B1=>{l();"use strict";Object.defineProperty(B1,"__esModule",{value:!0});B1.reconstructPacket=B1.deconstructPacket=void 0;var dVe=wP();function hVe(t){let e=[],r=t.data,i=t;return i.data=_P(r,e),i.attachments=e.length,{packet:i,buffers:e}}B1.deconstructPacket=hVe;function _P(t,e){if(!t)return t;if(dVe.isBinary(t)){let r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){let r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=_P(t[i],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){let r={};for(let i in t)t.hasOwnProperty(i)&&(r[i]=_P(t[i],e));return r}return t}function pVe(t,e){return t.data=EP(t.data,e),t.attachments=void 0,t}B1.reconstructPacket=pVe;function EP(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=EP(t[r],e);else if(typeof t=="object")for(let r in t)t.hasOwnProperty(r)&&(t[r]=EP(t[r],e));return t}});var Vv=v(_a=>{l();"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.Decoder=_a.Encoder=_a.PacketType=_a.protocol=void 0;var yVe=mh(),ede=Jle(),tde=wP(),gVe=Ee(),SP=gVe.default("socket.io-parser");_a.protocol=5;var Ai;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ai=_a.PacketType||(_a.PacketType={}));var rde=class{encode(e){return SP("encoding packet %j",e),(e.type===Ai.EVENT||e.type===Ai.ACK)&&tde.hasBinary(e)?(e.type=e.type===Ai.EVENT?Ai.BINARY_EVENT:Ai.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===Ai.BINARY_EVENT||e.type===Ai.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data)),SP("encoded %j as %s",e,r),r}encodeAsBinary(e){let r=ede.deconstructPacket(e),i=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(i),n}};_a.Encoder=rde;var Kv=class extends yVe.Emitter{constructor(){super()}add(e){let r;if(typeof e=="string")r=this.decodeString(e),r.type===Ai.BINARY_EVENT||r.type===Ai.BINARY_ACK?(this.reconstructor=new ide(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r);else if(tde.isBinary(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0,i={type:Number(e.charAt(0))};if(Ai[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Ai.BINARY_EVENT||i.type===Ai.BINARY_ACK){let s=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);let o=e.substring(s,r);if(o!=Number(o)||e.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(e.charAt(r+1)==="/"){let s=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););i.nsp=e.substring(s,r)}else i.nsp="/";let n=e.charAt(r+1);if(n!==""&&Number(n)==n){let s=r+1;for(;++r;){let o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}i.id=Number(e.substring(s,r+1))}if(e.charAt(++r)){let s=mVe(e.substr(r));if(Kv.isPayloadValid(i.type,s))i.data=s;else throw new Error("invalid payload")}return SP("decoded %s as %j",e,i),i}static isPayloadValid(e,r){switch(e){case Ai.CONNECT:return typeof r=="object";case Ai.DISCONNECT:return r===void 0;case Ai.CONNECT_ERROR:return typeof r=="string"||typeof r=="object";case Ai.EVENT:case Ai.BINARY_EVENT:return Array.isArray(r)&&r.length>0;case Ai.ACK:case Ai.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}};_a.Decoder=Kv;function mVe(t){try{return JSON.parse(t)}catch(e){return!1}}var ide=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let r=ede.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}});var xP=v(zv=>{l();"use strict";Object.defineProperty(zv,"__esModule",{value:!0});zv.on=void 0;function bVe(t,e,r){return t.on(e,r),function(){t.off(e,r)}}zv.on=bVe});var AP=v(N1=>{l();"use strict";var vVe=N1&&N1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(N1,"__esModule",{value:!0});N1.Socket=void 0;var xo=Vv(),Hv=xP(),wVe=mh(),_Ve=vVe(Ee()),Ao=_Ve.default("socket.io-client:socket"),EVe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),nde=class extends wVe.Emitter{constructor(e,r,i){super();this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;let e=this.io;this.subs=[Hv.on(e,"open",this.onopen.bind(this)),Hv.on(e,"packet",this.onpacket.bind(this)),Hv.on(e,"error",this.onerror.bind(this)),Hv.on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(EVe.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');r.unshift(e);let i={type:xo.PacketType.EVENT,data:r};i.options={},i.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"&&(Ao("emitting packet with ack id %d",this.ids),this.acks[this.ids]=r.pop(),i.id=this.ids++);let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)?Ao("discard packet as the transport is not currently writable"):this.connected?this.packet(i):this.sendBuffer.push(i),this.flags={},this}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){Ao("transport is open - connecting"),typeof this.auth=="function"?this.auth(e=>{this.packet({type:xo.PacketType.CONNECT,data:e})}):this.packet({type:xo.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){Ao("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case xo.PacketType.CONNECT:if(e.data&&e.data.sid){let n=e.data.sid;this.onconnect(n)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xo.PacketType.EVENT:this.onevent(e);break;case xo.PacketType.BINARY_EVENT:this.onevent(e);break;case xo.PacketType.ACK:this.onack(e);break;case xo.PacketType.BINARY_ACK:this.onack(e);break;case xo.PacketType.DISCONNECT:this.ondisconnect();break;case xo.PacketType.CONNECT_ERROR:let i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){let r=e.data||[];Ao("emitting event %j",r),e.id!=null&&(Ao("attaching ack callback to event"),r.push(this.ack(e.id))),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let r=this._anyListeners.slice();for(let i of r)i.apply(this,e)}super.emit.apply(this,e)}ack(e){let r=this,i=!1;return function(...n){i||(i=!0,Ao("sending ack %j",n),r.packet({type:xo.PacketType.ACK,id:e,data:n}))}}onack(e){let r=this.acks[e.id];typeof r=="function"?(Ao("calling ack %s with %j",e.id,e.data),r.apply(this,e.data),delete this.acks[e.id]):Ao("bad ack %s",e.id)}onconnect(e){Ao("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>this.packet(e)),this.sendBuffer=[]}ondisconnect(){Ao("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(Ao("performing disconnect (%s)",this.nsp),this.packet({type:xo.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let r=this._anyListeners;for(let i=0;i<r.length;i++)if(e===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}};N1.Socket=nde});var ode=v((RCt,sde)=>{l();sde.exports=M1;function M1(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}M1.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-r:t+r}return Math.min(t,this.max)|0};M1.prototype.reset=function(){this.attempts=0};M1.prototype.setMin=function(t){this.ms=t};M1.prototype.setMax=function(t){this.max=t};M1.prototype.setJitter=function(t){this.jitter=t}});var fde=v(Io=>{l();"use strict";var SVe=Io&&Io.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),xVe=Io&&Io.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),AVe=Io&&Io.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SVe(e,t,r);return xVe(e,t),e},ade=Io&&Io.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Io,"__esModule",{value:!0});Io.Manager=void 0;var cde=Xle(),IVe=AP(),TVe=AVe(Vv()),bh=xP(),RVe=ade(ode()),PVe=mh(),CVe=ade(Ee()),hn=CVe.default("socket.io-client:manager"),ude=class extends PVe.Emitter{constructor(e,r){var i;super();this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,cde.installTimerFunctions(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new RVe.default({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;let n=r.parser||TVe;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(hn("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;hn("opening %s",this.uri),this.engine=new cde.Socket(this.uri,this.opts);let r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;let n=bh.on(r,"open",function(){i.onopen(),e&&e()}),s=bh.on(r,"error",o=>{hn("error"),i.cleanup(),i._readyState="closed",this.emitReserved("error",o),e?e(o):i.maybeReconnectOnOpen()});if(this._timeout!==!1){let o=this._timeout;hn("connect attempt will timeout after %d",o),o===0&&n();let a=this.setTimeoutFn(()=>{hn("connect attempt timed out after %d",o),n(),r.close(),r.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(n),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){hn("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(bh.on(e,"ping",this.onping.bind(this)),bh.on(e,"data",this.ondata.bind(this)),bh.on(e,"error",this.onerror.bind(this)),bh.on(e,"close",this.onclose.bind(this)),bh.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){hn("error",e),this.emitReserved("error",e)}socket(e,r){let i=this.nsps[e];return i||(i=new IVe.Socket(this,e,r),this.nsps[e]=i),i}_destroy(e){let r=Object.keys(this.nsps);for(let i of r)if(this.nsps[i].active){hn("socket %s is still active, skipping close",i);return}this._close()}_packet(e){hn("writing packet %j",e);let r=this.encoder.encode(e);for(let i=0;i<r.length;i++)this.engine.write(r[i],e.options)}cleanup(){hn("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){hn("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this._readyState==="opening"&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){hn("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)hn("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let r=this.backoff.duration();hn("will wait %dms before reconnect attempt",r),this._reconnecting=!0;let i=this.setTimeoutFn(()=>{e.skipReconnect||(hn("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(hn("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):(hn("reconnect success"),e.onreconnect())}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};Io.Manager=ude});var pde=v((kn,hde)=>{l();"use strict";var OVe=kn&&kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kn,"__esModule",{value:!0});kn.default=kn.connect=kn.io=kn.Socket=kn.Manager=kn.protocol=void 0;var kVe=hle(),$v=fde();Object.defineProperty(kn,"Manager",{enumerable:!0,get:function(){return $v.Manager}});var lde=AP();Object.defineProperty(kn,"Socket",{enumerable:!0,get:function(){return lde.Socket}});var DVe=OVe(Ee()),dde=DVe.default("socket.io-client"),Fm={};function vh(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};let r=kVe.url(t,e.path||"/socket.io"),i=r.source,n=r.id,s=r.path,o=Fm[n]&&s in Fm[n].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o,c;return a?(dde("ignoring socket cache for %s",i),c=new $v.Manager(i,e)):(Fm[n]||(dde("new io instance for %s",i),Fm[n]=new $v.Manager(i,e)),c=Fm[n]),r.query&&!e.query&&(e.query=r.queryKey),c.socket(r.path,e)}kn.io=vh;kn.connect=vh;kn.default=vh;Object.assign(vh,{Manager:$v.Manager,Socket:lde.Socket,io:vh,connect:vh});var BVe=Vv();Object.defineProperty(kn,"protocol",{enumerable:!0,get:function(){return BVe.protocol}});hde.exports=vh});var IP=v((CCt,yde)=>{l();var NVe=$8();yde.exports=t=>async e=>{e=NVe(e);let r=b=>{typeof b.return=="function"&&b.return()},i=null,n=null,s=b=>{i=b,n&&n(b),r(e)},o=null,a=!1,c=()=>{a=!0,o&&o()},u=null,f=!1,d=()=>{f=!0,u&&u()},h=null,p=()=>{h&&h()},y=()=>new Promise((b,S)=>{o=h=b,n=S,t.once("drain",p)}),m=()=>(r(e),new Promise((b,S)=>{if(a||f||i)return b();u=o=b,n=S})),w=()=>{t.removeListener("error",s),t.removeListener("close",c),t.removeListener("finish",d),t.removeListener("drain",p)};t.once("error",s),t.once("close",c),t.once("finish",d);try{for await(let b of e){if(!t.writable||t.destroyed||i)break;t.write(b)===!1&&await y()}}catch(b){i||t.destroy(),i=b}try{if(t.writable&&t.end(),await m(),i)throw i}finally{w()}}});var TP=v((OCt,gde)=>{l();var MVe=IP(),LVe=Bm();gde.exports=t=>({sink:MVe(t),source:LVe(t)})});var bde=v((kCt,mde)=>{l();var qVe=TP();mde.exports=t=>async function*(e){let r=qVe(t),i;if(r.sink(e).catch(n=>{i=n}),yield*r.source,i)throw i}});var vde=v((DCt,L1)=>{l();L1.exports=Bm();L1.exports.source=Bm();L1.exports.sink=IP();L1.exports.transform=bde();L1.exports.duplex=TP()});var RP=v((BCt,xde)=>{l();"use strict";var wde=Tc(),jVe=vde(),{CLOSE_TIMEOUT:UVe}=kv(),_de=HR(),Ede=Ee(),Gv=Ede("libp2p:webrtc-star:socket");Gv.error=Ede("libp2p:webrtc-star:socket:error");var Sde=(t,e)=>{if(!(!t||!e))try{return _de(t,e)}catch(r){return Gv.error(r),_de("0.0.0.0",e)}};xde.exports=(t,e={})=>{let{sink:r,source:i}=jVe.duplex(t),n=e.remoteAddr||Sde(t.remoteAddress,t.remotePort),s=Sde(t.localAddress,t.localPort),o={async sink(a){e.signal&&(a=wde(a,e.signal));try{await r(async function*(){for await(let c of a)yield c instanceof Uint8Array?c:c.slice()}())}catch(c){c.type!=="aborted"&&Gv.error(c)}},source:e.signal?wde(i,e.signal):i,conn:t,localAddr:s,remoteAddr:n,timeline:{open:Date.now()},close(){if(!t.destroyed)return new Promise((a,c)=>{let u=Date.now(),f=setTimeout(()=>{if(o.remoteAddr){let{host:d,port:h}=o.remoteAddr.toOptions();Gv("timeout closing socket to %s:%s after %dms, destroying it manually",d,h,Date.now()-u)}t.destroyed||t.destroy()},UVe);t.once("close",()=>{a()}),t.end(d=>{if(clearTimeout(f),o.timeline.close=Date.now(),d)return c(d)})})}};return t.once("close",()=>{o.timeline.close||(o.timeline.close=Date.now())}),o}});var PP=v((NCt,Ide)=>{l();"use strict";var{Multiaddr:Ade}=rt();function FVe(t){let e=t.toString().split("/"),r=t.protos()[1].name,i=t.protos()[2].name,n=t.stringTuples()[1][1];if(r!=="tcp"||i!=="ws"&&i!=="wss")throw new Error("invalid multiaddr: "+t.toString());if(!Ade.isName(t))return"http://"+e[2]+":"+e[4];if(i==="ws")return"http://"+e[2]+(n==="80"?"":":"+n);if(i==="wss")return"https://"+e[2]+(n==="443"?"":":"+n)}function KVe(t){let e="/libp2p-webrtc-star";if(t.indexOf(e)!==-1){t=t.substring(e.length,t.length);let r=new Ade(t),i=r.stringTuples().filter(n=>n[0]===421)[0];r=r.decapsulate("p2p"),r=r.encapsulate("/p2p-webrtc-star"),r=r.encapsulate(`/p2p/${i[1]}`),t=r.toString()}return t}Ide.exports={cleanUrlSIO:FVe,cleanMultiaddr:KVe}});var Cde=v((MCt,Pde)=>{l();"use strict";var VVe=vr(),Tde=Ee(),wh=Tde("libp2p:webrtc-star:listener");wh.error=Tde("libp2p:webrtc-star:listener:error");var zVe=QR(),HVe=pde(),$Ve=iP(),GVe=gu(),WVe=RP(),{cleanUrlSIO:YVe}=PP(),{CODE_P2P:Rde}=kv(),XVe={transports:["websocket"],"force new connection":!0,path:"/socket.io-next/"};Pde.exports=({handler:t,upgrader:e},r,i={})=>{let n=new VVe,s,o;return n.__connections=[],n.__spChannels=new Map,n.__pendingIntents=new Map,n.listen=a=>{if(s)throw zVe(new Error("listener already in use"),"ERR_ALREADY_LISTENING");let c=GVe();s=a;let u;!a.protoCodes().includes(Rde)&&e.localPeer?u=a.encapsulate(`/p2p/${e.localPeer.toB58String()}`):u=a,n.on("error",()=>c.reject()),o=YVe(a),wh("Dialing to Signalling Server on: "+o),n.io=HVe.connect(o,XVe);let f=d=>{if(d.answer||d.err||!d.intentId)return;let h=d.intentId,p=n.__pendingIntents.get(h);p||(p=[],n.__pendingIntents.set(h,p));let y=n.__spChannels.get(h);if(y){y.signal(d.signal);return}else if(d.signal.type!=="offer"){p.push(d);return}let m={trickle:!1,...i};r.wrtc&&(m.wrtc=r.wrtc),y=new $Ve(m);let w=b=>{wh.error("incoming connection errored",b)};y.on("error",w),y.once("close",(...b)=>{y.removeListener("error",w)}),y.on("signal",b=>{d.signal=b,d.answer=!0,n.io.emit("ss-handshake",d)}),y.signal(d.signal);for(let b of p)y.signal(b.signal);n.__pendingIntents.set(h,[]),y.once("connect",async()=>{let b=WVe(y);wh("new inbound connection %s",b.remoteAddr);let S;try{S=await e.upgradeInbound(b)}catch(I){return wh.error("inbound connection failed to upgrade",I),b.close()}if(!S.remoteAddr)try{S.remoteAddr=a.decapsulateCode(Rde).encapsulate(`/p2p/${S.remotePeer.toB58String()}`)}catch(I){wh.error("could not determine remote address",I)}wh("inbound connection %s upgraded",b.remoteAddr),QVe(n,b,h),n.emit("connection",S),t(S)}),n.__spChannels.set(h,y)};return n.io.once("connect_error",d=>c.reject(d)),n.io.once("error",d=>{n.emit("error",d),n.emit("close")}),n.io.on("ws-handshake",f),n.io.on("ws-peer",r._peerDiscovered),n.io.on("connect",()=>{n.io.emit("ss-join",u.toString())}),n.io.once("connect",()=>{n.emit("listening"),c.resolve()}),r.sigReferences.set(o,{listener:n,signallingAddr:u}),c.promise},n.close=async()=>{let a=r.sigReferences.get(o);a&&a.listener.io&&(a.listener.io.emit("ss-leave"),a.listener.io.close()),await Promise.all(n.__connections.map(c=>c.close())),n.emit("close"),n.removeAllListeners(),s=void 0,r.sigReferences.delete(o)},n.getAddrs=()=>[s],n};function QVe(t,e,r){t.__connections.push(e);let i=()=>{t.__connections=t.__connections.filter(n=>n!==e),t.__spChannels.delete(r),t.__pendingIntents.delete(r)};e.conn.once("close",i)}});var Nde=v((LCt,Bde)=>{l();"use strict";var Ode=Ee(),Lu=Ode("libp2p:webrtc-star");Lu.error=Ode("libp2p:webrtc-star:error");var{EventEmitter:ZVe}=vr(),Wv=QR(),JVe=Y4(),{AbortError:kde}=Tc(),eze=iP(),{supportsWebRTCDataChannels:tze}=ule(),{Multiaddr:rze}=rt(),ize=zl(),nze=it(),{CODE_CIRCUIT:sze}=kv(),oze=Cde(),aze=RP(),{cleanMultiaddr:cze,cleanUrlSIO:uze}=PP();function fze(){}var Dde=class{constructor(e={}){if(!e.upgrader)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=e.upgrader,this.sioOptions={transports:["websocket"],"force new connection":!0},e.wrtc&&(this.wrtc=e.wrtc),this.sigReferences=new Map,this.discovery=new ZVe,this.discovery.tag="webRTCStar",this.discovery._isStarted=!1,this.discovery.start=()=>{this.discovery._isStarted=!0},this.discovery.stop=()=>{this.discovery._isStarted=!1},this._peerDiscovered=this._peerDiscovered.bind(this)}async dial(e,r={}){let i=await this._connect(e,r),n=aze(i,{remoteAddr:e,signal:r.signal});Lu("new outbound connection %s",n.remoteAddr);let s=await this._upgrader.upgradeOutbound(n);return Lu("outbound connection %s upgraded",n.remoteAddr),s}_connect(e,r={}){if(r.signal&&r.signal.aborted)throw new kde;let i={initiator:!0,trickle:!1,...r.spOptions||{}};this.wrtc&&(i.wrtc=this.wrtc);let n=e.toOptions(),s=(~~(Math.random()*1e9)).toString(36)+Date.now();return new Promise((o,a)=>{let c=this.sigReferences.get(uze(e));if(!c||!c.listener)return a(Wv(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));let u=c.listener.io,f=Date.now(),d;Lu("dialing %s:%s",n.host,n.port);let h=new eze(i),p=S=>{if(!d){let I=`connection error ${n.host}:${n.port}: ${S.message}`;Lu.error(I),b(S)}},y=()=>{Lu("connnection timeout %s:%s",n.host,n.port);let S=Wv(new Error(`connection timeout after ${Date.now()-f}ms`),"ERR_CONNECT_TIMEOUT");h.emit("error",S)},m=()=>{d=!0,Lu("connection opened %s:%s",n.host,n.port),b(null)},w=()=>{Lu.error("connection aborted %s:%s",n.host,n.port),h.destroy(),b(new kde)},b=S=>{h.removeListener("timeout",y),h.removeListener("connect",m),r.signal&&r.signal.removeEventListener("abort",w),S?a(S):o(h)};h.on("error",p),h.once("timeout",y),h.once("connect",m),h.on("close",()=>{h.removeListener("error",p)}),r.signal&&r.signal.addEventListener("abort",w),h.on("signal",S=>{u.emit("ss-handshake",{intentId:s,srcMultiaddr:c.signallingAddr.toString(),dstMultiaddr:e.toString(),signal:S})}),u.on("ws-handshake",S=>{S.intentId===s&&S.err&&(h.destroy(),a(Wv(S.err instanceof Error?S.err:new Error(S.err),"ERR_SIGNALLING_FAILED"))),!(S.intentId!==s||!S.answer||h.destroyed)&&h.signal(S.signal)})})}createListener(e={},r){if(!tze&&!this.wrtc)throw Wv(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return typeof e=="function"&&(r=e,e={}),r=r||fze,oze({handler:r,upgrader:this._upgrader},this,e)}filter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>r.protoCodes().includes(sze)?!1:ize.WebRTCStar.matches(r))}_peerDiscovered(e){if(!this.discovery._isStarted)return;Lu("Peer Discovered:",e),e=cze(e);let r=new rze(e),i=nze.createFromB58String(r.getPeerId());this.discovery.emit("peer",{id:i,multiaddrs:[r]})}};Bde.exports=JVe(Dde,{className:"WebRTCStar",symbolName:"@libp2p/js-libp2p-webrtc-star/webrtcstar"})});var Ude=v((qCt,jde)=>{l();"use strict";var Yv=Ss(),Mde=Pn(),CP=10*1024,Lde=class{constructor(){this._pool=new Uint8Array(CP),this._poolOffset=0}write(e){let r=this._pool,i=this._poolOffset;Yv.encode(e.id<<3|e.type,r,i),i+=Yv.encode.bytes,Yv.encode(e.data?e.data.length:0,r,i),i+=Yv.encode.bytes;let n=r.subarray(this._poolOffset,i);return CP-i<100?(this._pool=new Uint8Array(CP),this._poolOffset=0):this._poolOffset=i,e.data?[n,e.data]:n}},qde=new Lde;jde.exports=t=>async function*(){for await(let r of t)Array.isArray(r)?yield new Mde(r.map(i=>qde.write(i))):yield new Mde(qde.write(r))}()});var Vde=v((jCt,Kde)=>{l();"use strict";var Xv=Ss(),lze=Pn();Kde.exports=t=>async function*(){let r=new Fde;for await(let i of t){let n=r.write(i);n.length&&(yield n)}}();var Fde=class{constructor(){this._buffer=new lze,this._bufferProxy=new Proxy({},{get:(e,r)=>r[0]==="l"?this._buffer[r]:this._buffer.get(parseInt(r))}),this._headerInfo=null}write(e){if(!e||!e.length)return[];this._buffer.append(e);let r=[];for(;;){if(!this._headerInfo)try{this._headerInfo=this._decodeHeader(this._bufferProxy)}catch(c){break}let{id:i,type:n,length:s,offset:o}=this._headerInfo;if(this._buffer.length-o<s)break;r.push({id:i,type:n,data:this._buffer.shallowSlice(o,o+s)}),this._buffer.consume(o+s),this._headerInfo=null}return r}_decodeHeader(e){let r=Xv.decode(e),i=Xv.decode.bytes,n=Xv.decode(e,i);return i+=Xv.decode.bytes,{id:r>>3,type:r&7,offset:i,length:n}}}});var zde=v(OP=>{l();"use strict";OP.encode=Ude();OP.decode=Vde()});var DP=v((FCt,kP)=>{l();"use strict";var Hde=1<<20;kP.exports=t=>{t=t||Hde;let e=r=>{if(r.data&&r.data.length>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return r=>async function*(){for await(let n of r)Array.isArray(n)?n.forEach(e):e(n),yield n}()};kP.exports.MAX_MSG_SIZE=Hde});var BP=v(Km=>{l();"use strict";var qu=Object.freeze({NEW_STREAM:0,MESSAGE_RECEIVER:1,MESSAGE_INITIATOR:2,CLOSE_RECEIVER:3,CLOSE_INITIATOR:4,RESET_RECEIVER:5,RESET_INITIATOR:6});Km.MessageTypes=qu;Km.InitiatorMessageTypes=Object.freeze({NEW_STREAM:qu.NEW_STREAM,MESSAGE:qu.MESSAGE_INITIATOR,CLOSE:qu.CLOSE_INITIATOR,RESET:qu.RESET_INITIATOR});Km.ReceiverMessageTypes=Object.freeze({MESSAGE:qu.MESSAGE_RECEIVER,CLOSE:qu.CLOSE_RECEIVER,RESET:qu.RESET_RECEIVER});Km.MessageTypeNames=Object.freeze(Object.entries(qu).reduce((t,e)=>(t[e[1]]=e[0],t),{}))});var Wde=v((VCt,Gde)=>{l();"use strict";function $de(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function dze(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return $de(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),$de(new n,r)}}Gde.exports=dze});var Zde=v((zCt,Qde)=>{l();"use strict";var hze=Tc(),Yde=E0(),Vm=Ee()("libp2p:mplex:stream"),pze=lc(),Xde=Pn(),yze=Wde(),{MAX_MSG_SIZE:gze}=DP(),{InitiatorMessageTypes:mze,ReceiverMessageTypes:bze}=BP(),NP="ERR_MPLEX_STREAM_RESET",vze="ERR_MPLEX_STREAM_ABORT";Qde.exports=({id:t,name:e,send:r,onEnd:i=()=>{},type:n="initiator",maxMsgSize:s=gze})=>{let o=new Yde,a=new Yde,c=n==="initiator"?mze:bze,u=n==="initiator"?`i${t}`:`r${t}`;e=String(e??t);let f=!1,d=!1,h,p=w=>{f||(f=!0,Vm("%s stream %s source end",n,e,w),w&&!h&&(h=w),d&&(m.timeline.close=Date.now(),i(h)))},y=w=>{d||(d=!0,Vm("%s stream %s sink end",n,e,w),w&&!h&&(h=w),f&&(m.timeline.close=Date.now(),i(h)))},m={close:()=>m.source.end(),abort:w=>{Vm("%s stream %s abort",n,e,w),m.source.end(w),o.abort(),y(w)},reset:()=>{let w=yze(new Error("stream reset"),NP);a.abort(),m.source.end(w),y(w)},sink:async w=>{w=hze(w,[{signal:o.signal,options:{abortMessage:"stream aborted",abortCode:vze}},{signal:a.signal,options:{abortMessage:"stream reset",abortCode:NP}}]),n==="initiator"&&r({id:t,type:c.NEW_STREAM,data:e});try{for await(let b of w)for(;b.length;){if(b.length<=s){r({id:t,type:c.MESSAGE,data:b});break}b=Xde.isBufferList(b)?b:new Xde(b),r({id:t,type:c.MESSAGE,data:b.shallowSlice(0,s)}),b.consume(s)}}catch(b){return b.code===NP?Vm("%s stream %s reset",n,e):(Vm("%s stream %s error",n,e,b),r({id:t,type:c.RESET})),m.source.end(b),y(b)}r({id:t,type:c.CLOSE}),y()},source:pze(p),timeline:{open:Date.now(),close:null},id:u};return m}});var rhe=v((HCt,the)=>{l();"use strict";var wze=Nr(),_ze=lc(),ju=Ee()("libp2p:mplex"),Eze=Tc(),Jde=zde(),Sze=DP(),{MessageTypes:_h,MessageTypeNames:ehe}=BP(),xze=Zde(),MP=class{constructor(e){e=e||{},e=typeof e=="function"?{onStream:e}:e,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._options=e,this.sink=this._createSink(),this.source=this._createSource(),this.onStream=e.onStream,this.onStreamEnd=e.onStreamEnd}get streams(){let e=[];return this._streams.initiators.forEach(r=>{e.push(r)}),this._streams.receivers.forEach(r=>{e.push(r)}),e}newStream(e){let r=this._streamId++;e=e==null?r.toString():String(e);let i=this._streams.initiators;return this._newStream({id:r,name:e,type:"initiator",registry:i})}_newReceiverStream({id:e,name:r}){let i=this._streams.receivers;return this._newStream({id:e,name:r,type:"receiver",registry:i})}_newStream({id:e,name:r,type:i,registry:n}){if(n.has(e))throw new Error(`${i} stream ${e} already exists!`);ju("new %s stream %s %s",i,e,r);let a=xze({id:e,name:r,send:c=>(ju.enabled&&ju("%s stream %s %s send",i,e,r,{...c,type:ehe[c.type],data:c.data&&c.data.slice()}),this.source.push(c)),type:i,onEnd:()=>{ju("%s stream %s %s ended",i,e,r),n.delete(e),this.onStreamEnd&&this.onStreamEnd(a)},maxMsgSize:this._options.maxMsgSize});return n.set(e,a),a}_createSink(){return async e=>{this._options.signal&&(e=Eze(e,this._options.signal));try{await wze(e,Jde.decode,Sze(this._options.maxMsgSize),async r=>{for await(let i of r)for(let n of i)this._handleIncoming(n)})}catch(r){return ju("error in sink",r),this.source.end(r)}this.source.end()}}_createSource(){let r=_ze({onEnd:i=>{let{initiators:n,receivers:s}=this._streams;for(let o of n.values())o.abort(i);for(let o of s.values())o.abort(i)},writev:!0});return Object.assign(Jde.encode(r),{push:r.push,end:r.end,return:r.return})}_handleIncoming({id:e,type:r,data:i}){if(ju.enabled&&ju("incoming message",{id:e,type:ehe[r],data:i.slice()}),r===_h.NEW_STREAM&&this.onStream){let o=this._newReceiverStream({id:e,name:i.toString()});return this.onStream(o)}let s=(r&1?this._streams.initiators:this._streams.receivers).get(e);if(!s)return ju("missing stream %s",e);switch(r){case _h.MESSAGE_INITIATOR:case _h.MESSAGE_RECEIVER:s.source.push(i);break;case _h.CLOSE_INITIATOR:case _h.CLOSE_RECEIVER:s.close();break;case _h.RESET_INITIATOR:case _h.RESET_RECEIVER:s.reset();break;default:ju("unknown message type %s",r)}}};MP.multicodec="/mplex/6.7.0";the.exports=MP});var nhe=v(($Ct,ihe)=>{l();"use strict";ihe.exports=rhe()});var ohe=v(LP=>{l();"use strict";Object.defineProperty(LP,"__esModule",{value:!0});var she=65536,Aze=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var e=typeof self!="undefined"?self.crypto||self.msCrypto:null;e&&e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var r=new Uint8Array(e),i=0;i<r.length;i+=she)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,she)));return r},t}();LP.BrowserRandomSource=Aze});var Mc=v(qP=>{l();"use strict";Object.defineProperty(qP,"__esModule",{value:!0});function Ize(t){for(var e=0;e<t.length;e++)t[e]=0;return t}qP.wipe=Ize});var ahe=v(jP=>{l();"use strict";Object.defineProperty(jP,"__esModule",{value:!0});var Tze=Mc(),Rze=function(){function t(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Ra!="undefined"){var e=C0();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}return t.prototype.randomBytes=function(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var i=new Uint8Array(e),n=0;n<i.length;n++)i[n]=r[n];return Tze.wipe(r),i},t}();jP.NodeRandomSource=Rze});var che=v(UP=>{l();"use strict";Object.defineProperty(UP,"__esModule",{value:!0});var Pze=ohe(),Cze=ahe(),Oze=function(){function t(){if(this.isAvailable=!1,this.name="",this._source=new Pze.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Cze.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return t.prototype.randomBytes=function(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)},t}();UP.SystemRandomSource=Oze});var uhe=v(Os=>{l();"use strict";Object.defineProperty(Os,"__esModule",{value:!0});function kze(t,e){var r=t>>>16&65535,i=t&65535,n=e>>>16&65535,s=e&65535;return i*s+(r*s+i*n<<16>>>0)|0}Os.mul=Math.imul||kze;function Dze(t,e){return t+e|0}Os.add=Dze;function Bze(t,e){return t-e|0}Os.sub=Bze;function Nze(t,e){return t<<e|t>>>32-e}Os.rotl=Nze;function Mze(t,e){return t<<32-e|t>>>e}Os.rotr=Mze;function Lze(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}Os.isInteger=Number.isInteger||Lze;Os.MAX_SAFE_INTEGER=9007199254740991;Os.isSafeInteger=function(t){return Os.isInteger(t)&&t>=-Os.MAX_SAFE_INTEGER&&t<=Os.MAX_SAFE_INTEGER}});var zm=v(_t=>{l();"use strict";Object.defineProperty(_t,"__esModule",{value:!0});var fhe=uhe();function qze(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}_t.readInt16BE=qze;function jze(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}_t.readUint16BE=jze;function Uze(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}_t.readInt16LE=Uze;function Fze(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}_t.readUint16LE=Fze;function lhe(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}_t.writeUint16BE=lhe;_t.writeInt16BE=lhe;function dhe(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}_t.writeUint16LE=dhe;_t.writeInt16LE=dhe;function FP(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}_t.readInt32BE=FP;function KP(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}_t.readUint32BE=KP;function VP(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}_t.readInt32LE=VP;function zP(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}_t.readUint32LE=zP;function Qv(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}_t.writeUint32BE=Qv;_t.writeInt32BE=Qv;function Zv(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}_t.writeUint32LE=Zv;_t.writeInt32LE=Zv;function Kze(t,e){e===void 0&&(e=0);var r=FP(t,e),i=FP(t,e+4);return r*4294967296+i-(i>>31)*4294967296}_t.readInt64BE=Kze;function Vze(t,e){e===void 0&&(e=0);var r=KP(t,e),i=KP(t,e+4);return r*4294967296+i}_t.readUint64BE=Vze;function zze(t,e){e===void 0&&(e=0);var r=VP(t,e),i=VP(t,e+4);return i*4294967296+r-(r>>31)*4294967296}_t.readInt64LE=zze;function Hze(t,e){e===void 0&&(e=0);var r=zP(t,e),i=zP(t,e+4);return i*4294967296+r}_t.readUint64LE=Hze;function hhe(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Qv(t/4294967296>>>0,e,r),Qv(t>>>0,e,r+4),e}_t.writeUint64BE=hhe;_t.writeInt64BE=hhe;function phe(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Zv(t>>>0,e,r),Zv(t/4294967296>>>0,e,r+4),e}_t.writeUint64LE=phe;_t.writeInt64LE=phe;function $ze(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,s=t/8+r-1;s>=r;s--)i+=e[s]*n,n*=256;return i}_t.readUintBE=$ze;function Gze(t,e,r){if(r===void 0&&(r=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,s=r;s<r+t/8;s++)i+=e[s]*n,n*=256;return i}_t.readUintLE=Gze;function Wze(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!fhe.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,s=t/8+i-1;s>=i;s--)r[s]=e/n&255,n*=256;return r}_t.writeUintBE=Wze;function Yze(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!fhe.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,s=i;s<i+t/8;s++)r[s]=e/n&255,n*=256;return r}_t.writeUintLE=Yze;function Xze(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}_t.readFloat32BE=Xze;function Qze(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}_t.readFloat32LE=Qze;function Zze(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}_t.readFloat64BE=Zze;function Jze(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}_t.readFloat64LE=Jze;function eHe(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t),e}_t.writeFloat32BE=eHe;function tHe(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t,!0),e}_t.writeFloat32LE=tHe;function rHe(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t),e}_t.writeFloat64BE=rHe;function iHe(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t,!0),e}_t.writeFloat64LE=iHe});var bhe=v(Ea=>{l();"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});var nHe=che(),sHe=zm(),yhe=Mc();Ea.defaultRandomSource=new nHe.SystemRandomSource;function HP(t,e){return e===void 0&&(e=Ea.defaultRandomSource),e.randomBytes(t)}Ea.randomBytes=HP;function oHe(t){t===void 0&&(t=Ea.defaultRandomSource);var e=HP(4,t),r=sHe.readUint32LE(e);return yhe.wipe(e),r}Ea.randomUint32=oHe;var ghe="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function mhe(t,e,r){if(e===void 0&&(e=ghe),r===void 0&&(r=Ea.defaultRandomSource),e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");for(var i="",n=e.length,s=256-256%n;t>0;){for(var o=HP(Math.ceil(t*256/s),r),a=0;a<o.length&&t>0;a++){var c=o[a];c<s&&(i+=e.charAt(c%n),t--)}yhe.wipe(o)}return i}Ea.randomString=mhe;function aHe(t,e,r){e===void 0&&(e=ghe),r===void 0&&(r=Ea.defaultRandomSource);var i=Math.ceil(t/(Math.log(e.length)/Math.LN2));return mhe(i,e,r)}Ea.randomStringForEntropy=aHe});var t7=v(ds=>{l();"use strict";Object.defineProperty(ds,"__esModule",{value:!0});var cHe=bhe(),uHe=Mc();ds.PUBLIC_KEY_LENGTH=32;ds.SECRET_KEY_LENGTH=32;ds.SHARED_KEY_LENGTH=32;function Lc(t){var e=new Float64Array(16);if(t)for(var r=0;r<t.length;r++)e[r]=t[r];return e}var vhe=new Uint8Array(32);vhe[0]=9;var fHe=Lc([56129,1]);function $P(t){for(var e=1,r=0;r<16;r++){var i=t[r]+e+65535;e=Math.floor(i/65536),t[r]=i-e*65536}t[0]+=e-1+37*(e-1)}function Hm(t,e,r){for(var i=~(r-1),n=0;n<16;n++){var s=i&(t[n]^e[n]);t[n]^=s,e[n]^=s}}function lHe(t,e){for(var r=Lc(),i=Lc(),n=0;n<16;n++)i[n]=e[n];$P(i),$P(i),$P(i);for(var s=0;s<2;s++){r[0]=i[0]-65517;for(var n=1;n<15;n++)r[n]=i[n]-65535-(r[n-1]>>16&1),r[n-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);var o=r[15]>>16&1;r[14]&=65535,Hm(i,r,1-o)}for(var n=0;n<16;n++)t[2*n]=i[n]&255,t[2*n+1]=i[n]>>8}function dHe(t,e){for(var r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function Jv(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]+r[i]}function e7(t,e,r){for(var i=0;i<16;i++)t[i]=e[i]-r[i]}function Uu(t,e,r){var i,n,s=0,o=0,a=0,c=0,u=0,f=0,d=0,h=0,p=0,y=0,m=0,w=0,b=0,S=0,I=0,j=0,B=0,C=0,z=0,W=0,X=0,P=0,g=0,_=0,x=0,O=0,L=0,Y=0,V=0,q=0,E=0,U=r[0],de=r[1],Q=r[2],ue=r[3],le=r[4],me=r[5],be=r[6],xe=r[7],D=r[8],K=r[9],G=r[10],ee=r[11],T=r[12],F=r[13],H=r[14],M=r[15];i=e[0],s+=i*U,o+=i*de,a+=i*Q,c+=i*ue,u+=i*le,f+=i*me,d+=i*be,h+=i*xe,p+=i*D,y+=i*K,m+=i*G,w+=i*ee,b+=i*T,S+=i*F,I+=i*H,j+=i*M,i=e[1],o+=i*U,a+=i*de,c+=i*Q,u+=i*ue,f+=i*le,d+=i*me,h+=i*be,p+=i*xe,y+=i*D,m+=i*K,w+=i*G,b+=i*ee,S+=i*T,I+=i*F,j+=i*H,B+=i*M,i=e[2],a+=i*U,c+=i*de,u+=i*Q,f+=i*ue,d+=i*le,h+=i*me,p+=i*be,y+=i*xe,m+=i*D,w+=i*K,b+=i*G,S+=i*ee,I+=i*T,j+=i*F,B+=i*H,C+=i*M,i=e[3],c+=i*U,u+=i*de,f+=i*Q,d+=i*ue,h+=i*le,p+=i*me,y+=i*be,m+=i*xe,w+=i*D,b+=i*K,S+=i*G,I+=i*ee,j+=i*T,B+=i*F,C+=i*H,z+=i*M,i=e[4],u+=i*U,f+=i*de,d+=i*Q,h+=i*ue,p+=i*le,y+=i*me,m+=i*be,w+=i*xe,b+=i*D,S+=i*K,I+=i*G,j+=i*ee,B+=i*T,C+=i*F,z+=i*H,W+=i*M,i=e[5],f+=i*U,d+=i*de,h+=i*Q,p+=i*ue,y+=i*le,m+=i*me,w+=i*be,b+=i*xe,S+=i*D,I+=i*K,j+=i*G,B+=i*ee,C+=i*T,z+=i*F,W+=i*H,X+=i*M,i=e[6],d+=i*U,h+=i*de,p+=i*Q,y+=i*ue,m+=i*le,w+=i*me,b+=i*be,S+=i*xe,I+=i*D,j+=i*K,B+=i*G,C+=i*ee,z+=i*T,W+=i*F,X+=i*H,P+=i*M,i=e[7],h+=i*U,p+=i*de,y+=i*Q,m+=i*ue,w+=i*le,b+=i*me,S+=i*be,I+=i*xe,j+=i*D,B+=i*K,C+=i*G,z+=i*ee,W+=i*T,X+=i*F,P+=i*H,g+=i*M,i=e[8],p+=i*U,y+=i*de,m+=i*Q,w+=i*ue,b+=i*le,S+=i*me,I+=i*be,j+=i*xe,B+=i*D,C+=i*K,z+=i*G,W+=i*ee,X+=i*T,P+=i*F,g+=i*H,_+=i*M,i=e[9],y+=i*U,m+=i*de,w+=i*Q,b+=i*ue,S+=i*le,I+=i*me,j+=i*be,B+=i*xe,C+=i*D,z+=i*K,W+=i*G,X+=i*ee,P+=i*T,g+=i*F,_+=i*H,x+=i*M,i=e[10],m+=i*U,w+=i*de,b+=i*Q,S+=i*ue,I+=i*le,j+=i*me,B+=i*be,C+=i*xe,z+=i*D,W+=i*K,X+=i*G,P+=i*ee,g+=i*T,_+=i*F,x+=i*H,O+=i*M,i=e[11],w+=i*U,b+=i*de,S+=i*Q,I+=i*ue,j+=i*le,B+=i*me,C+=i*be,z+=i*xe,W+=i*D,X+=i*K,P+=i*G,g+=i*ee,_+=i*T,x+=i*F,O+=i*H,L+=i*M,i=e[12],b+=i*U,S+=i*de,I+=i*Q,j+=i*ue,B+=i*le,C+=i*me,z+=i*be,W+=i*xe,X+=i*D,P+=i*K,g+=i*G,_+=i*ee,x+=i*T,O+=i*F,L+=i*H,Y+=i*M,i=e[13],S+=i*U,I+=i*de,j+=i*Q,B+=i*ue,C+=i*le,z+=i*me,W+=i*be,X+=i*xe,P+=i*D,g+=i*K,_+=i*G,x+=i*ee,O+=i*T,L+=i*F,Y+=i*H,V+=i*M,i=e[14],I+=i*U,j+=i*de,B+=i*Q,C+=i*ue,z+=i*le,W+=i*me,X+=i*be,P+=i*xe,g+=i*D,_+=i*K,x+=i*G,O+=i*ee,L+=i*T,Y+=i*F,V+=i*H,q+=i*M,i=e[15],j+=i*U,B+=i*de,C+=i*Q,z+=i*ue,W+=i*le,X+=i*me,P+=i*be,g+=i*xe,_+=i*D,x+=i*K,O+=i*G,L+=i*ee,Y+=i*T,V+=i*F,q+=i*H,E+=i*M,s+=38*B,o+=38*C,a+=38*z,c+=38*W,u+=38*X,f+=38*P,d+=38*g,h+=38*_,p+=38*x,y+=38*O,m+=38*L,w+=38*Y,b+=38*V,S+=38*q,I+=38*E,n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=b+n+65535,n=Math.floor(i/65536),b=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=j+n+65535,n=Math.floor(i/65536),j=i-n*65536,s+=n-1+37*(n-1),n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=f+n+65535,n=Math.floor(i/65536),f=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=b+n+65535,n=Math.floor(i/65536),b=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=j+n+65535,n=Math.floor(i/65536),j=i-n*65536,s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=f,t[6]=d,t[7]=h,t[8]=p,t[9]=y,t[10]=m,t[11]=w,t[12]=b,t[13]=S,t[14]=I,t[15]=j}function $m(t,e){Uu(t,e,e)}function hHe(t,e){for(var r=Lc(),i=0;i<16;i++)r[i]=e[i];for(var i=253;i>=0;i--)$m(r,r),i!==2&&i!==4&&Uu(r,r,e);for(var i=0;i<16;i++)t[i]=r[i]}function GP(t,e){for(var r=new Uint8Array(32),i=new Float64Array(80),n=Lc(),s=Lc(),o=Lc(),a=Lc(),c=Lc(),u=Lc(),f=0;f<31;f++)r[f]=t[f];r[31]=t[31]&127|64,r[0]&=248,dHe(i,e);for(var f=0;f<16;f++)s[f]=i[f];n[0]=a[0]=1;for(var f=254;f>=0;--f){var d=r[f>>>3]>>>(f&7)&1;Hm(n,s,d),Hm(o,a,d),Jv(c,n,o),e7(n,n,o),Jv(o,s,a),e7(s,s,a),$m(a,c),$m(u,n),Uu(n,o,n),Uu(o,s,c),Jv(c,n,o),e7(n,n,o),$m(s,n),e7(o,a,u),Uu(n,o,fHe),Jv(n,n,a),Uu(o,o,n),Uu(n,a,u),Uu(a,s,i),$m(s,c),Hm(n,s,d),Hm(o,a,d)}for(var f=0;f<16;f++)i[f+16]=n[f],i[f+32]=o[f],i[f+48]=s[f],i[f+64]=a[f];var h=i.subarray(32),p=i.subarray(16);hHe(h,h),Uu(p,p,h);var y=new Uint8Array(32);return lHe(y,p),y}ds.scalarMult=GP;function whe(t){return GP(t,vhe)}ds.scalarMultBase=whe;function _he(t){if(t.length!==ds.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+ds.SECRET_KEY_LENGTH+" bytes");var e=new Uint8Array(t),r=whe(e);return{publicKey:r,secretKey:e}}ds.generateKeyPairFromSeed=_he;function pHe(t){var e=cHe.randomBytes(32,t),r=_he(e);return uHe.wipe(e),r}ds.generateKeyPair=pHe;function yHe(t,e,r){if(r===void 0&&(r=!1),t.length!==ds.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==ds.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var i=GP(t,e);if(r){for(var n=0,s=0;s<i.length;s++)n|=i[s];if(n===0)throw new Error("X25519: invalid shared key")}return i}ds.sharedKey=yHe});var q1=v((tOt,Ehe)=>{l();"use strict";var gHe=Yb(),mHe=lc(),bHe=gu();Ehe.exports=t=>{let e=mHe(),r=gHe(t.source),i=bHe(),n,s=t.sink(async function*(){yield*e,yield*await i.promise}());return s.catch(a=>{n=a}),{reader:r,writer:e,stream:{sink:a=>n?Promise.reject(n):(i.resolve(a),s),source:r},rest:()=>e.end(),write:e.push,read:async()=>(await r.next()).value}}});var Ahe=v((rOt,xhe)=>{l();"use strict";var vHe=jI(),wHe=q1(),She=ga();xhe.exports=(t,e={})=>{let r=wHe(t),i=She.decode.fromReader(r.reader,e),n=!1,s={read:async o=>{let{value:a,done:c}=await r.reader.next(o);if(c&&a.length<o)throw new Error("Couldn't read enough bytes");if(n=c,!a)throw new Error("Value is null");return a},readLP:async()=>{let{value:o,done:a}=await i.next();if(n=a,!o)throw new Error("Value is null");return o},readPB:async o=>{let a=await s.readLP();if(!a)throw new Error("Value is null");let c=vHe(a)?a:a.slice();return o.decode(c)},write:o=>{r.writer.push(o)},writeLP:o=>{s.write(She.encode.single(o,e))},writePB:(o,a)=>{s.writeLP(a.encode(o))},pb:o=>({read:()=>s.readPB(o),write:a=>s.writePB(a,o)}),unwrap:()=>(r.rest(),r.stream)};return s}});var The=v((iOt,Ihe)=>{l();"use strict";var _He=$8();Ihe.exports=function(){let e,r,i=async s=>{if(e)throw new Error("already piped");e=_He(s),r&&r(e)},n={[Symbol.asyncIterator](){return this},next(){return e?e.next():new Promise(s=>{r=o=>{r=null,s(o.next())}})}};return{sink:i,source:n}}});var Che=v((nOt,Phe)=>{l();var Rhe=The();Phe.exports=function(){var t=Rhe(),e=Rhe();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}});var n7=v((sOt,Gm)=>{l();"use strict";var{Buffer:r7}=Yt(),i7=Pn();Gm.exports=async function*(t){for await(let e of t)r7.isBuffer(e)?yield e:i7.isBufferList(e)?yield e.slice():yield r7.from(e)};Gm.exports.toBuffer=Gm.exports;Gm.exports.toList=async function*(t){for await(let e of t)r7.isBuffer(e)?yield new i7().append(e):i7.isBufferList(e)?yield e:yield new i7().append(r7.from(e))}});var Ohe=v(WP=>{l();"use strict";Object.defineProperty(WP,"__esModule",{value:!0});function EHe(t){return typeof t.saveState!="undefined"&&typeof t.restoreState!="undefined"&&typeof t.cleanSavedState!="undefined"}WP.isSerializableHash=EHe});var s7=v(j1=>{l();"use strict";Object.defineProperty(j1,"__esModule",{value:!0});function SHe(t,e,r){return~(t-1)&e|t-1&r}j1.select=SHe;function xHe(t,e){return(t|0)-(e|0)-1>>>31&1}j1.lessOrEqual=xHe;function khe(t,e){if(t.length!==e.length)return 0;for(var r=0,i=0;i<t.length;i++)r|=t[i]^e[i];return 1&r-1>>>8}j1.compare=khe;function AHe(t,e){return t.length===0||e.length===0?!1:khe(t,e)!==0}j1.equal=AHe});var Bhe=v(Wm=>{l();"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});var qc=Ohe(),IHe=s7(),THe=Mc(),Dhe=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=54^92;this._outer.update(i),qc.isSerializableHash(this._inner)&&qc.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),THe.wipe(i)}return t.prototype.reset=function(){if(!qc.isSerializableHash(this._inner)||!qc.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){qc.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),qc.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!qc.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!qc.isSerializableHash(this._inner)||!qc.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!qc.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Wm.HMAC=Dhe;function RHe(t,e,r){var i=new Dhe(t,e);i.update(r);var n=i.digest();return i.clean(),n}Wm.hmac=RHe;Wm.equal=IHe.equal});var Lhe=v(YP=>{l();"use strict";Object.defineProperty(YP,"__esModule",{value:!0});var Nhe=Bhe(),Mhe=Mc(),PHe=function(){function t(e,r,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var s=Nhe.hmac(this._hash,i,r);this._hmac=new Nhe.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Mhe.wipe(this._buffer),Mhe.wipe(this._counter),this._bufpos=0},t}();YP.HKDF=PHe});var QP=v(xl=>{l();"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var o7=zm(),a7=Mc();xl.DIGEST_LENGTH=32;xl.BLOCK_SIZE=64;var qhe=function(){function t(){this.digestLength=xl.DIGEST_LENGTH,this.blockSize=xl.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){a7.wipe(this._buffer),a7.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[i++],r--;this._bufferLength===this.blockSize&&(XP(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=XP(this._temp,this._state,e,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[i++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,n=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[i]=128;for(var a=i+1;a<o-8;a++)this._buffer[a]=0;o7.writeUint32BE(n,this._buffer,o-8),o7.writeUint32BE(s,this._buffer,o-4),XP(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)o7.writeUint32BE(this._state[a],e,a*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){a7.wipe(e.state),e.buffer&&a7.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();xl.SHA256=qhe;var CHe=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function XP(t,e,r,i,n){for(;n>=64;){for(var s=e[0],o=e[1],a=e[2],c=e[3],u=e[4],f=e[5],d=e[6],h=e[7],p=0;p<16;p++){var y=i+p*4;t[p]=o7.readUint32BE(r,y)}for(var p=16;p<64;p++){var m=t[p-2],w=(m>>>17|m<<32-17)^(m>>>19|m<<32-19)^m>>>10;m=t[p-15];var b=(m>>>7|m<<32-7)^(m>>>18|m<<32-18)^m>>>3;t[p]=(w+t[p-7]|0)+(b+t[p-16]|0)}for(var p=0;p<64;p++){var w=(((u>>>6|u<<32-6)^(u>>>11|u<<32-11)^(u>>>25|u<<32-25))+(u&f^~u&d)|0)+(h+(CHe[p]+t[p]|0)|0)|0,b=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&o^s&a^o&a)|0;h=d,d=f,f=u,u=c+w|0,c=a,a=o,o=s,s=w+b|0}e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=c,e[4]+=u,e[5]+=f,e[6]+=d,e[7]+=h,i+=64,n-=64}return i}function OHe(t){var e=new qhe;e.update(t);var r=e.digest();return e.clean(),r}xl.hash=OHe});var Uhe=v((jhe,Ym)=>{l();"use strict";(function(t,e){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],e):typeof Ra=="function"&&typeof Ym=="object"&&Ym&&Ym.exports&&(Ym.exports=e(Vi()))})(jhe,function(t){"use strict";var e=t.Reader,r=t.Writer,i=t.util,n=t.roots["libp2p-noise"]||(t.roots["libp2p-noise"]={});return n.pb=function(){var s={};return s.NoiseHandshakePayload=function(){function o(a){if(a)for(var c=Object.keys(a),u=0;u<c.length;++u)a[c[u]]!=null&&(this[c[u]]=a[c[u]])}return o.prototype.identityKey=i.newBuffer([]),o.prototype.identitySig=i.newBuffer([]),o.prototype.data=i.newBuffer([]),o.create=function(c){return new o(c)},o.encode=function(c,u){return u||(u=r.create()),c.identityKey!=null&&Object.hasOwnProperty.call(c,"identityKey")&&u.uint32(10).bytes(c.identityKey),c.identitySig!=null&&Object.hasOwnProperty.call(c,"identitySig")&&u.uint32(18).bytes(c.identitySig),c.data!=null&&Object.hasOwnProperty.call(c,"data")&&u.uint32(26).bytes(c.data),u},o.encodeDelimited=function(c,u){return this.encode(c,u).ldelim()},o.decode=function(c,u){c instanceof e||(c=e.create(c));for(var f=u===void 0?c.len:c.pos+u,d=new n.pb.NoiseHandshakePayload;c.pos<f;){var h=c.uint32();switch(h>>>3){case 1:d.identityKey=c.bytes();break;case 2:d.identitySig=c.bytes();break;case 3:d.data=c.bytes();break;default:c.skipType(h&7);break}}return d},o.decodeDelimited=function(c){return c instanceof e||(c=new e(c)),this.decode(c,c.uint32())},o.verify=function(c){return typeof c!="object"||c===null?"object expected":c.identityKey!=null&&c.hasOwnProperty("identityKey")&&!(c.identityKey&&typeof c.identityKey.length=="number"||i.isString(c.identityKey))?"identityKey: buffer expected":c.identitySig!=null&&c.hasOwnProperty("identitySig")&&!(c.identitySig&&typeof c.identitySig.length=="number"||i.isString(c.identitySig))?"identitySig: buffer expected":c.data!=null&&c.hasOwnProperty("data")&&!(c.data&&typeof c.data.length=="number"||i.isString(c.data))?"data: buffer expected":null},o.fromObject=function(c){if(c instanceof n.pb.NoiseHandshakePayload)return c;var u=new n.pb.NoiseHandshakePayload;return c.identityKey!=null&&(typeof c.identityKey=="string"?i.base64.decode(c.identityKey,u.identityKey=i.newBuffer(i.base64.length(c.identityKey)),0):c.identityKey.length&&(u.identityKey=c.identityKey)),c.identitySig!=null&&(typeof c.identitySig=="string"?i.base64.decode(c.identitySig,u.identitySig=i.newBuffer(i.base64.length(c.identitySig)),0):c.identitySig.length&&(u.identitySig=c.identitySig)),c.data!=null&&(typeof c.data=="string"?i.base64.decode(c.data,u.data=i.newBuffer(i.base64.length(c.data)),0):c.data.length&&(u.data=c.data)),u},o.toObject=function(c,u){u||(u={});var f={};return u.defaults&&(u.bytes===String?f.identityKey="":(f.identityKey=[],u.bytes!==Array&&(f.identityKey=i.newBuffer(f.identityKey))),u.bytes===String?f.identitySig="":(f.identitySig=[],u.bytes!==Array&&(f.identitySig=i.newBuffer(f.identitySig))),u.bytes===String?f.data="":(f.data=[],u.bytes!==Array&&(f.data=i.newBuffer(f.data)))),c.identityKey!=null&&c.hasOwnProperty("identityKey")&&(f.identityKey=u.bytes===String?i.base64.encode(c.identityKey,0,c.identityKey.length):u.bytes===Array?Array.prototype.slice.call(c.identityKey):c.identityKey),c.identitySig!=null&&c.hasOwnProperty("identitySig")&&(f.identitySig=u.bytes===String?i.base64.encode(c.identitySig,0,c.identitySig.length):u.bytes===Array?Array.prototype.slice.call(c.identitySig):c.identitySig),c.data!=null&&c.hasOwnProperty("data")&&(f.data=u.bytes===String?i.base64.encode(c.data,0,c.data.length):u.bytes===Array?Array.prototype.slice.call(c.data):c.data),f},o.prototype.toJSON=function(){return this.constructor.toObject(this,t.util.toJSONOptions)},o}(),s}(),n})});var Al=v(Jt=>{l();"use strict";var kHe=Jt&&Jt.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),DHe=Jt&&Jt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),BHe=Jt&&Jt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&kHe(e,t,r);return DHe(e,t),e},NHe=Jt&&Jt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.isValidPublicKey=Jt.getHkdf=Jt.verifySignedPayload=Jt.getHandshakePayload=Jt.decodePayload=Jt.getPeerIdFromPayload=Jt.signPayload=Jt.createHandshakePayload=Jt.getPayload=Jt.generateKeypair=void 0;var MHe=Lhe(),LHe=QP(),qHe=BHe(t7()),hs=Yt(),ZP=NHe(it()),jHe=uc(),UHe=Uhe(),FHe=(wi(),vn),c7=UHe.pb.NoiseHandshakePayload;function KHe(){let t=qHe.generateKeyPair();return{publicKey:hs.Buffer.from(t.publicKey.buffer,t.publicKey.byteOffset,t.publicKey.length),privateKey:hs.Buffer.from(t.secretKey.buffer,t.secretKey.byteOffset,t.secretKey.length)}}Jt.generateKeypair=KHe;async function VHe(t,e,r){let i=await Khe(t,JP(e)),n=r??hs.Buffer.alloc(0);return Fhe(t.marshalPubKey(),i,n)}Jt.getPayload=VHe;function Fhe(t,e,r){let i=c7.create({identityKey:hs.Buffer.from(t),identitySig:e,data:r??null});return hs.Buffer.from(c7.encode(i).finish())}Jt.createHandshakePayload=Fhe;async function Khe(t,e){return hs.Buffer.from(await t.privKey.sign(e))}Jt.signPayload=Khe;async function zHe(t){return await ZP.default.createFromPubKey(hs.Buffer.from(t.identityKey))}Jt.getPeerIdFromPayload=zHe;function HHe(t){return c7.toObject(c7.decode(hs.Buffer.from(t)))}Jt.decodePayload=HHe;function JP(t){return hs.Buffer.concat([hs.Buffer.from("noise-libp2p-static-key:"),t])}Jt.getHandshakePayload=JP;async function $He(t,e){let r=await ZP.default.createFromPubKey(e);return FHe.equals(r.id,t)}async function GHe(t,e,r){let i=hs.Buffer.from(e.identityKey);if(!await $He(r.id,i))throw new Error("Peer ID doesn't match libp2p public key.");let n=JP(t),s=jHe.keys.unmarshalPublicKey(i);if(!e.identitySig||!s.verify(n,hs.Buffer.from(e.identitySig)))throw new Error("Static key doesn't match to peer that signed payload!");return await ZP.default.createFromPubKey(i)}Jt.verifySignedPayload=GHe;function WHe(t,e){let i=new MHe.HKDF(LHe.SHA256,e,t).expand(96),n=hs.Buffer.from(i.buffer,i.byteOffset,i.length),s=n.slice(0,32),o=n.slice(32,64),a=n.slice(64,96);return[s,o,a]}Jt.getHkdf=WHe;function YHe(t){return!(!hs.Buffer.isBuffer(t)||t.length!==32)}Jt.isValidPublicKey=YHe});var zhe=v(u7=>{l();"use strict";Object.defineProperty(u7,"__esModule",{value:!0});var Dn=zm(),eC=Mc(),XHe=20;function QHe(t,e,r){for(var i=1634760805,n=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],h=r[23]<<24|r[22]<<16|r[21]<<8|r[20],p=r[27]<<24|r[26]<<16|r[25]<<8|r[24],y=r[31]<<24|r[30]<<16|r[29]<<8|r[28],m=e[3]<<24|e[2]<<16|e[1]<<8|e[0],w=e[7]<<24|e[6]<<16|e[5]<<8|e[4],b=e[11]<<24|e[10]<<16|e[9]<<8|e[8],S=e[15]<<24|e[14]<<16|e[13]<<8|e[12],I=i,j=n,B=s,C=o,z=a,W=c,X=u,P=f,g=d,_=h,x=p,O=y,L=m,Y=w,V=b,q=S,E=0;E<XHe;E+=2)I=I+z|0,L^=I,L=L>>>32-16|L<<16,g=g+L|0,z^=g,z=z>>>32-12|z<<12,j=j+W|0,Y^=j,Y=Y>>>32-16|Y<<16,_=_+Y|0,W^=_,W=W>>>32-12|W<<12,B=B+X|0,V^=B,V=V>>>32-16|V<<16,x=x+V|0,X^=x,X=X>>>32-12|X<<12,C=C+P|0,q^=C,q=q>>>32-16|q<<16,O=O+q|0,P^=O,P=P>>>32-12|P<<12,B=B+X|0,V^=B,V=V>>>32-8|V<<8,x=x+V|0,X^=x,X=X>>>32-7|X<<7,C=C+P|0,q^=C,q=q>>>32-8|q<<8,O=O+q|0,P^=O,P=P>>>32-7|P<<7,j=j+W|0,Y^=j,Y=Y>>>32-8|Y<<8,_=_+Y|0,W^=_,W=W>>>32-7|W<<7,I=I+z|0,L^=I,L=L>>>32-8|L<<8,g=g+L|0,z^=g,z=z>>>32-7|z<<7,I=I+W|0,q^=I,q=q>>>32-16|q<<16,x=x+q|0,W^=x,W=W>>>32-12|W<<12,j=j+X|0,L^=j,L=L>>>32-16|L<<16,O=O+L|0,X^=O,X=X>>>32-12|X<<12,B=B+P|0,Y^=B,Y=Y>>>32-16|Y<<16,g=g+Y|0,P^=g,P=P>>>32-12|P<<12,C=C+z|0,V^=C,V=V>>>32-16|V<<16,_=_+V|0,z^=_,z=z>>>32-12|z<<12,B=B+P|0,Y^=B,Y=Y>>>32-8|Y<<8,g=g+Y|0,P^=g,P=P>>>32-7|P<<7,C=C+z|0,V^=C,V=V>>>32-8|V<<8,_=_+V|0,z^=_,z=z>>>32-7|z<<7,j=j+X|0,L^=j,L=L>>>32-8|L<<8,O=O+L|0,X^=O,X=X>>>32-7|X<<7,I=I+W|0,q^=I,q=q>>>32-8|q<<8,x=x+q|0,W^=x,W=W>>>32-7|W<<7;Dn.writeUint32LE(I+i|0,t,0),Dn.writeUint32LE(j+n|0,t,4),Dn.writeUint32LE(B+s|0,t,8),Dn.writeUint32LE(C+o|0,t,12),Dn.writeUint32LE(z+a|0,t,16),Dn.writeUint32LE(W+c|0,t,20),Dn.writeUint32LE(X+u|0,t,24),Dn.writeUint32LE(P+f|0,t,28),Dn.writeUint32LE(g+d|0,t,32),Dn.writeUint32LE(_+h|0,t,36),Dn.writeUint32LE(x+p|0,t,40),Dn.writeUint32LE(O+y|0,t,44),Dn.writeUint32LE(L+m|0,t,48),Dn.writeUint32LE(Y+w|0,t,52),Dn.writeUint32LE(V+b|0,t,56),Dn.writeUint32LE(q+S|0,t,60)}function Vhe(t,e,r,i,n){if(n===void 0&&(n=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=n}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){QHe(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)i[u]=r[u]^a[u-c];JHe(s,0,o)}return eC.wipe(a),n===0&&eC.wipe(s),i}u7.streamXOR=Vhe;function ZHe(t,e,r,i){return i===void 0&&(i=0),eC.wipe(r),Vhe(t,e,r,r,i)}u7.stream=ZHe;function JHe(t,e,r){for(var i=1;r--;)i=i+(t[e]&255)|0,t[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}});var $he=v(Fu=>{l();"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var e$e=s7(),f7=Mc();Fu.DIGEST_LENGTH=16;var Hhe=function(){function t(e){this.digestLength=Fu.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var i=e[2]|e[3]<<8;this._r[1]=(r>>>13|i<<3)&8191;var n=e[4]|e[5]<<8;this._r[2]=(i>>>10|n<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(n>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var u=e[14]|e[15]<<8;this._r[8]=(c>>>8|u<<8)&8191,this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,i){for(var n=this._fin?0:1<<11,s=this._h[0],o=this._h[1],a=this._h[2],c=this._h[3],u=this._h[4],f=this._h[5],d=this._h[6],h=this._h[7],p=this._h[8],y=this._h[9],m=this._r[0],w=this._r[1],b=this._r[2],S=this._r[3],I=this._r[4],j=this._r[5],B=this._r[6],C=this._r[7],z=this._r[8],W=this._r[9];i>=16;){var X=e[r+0]|e[r+1]<<8;s+=X&8191;var P=e[r+2]|e[r+3]<<8;o+=(X>>>13|P<<3)&8191;var g=e[r+4]|e[r+5]<<8;a+=(P>>>10|g<<6)&8191;var _=e[r+6]|e[r+7]<<8;c+=(g>>>7|_<<9)&8191;var x=e[r+8]|e[r+9]<<8;u+=(_>>>4|x<<12)&8191,f+=x>>>1&8191;var O=e[r+10]|e[r+11]<<8;d+=(x>>>14|O<<2)&8191;var L=e[r+12]|e[r+13]<<8;h+=(O>>>11|L<<5)&8191;var Y=e[r+14]|e[r+15]<<8;p+=(L>>>8|Y<<8)&8191,y+=Y>>>5|n;var V=0,q=V;q+=s*m,q+=o*(5*W),q+=a*(5*z),q+=c*(5*C),q+=u*(5*B),V=q>>>13,q&=8191,q+=f*(5*j),q+=d*(5*I),q+=h*(5*S),q+=p*(5*b),q+=y*(5*w),V+=q>>>13,q&=8191;var E=V;E+=s*w,E+=o*m,E+=a*(5*W),E+=c*(5*z),E+=u*(5*C),V=E>>>13,E&=8191,E+=f*(5*B),E+=d*(5*j),E+=h*(5*I),E+=p*(5*S),E+=y*(5*b),V+=E>>>13,E&=8191;var U=V;U+=s*b,U+=o*w,U+=a*m,U+=c*(5*W),U+=u*(5*z),V=U>>>13,U&=8191,U+=f*(5*C),U+=d*(5*B),U+=h*(5*j),U+=p*(5*I),U+=y*(5*S),V+=U>>>13,U&=8191;var de=V;de+=s*S,de+=o*b,de+=a*w,de+=c*m,de+=u*(5*W),V=de>>>13,de&=8191,de+=f*(5*z),de+=d*(5*C),de+=h*(5*B),de+=p*(5*j),de+=y*(5*I),V+=de>>>13,de&=8191;var Q=V;Q+=s*I,Q+=o*S,Q+=a*b,Q+=c*w,Q+=u*m,V=Q>>>13,Q&=8191,Q+=f*(5*W),Q+=d*(5*z),Q+=h*(5*C),Q+=p*(5*B),Q+=y*(5*j),V+=Q>>>13,Q&=8191;var ue=V;ue+=s*j,ue+=o*I,ue+=a*S,ue+=c*b,ue+=u*w,V=ue>>>13,ue&=8191,ue+=f*m,ue+=d*(5*W),ue+=h*(5*z),ue+=p*(5*C),ue+=y*(5*B),V+=ue>>>13,ue&=8191;var le=V;le+=s*B,le+=o*j,le+=a*I,le+=c*S,le+=u*b,V=le>>>13,le&=8191,le+=f*w,le+=d*m,le+=h*(5*W),le+=p*(5*z),le+=y*(5*C),V+=le>>>13,le&=8191;var me=V;me+=s*C,me+=o*B,me+=a*j,me+=c*I,me+=u*S,V=me>>>13,me&=8191,me+=f*b,me+=d*w,me+=h*m,me+=p*(5*W),me+=y*(5*z),V+=me>>>13,me&=8191;var be=V;be+=s*z,be+=o*C,be+=a*B,be+=c*j,be+=u*I,V=be>>>13,be&=8191,be+=f*S,be+=d*b,be+=h*w,be+=p*m,be+=y*(5*W),V+=be>>>13,be&=8191;var xe=V;xe+=s*W,xe+=o*z,xe+=a*C,xe+=c*B,xe+=u*j,V=xe>>>13,xe&=8191,xe+=f*I,xe+=d*S,xe+=h*b,xe+=p*w,xe+=y*m,V+=xe>>>13,xe&=8191,V=(V<<2)+V|0,V=V+q|0,q=V&8191,V=V>>>13,E+=V,s=q,o=E,a=U,c=de,u=Q,f=ue,d=le,h=me,p=be,y=xe,r+=16,i-=16}this._h[0]=s,this._h[1]=o,this._h[2]=a,this._h[3]=c,this._h[4]=u,this._h[5]=f,this._h[6]=d,this._h[7]=h,this._h[8]=p,this._h[9]=y},t.prototype.finish=function(e,r){r===void 0&&(r=0);var i=new Uint16Array(10),n,s,o,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=n,n=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=n*5,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,i[0]=this._h[0]+5,n=i[0]>>>13,i[0]&=8191,a=1;a<10;a++)i[a]=this._h[a]+n,n=i[a]>>>13,i[a]&=8191;for(i[9]-=1<<13,s=(n^1)-1,a=0;a<10;a++)i[a]&=s;for(s=~s,a=0;a<10;a++)this._h[a]=this._h[a]&s|i[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,a=1;a<8;a++)o=(this._h[a]+this._pad[a]|0)+(o>>>16)|0,this._h[a]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,i=e.length,n;if(this._leftover){n=16-this._leftover,n>i&&(n=i);for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];if(i-=n,r+=n,this._leftover+=n,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(n=i-i%16,this._blocks(e,r,n),r+=n,i-=n),i){for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=i}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return f7.wipe(this._buffer),f7.wipe(this._r),f7.wipe(this._h),f7.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();Fu.Poly1305=Hhe;function t$e(t,e){var r=new Hhe(t);r.update(e);var i=r.digest();return r.clean(),i}Fu.oneTimeAuth=t$e;function r$e(t,e){return t.length!==Fu.DIGEST_LENGTH||e.length!==Fu.DIGEST_LENGTH?!1:e$e.equal(t,e)}Fu.equal=r$e});var Yhe=v(Ku=>{l();"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});var l7=zhe(),i$e=$he(),Xm=Mc(),Ghe=zm(),n$e=s7();Ku.KEY_LENGTH=32;Ku.NONCE_LENGTH=12;Ku.TAG_LENGTH=16;var Whe=new Uint8Array(16),s$e=function(){function t(e){if(this.nonceLength=Ku.NONCE_LENGTH,this.tagLength=Ku.TAG_LENGTH,e.length!==Ku.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);l7.stream(this._key,s,o,4);var a=r.length+this.tagLength,c;if(n){if(n.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=n}else c=new Uint8Array(a);return l7.streamXOR(this._key,s,r,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),o,c.subarray(0,c.length-this.tagLength),i),Xm.wipe(s),c},t.prototype.open=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);l7.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,r.subarray(0,r.length-this.tagLength),i),!n$e.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var c=r.length-this.tagLength,u;if(n){if(n.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=n}else u=new Uint8Array(c);return l7.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),u,4),Xm.wipe(s),u},t.prototype.clean=function(){return Xm.wipe(this._key),this},t.prototype._authenticate=function(e,r,i,n){var s=new i$e.Poly1305(r);n&&(s.update(n),n.length%16>0&&s.update(Whe.subarray(n.length%16))),s.update(i),i.length%16>0&&s.update(Whe.subarray(i.length%16));var o=new Uint8Array(8);n&&Ghe.writeUint64LE(n.length,o),s.update(o),Ghe.writeUint64LE(i.length,o),s.update(o);for(var a=s.digest(),c=0;c<a.length;c++)e[c]=a[c];s.clean(),Xm.wipe(a),Xm.wipe(o)},t}();Ku.ChaCha20Poly1305=s$e});var d7=v(Vu=>{l();"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.DUMP_SESSION_KEYS=Vu.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=Vu.NOISE_MSG_MAX_LENGTH_BYTES=void 0;Vu.NOISE_MSG_MAX_LENGTH_BYTES=65535;Vu.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=Vu.NOISE_MSG_MAX_LENGTH_BYTES-16;Vu.DUMP_SESSION_KEYS=process.env.DUMP_SESSION_KEYS});var U1=v(pn=>{l();"use strict";var o$e=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pn,"__esModule",{value:!0});pn.logCipherState=pn.logRemoteEphemeralKey=pn.logRemoteStaticKey=pn.logLocalEphemeralKeys=pn.logLocalStaticKeys=pn.logger=void 0;var a$e=o$e(Ee()),c$e=d7();pn.logger=a$e.default("libp2p:noise");var To;c$e.DUMP_SESSION_KEYS?To=pn.logger:To=()=>{};function u$e(t){To(`LOCAL_STATIC_PUBLIC_KEY ${t.publicKey.toString("hex")}`),To(`LOCAL_STATIC_PRIVATE_KEY ${t.privateKey.toString("hex")}`)}pn.logLocalStaticKeys=u$e;function f$e(t){t?(To(`LOCAL_PUBLIC_EPHEMERAL_KEY ${t.publicKey.toString("hex")}`),To(`LOCAL_PRIVATE_EPHEMERAL_KEY ${t.privateKey.toString("hex")}`)):To("Missing local ephemeral keys.")}pn.logLocalEphemeralKeys=f$e;function l$e(t){To(`REMOTE_STATIC_PUBLIC_KEY ${t.toString("hex")}`)}pn.logRemoteStaticKey=l$e;function d$e(t){To(`REMOTE_EPHEMERAL_PUBLIC_KEY ${t.toString("hex")}`)}pn.logRemoteEphemeralKey=d$e;function h$e(t){t.cs1&&t.cs2?(To(`CIPHER_STATE_1 ${t.cs1.n} ${t.cs1.k.toString("hex")}`),To(`CIPHER_STATE_2 ${t.cs2.n} ${t.cs2.k.toString("hex")}`)):To("Missing cipher state.")}pn.logCipherState=h$e});var tC=v(ks=>{l();"use strict";var p$e=ks&&ks.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),y$e=ks&&ks.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xhe=ks&&ks.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&p$e(e,t,r);return y$e(e,t),e};Object.defineProperty(ks,"__esModule",{value:!0});ks.AbstractHandshake=ks.MIN_NONCE=void 0;var yn=Yt(),g$e=Xhe(t7()),m$e=Xhe(QP()),Qhe=Yhe(),Zhe=Al(),b$e=U1();ks.MIN_NONCE=0;var Jhe=class{encryptWithAd(e,r,i){let n=this.encrypt(e.k,e.n,r,i);return this.setNonce(e,this.incrementNonce(e.n)),n}decryptWithAd(e,r,i){let{plaintext:n,valid:s}=this.decrypt(e.k,e.n,r,i);return this.setNonce(e,this.incrementNonce(e.n)),{plaintext:n,valid:s}}hasKey(e){return!this.isEmptyKey(e.k)}setNonce(e,r){e.n=r}createEmptyKey(){return yn.Buffer.alloc(32)}isEmptyKey(e){return this.createEmptyKey().equals(e)}incrementNonce(e){return e+1}nonceToBytes(e){let r=yn.Buffer.alloc(12);return r.writeUInt32LE(e,4),r}encrypt(e,r,i,n){let s=this.nonceToBytes(r),a=new Qhe.ChaCha20Poly1305(e).seal(s,n,i);return yn.Buffer.from(a.buffer,a.byteOffset,a.length)}encryptAndHash(e,r){let i;return this.hasKey(e.cs)?i=this.encryptWithAd(e.cs,e.h,r):i=r,this.mixHash(e,i),i}decrypt(e,r,i,n){let s=this.nonceToBytes(r),a=new Qhe.ChaCha20Poly1305(e).open(s,n,i);return a?{plaintext:yn.Buffer.from(a.buffer,a.byteOffset,a.length),valid:!0}:{plaintext:yn.Buffer.from(""),valid:!1}}decryptAndHash(e,r){let i,n=!0;return this.hasKey(e.cs)?{plaintext:i,valid:n}=this.decryptWithAd(e.cs,e.h,r):i=r,this.mixHash(e,r),{plaintext:i,valid:n}}dh(e,r){try{let i=g$e.sharedKey(e,r),n=yn.Buffer.from(i.buffer,i.byteOffset,i.length),s=yn.Buffer.alloc(32);return n.copy(s),s}catch(i){return b$e.logger(i.message),yn.Buffer.alloc(32)}}mixHash(e,r){e.h=this.getHash(e.h,r)}getHash(e,r){let i=m$e.hash(yn.Buffer.from([...e,...r]));return yn.Buffer.from(i.buffer,i.byteOffset,i.length)}mixKey(e,r){let[i,n]=Zhe.getHkdf(e.ck,r);e.cs=this.initializeKey(n),e.ck=i}initializeKey(e){let r=ks.MIN_NONCE;return{k:e,n:r}}initializeSymmetric(e){let r=yn.Buffer.from(e,"utf-8"),i=this.hashProtocolName(r),n=i,s=this.createEmptyKey();return{cs:this.initializeKey(s),ck:n,h:i}}hashProtocolName(e){if(e.length<=32){let r=yn.Buffer.alloc(32);return e.copy(r),r}else return this.getHash(e,yn.Buffer.alloc(0))}split(e){let[r,i]=Zhe.getHkdf(e.ck,yn.Buffer.alloc(0)),n=this.initializeKey(r),s=this.initializeKey(i);return{cs1:n,cs2:s}}writeMessageRegular(e,r){let i=this.encryptWithAd(e,yn.Buffer.alloc(0),r),n=this.createEmptyKey(),s=yn.Buffer.alloc(0);return{ne:n,ns:s,ciphertext:i}}readMessageRegular(e,r){return this.decryptWithAd(e,yn.Buffer.alloc(0),r.ciphertext)}};ks.AbstractHandshake=Jhe});var t0e=v(h7=>{l();"use strict";Object.defineProperty(h7,"__esModule",{value:!0});h7.XX=void 0;var Eh=Yt(),F1=Al(),v$e=tC(),e0e=class extends v$e.AbstractHandshake{initializeInitiator(e,r,i,n){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=Eh.Buffer.alloc(32);return{ss:o,s:r,rs:i,psk:n,re:a}}initializeResponder(e,r,i,n){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=Eh.Buffer.alloc(32);return{ss:o,s:r,rs:i,psk:n,re:a}}writeMessageA(e,r,i){let n=Eh.Buffer.alloc(0);i!==void 0?e.e=i:e.e=F1.generateKeypair();let s=e.e.publicKey;this.mixHash(e.ss,s);let o=this.encryptAndHash(e.ss,r);return{ne:s,ns:n,ciphertext:o}}writeMessageB(e,r){e.e=F1.generateKeypair();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let n=Eh.Buffer.from(e.s.publicKey),s=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let o=this.encryptAndHash(e.ss,r);return{ne:i,ns:s,ciphertext:o}}writeMessageC(e,r){let i=Eh.Buffer.from(e.s.publicKey),n=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let s=this.encryptAndHash(e.ss,r),a={ne:this.createEmptyKey(),ns:n,ciphertext:s},{cs1:c,cs2:u}=this.split(e.ss);return{h:e.ss.h,messageBuffer:a,cs1:c,cs2:u}}readMessageA(e,r){return F1.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,r.ciphertext)}readMessageB(e,r){if(F1.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);n&&i.length===32&&F1.isValidPublicKey(i)&&(e.rs=i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:n&&o}}readMessageC(e,r){let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);if(n&&i.length===32&&F1.isValidPublicKey(i)&&(e.rs=i),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:a,cs2:c}=this.split(e.ss);return{h:e.ss.h,plaintext:s,valid:n&&o,cs1:a,cs2:c}}initSession(e,r,i){let n=this.createEmptyKey(),s=Eh.Buffer.alloc(32),o;return e?o=this.initializeInitiator(r,i,s,n):o=this.initializeResponder(r,i,s,n),{hs:o,i:e,mc:0}}sendMessage(e,r,i){let n;if(e.mc===0)n=this.writeMessageA(e.hs,r,i);else if(e.mc===1)n=this.writeMessageB(e.hs,r);else if(e.mc===2){let{h:s,messageBuffer:o,cs1:a,cs2:c}=this.writeMessageC(e.hs,r);n=o,e.h=s,e.cs1=a,e.cs2=c}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,n}recvMessage(e,r){let i=Eh.Buffer.alloc(0),n=!1;if(e.mc===0)({plaintext:i,valid:n}=this.readMessageA(e.hs,r));else if(e.mc===1)({plaintext:i,valid:n}=this.readMessageB(e.hs,r));else if(e.mc===2){let{h:s,plaintext:o,valid:a,cs1:c,cs2:u}=this.readMessageC(e.hs,r);i=o,n=a,e.h=s,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:i,valid:n}}};h7.XX=e0e});var Qm=v(Ii=>{l();"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.decode2=Ii.decode1=Ii.decode0=Ii.encode2=Ii.encode1=Ii.encode0=Ii.uint16BEDecode=Ii.uint16BEEncode=void 0;var K1=Yt(),w$e=(t,e,r)=>(e=e||K1.Buffer.allocUnsafe(2),e.writeUInt16BE(t,r),e);Ii.uint16BEEncode=w$e;Ii.uint16BEEncode.bytes=2;var _$e=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t.readUInt16BE(0)};Ii.uint16BEDecode=_$e;Ii.uint16BEDecode.bytes=2;function E$e(t){return K1.Buffer.concat([t.ne,t.ciphertext])}Ii.encode0=E$e;function S$e(t){return K1.Buffer.concat([t.ne,t.ns,t.ciphertext])}Ii.encode1=S$e;function x$e(t){return K1.Buffer.concat([t.ns,t.ciphertext])}Ii.encode2=x$e;function A$e(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.slice(0,32),ciphertext:t.slice(32,t.length),ns:K1.Buffer.alloc(0)}}Ii.decode0=A$e;function I$e(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.slice(0,32),ns:t.slice(32,80),ciphertext:t.slice(80,t.length)}}Ii.decode1=I$e;function T$e(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:K1.Buffer.alloc(0),ns:t.slice(0,48),ciphertext:t.slice(48,t.length)}}Ii.decode2=T$e});var rC=v(p7=>{l();"use strict";Object.defineProperty(p7,"__esModule",{value:!0});p7.XXHandshake=void 0;var Zm=Yt(),R$e=t0e(),V1=Al(),yi=U1(),z1=Qm(),r0e=class{constructor(e,r,i,n,s,o,a){this.isInitiator=e,this.payload=r,this.prologue=i,this.staticKeypair=n,this.connection=s,o&&(this.remotePeer=o),this.xx=a??new R$e.XX,this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=Zm.Buffer.alloc(0)}async propose(){if(yi.logLocalStaticKeys(this.session.hs.s),this.isInitiator){yi.logger("Stage 0 - Initiator starting to send first message.");let e=this.xx.sendMessage(this.session,Zm.Buffer.alloc(0));this.connection.writeLP(z1.encode0(e)),yi.logger("Stage 0 - Initiator finished sending first message."),yi.logLocalEphemeralKeys(this.session.hs.e)}else{yi.logger("Stage 0 - Responder waiting to receive first message...");let e=z1.decode0((await this.connection.readLP()).slice()),{valid:r}=this.xx.recvMessage(this.session,e);if(!r)throw new Error("xx handshake stage 0 validation fail");yi.logger("Stage 0 - Responder received first message."),yi.logRemoteEphemeralKey(this.session.hs.re)}}async exchange(){if(this.isInitiator){yi.logger("Stage 1 - Initiator waiting to receive first message from responder...");let e=z1.decode1((await this.connection.readLP()).slice()),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx handshake stage 1 validation fail");yi.logger("Stage 1 - Initiator received the message."),yi.logRemoteEphemeralKey(this.session.hs.re),yi.logRemoteStaticKey(this.session.hs.rs),yi.logger("Initiator going to check remote's signature...");try{let n=await V1.decodePayload(r);this.remotePeer=this.remotePeer||await V1.getPeerIdFromPayload(n),this.remotePeer=await V1.verifySignedPayload(e.ns,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let s=n;throw new Error(`Error occurred while verifying signed payload: ${s.message}`)}yi.logger("All good with the signature!")}else{yi.logger("Stage 1 - Responder sending out first message with signed payload and static key.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(z1.encode1(e)),yi.logger("Stage 1 - Responder sent the second handshake message with signed payload."),yi.logLocalEphemeralKeys(this.session.hs.e)}}async finish(){if(this.isInitiator){yi.logger("Stage 2 - Initiator sending third handshake message.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(z1.encode2(e)),yi.logger("Stage 2 - Initiator sent message with signed payload.")}else{yi.logger("Stage 2 - Responder waiting for third handshake message...");let e=z1.decode2((await this.connection.readLP()).slice()),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx handshake stage 2 validation fail");yi.logger("Stage 2 - Responder received the message, finished handshake.");try{let n=await V1.decodePayload(r);this.remotePeer=this.remotePeer||await V1.getPeerIdFromPayload(n),await V1.verifySignedPayload(this.session.hs.rs,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let s=n;throw new Error(`Error occurred while verifying signed payload: ${s.message}`)}}yi.logCipherState(this.session)}encrypt(e,r){let i=this.getCS(r);return this.xx.encryptWithAd(i,Zm.Buffer.alloc(0),e)}decrypt(e,r){let i=this.getCS(r,!1);return this.xx.decryptWithAd(i,Zm.Buffer.alloc(0),e)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=Zm.Buffer.from(e.buffer,e.byteOffset,e.length))}};p7.XXHandshake=r0e});var n0e=v(g7=>{l();"use strict";Object.defineProperty(g7,"__esModule",{value:!0});g7.IK=void 0;var y7=Yt(),Jm=Al(),P$e=tC(),i0e=class extends P$e.AbstractHandshake{initSession(e,r,i,n){let s=this.createEmptyKey(),o;return e?o=this.initializeInitiator(r,i,n,s):o=this.initializeResponder(r,i,n,s),{hs:o,i:e,mc:0}}sendMessage(e,r){let i;if(e.mc===0)i=this.writeMessageA(e.hs,r);else if(e.mc===1){let{messageBuffer:n,h:s,cs1:o,cs2:a}=this.writeMessageB(e.hs,r);i=n,e.h=s,e.cs1=o,e.cs2=a}else if(e.mc>1)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,i}recvMessage(e,r){let i=y7.Buffer.alloc(0),n=!1;if(e.mc===0&&({plaintext:i,valid:n}=this.readMessageA(e.hs,r)),e.mc===1){let{plaintext:s,valid:o,h:a,cs1:c,cs2:u}=this.readMessageB(e.hs,r);i=s,n=o,e.h=a,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:i,valid:n}}writeMessageA(e,r){e.e=Jm.generateKeypair();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let n=y7.Buffer.from(e.s.publicKey),s=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let o=this.encryptAndHash(e.ss,r);return{ne:i,ns:s,ciphertext:o}}writeMessageB(e,r){e.e=Jm.generateKeypair();let i=e.e.publicKey;this.mixHash(e.ss,i),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let n=this.encryptAndHash(e.ss,r),s=this.createEmptyKey(),o={ne:i,ns:s,ciphertext:n},{cs1:a,cs2:c}=this.split(e.ss);return{messageBuffer:o,cs1:a,cs2:c,h:e.ss.h}}readMessageA(e,r){Jm.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ns);n&&i.length===32&&Jm.isValidPublicKey(i)&&(e.rs=i),this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:n&&o}}readMessageB(e,r){if(Jm.isValidPublicKey(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let{plaintext:i,valid:n}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:s,cs2:o}=this.split(e.ss);return{h:e.ss.h,valid:n,plaintext:i,cs1:s,cs2:o}}initializeInitiator(e,r,i,n){let s="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e),this.mixHash(o,i);let a=y7.Buffer.alloc(32);return{ss:o,s:r,rs:i,re:a,psk:n}}initializeResponder(e,r,i,n){let s="Noise_IK_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e),this.mixHash(o,r.publicKey);let a=y7.Buffer.alloc(32);return{ss:o,s:r,rs:i,re:a,psk:n}}};g7.IK=i0e});var o0e=v(m7=>{l();"use strict";Object.defineProperty(m7,"__esModule",{value:!0});m7.FailedIKError=void 0;var s0e=class extends Error{constructor(e,r){super(r);this.initialMsg=e,this.name="FailedIKhandshake"}};m7.FailedIKError=s0e});var u0e=v(v7=>{l();"use strict";Object.defineProperty(v7,"__esModule",{value:!0});v7.IKHandshake=void 0;var C$e=n0e(),H1=Yt(),b7=Qm(),$1=Al(),a0e=o0e(),Mi=U1(),c0e=class{constructor(e,r,i,n,s,o,a,c){this.isInitiator=e,this.payload=H1.Buffer.from(r),this.prologue=i,this.staticKeypair=n,this.connection=s,a&&(this.remotePeer=a),this.ik=c??new C$e.IK,this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,o),this.remoteEarlyData=H1.Buffer.alloc(0)}async stage0(){if(Mi.logLocalStaticKeys(this.session.hs.s),Mi.logRemoteStaticKey(this.session.hs.rs),this.isInitiator){Mi.logger("IK Stage 0 - Initiator sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(b7.encode1(e)),Mi.logger("IK Stage 0 - Initiator sent message."),Mi.logLocalEphemeralKeys(this.session.hs.e)}else{Mi.logger("IK Stage 0 - Responder receiving message...");let e=await this.connection.readLP();try{let r=b7.decode1(e.slice()),{plaintext:i,valid:n}=this.ik.recvMessage(this.session,r);if(!n)throw new Error("ik handshake stage 0 decryption validation fail");Mi.logger("IK Stage 0 - Responder got message, going to verify payload.");let s=await $1.decodePayload(i);this.remotePeer=this.remotePeer||await $1.getPeerIdFromPayload(s),await $1.verifySignedPayload(this.session.hs.rs,s,this.remotePeer),this.setRemoteEarlyData(s.data),Mi.logger("IK Stage 0 - Responder successfully verified payload!"),Mi.logRemoteEphemeralKey(this.session.hs.re)}catch(r){let i=r;throw Mi.logger("Responder breaking up with IK handshake in stage 0."),new a0e.FailedIKError(e,`Error occurred while verifying initiator's signed payload: ${i.message}`)}}}async stage1(){if(this.isInitiator){Mi.logger("IK Stage 1 - Initiator receiving message...");let e=(await this.connection.readLP()).slice(),r=b7.decode0(H1.Buffer.from(e)),{plaintext:i,valid:n}=this.ik.recvMessage(this.session,r);Mi.logger("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!n)throw new Error("ik stage 1 decryption validation fail");let s=await $1.decodePayload(i);this.remotePeer=this.remotePeer||await $1.getPeerIdFromPayload(s),await $1.verifySignedPayload(r.ns.slice(0,32),s,this.remotePeer),this.setRemoteEarlyData(s.data),Mi.logger("IK Stage 1 - Initiator successfully verified payload!"),Mi.logRemoteEphemeralKey(this.session.hs.re)}catch(s){let o=s;throw Mi.logger("Initiator breaking up with IK handshake in stage 1."),new a0e.FailedIKError(e,`Error occurred while verifying responder's signed payload: ${o.message}`)}}else{Mi.logger("IK Stage 1 - Responder sending message...");let e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(b7.encode0(e)),Mi.logger("IK Stage 1 - Responder sent message..."),Mi.logLocalEphemeralKeys(this.session.hs.e)}Mi.logCipherState(this.session)}decrypt(e,r){let i=this.getCS(r,!1);return this.ik.decryptWithAd(i,H1.Buffer.alloc(0),e)}encrypt(e,r){let i=this.getCS(r);return this.ik.encryptWithAd(i,H1.Buffer.alloc(0),e)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=H1.Buffer.from(e.buffer,e.byteOffset,e.length))}};v7.IKHandshake=c0e});var d0e=v(w7=>{l();"use strict";Object.defineProperty(w7,"__esModule",{value:!0});w7.XXFallbackHandshake=void 0;var iC=Yt(),O$e=rC(),nC=Al(),Ro=U1(),f0e=Qm(),l0e=class extends O$e.XXHandshake{constructor(e,r,i,n,s,o,a,c,u){super(e,r,i,n,s,a,u);c&&(this.ephemeralKeys=c),this.initialMsg=o}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,iC.Buffer.alloc(0),this.ephemeralKeys),Ro.logger("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),Ro.logLocalEphemeralKeys(this.session.hs.e);else{Ro.logger("XX Fallback Stage 0 - Responder decoding initial msg from IK.");let e=f0e.decode0(this.initialMsg),{valid:r}=this.xx.recvMessage(this.session,{ne:e.ne,ns:iC.Buffer.alloc(0),ciphertext:iC.Buffer.alloc(0)});if(!r)throw new Error("xx fallback stage 0 decryption validation fail");Ro.logger("XX Fallback Stage 0 - Responder used received message from IK."),Ro.logRemoteEphemeralKey(this.session.hs.re)}}async exchange(){if(this.isInitiator){let e=f0e.decode1(this.initialMsg),{plaintext:r,valid:i}=this.xx.recvMessage(this.session,e);if(!i)throw new Error("xx fallback stage 1 decryption validation fail");Ro.logger("XX Fallback Stage 1 - Initiator used received message from IK."),Ro.logRemoteEphemeralKey(this.session.hs.re),Ro.logRemoteStaticKey(this.session.hs.rs),Ro.logger("Initiator going to check remote's signature...");try{let n=await nC.decodePayload(r);this.remotePeer=this.remotePeer||await nC.getPeerIdFromPayload(n),await nC.verifySignedPayload(this.session.hs.rs,n,this.remotePeer),this.setRemoteEarlyData(n.data)}catch(n){let s=n;throw new Error(`Error occurred while verifying signed payload from responder: ${s.message}`)}Ro.logger("All good with the signature!")}else Ro.logger("XX Fallback Stage 1 - Responder start"),await super.exchange(),Ro.logger("XX Fallback Stage 1 - Responder end")}};w7.XXFallbackHandshake=l0e});var p0e=v(G1=>{l();"use strict";Object.defineProperty(G1,"__esModule",{value:!0});G1.decryptStream=G1.encryptStream=void 0;var h0e=Yt(),_7=d7();function k$e(t){return async function*(e){for await(let r of e){let i=h0e.Buffer.from(r.buffer,r.byteOffset,r.length);for(let n=0;n<i.length;n+=_7.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let s=n+_7.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;s>i.length&&(s=i.length),yield t.encrypt(i.slice(n,s),t.session)}}}}G1.encryptStream=k$e;function D$e(t){return async function*(e){for await(let r of e){let i=h0e.Buffer.from(r.buffer,r.byteOffset,r.length);for(let n=0;n<i.length;n+=_7.NOISE_MSG_MAX_LENGTH_BYTES){let s=n+_7.NOISE_MSG_MAX_LENGTH_BYTES;s>i.length&&(s=i.length);let o=i.slice(n,s),{plaintext:a,valid:c}=await t.decrypt(o,t.session);if(!c)throw new Error("Failed to validate decrypted chunk");yield a}}}}G1.decryptStream=D$e});var g0e=v(E7=>{l();"use strict";Object.defineProperty(E7,"__esModule",{value:!0});E7.KeyCache=void 0;var y0e=class{constructor(){this.storage=new Map}store(e,r){this.storage.set(e.id,r)}load(e){var r;return e&&(r=this.storage.get(e.id))!==null&&r!==void 0?r:null}resetStorage(){this.storage.clear()}},B$e=new y0e;E7.KeyCache=B$e});var oC=v(Po=>{l();"use strict";var N$e=Po&&Po.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),M$e=Po&&Po.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),L$e=Po&&Po.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&N$e(e,t,r);return M$e(e,t),e},S7=Po&&Po.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Po,"__esModule",{value:!0});Po.Noise=void 0;var q$e=L$e(t7()),e3=Yt(),m0e=S7(Ahe()),j$e=S7(Che()),b0e=S7(n7()),U$e=S7(Nr()),v0e=ga(),F$e=rC(),K$e=u0e(),V$e=d0e(),w0e=Al(),W1=Qm(),_0e=p0e(),sC=g0e(),z$e=U1(),E0e=d7(),S0e=class{constructor(e,r){if(this.protocol="/noise",this.prologue=e3.Buffer.alloc(0),this.earlyData=r??e3.Buffer.alloc(0),this.useNoisePipes=!1,e){let i=q$e.generateKeyPairFromSeed(e);this.staticKeys={privateKey:e3.Buffer.from(i.secretKey.buffer,i.secretKey.byteOffset,i.secretKey.length),publicKey:e3.Buffer.from(i.publicKey.buffer,i.publicKey.byteOffset,i.publicKey.length)}}else this.staticKeys=w0e.generateKeypair()}async secureOutbound(e,r,i){let n=m0e.default(r,{lengthEncoder:W1.uint16BEEncode,lengthDecoder:W1.uint16BEDecode,maxDataLength:E0e.NOISE_MSG_MAX_LENGTH_BYTES}),s=await this.performHandshake({connection:n,isInitiator:!0,localPeer:e,remotePeer:i});return{conn:await this.createSecureConnection(n,s),remoteEarlyData:s.remoteEarlyData,remotePeer:s.remotePeer}}async secureInbound(e,r,i){let n=m0e.default(r,{lengthEncoder:W1.uint16BEEncode,lengthDecoder:W1.uint16BEDecode,maxDataLength:E0e.NOISE_MSG_MAX_LENGTH_BYTES}),s=await this.performHandshake({connection:n,isInitiator:!1,localPeer:e,remotePeer:i});return{conn:await this.createSecureConnection(n,s),remoteEarlyData:s.remoteEarlyData,remotePeer:s.remotePeer}}async performHandshake(e){var r;let i=await w0e.getPayload(e.localPeer,this.staticKeys.publicKey,this.earlyData),n=this.useNoisePipes;if(e.isInitiator&&sC.KeyCache.load(e.remotePeer)===null&&(n=!1),n){let{remotePeer:s,connection:o,isInitiator:a}=e,c=new K$e.IKHandshake(a,i,this.prologue,this.staticKeys,o,(r=sC.KeyCache.load(e.remotePeer))!==null&&r!==void 0?r:e3.Buffer.alloc(32),s);try{return await this.performIKHandshake(c)}catch(u){let f;return e.isInitiator&&(f=c.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(e,i,u.initialMsg,f)}}else return await this.performXXHandshake(e,i)}async performXXFallbackHandshake(e,r,i,n){let{isInitiator:s,remotePeer:o,connection:a}=e,c=new V$e.XXFallbackHandshake(s,r,this.prologue,this.staticKeys,a,i,o,n);try{await c.propose(),await c.exchange(),await c.finish()}catch(u){z$e.logger(u);let f=u;throw new Error(`Error occurred during XX Fallback handshake: ${f.message}`)}return c}async performXXHandshake(e,r){let{isInitiator:i,remotePeer:n,connection:s}=e,o=new F$e.XXHandshake(i,r,this.prologue,this.staticKeys,s,n);try{await o.propose(),await o.exchange(),await o.finish(),this.useNoisePipes&&o.remotePeer&&sC.KeyCache.store(o.remotePeer,o.getRemoteStaticKey())}catch(a){let c=a;throw new Error(`Error occurred during XX handshake: ${c.message}`)}return o}async performIKHandshake(e){return await e.stage0(),await e.stage1(),e}async createSecureConnection(e,r){let[i,n]=j$e.default(),s=e.unwrap();return await U$e.default(i,b0e.default,_0e.encryptStream(r),v0e.encode({lengthEncoder:W1.uint16BEEncode}),s,v0e.decode({lengthDecoder:W1.uint16BEDecode}),b0e.default,_0e.decryptStream(r),i),n}};Po.Noise=S0e});var x0e=v(zu=>{l();"use strict";var H$e=zu&&zu.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),$$e=zu&&zu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&H$e(e,t,r)};Object.defineProperty(zu,"__esModule",{value:!0});zu.NOISE=void 0;var G$e=oC();$$e(oC(),zu);zu.NOISE=new G$e.Noise});var Sa=v((POt,I0e)=>{l();"use strict";function A0e(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function W$e(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return A0e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),A0e(new n,r)}}I0e.exports=W$e});var P0e=v((COt,R0e)=>{l();"use strict";var Y$e=eP(),{EventEmitter:X$e}=vr();function T0e(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;++r)if(t[r]!==e[r])return!1;return!0}function aC(){return{contacts:[],dontSplit:!1,left:null,right:null}}function t3(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array")}var r3=class extends X$e{constructor(e={}){super();this.localNodeId=e.localNodeId||Y$e(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||r3.distance,this.arbiter=e.arbiter||r3.arbiter,this.metadata=Object.assign({},e.metadata),t3("option.localNodeId as parameter 1",this.localNodeId),this.root=aC()}static arbiter(e,r){return e.vectorClock>r.vectorClock?e:r}static distance(e,r){let i=0,n=0,s=Math.min(e.length,r.length),o=Math.max(e.length,r.length);for(;n<s;++n)i=i*256+(e[n]^r[n]);for(;n<o;++n)i=i*256+255;return i}add(e){t3("contact.id",(e||{}).id);let r=0,i=this.root;for(;i.contacts===null;)i=this._determineNode(i,e.id,r++);let n=this._indexOf(i,e.id);return n>=0?(this._update(i,n,e),this):i.contacts.length<this.numberOfNodesPerKBucket?(i.contacts.push(e),this.emit("added",e),this):i.dontSplit?(this.emit("ping",i.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(i,r),this.add(e))}closest(e,r=1/0){if(t3("id",e),!Number.isInteger(r)&&r!==1/0||r<=0)throw new TypeError("n is not positive number");let i=[];for(let n=[this.root],s=0;n.length>0&&i.length<r;){let o=n.pop();if(o.contacts===null){let a=this._determineNode(o,e,s++);n.push(o.left===a?o.right:o.left),n.push(a)}else i=i.concat(o.contacts)}return i.map(n=>[this.distance(n.id,e),n]).sort((n,s)=>n[0]-s[0]).slice(0,r).map(n=>n[1])}count(){let e=0;for(let r=[this.root];r.length>0;){let i=r.pop();i.contacts===null?r.push(i.right,i.left):e+=i.contacts.length}return e}_determineNode(e,r,i){let n=i>>3,s=i%8;return r.length<=n&&s!==0?e.left:r[n]&1<<7-s?e.right:e.left}get(e){t3("id",e);let r=0,i=this.root;for(;i.contacts===null;)i=this._determineNode(i,e,r++);let n=this._indexOf(i,e);return n>=0?i.contacts[n]:null}_indexOf(e,r){for(let i=0;i<e.contacts.length;++i)if(T0e(e.contacts[i].id,r))return i;return-1}remove(e){t3("the id as parameter 1",e);let r=0,i=this.root;for(;i.contacts===null;)i=this._determineNode(i,e,r++);let n=this._indexOf(i,e);if(n>=0){let s=i.contacts.splice(n,1)[0];this.emit("removed",s)}return this}_split(e,r){e.left=aC(),e.right=aC();for(let s of e.contacts)this._determineNode(e,s.id,r).contacts.push(s);e.contacts=null;let i=this._determineNode(e,this.localNodeId,r),n=e.left===i?e.right:e.left;n.dontSplit=!0}toArray(){let e=[];for(let r=[this.root];r.length>0;){let i=r.pop();i.contacts===null?r.push(i.right,i.left):e=e.concat(i.contacts)}return e}*toIterable(){for(let e=[this.root];e.length>0;){let r=e.pop();r.contacts===null?e.push(r.right,r.left):yield*r.contacts}}_update(e,r,i){if(!T0e(e.contacts[r].id,i.id))throw new Error("wrong index for _update");let n=e.contacts[r],s=this.arbiter(n,i);s===n&&n!==i||(e.contacts.splice(r,1),e.contacts.push(s),this.emit("updated",n,s))}};R0e.exports=r3});var i3={};zt(i3,{xor:()=>Q$e});function Q$e(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t[i]^e[i];return r}var n3=bt(()=>{l()});var C0e=v((OOt,Z$e)=>{Z$e.exports=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782]});var k0e=v((kOt,O0e)=>{l();"use strict";O0e.exports=(t,e=1,r)=>{if(r={indent:" ",includeEmptyLines:!1,...r},typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(typeof r.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(e===0)return t;let i=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(i,r.indent.repeat(e))}});var D0e=v(()=>{l()});var L0e=v((NOt,M0e)=>{l();"use strict";var B0e=D0e(),N0e=/\s+at.*(?:\(|\s)(.*)\)?/,J$e=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,eGe=typeof B0e.homedir=="undefined"?"":B0e.homedir();M0e.exports=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split(`
`).filter(r=>{let i=r.match(N0e);if(i===null||!i[1])return!0;let n=i[1];return n.includes(".app/Contents/Resources/electron.asar")||n.includes(".app/Contents/Resources/default_app.asar")?!1:!J$e.test(n)}).filter(r=>r.trim()!=="").map(r=>e.pretty?r.replace(N0e,(i,n)=>i.replace(n,n.replace(eGe,"~"))):r).join(`
`))});var cC=v((MOt,j0e)=>{l();"use strict";var tGe=k0e(),rGe=L0e(),iGe=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),q0e=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);e=[...e].map(i=>i instanceof Error?i:i!==null&&typeof i=="object"?Object.assign(new Error(i.message),i):new Error(i));let r=e.map(i=>typeof i.stack=="string"?iGe(rGe(i.stack)):String(i)).join(`
`);r=`
`+tGe(r,4);super(r);this.name="AggregateError",Object.defineProperty(this,"_errors",{value:e})}*[Symbol.iterator](){for(let e of this._errors)yield e}};j0e.exports=q0e});var uC=v((LOt,U0e)=>{l();"use strict";var nGe=cC();U0e.exports=async(t,e,{concurrency:r=1/0,stopOnError:i=!0}={})=>new Promise((n,s)=>{if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(r)||r===1/0)&&r>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);let o=[],a=[],c=t[Symbol.iterator](),u=!1,f=!1,d=0,h=0,p=()=>{if(u)return;let y=c.next(),m=h;if(h++,y.done){f=!0,d===0&&(!i&&a.length!==0?s(new nGe(a)):n(o));return}d++,(async()=>{try{let w=await y.value;o[m]=await e(w,m),d--,p()}catch(w){i?(u=!0,s(w)):(a.push(w),d--,p())}})()};for(let y=0;y<r&&(p(),!f);y++);})});var Y1=v((qOt,x7)=>{l();"use strict";var fC=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},F0e=(t,e,r,i)=>{let n,s=new Promise((o,a)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){o(t);return}i={customTimers:{setTimeout,clearTimeout},...i},n=i.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{o(r())}catch(f){a(f)}return}let c=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,u=r instanceof Error?r:new fC(c);typeof t.cancel=="function"&&t.cancel(),a(u)},e),(async()=>{try{o(await t)}catch(c){a(c)}finally{i.customTimers.clearTimeout.call(void 0,n)}})()});return s.clear=()=>{clearTimeout(n),n=void 0},s};x7.exports=F0e;x7.exports.default=F0e;x7.exports.TimeoutError=fC});var Ti=v(gi=>{l();"use strict";var lC=Ee(),{sha256:K0e}=(mi(),zs),{base58btc:sGe}=(li(),Fs),{Key:oGe}=(Br(),wy),{xor:aGe}=(n3(),i3),{compare:cGe}=(B5(),XA),uGe=uC(),{Record:fGe}=bd(),lGe=it(),dGe=Sa(),{fromString:V0e}=(dt(),bi),{toString:z0e}=(tt(),pr),{concat:hGe}=(bn(),Gs),H0e=Y1();gi.convertBuffer=async t=>(await K0e.digest(t)).digest;gi.convertPeerId=async t=>(await K0e.digest(t.id)).digest;gi.bufferToKey=t=>new oGe("/"+gi.encodeBase32(t),!1);gi.keyForPublicKey=t=>hGe([V0e("/pk/"),t.id]);gi.isPublicKeyKey=t=>z0e(t.slice(0,4))==="/pk/";gi.fromPublicKeyKey=t=>new lGe(t.slice(4));gi.now=()=>Date.now();gi.encodeBase32=t=>z0e(t,"base32");gi.decodeBase32=t=>V0e(t,"base32");gi.sortClosestPeers=async(t,e)=>(await uGe(t,async i=>{let n=await gi.convertPeerId(i);return{peer:i,distance:aGe(n,e)}})).sort(gi.xorCompare).map(i=>i.peer);gi.xorCompare=(t,e)=>cGe(t.distance,e.distance);gi.pathSize=(t,e)=>Math.ceil(t/e);gi.createPutRecord=(t,e)=>{let r=new Date;return new fGe(t,e,r).serialize()};gi.logger=(t,e)=>{let r=["libp2p","dht"];return e&&r.push(e),t&&r.push(`${t.toB58String().slice(0,8)}`),lC.formatters.b=n=>sGe.baseEncode(n),Object.assign(lC(r.join(":")),{error:lC(r.concat(["error"]).join(":"))})};gi.TimeoutError=class extends Error{get code(){return"ETIMEDOUT"}};gi.withTimeout=(t,e)=>{async function r(...i){if(!e)return t(...i);let n;try{n=await H0e(t(...i),e)}catch(s){throw s instanceof H0e.TimeoutError?dGe(s,"ETIMEDOUT"):s}return n}return r};gi.mapParallel=async function(t,e){let r=[];for await(let i of t)r.push(e(i));return Promise.all(r)}});var Y0e=v((FOt,W0e)=>{l();"use strict";var pGe=P0e(),{xor:yGe}=(n3(),i3),gGe=C0e(),{sha256:mGe}=(mi(),zs),bGe=uc(),vGe=it(),A7=Ti(),$0e=Ee(),Hu=Object.assign($0e("libp2p:dht:routing-table"),{error:$0e("libp2p:dht:routing-table:error")}),wGe=O5(),I7=15,G0e=class{constructor(e,{kBucketSize:r,refreshInterval:i}={}){this.peerId=e.peerId,this.dht=e,this._kBucketSize=r||20,this._refreshInterval=i||3e4,this.kb=new pGe({numberOfNodesPerKBucket:this._kBucketSize,numberOfNodesToPing:1}),this.commonPrefixLengthRefreshedAt=[],this._refreshTable=this._refreshTable.bind(this),this._onPing=this._onPing.bind(this)}async start(){this.kb.localNodeId=await A7.convertPeerId(this.peerId),this.kb.on("ping",this._onPing),await this._refreshTable(!0)}async stop(){this._refreshTimeoutId&&clearTimeout(this._refreshTimeoutId)}async _refreshTable(e){Hu("refreshing routing table");let r=this._maxCommonPrefix(),i=this._getTrackedCommonPrefixLengthsForRefresh(r);Hu(`max common prefix length ${r}`),Hu(`tracked CPLs [ ${i.map(n=>`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}:${n.getSeconds().toString().padStart(2,"0")}`).join(", ")} ]`),await Promise.all(i.map(async(n,s)=>{try{if(await this._refreshCommonPrefixLength(s,n,e===!0),this._numPeersForCpl(r)===0){let o=Math.min(2*(s+1),i.length-1);for(let a=s+1;a<o+1;a++)try{await this._refreshCommonPrefixLength(a,n,e===!0)}catch(c){Hu.error(c)}}}catch(o){Hu.error(o)}})),this._refreshTimeoutId=setTimeout(this._refreshTable,this._refreshInterval),this._refreshTimeoutId.unref()}async _refreshCommonPrefixLength(e,r,i){if(!i&&r.getTime()>Date.now()-this._refreshInterval){Hu(`not running refresh for cpl ${e} as time since last refresh not above interval`);return}let n=await this._generateRandomPeerId(e);Hu(`starting refreshing cpl ${e} with key ${n.toB58String()} (routing table size was ${this.kb.count()})`);let s=await wGe(this.dht.getClosestPeers(n.toBytes(),{}));Hu(`found ${s} peers that were close to imaginary peer ${n.toB58String()}`),Hu(`finished refreshing cpl ${e} with key ${n.toB58String()} (routing table size was ${this.kb.count()})`)}_getTrackedCommonPrefixLengthsForRefresh(e){e>I7&&(e=I7);let r=[];for(let i=0;i<=e;i++)r[i]=this.commonPrefixLengthRefreshedAt[i]||new Date;return r}async _generateRandomPeerId(e){let r=bGe.randomBytes(2),i=(r[1]<<8)+r[0],n=await this._makePeerId(this.kb.localNodeId,i,e);return vGe.createFromBytes(n)}async _makePeerId(e,r,i){if(i>I7)throw new Error(`Cannot generate peer ID for common prefix length greater than ${I7}`);let o=new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1)^32768>>i,a=65535<<16-(i+1),c=o&a|r&~a,u=gGe[c],f=new ArrayBuffer(34),d=new DataView(f,0,f.byteLength);return d.setUint8(0,mGe.code),d.setUint8(1,32),d.setUint32(2,u,!1),new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}_maxCommonPrefix(){if(!this.kb.localNodeId)return 0;let e=0;for(let r of this._prefixLengths())r>e&&(e=r);return e}_numPeersForCpl(e){let r=0;for(let i of this._prefixLengths())i===e&&r++;return r}*_prefixLengths(){for(let{id:e}of this.kb.toIterable()){let r=yGe(this.kb.localNodeId,e),i=0;for(let n of r)if(n===0)i++;else break;yield i}}_onPing(e,r){let i=e[0];i&&this.kb.remove(i.id),this.kb.add(r)}get size(){return this.kb.count()}async find(e){let r=await A7.convertPeerId(e),i=this.closestPeer(r);if(i&&e.equals(i))return i}closestPeer(e){let r=this.closestPeers(e,1);if(r.length>0)return r[0]}closestPeers(e,r){return this.kb.closest(e,r).map(n=>n.peer)}async add(e){let r=await A7.convertPeerId(e);this.kb.add({id:r,peer:e})}async remove(e){let r=await A7.convertPeerId(e);this.kb.remove(r)}};W0e.exports=G0e});var Sh=v(ps=>{l();"use strict";var X0e=ps.second=1e3,_Ge=ps.minute=60*X0e,dC=ps.hour=60*_Ge;ps.MAX_RECORD_AGE=36*dC;ps.PROTOCOL_DHT="/kad/1.0.0";ps.PROVIDERS_KEY_PREFIX="/providers/";ps.PROVIDERS_LRU_CACHE_SIZE=256;ps.PROVIDERS_VALIDITY=24*dC;ps.PROVIDERS_CLEANUP_INTERVAL=dC;ps.READ_MESSAGE_TIMEOUT=10*X0e;ps.GET_MANY_RECORD_COUNT=16;ps.K=20;ps.ALPHA=3});var s3=v((T7,Q0e)=>{l();(function(t,e){typeof T7=="object"&&typeof Q0e!="undefined"?e(T7):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.streamingIterables={}))})(T7,function(t){"use strict";async function*e(T,F){let H=[];for await(let M of F)H.push(M),H.length===T&&(yield H,H=[]);H.length>0&&(yield H)}function*r(T,F){let H=[];for(let M of F)H.push(M),H.length===T&&(yield H,H=[]);H.length>0&&(yield H)}function i(T,F){return F===void 0?H=>i(T,H):F[Symbol.asyncIterator]?e(T,F):r(T,F)}function n(T){if(typeof T.next=="function")return T;if(typeof T[Symbol.iterator]=="function")return T[Symbol.iterator]();if(typeof T[Symbol.asyncIterator]=="function")return T[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function s(){let T,F;return{promise:new Promise((M,Z)=>{F=M,T=Z}),reject:T,resolve:F}}function o(T,F){let H=n(F),M=[],Z=[],ie=!1,te=!1;function he(){for(;Z.length>0&&M.length>0;){let Pe=Z.shift(),{error:Ve,value:et}=M.shift();Ve?Pe.reject(Ve):Pe.resolve({done:!1,value:et})}for(;Z.length>0&&te;){let{resolve:Pe}=Z.shift();Pe({done:!0,value:void 0})}}async function we(){if(!te&&!ie&&!(M.length>=T)){ie=!0;try{let{done:Pe,value:Ve}=await H.next();Pe?te=!0:M.push({value:Ve})}catch(Pe){te=!0,M.push({error:Pe})}he(),ie=!1,we()}}async function _e(){if(M.length>0){let{error:Ve,value:et}=M.shift();if(Ve)throw Ve;return we(),{done:!1,value:et}}if(te)return{done:!0,value:void 0};let Pe=s();return Z.push(Pe),we(),Pe.promise}let Ke={next:_e,[Symbol.asyncIterator]:()=>Ke};return Ke}function*a(T,F){let H=[],M;try{for(let Z of F)H.push(Z),!(H.length<=T)&&(yield H.shift())}catch(Z){M=Z}for(let Z of H)yield Z;if(M)throw M}function c(T,F){return F===void 0?H=>c(T,H):T===0?F:F[Symbol.asyncIterator]?o(T,F):a(T,F)}async function u(T){let F=[];for await(let H of T)F.push(H);return F}function f(T){return T[Symbol.asyncIterator]?u(T):Array.from(T)}async function*d(T){for await(let F of T)yield*F}function*h(T){for(let F of T)yield*F}function p(...T){return T.find(H=>H[Symbol.asyncIterator]!==void 0)?d(T):h(T)}async function y(T){for await(let F of T);}function m(T){if(T[Symbol.asyncIterator])return y(T);for(let F of T);}async function*w(T,F){for await(let H of F)await T(H)&&(yield H)}function b(T,F){return F===void 0?H=>w(T,H):w(T,F)}async function*S(T){for await(let F of T)F&&typeof F!="string"&&(F[Symbol.iterator]||F[Symbol.asyncIterator])?yield*S(F):yield F}async function*I(T,F){for await(let H of F)yield await T(H)}function j(T,F){return F===void 0?H=>I(T,H):I(T,F)}function B(T,F){return F===void 0?H=>B(T,H):b(H=>H!=null,S(j(T,F)))}function C(T,F,H){let M=n(H),Z=[],ie=[],te=!1,he=!1,we=0,_e=null;function Ke(){for(;ie.length>0&&Z.length>0;){let{resolve:ze}=ie.shift(),mt=Z.shift();ze({done:!1,value:mt})}for(;ie.length>0&&we===0&&te;){let{resolve:ze,reject:mt}=ie.shift();_e?(mt(_e),_e=null):ze({done:!0,value:void 0})}}async function Pe(){if(te){Ke();return}if(!he&&!(we+Z.length>=T)){he=!0,we++;try{let{done:ze,value:mt}=await M.next();ze?(te=!0,we--,Ke()):Ve(mt)}catch(ze){te=!0,we--,_e=ze,Ke()}he=!1,Pe()}}async function Ve(ze){try{let mt=await F(ze);if(mt&&mt[Symbol.asyncIterator])for await(let rr of mt)Z.push(rr);else Z.push(mt)}catch(mt){te=!0,_e=mt}we--,Ke(),Pe()}async function et(){if(Z.length===0){let mt=s();return ie.push(mt),Pe(),mt.promise}let ze=Z.shift();return Pe(),{done:!1,value:ze}}let He={next:et,[Symbol.asyncIterator]:()=>He};return He}function z(T,F,H){return F===void 0?(M,Z)=>Z?z(T,M,Z):z(T,M):H===void 0?M=>z(T,F,M):b(M=>M!=null,S(C(T,F,H)))}async function W(T){return new Promise(F=>{T.once("readable",()=>{F()})})}async function*X(T){for(;;){let F=T.read();if(F!==null){yield F;continue}if(T._readableState.ended)break;await W(T)}}function P(T){return typeof T[Symbol.asyncIterator]=="function"?T:X(T)}async function*g(...T){let F=new Set(T.map(n));for(;F.size>0;)for(let H of F){let M=await H.next();M.done?F.delete(H):yield M.value}}function _(T,...F){let H=T();for(let M of F)H=M(H);return H}async function*x(T,F,H){let M=null,Z=we=>({value:F(we)}),ie=async function*(we){for await(let _e of we){if(M)return;yield _e}},te=_(()=>H,c(1),ie,j(Z),c(T-1)),he=n(te);for(;;){let{value:we,done:_e}=await he.next();if(_e)break;try{let Ke=await we.value;M||(yield Ke)}catch(Ke){M=Ke}}if(M)throw M}function O(T,F,H){return F===void 0?(M,Z)=>O(T,M,Z):H===void 0?M=>O(T,F,M):T===1?j(F,H):x(T,F,H)}function L(T,F,H){return F===void 0?(M,Z)=>Z?L(T,M,Z):L(T,M):H===void 0?M=>L(T,F,M):b(M=>M!=null,S(O(T,F,H)))}async function*Y(...T){let F=T.map(n),H=new Set,M=new Map,Z=null,ie=null,te=null,he=Pe=>{Z=Pe,ie&&ie(Pe)},we=Pe=>{te&&te(Pe)},_e=()=>new Promise((Pe,Ve)=>{if(Z&&Ve(Z),M.size>0)return Pe();te=Pe,ie=Ve}),Ke=Pe=>{let Ve=Promise.resolve(Pe.next()).then(async({done:et,value:He})=>{et||M.set(Pe,He),H.delete(Ve)});H.add(Ve),Ve.then(we,he)};for(let Pe of F)Ke(Pe);for(;;){if(H.size===0&&M.size===0)return;await _e();for(let[Pe,Ve]of M)M.delete(Pe),yield Ve,Ke(Pe)}}async function V(T,F,H){let M=F;for await(let Z of H)M=await T(M,Z);return M}function q(T,F,H){return F===void 0?(M,Z)=>Z?V(T,M,Z):q(T,M):H===void 0?M=>q(T,F,M):V(T,F,H)}async function*E(T,F){let H=0;for await(let M of F)if(yield await M,H++,H>=T)break}function*U(T,F){let H=0;for(let M of F)if(yield M,H++,H>=T)break}function de(T,F){return F===void 0?H=>de(T,H):F[Symbol.asyncIterator]?E(T,F):U(T,F)}async function*Q(T,F){for await(let H of F)await T(H),yield H}function ue(T,F){return F===void 0?H=>Q(T,H):Q(T,F)}function le(T,F){let H=T[0]+F[0],M=T[1]+F[1];if(M>=1e9){let Z=M%1e9;H+=(M-Z)/1e9,M=Z}return[H,M]}async function*me(T,F){let H=F[Symbol.asyncIterator](),M=[0,0];for(;;){let Z=process.hrtime(),{value:ie,done:te}=await H.next(),he=process.hrtime(Z);if(M=le(M,he),T.progress&&T.progress(he,M),te)return T.total&&T.total(M),ie;yield ie}}function*be(T,F){let H=F[Symbol.iterator](),M=[0,0];for(;;){let Z=process.hrtime(),{value:ie,done:te}=H.next(),he=process.hrtime(Z);if(M=le(M,he),T.progress&&T.progress(he,M),te)return T.total&&T.total(M),ie;yield ie}}function xe(T={},F){return F===void 0?H=>xe(T,H):F[Symbol.asyncIterator]!==void 0?me(T,F):be(T,F)}function D(T,F,H){let M=n(H),Z=[],ie=[],te=!1,he=!1,we=0,_e=null;function Ke(){for(;ie.length>0&&Z.length>0;){let{resolve:ze}=ie.shift(),mt=Z.shift();ze({done:!1,value:mt})}for(;ie.length>0&&we===0&&te;){let{resolve:ze,reject:mt}=ie.shift();_e?(mt(_e),_e=null):ze({done:!0,value:void 0})}}async function Pe(){if(te){Ke();return}if(!he&&!(we+Z.length>=T)){he=!0,we++;try{let{done:ze,value:mt}=await M.next();ze?(te=!0,we--,Ke()):Ve(mt)}catch(ze){te=!0,we--,_e=ze,Ke()}he=!1,Pe()}}async function Ve(ze){try{let mt=await F(ze);Z.push(mt)}catch(mt){te=!0,_e=mt}we--,Ke(),Pe()}async function et(){if(Z.length===0){let mt=s();return ie.push(mt),Pe(),mt.promise}let ze=Z.shift();return Pe(),{done:!1,value:ze}}let He={next:et,[Symbol.asyncIterator]:()=>He};return He}function K(T,F,H){return F===void 0?(M,Z)=>Z?K(T,M,Z):K(T,M):H===void 0?M=>K(T,F,M):D(T,F,H)}async function G(T,F){let H=null,M=null,Z=null,ie=_e=>{H=_e,M&&M(_e)},te=()=>{Z&&Z()},he=()=>{T.removeListener("error",ie),T.removeListener("drain",te)};T.once("error",ie);let we=()=>new Promise((_e,Ke)=>{if(H)return Ke(H);T.once("drain",te),Z=_e,M=Ke});for await(let _e of F)if(T.write(_e)===!1&&await we(),H)break;if(he(),H)throw H}function ee(T,F){return F===void 0?H=>G(T,H):G(T,F)}t.batch=i,t.buffer=c,t.collect=f,t.concat=p,t.consume=m,t.filter=b,t.flatMap=B,t.flatTransform=z,t.flatten=S,t.fromStream=P,t.getIterator=n,t.map=j,t.merge=g,t.parallelFlatMap=L,t.parallelMap=O,t.parallelMerge=Y,t.pipeline=_,t.reduce=q,t.take=de,t.tap=ue,t.time=xe,t.transform=K,t.writeToStream=ee,Object.defineProperty(t,"__esModule",{value:!0})})});var J0e=v((VOt,Z0e)=>{l();"use strict";var Il=Vi(),X1=Il.Reader,hC=Il.Writer,We=Il.util,ni=Il.roots["libp2p-dht-message"]||(Il.roots["libp2p-dht-message"]={});ni.Record=function(){function t(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}t.prototype.key=null,t.prototype.value=null,t.prototype.author=null,t.prototype.signature=null,t.prototype.timeReceived=null;var e;return Object.defineProperty(t.prototype,"_key",{get:We.oneOfGetter(e=["key"]),set:We.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_value",{get:We.oneOfGetter(e=["value"]),set:We.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_author",{get:We.oneOfGetter(e=["author"]),set:We.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_signature",{get:We.oneOfGetter(e=["signature"]),set:We.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_timeReceived",{get:We.oneOfGetter(e=["timeReceived"]),set:We.oneOfSetter(e)}),t.encode=function(i,n){return n||(n=hC.create()),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&n.uint32(10).bytes(i.key),i.value!=null&&Object.hasOwnProperty.call(i,"value")&&n.uint32(18).bytes(i.value),i.author!=null&&Object.hasOwnProperty.call(i,"author")&&n.uint32(26).bytes(i.author),i.signature!=null&&Object.hasOwnProperty.call(i,"signature")&&n.uint32(34).bytes(i.signature),i.timeReceived!=null&&Object.hasOwnProperty.call(i,"timeReceived")&&n.uint32(42).string(i.timeReceived),n},t.decode=function(i,n){i instanceof X1||(i=X1.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new ni.Record;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.key=i.bytes();break;case 2:o.value=i.bytes();break;case 3:o.author=i.bytes();break;case 4:o.signature=i.bytes();break;case 5:o.timeReceived=i.string();break;default:i.skipType(a&7);break}}return o},t.fromObject=function(i){if(i instanceof ni.Record)return i;var n=new ni.Record;return i.key!=null&&(typeof i.key=="string"?We.base64.decode(i.key,n.key=We.newBuffer(We.base64.length(i.key)),0):i.key.length&&(n.key=i.key)),i.value!=null&&(typeof i.value=="string"?We.base64.decode(i.value,n.value=We.newBuffer(We.base64.length(i.value)),0):i.value.length&&(n.value=i.value)),i.author!=null&&(typeof i.author=="string"?We.base64.decode(i.author,n.author=We.newBuffer(We.base64.length(i.author)),0):i.author.length&&(n.author=i.author)),i.signature!=null&&(typeof i.signature=="string"?We.base64.decode(i.signature,n.signature=We.newBuffer(We.base64.length(i.signature)),0):i.signature.length&&(n.signature=i.signature)),i.timeReceived!=null&&(n.timeReceived=String(i.timeReceived)),n},t.toObject=function(i,n){n||(n={});var s={};return i.key!=null&&i.hasOwnProperty("key")&&(s.key=n.bytes===String?We.base64.encode(i.key,0,i.key.length):n.bytes===Array?Array.prototype.slice.call(i.key):i.key,n.oneofs&&(s._key="key")),i.value!=null&&i.hasOwnProperty("value")&&(s.value=n.bytes===String?We.base64.encode(i.value,0,i.value.length):n.bytes===Array?Array.prototype.slice.call(i.value):i.value,n.oneofs&&(s._value="value")),i.author!=null&&i.hasOwnProperty("author")&&(s.author=n.bytes===String?We.base64.encode(i.author,0,i.author.length):n.bytes===Array?Array.prototype.slice.call(i.author):i.author,n.oneofs&&(s._author="author")),i.signature!=null&&i.hasOwnProperty("signature")&&(s.signature=n.bytes===String?We.base64.encode(i.signature,0,i.signature.length):n.bytes===Array?Array.prototype.slice.call(i.signature):i.signature,n.oneofs&&(s._signature="signature")),i.timeReceived!=null&&i.hasOwnProperty("timeReceived")&&(s.timeReceived=i.timeReceived,n.oneofs&&(s._timeReceived="timeReceived")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,Il.util.toJSONOptions)},t}();ni.Message=function(){function t(r){if(this.closerPeers=[],this.providerPeers=[],r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}t.prototype.type=null,t.prototype.clusterLevelRaw=null,t.prototype.key=null,t.prototype.record=null,t.prototype.closerPeers=We.emptyArray,t.prototype.providerPeers=We.emptyArray;var e;return Object.defineProperty(t.prototype,"_type",{get:We.oneOfGetter(e=["type"]),set:We.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_clusterLevelRaw",{get:We.oneOfGetter(e=["clusterLevelRaw"]),set:We.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_key",{get:We.oneOfGetter(e=["key"]),set:We.oneOfSetter(e)}),Object.defineProperty(t.prototype,"_record",{get:We.oneOfGetter(e=["record"]),set:We.oneOfSetter(e)}),t.encode=function(i,n){if(n||(n=hC.create()),i.type!=null&&Object.hasOwnProperty.call(i,"type")&&n.uint32(8).int32(i.type),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&n.uint32(18).bytes(i.key),i.record!=null&&Object.hasOwnProperty.call(i,"record")&&n.uint32(26).bytes(i.record),i.closerPeers!=null&&i.closerPeers.length)for(var s=0;s<i.closerPeers.length;++s)ni.Message.Peer.encode(i.closerPeers[s],n.uint32(66).fork()).ldelim();if(i.providerPeers!=null&&i.providerPeers.length)for(var s=0;s<i.providerPeers.length;++s)ni.Message.Peer.encode(i.providerPeers[s],n.uint32(74).fork()).ldelim();return i.clusterLevelRaw!=null&&Object.hasOwnProperty.call(i,"clusterLevelRaw")&&n.uint32(80).int32(i.clusterLevelRaw),n},t.decode=function(i,n){i instanceof X1||(i=X1.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new ni.Message;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.type=i.int32();break;case 10:o.clusterLevelRaw=i.int32();break;case 2:o.key=i.bytes();break;case 3:o.record=i.bytes();break;case 8:o.closerPeers&&o.closerPeers.length||(o.closerPeers=[]),o.closerPeers.push(ni.Message.Peer.decode(i,i.uint32()));break;case 9:o.providerPeers&&o.providerPeers.length||(o.providerPeers=[]),o.providerPeers.push(ni.Message.Peer.decode(i,i.uint32()));break;default:i.skipType(a&7);break}}return o},t.fromObject=function(i){if(i instanceof ni.Message)return i;var n=new ni.Message;switch(i.type){case"PUT_VALUE":case 0:n.type=0;break;case"GET_VALUE":case 1:n.type=1;break;case"ADD_PROVIDER":case 2:n.type=2;break;case"GET_PROVIDERS":case 3:n.type=3;break;case"FIND_NODE":case 4:n.type=4;break;case"PING":case 5:n.type=5;break}if(i.clusterLevelRaw!=null&&(n.clusterLevelRaw=i.clusterLevelRaw|0),i.key!=null&&(typeof i.key=="string"?We.base64.decode(i.key,n.key=We.newBuffer(We.base64.length(i.key)),0):i.key.length&&(n.key=i.key)),i.record!=null&&(typeof i.record=="string"?We.base64.decode(i.record,n.record=We.newBuffer(We.base64.length(i.record)),0):i.record.length&&(n.record=i.record)),i.closerPeers){if(!Array.isArray(i.closerPeers))throw TypeError(".Message.closerPeers: array expected");n.closerPeers=[];for(var s=0;s<i.closerPeers.length;++s){if(typeof i.closerPeers[s]!="object")throw TypeError(".Message.closerPeers: object expected");n.closerPeers[s]=ni.Message.Peer.fromObject(i.closerPeers[s])}}if(i.providerPeers){if(!Array.isArray(i.providerPeers))throw TypeError(".Message.providerPeers: array expected");n.providerPeers=[];for(var s=0;s<i.providerPeers.length;++s){if(typeof i.providerPeers[s]!="object")throw TypeError(".Message.providerPeers: object expected");n.providerPeers[s]=ni.Message.Peer.fromObject(i.providerPeers[s])}}return n},t.toObject=function(i,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.closerPeers=[],s.providerPeers=[]),i.type!=null&&i.hasOwnProperty("type")&&(s.type=n.enums===String?ni.Message.MessageType[i.type]:i.type,n.oneofs&&(s._type="type")),i.key!=null&&i.hasOwnProperty("key")&&(s.key=n.bytes===String?We.base64.encode(i.key,0,i.key.length):n.bytes===Array?Array.prototype.slice.call(i.key):i.key,n.oneofs&&(s._key="key")),i.record!=null&&i.hasOwnProperty("record")&&(s.record=n.bytes===String?We.base64.encode(i.record,0,i.record.length):n.bytes===Array?Array.prototype.slice.call(i.record):i.record,n.oneofs&&(s._record="record")),i.closerPeers&&i.closerPeers.length){s.closerPeers=[];for(var o=0;o<i.closerPeers.length;++o)s.closerPeers[o]=ni.Message.Peer.toObject(i.closerPeers[o],n)}if(i.providerPeers&&i.providerPeers.length){s.providerPeers=[];for(var o=0;o<i.providerPeers.length;++o)s.providerPeers[o]=ni.Message.Peer.toObject(i.providerPeers[o],n)}return i.clusterLevelRaw!=null&&i.hasOwnProperty("clusterLevelRaw")&&(s.clusterLevelRaw=i.clusterLevelRaw,n.oneofs&&(s._clusterLevelRaw="clusterLevelRaw")),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,Il.util.toJSONOptions)},t.MessageType=function(){var r={},i=Object.create(r);return i[r[0]="PUT_VALUE"]=0,i[r[1]="GET_VALUE"]=1,i[r[2]="ADD_PROVIDER"]=2,i[r[3]="GET_PROVIDERS"]=3,i[r[4]="FIND_NODE"]=4,i[r[5]="PING"]=5,i}(),t.ConnectionType=function(){var r={},i=Object.create(r);return i[r[0]="NOT_CONNECTED"]=0,i[r[1]="CONNECTED"]=1,i[r[2]="CAN_CONNECT"]=2,i[r[3]="CANNOT_CONNECT"]=3,i}(),t.Peer=function(){function r(n){if(this.addrs=[],n)for(var s=Object.keys(n),o=0;o<s.length;++o)n[s[o]]!=null&&(this[s[o]]=n[s[o]])}r.prototype.id=null,r.prototype.addrs=We.emptyArray,r.prototype.connection=null;var i;return Object.defineProperty(r.prototype,"_id",{get:We.oneOfGetter(i=["id"]),set:We.oneOfSetter(i)}),Object.defineProperty(r.prototype,"_connection",{get:We.oneOfGetter(i=["connection"]),set:We.oneOfSetter(i)}),r.encode=function(s,o){if(o||(o=hC.create()),s.id!=null&&Object.hasOwnProperty.call(s,"id")&&o.uint32(10).bytes(s.id),s.addrs!=null&&s.addrs.length)for(var a=0;a<s.addrs.length;++a)o.uint32(18).bytes(s.addrs[a]);return s.connection!=null&&Object.hasOwnProperty.call(s,"connection")&&o.uint32(24).int32(s.connection),o},r.decode=function(s,o){s instanceof X1||(s=X1.create(s));for(var a=o===void 0?s.len:s.pos+o,c=new ni.Message.Peer;s.pos<a;){var u=s.uint32();switch(u>>>3){case 1:c.id=s.bytes();break;case 2:c.addrs&&c.addrs.length||(c.addrs=[]),c.addrs.push(s.bytes());break;case 3:c.connection=s.int32();break;default:s.skipType(u&7);break}}return c},r.fromObject=function(s){if(s instanceof ni.Message.Peer)return s;var o=new ni.Message.Peer;if(s.id!=null&&(typeof s.id=="string"?We.base64.decode(s.id,o.id=We.newBuffer(We.base64.length(s.id)),0):s.id.length&&(o.id=s.id)),s.addrs){if(!Array.isArray(s.addrs))throw TypeError(".Message.Peer.addrs: array expected");o.addrs=[];for(var a=0;a<s.addrs.length;++a)typeof s.addrs[a]=="string"?We.base64.decode(s.addrs[a],o.addrs[a]=We.newBuffer(We.base64.length(s.addrs[a])),0):s.addrs[a].length&&(o.addrs[a]=s.addrs[a])}switch(s.connection){case"NOT_CONNECTED":case 0:o.connection=0;break;case"CONNECTED":case 1:o.connection=1;break;case"CAN_CONNECT":case 2:o.connection=2;break;case"CANNOT_CONNECT":case 3:o.connection=3;break}return o},r.toObject=function(s,o){o||(o={});var a={};if((o.arrays||o.defaults)&&(a.addrs=[]),s.id!=null&&s.hasOwnProperty("id")&&(a.id=o.bytes===String?We.base64.encode(s.id,0,s.id.length):o.bytes===Array?Array.prototype.slice.call(s.id):s.id,o.oneofs&&(a._id="id")),s.addrs&&s.addrs.length){a.addrs=[];for(var c=0;c<s.addrs.length;++c)a.addrs[c]=o.bytes===String?We.base64.encode(s.addrs[c],0,s.addrs[c].length):o.bytes===Array?Array.prototype.slice.call(s.addrs[c]):s.addrs[c]}return s.connection!=null&&s.hasOwnProperty("connection")&&(a.connection=o.enums===String?ni.Message.ConnectionType[s.connection]:s.connection,o.oneofs&&(a._connection="connection")),a},r.prototype.toJSON=function(){return this.constructor.toObject(this,Il.util.toJSONOptions)},r}(),t}();Z0e.exports=ni});var jc=v((zOt,ipe)=>{l();"use strict";var EGe=it(),{Multiaddr:SGe}=rt(),{Record:xGe}=bd(),R7=J0e(),AGe=R7.Message.MessageType,epe=R7.Message.ConnectionType,Q1=class{constructor(e,r,i){if(r&&!(r instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=e,this.key=r,this._clusterLevelRaw=i,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){let e=this._clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this._clusterLevelRaw=e}serialize(){let e={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(tpe),providerPeers:this.providerPeers.map(tpe),record:void 0};return this.record&&(this.record instanceof Uint8Array?e.record=this.record:e.record=this.record.serialize()),R7.Message.encode(e).finish()}static deserialize(e){let r=R7.Message.decode(e),i=new Q1(r.type||0,r.key||Uint8Array.from([]),r.clusterLevelRaw||0);return i.closerPeers=r.closerPeers.map(rpe),i.providerPeers=r.providerPeers.map(rpe),r.record&&r.record.length&&(i.record=xGe.deserialize(r.record)),i}};Q1.TYPES=AGe;Q1.CONNECTION_TYPES=epe;function tpe(t){return{id:t.id.id,addrs:(t.multiaddrs||[]).map(r=>r.bytes),connection:epe.CONNECTED}}function rpe(t){return{id:new EGe(t.id),multiaddrs:(t.addrs||[]).map(e=>new SGe(e))}}ipe.exports=Q1});var ope=v((HOt,spe)=>{l();"use strict";var{Record:IGe}=bd(),TGe=Sa(),npe=jc(),pC=Ti();spe.exports=t=>{let e=pC.logger(t.peerId,"rpc:get-value");async function r(i,n){let s=n.key;if(e("key: %b",s),!s||s.length===0)throw TGe(new Error("Invalid key"),"ERR_INVALID_KEY");let o=new npe(npe.TYPES.GET_VALUE,s,n.clusterLevel);if(pC.isPublicKeyKey(s)){e("is public key");let u=pC.fromPublicKeyKey(s),f;if(t._isSelf(u))f=t.peerId;else{let d=t.peerStore.get(u);f=d&&d.id}if(f&&f.pubKey)return e("returning found public key"),o.record=new IGe(s,f.pubKey.bytes),o}let[a,c]=await Promise.all([t._checkLocalDatastore(s),t._betterPeersToQuery(n,i)]);return a&&(e("got record"),o.record=a),c.length>0&&(e("got closer %s",c.length),o.closerPeers=c),o}return r}});var upe=v(($Ot,cpe)=>{l();"use strict";var ape=Ti(),RGe=Sa();cpe.exports=t=>{let e=ape.logger(t.peerId,"rpc:put-value");async function r(i,n){let s=n.key;e("key: %b",s);let o=n.record;if(!o){let c=`Empty record from: ${i.toB58String()}`;throw e.error(c),RGe(new Error(c),"ERR_EMPTY_RECORD")}await t._verifyRecordLocally(o),o.timeReceived=new Date;let a=ape.bufferToKey(o.key);return await t.datastore.put(a,o.serialize()),t.onPut(o,i),n}return r}});var lpe=v((GOt,fpe)=>{l();"use strict";var{equals:PGe}=(wi(),vn),CGe=jc(),OGe=Ti();fpe.exports=t=>{let e=OGe.logger(t.peerId,"rpc:find-node");async function r(i,n){e("start");let s;PGe(n.key,t.peerId.id)?s=[{id:t.peerId,multiaddrs:t.libp2p.multiaddrs}]:s=await t._betterPeersToQuery(n,i);let o=new CGe(n.type,new Uint8Array(0),n.clusterLevel);return s.length>0?o.closerPeers=s:e("handle FindNode %s: could not find anything",i.toB58String()),o}return r}});var ppe=v((WOt,hpe)=>{l();"use strict";var{CID:kGe}=(Te(),af),dpe=Sa(),DGe=Ti();hpe.exports=t=>{let e=DGe.logger(t.peerId,"rpc:add-provider");async function r(i,n){if(e("start"),!n.key||n.key.length===0)throw dpe(new Error("Missing key"),"ERR_MISSING_KEY");let s;try{s=kGe.decode(n.key)}catch(o){let a=`Invalid CID: ${o.message}`;throw dpe(new Error(a),"ERR_INVALID_CID")}return n.providerPeers.forEach(o=>{if(!o.id.isEqual(i)){e("invalid provider peer %s from %s",o.id.toB58String(),i.toB58String());return}if(o.multiaddrs.length<1){e("no valid addresses for provider %s. Ignore",i.toB58String());return}if(e("received provider %s for %s (addrs %s)",i.toB58String(),s.toString(),o.multiaddrs.map(a=>a.toString())),!t._isSelf(o.id))return t.peerStore.addressBook.add(o.id,o.multiaddrs),t.providers.addProvider(s,o.id)}),t.providers.addProvider(s,i)}return r}});var mpe=v((YOt,gpe)=>{l();"use strict";var{CID:BGe}=(Te(),af),NGe=Sa(),MGe=jc(),ype=Ti();gpe.exports=t=>{let e=ype.logger(t.peerId,"rpc:get-providers");async function r(i,n){let s;try{s=BGe.decode(n.key)}catch(p){throw NGe(new Error(`Invalid CID: ${p.message}`),"ERR_INVALID_CID")}e("%s",s.toString());let o=ype.bufferToKey(s.bytes),[a,c,u]=await Promise.all([t.datastore.has(o),t.providers.getProviders(s),t._betterPeersToQuery(n,i)]),f=c.map(p=>({id:p,multiaddrs:[]})),d=u.map(p=>({id:p.id,multiaddrs:[]}));a&&f.push({id:t.peerId,multiaddrs:[]});let h=new MGe(n.type,n.key,n.clusterLevel);return f.length>0&&(h.providerPeers=f),d.length>0&&(h.closerPeers=d),e("got %s providers %s closerPeers",f.length,d.length),h}return r}});var vpe=v((XOt,bpe)=>{l();"use strict";var LGe=Ti();bpe.exports=t=>{let e=LGe.logger(t.peerId,"rpc:ping");function r(i,n){return e("from %s",i.toB58String()),n}return r}});var _pe=v((QOt,wpe)=>{l();"use strict";var Z1=jc().TYPES;wpe.exports=t=>{let e={[Z1.GET_VALUE]:ope()(t),[Z1.PUT_VALUE]:upe()(t),[Z1.FIND_NODE]:lpe()(t),[Z1.ADD_PROVIDER]:ppe()(t),[Z1.GET_PROVIDERS]:mpe()(t),[Z1.PING]:vpe()(t)};function r(i){return e[i]}return r}});var xpe=v((ZOt,Spe)=>{l();"use strict";var{pipe:qGe}=Nr(),Epe=ga(),jGe=jc(),UGe=_pe(),FGe=Ti();Spe.exports=t=>{let e=FGe.logger(t.peerId,"rpc"),r=UGe(t);async function i(s,o){let a=r(o.type);try{await t._add(s)}catch(c){e.error("Failed to update the kbucket store",c)}if(!a){e.error(`no handler found for message type: ${o.type}`);return}return a(s,o)}async function n({stream:s,connection:o}){let a=o.remotePeer;try{await t._add(a)}catch(u){e.error(u)}let c=a.toB58String();e("from: %s",c),await qGe(s.source,Epe.decode(),u=>async function*(){for await(let f of u){let d=jGe.deserialize(f.slice()),h=await i(a,d);h&&(yield h.serialize())}}(),Epe.encode(),s.sink)}return n}});var Rpe=v((JOt,Tpe)=>{l();"use strict";var P7=Sa(),{pipe:Ape}=Nr(),yC=ga(),KGe=Y1(),{consume:VGe}=s3(),zGe=Od(),HGe=K8(),$Ge=xpe(),GGe=Sh(),WGe=jc(),YGe=Ti(),Ipe=class{constructor(e){this.dht=e,this.readMessageTimeout=GGe.READ_MESSAGE_TIMEOUT,this._log=YGe.logger(this.dht.peerId,"net"),this._rpc=$Ge(this.dht),this._onPeerConnected=this._onPeerConnected.bind(this),this._running=!1}start(){if(this._running)return;if(!this.dht.isStarted)throw P7(new Error("Can not start network"),"ERR_CANNOT_START_NETWORK");this._running=!0,this.dht._clientMode===!1&&this.dht.registrar.handle(this.dht.protocol,this._rpc);let e=new HGe({multicodecs:[this.dht.protocol],handlers:{onConnect:this._onPeerConnected,onDisconnect:()=>{}}});this._registrarId=this.dht.registrar.register(e)}stop(){!this.dht.isStarted&&!this.isStarted||(this._running=!1,this._registrarId&&this.dht.registrar.unregister(this._registrarId))}get isStarted(){return this._running}get isConnected(){return this.dht.isStarted&&this.isStarted}async _onPeerConnected(e){await this.dht._add(e),this._log("added to the routing table: %s",e.toB58String())}async sendRequest(e,r){if(!this.isConnected)throw P7(new Error("Network is offline"),"ERR_NETWORK_OFFLINE");let i=e.toB58String();this._log("sending to: %s",i);let n=this.dht.registrar.connectionManager.get(e);n||(n=await this.dht.dialer.connectToPeer(e));let{stream:s}=await n.newStream(this.dht.protocol);return this._writeReadMessage(s,r.serialize())}async sendMessage(e,r){if(!this.isConnected)throw P7(new Error("Network is offline"),"ERR_NETWORK_OFFLINE");let i=e.toB58String();this._log("sending to: %s",i);let n=this.dht.registrar.connectionManager.get(e);n||(n=await this.dht.dialer.connectToPeer(e));let{stream:s}=await n.newStream(this.dht.protocol);return this._writeMessage(s,r.serialize())}async _writeReadMessage(e,r){return KGe(XGe(e,r),this.readMessageTimeout)}_writeMessage(e,r){return Ape([r],yC.encode(),e,VGe)}};async function XGe(t,e){let r=await Ape([e],yC.encode(),t,yC.decode(),async i=>{let n=await zGe(i);if(n)return n.slice()});if(r.length===0)throw P7(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED");return WGe.deserialize(r)}Tpe.exports=Ipe});var Bpe=v((ekt,Dpe)=>{l();"use strict";var Ppe=Ti(),QGe=uC(),{equals:ZGe}=(wi(),vn),{compare:Cpe}=(B5(),XA),{xor:Ope}=(n3(),i3),kpe=class{constructor(e,r){this.originDhtKey=e,this.capacity=r,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(e=>e.peerId)}async add(e){if(this.peerDistances.find(n=>ZGe(n.peerId.id,e.id)))return;let r=await Ppe.convertPeerId(e),i={peerId:e,distance:Ope(this.originDhtKey,r)};this.peerDistances.push(i),this.peerDistances.sort((n,s)=>Cpe(n.distance,s.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(e){if(!e.length)return!1;if(!this.length)return!0;let r=await QGe(e,n=>Ppe.convertPeerId(n)),i=this.peerDistances[this.peerDistances.length-1].distance;for(let n of r){let s=Ope(this.originDhtKey,n);if(Cpe(s,i)<0)return!0}return!1}};Dpe.exports=kpe});var Mpe=v((gC,Npe)=>{l();(function(){var t,e,r,i,n,s,o,a,c,u,f,d,h,p,y;r=Math.floor,u=Math.min,e=function(m,w){return m<w?-1:m>w?1:0},c=function(m,w,b,S,I){var j;if(b==null&&(b=0),I==null&&(I=e),b<0)throw new Error("lo must be non-negative");for(S==null&&(S=m.length);b<S;)j=r((b+S)/2),I(w,m[j])<0?S=j:b=j+1;return[].splice.apply(m,[b,b-b].concat(w)),w},s=function(m,w,b){return b==null&&(b=e),m.push(w),p(m,0,m.length-1,b)},n=function(m,w){var b,S;return w==null&&(w=e),b=m.pop(),m.length?(S=m[0],m[0]=b,y(m,0,w)):S=b,S},a=function(m,w,b){var S;return b==null&&(b=e),S=m[0],m[0]=w,y(m,0,b),S},o=function(m,w,b){var S;return b==null&&(b=e),m.length&&b(m[0],w)<0&&(S=[m[0],w],w=S[0],m[0]=S[1],y(m,0,b)),w},i=function(m,w){var b,S,I,j,B,C,z,W;for(w==null&&(w=e),C=function(){W=[];for(var X=0,P=r(m.length/2);0<=P?X<P:X>P;0<=P?X++:X--)W.push(X);return W}.apply(this).reverse(),z=[],S=0,j=C.length;S<j;S++)b=C[S],z.push(y(m,b,w));return z},h=function(m,w,b){var S;if(b==null&&(b=e),S=m.indexOf(w),S!==-1)return p(m,0,S,b),y(m,S,b)},f=function(m,w,b){var S,I,j,B,C;if(b==null&&(b=e),I=m.slice(0,w),!I.length)return I;for(i(I,b),C=m.slice(w),j=0,B=C.length;j<B;j++)S=C[j],o(I,S,b);return I.sort(b).reverse()},d=function(m,w,b){var S,I,j,B,C,z,W,X,P,g;if(b==null&&(b=e),w*10<=m.length){if(B=m.slice(0,w).sort(b),!B.length)return B;for(j=B[B.length-1],X=m.slice(w),C=0,W=X.length;C<W;C++)S=X[C],b(S,j)<0&&(c(B,S,0,null,b),B.pop(),j=B[B.length-1]);return B}for(i(m,b),g=[],I=z=0,P=u(w,m.length);0<=P?z<P:z>P;I=0<=P?++z:--z)g.push(n(m,b));return g},p=function(m,w,b,S){var I,j,B;for(S==null&&(S=e),I=m[b];b>w;){if(B=b-1>>1,j=m[B],S(I,j)<0){m[b]=j,b=B;continue}break}return m[b]=I},y=function(m,w,b){var S,I,j,B,C;for(b==null&&(b=e),I=m.length,C=w,j=m[w],S=2*w+1;S<I;)B=S+1,B<I&&!(b(m[S],m[B])<0)&&(S=B),m[w]=m[S],w=S,S=2*w+1;return m[w]=j,p(m,C,w,b)},t=function(){m.push=s,m.pop=n,m.replace=a,m.pushpop=o,m.heapify=i,m.updateItem=h,m.nlargest=f,m.nsmallest=d;function m(w){this.cmp=w??e,this.nodes=[]}return m.prototype.push=function(w){return s(this.nodes,w,this.cmp)},m.prototype.pop=function(){return n(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(w){return this.nodes.indexOf(w)!==-1},m.prototype.replace=function(w){return a(this.nodes,w,this.cmp)},m.prototype.pushpop=function(w){return o(this.nodes,w,this.cmp)},m.prototype.heapify=function(){return i(this.nodes,this.cmp)},m.prototype.updateItem=function(w){return h(this.nodes,w,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var w;return w=new m,w.nodes=this.nodes.slice(0),w},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,w){return typeof define=="function"&&define.amd?define([],w):typeof gC=="object"?Npe.exports=w():m.Heap=w()}(this,function(){return t})}).call(gC)});var qpe=v((tkt,Lpe)=>{l();Lpe.exports=Mpe()});var Upe=v((rkt,jpe)=>{l();"use strict";var JGe=qpe(),{xor:eWe}=(n3(),i3),tWe=Ee(),C7=Ti(),mC=tWe("libp2p:dht:peer-queue"),o3=class{static async fromPeerId(e){let r=await C7.convertPeerId(e);return new o3(r)}static async fromKey(e){let r=await C7.convertBuffer(e);return new o3(r)}constructor(e){mC("create: %b",e),this.from=e,this.heap=new JGe(C7.xorCompare)}async enqueue(e){mC("enqueue %s",e.toB58String());let r=await C7.convertPeerId(e),i={id:e,distance:eWe(this.from,r)};this.heap.push(i)}dequeue(){let e=this.heap.pop();return mC("dequeue %s",e.id.toB58String()),e.id}get length(){return this.heap.size()}};jpe.exports=o3});var Vpe=v((ikt,Kpe)=>{l();"use strict";var rWe=Upe(),iWe=Ti(),nWe=3e4,Fpe=class{constructor(e,r){if(this.run=e,this.queryFunc=iWe.withTimeout(r,nWe),!this.queryFunc)throw new Error("Path requires a `queryFn` to be specified");if(typeof this.queryFunc!="function")throw new Error("Path expected `queryFn` to be a function. Got "+typeof this.queryFunc);this.initialPeers=[],this.peersToQuery=null,this.res=null}addInitialPeer(e){this.initialPeers.push(e)}async execute(){let e=await rWe.fromKey(this.run.query.key);this.peersToQuery=e,await Promise.all(this.initialPeers.map(r=>this.addPeerToQuery(r))),await this.run.workerQueue(this)}async addPeerToQuery(e){this.run.query.dht._isSelf(e)||this.run.peersSeen.has(e.toB58String())||this.peersToQuery&&await this.peersToQuery.enqueue(e)}};Kpe.exports=Fpe});var $pe=v((nkt,Hpe)=>{l();"use strict";var{default:sWe}=Fa(),zpe=class{constructor(e,r,i,n){this.dht=e,this.run=r,this.path=i,this.log=n,this.concurrency=this.dht.concurrency,this.queue=this.setupQueue(),this.execution=null,this.queuedPeerIds=new Set}setupQueue(){let e=new sWe({concurrency:this.concurrency});return e.on("idle",()=>{this.path.peersToQuery&&!this.path.peersToQuery.length&&(this.log("queue:drain"),this.stop())}),e.on("next",()=>{!this.running||e.pending<this.concurrency&&this.fill()}),e}stop(e){!this.running||(this.running=!1,this.queue.clear(),this.log("worker:stop, %d workers still running",this.run.workers.filter(r=>r.running).length),this.execution&&(e?this.execution.reject(e):this.execution.resolve()))}async execute(){this.running=!0,this.execution=null;let e=new Promise((r,i)=>{this.execution={resolve:r,reject:i}});this.fill(),await e}fill(){if(!!this.path.peersToQuery)for(;this.queue.pending+this.queue.size<this.concurrency&&this.path.peersToQuery.length>0;){let e=this.path.peersToQuery.dequeue();this.queuedPeerIds.add(e),this.queue.add(()=>this.processNext(e).catch(r=>{this.log.error("queue",r),this.stop(r)}).finally(()=>{this.queuedPeerIds.delete(e)}))}}async processNext(e){if(!this.running||this.run.peersSeen.has(e.toB58String()))return;let r,i;try{r=await this.run.continueQuerying(this)}catch(o){i=o}if(!this.running)return;if(i)throw i;if(!r){this.stop();return}if(this.run.peersSeen.has(e.toB58String()))return;this.run.peersSeen.add(e.toB58String()),this.log("queue:work");let n,s;try{n=await this.execQuery(e)}catch(o){s=o}if(!!this.running){if(this.log("queue:work:done",s,n),s)throw s;if(n&&n.queryComplete){this.log("query:complete"),this.run.stop();return}n&&n.pathComplete&&this.stop()}}async execQuery(e){let r,i;try{r=await this.path.queryFunc(e)}catch(n){i=n}if(!!this.running){if(i){this.run.errors.push(i);return}if(this.run.peersQueried&&await this.run.peersQueried.add(e),!!r){if(r.pathComplete||r.queryComplete)return this.path.res=r,{pathComplete:r.pathComplete,queryComplete:r.queryComplete};if(r.closerPeers&&r.closerPeers.length>0){let n=async s=>{this.dht._isSelf(s.id)||(this.dht._peerDiscovered(s.id,s.multiaddrs),await this.path.addPeerToQuery(s.id))};await Promise.all(r.closerPeers.map(n))}}}}};Hpe.exports=zpe});var Ype=v((skt,Wpe)=>{l();"use strict";var oWe=Bpe(),aWe=vr(),cWe=Vpe(),uWe=$pe(),fWe=Ti(),Gpe=class extends aWe{constructor(e){super();this.query=e,this.running=!1,this.workers=[],this.peersSeen=new Set,this.errors=[],this.peersQueried=null}stop(){if(!!this.running){this.running=!1;for(let e of this.workers)e.stop()}}async execute(e){let r=[],i=Math.min(this.query.dht.disjointPaths,e.length);for(let s=0;s<i;s++)r.push(new cWe(this,this.query.makePath(s,i)));e.forEach((s,o)=>{r[o%i].addInitialPeer(s)}),await this.executePaths(r);let n={finalSet:new Set(this.peersQueried&&this.peersQueried.peers),paths:[]};for(let s of r)s.res&&(s.res.pathComplete||s.res.queryComplete)&&(s.res.success=!0,n.paths.push(s.res));return n}async executePaths(e){this.running=!0,this.emit("start");try{await Promise.all(e.map(r=>r.execute()))}finally{this.stop(),this.emit("complete")}if(this.errors.length===this.peersSeen.size)throw this.errors[0]}async workerQueue(e){await this.init(),await this.startWorker(e)}async startWorker(e){let r=new uWe(this.query.dht,this,e,this.query._log);this.workers.push(r),await r.execute()}async init(){if(!this.peersQueried){if(this.peersQueriedPromise){await this.peersQueriedPromise;return}this.peersQueriedPromise=(async()=>{let e=await fWe.convertBuffer(this.query.key);this.peersQueried=new oWe(e,this.query.dht.kBucketSize)})(),await this.peersQueriedPromise,delete this.peersQueriedPromise}}async continueQuerying(e){if(this.peersQueried&&this.peersQueried.length<this.peersQueried.capacity)return!0;let r=Array.from(e.queuedPeerIds);return!!(this.peersQueried&&await this.peersQueried.anyCloser(r))}};Wpe.exports=Gpe});var O7=v((okt,Qpe)=>{l();"use strict";var{base58btc:lWe}=(li(),Fs),dWe=Ti(),hWe=Ype(),Xpe=class{constructor(e,r,i){this.dht=e,this.key=r,this.makePath=i,this._log=dWe.logger(this.dht.peerId,"query:"+lWe.baseEncode(r)),this.running=!1,this._onStart=this._onStart.bind(this),this._onComplete=this._onComplete.bind(this)}async run(e){return this.dht._queryManager.running?e.length===0?(this._log.error("Running query with no peers"),{finalSet:new Set,paths:[]}):(this._run=new hWe(this),this._log(`query running with K=${this.dht.kBucketSize}, A=${this.dht.concurrency}, D=${Math.min(this.dht.disjointPaths,e.length)}`),this._run.once("start",this._onStart),this._run.once("complete",this._onComplete),this._run.execute(e)):(this._log.error("Attempt to run query after shutdown"),{finalSet:new Set,paths:[]})}_onStart(){this.running=!0,this._startTime=Date.now(),this._log("query:start"),this.dht._queryManager.queryStarted(this)}_onComplete(){this.stop()}stop(){this._log(`query:done in ${Date.now()-(this._startTime||0)}ms`),this._run&&this._log(`${this._run.errors.length} of ${this._run.peersSeen.size} peers errored (${this._run.errors.length/this._run.peersSeen.size*100}% fail rate)`),!!this.running&&(this.running=!1,this._run&&(this._run.removeListener("start",this._onStart),this._run.removeListener("complete",this._onComplete),this._run.stop()),this.dht._queryManager.queryCompleted(this))}};Qpe.exports=Xpe});var t1e=v((akt,e1e)=>{l();"use strict";var bC=Sa(),pWe=Y1(),{equals:yWe}=(wi(),vn),{toString:Zpe}=(tt(),pr),Jpe=bd(),vC=Sh(),gWe=O7(),xh=Ti(),mWe=Jpe.Record;e1e.exports=t=>{let e=async(n,s)=>t.datastore.put(xh.bufferToKey(n),s),r=async n=>{t._log(`getLocal ${Zpe(n,"base32")}`);let s=await t.datastore.get(xh.bufferToKey(n));t._log(`found ${Zpe(n,"base32")} in local datastore`);let o=mWe.deserialize(s);return await t._verifyRecordLocally(o),o},i=async(n,s,o)=>{let a=await xh.createPutRecord(n,o);return Promise.all(s.map(async c=>{if(!yWe(c.val,o)){if(t._isSelf(c.from)){try{await t._putLocal(n,a)}catch(u){t._log.error("Failed error correcting self",u)}return}try{await t._putValueToPeer(n,a,c.from)}catch(u){t._log.error("Failed error correcting entry",u)}}}))};return{async _putLocal(n,s){return e(n,s)},async put(n,s,o={}){t._log("PutValue %b",n);let a=await xh.createPutRecord(n,s);await e(n,a);let c=0,u=0;await xh.mapParallel(t.getClosestPeers(n,{shallow:!0}),async d=>{try{c+=1,await t._putValueToPeer(n,a,d),u+=1}catch(h){t._log.error("Failed to put to peer (%b): %s",d.id,h)}});let f=o.minPeers||c;if(f>u){let d=bC(new Error(`Failed to put value to enough peers: ${u}/${f}`),"ERR_NOT_ENOUGH_PUT_PEERS");throw t._log.error(d),d}},async get(n,s={}){s.timeout=s.timeout||vC.minute,t._log("_get %b",n);let o=await t.getMany(n,vC.GET_MANY_RECORD_COUNT,s),a=o.map(f=>f.val),c=0;try{c=Jpe.selection.bestRecord(t.selectors,n,a)}catch(f){if(f.code!=="ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")throw f}let u=a[c];if(t._log("GetValue %b %s",n,u),!u)throw bC(new Error("best value was not found"),"ERR_NOT_FOUND");return await i(n,o,u),u},async getMany(n,s,o={}){o.timeout=o.timeout||vC.minute,t._log("getMany %b (%s)",n,s);let a=[],c;try{c=await r(n)}catch(y){if(s===0)throw y}if(c&&a.push({val:c.value,from:t.peerId}),a.length>=s)return a;let u=await xh.convertBuffer(n),f=t.routingTable.closestPeers(u,t.kBucketSize);if(t._log("peers in rt: %d",f.length),f.length===0){let y="Failed to lookup key! No peers from routing table!";if(t._log.error(y),a.length===0)throw bC(new Error(y),"ERR_NO_PEERS_IN_ROUTING_TABLE");return a}let d=a.length;function h(y,m){let w=xh.pathSize(s-d,m),b=0;async function S(I){let j,B,C;try{let W=await t._getValueOrPeers(I,n);j=W.record,B=W.peers}catch(W){if(W.code!=="ERR_INVALID_RECORD")throw W;C=W}let z={closerPeers:B};return j&&j.value?(a.push({val:j.value,from:I}),b++):C&&(a.push({err:C,from:I}),b++),b>=w&&(z.pathComplete=!0),z}return S}let p=new gWe(t,n,h);try{await pWe(p.run(f),o.timeout)}catch(y){if(a.length===0)throw y}finally{p.stop()}return a}}}});var n1e=v((ckt,i1e)=>{l();"use strict";var r1e=class{constructor(){this.list=[]}push(e){return this.has(e.id)?!1:(this.list.push(e),!0)}has(e){let r=this.list.find(i=>i.id.equals(e));return Boolean(r)}toArray(){return this.list.slice()}pop(){return this.list.pop()}get length(){return this.list.length}};i1e.exports=r1e});var a1e=v((ukt,o1e)=>{l();"use strict";var bWe=n1e(),s1e=class extends bWe{constructor(e){super();this.limit=e}push(e){return this.length<this.limit?super.push(e):!1}};o1e.exports=s1e});var h1e=v((fkt,d1e)=>{l();"use strict";var vWe=Sa(),c1e=Y1(),u1e=Sh(),f1e=a1e(),k7=jc(),wWe=O7(),l1e=Ti();d1e.exports=t=>{let e=async(r,i)=>{let n=new k7(k7.TYPES.GET_PROVIDERS,i.bytes,0);return t.network.sendRequest(r,n)};return{async provide(r){t._log(`provide: ${r}`);let i=[];await t.providers.addProvider(r,t.peerId);let n=t.libp2p?t.libp2p.multiaddrs:[],s=new k7(k7.TYPES.ADD_PROVIDER,r.bytes,0);s.providerPeers=[{id:t.peerId,multiaddrs:n}];async function o(a){t._log(`putProvider ${r} to ${a.toB58String()}`);try{await t.network.sendMessage(a,s)}catch(c){i.push(c)}}if(await l1e.mapParallel(t.getClosestPeers(r.bytes),o),i.length)throw vWe(new Error(`Failed to provide to ${i.length} of ${t.kBucketSize} peers`),"ERR_SOME_PROVIDES_FAILED",{errors:i})},async*findProviders(r,i={timeout:6e4,maxNumProviders:5}){let n=i.timeout||u1e.minute,s=i.maxNumProviders||u1e.K;t._log(`findProviders ${r}`);let o=new f1e(s);if((await t.providers.getProviders(r)).forEach(h=>{let p=t.peerStore.get(h);p?o.push({id:p.id,multiaddrs:p.addresses.map(y=>y.multiaddr)}):o.push({id:h,multiaddrs:[]})}),o.length>=s){for(let h of o.toArray())yield h;return}let c=[];function u(h,p){let y=l1e.pathSize(s-o.length,p),m=new f1e(y);c.push(m);async function w(b){let S=await e(b,r),I=S.providerPeers;return t._log(`Found ${I.length} provider entries for ${r}`),I.forEach(j=>{m.push({...j})}),m.length>=y?{pathComplete:!0}:{closerPeers:S.closerPeers}}return w}let f=new wWe(t,r.bytes,u),d=t.routingTable.closestPeers(r.bytes,t.kBucketSize);try{await c1e(f.run(d),n)}catch(h){if(h.name!==c1e.TimeoutError.name)throw h}finally{f.stop()}c.forEach(h=>{h.toArray().forEach(p=>{o.push(p)})});for(let h of o.toArray())yield h}}}});var g1e=v((lkt,y1e)=>{l();"use strict";var a3=Sa(),_We=Y1(),wC=it(),EWe=uc(),{toString:SWe}=(tt(),pr),xWe=Sh(),D7=jc(),p1e=O7(),c3=Ti();y1e.exports=t=>{let e=async s=>{t._log(`findPeerLocal ${s.toB58String()}`);let o=await t.routingTable.find(s),a=o&&t.peerStore.get(o);if(a)return{id:a.id,multiaddrs:a.addresses.map(c=>c.multiaddr)}},r=async(s,o)=>{let a=new D7(D7.TYPES.GET_VALUE,o,0);return t.network.sendRequest(s,a)},i=async(s,o)=>(t._log(`closerPeersSingle ${SWe(s,"base32")} from ${o.toB58String()}`),(await t.peerRouting._findPeerSingle(o,new wC(s))).closerPeers.filter(c=>!t._isSelf(c.id)).map(c=>(t.peerStore.addressBook.add(c.id,c.multiaddrs),c))),n=async s=>{let o=c3.keyForPublicKey(s),a=await r(s,o);if(!a.record||!a.record.value)throw a3(new Error(`Node not responding with its public key: ${s.toB58String()}`),"ERR_INVALID_RECORD");let c=await wC.createFromPubKey(a.record.value);if(!c.equals(s))throw a3(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");return c.pubKey};return{async _findPeerSingle(s,o){t._log("findPeerSingle %s",s.toB58String());let a=new D7(D7.TYPES.FIND_NODE,o.id,0);return t.network.sendRequest(s,a)},async findPeer(s,o={timeout:6e4}){o.timeout=o.timeout||xWe.minute,t._log("findPeer %s",s.toB58String());let a=await e(s);if(a!=null)return t._log("found local"),a;let c=await c3.convertPeerId(s),u=t.routingTable.closestPeers(c,t.kBucketSize);if(u.length===0)throw a3(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED");if(u.find(m=>m.isEqual(s))){let m=t.peerStore.get(s);if(m)return t._log("found in peerStore"),{id:m.id,multiaddrs:m.addresses.map(w=>w.multiaddr)}}let d=new p1e(t,s.id,()=>async w=>{let b=await this._findPeerSingle(w,s),S=b.closerPeers.find(I=>I.id.isEqual(s));return S?{peer:S,queryComplete:!0}:{closerPeers:b.closerPeers}}),h;try{h=await _We(d.run(u),o.timeout)}finally{d.stop()}let p=!1;if(h.paths.forEach(m=>{m.success&&m.peer&&(p=!0,t.peerStore.addressBook.add(m.peer.id,m.peer.multiaddrs))}),t._log("findPeer %s: %s",s.toB58String(),p),!p)throw a3(new Error("No peer found"),"ERR_NOT_FOUND");let y=t.peerStore.get(s);if(!y)throw a3(new Error("No peer found in peer store"),"ERR_NOT_FOUND");return{id:y.id,multiaddrs:y.addresses.map(m=>m.multiaddr)}},async*getClosestPeers(s,o={shallow:!1}){t._log("getClosestPeers to %b",s);let a=await c3.convertBuffer(s),c=t.routingTable.closestPeers(a,t.kBucketSize),f=await new p1e(t,s,()=>async h=>({closerPeers:await i(s,h),pathComplete:o.shallow?!0:void 0})).run(c);if(!f||!f.finalSet)return[];let d=await c3.sortClosestPeers(Array.from(f.finalSet),a);for(let h of d.slice(0,t.kBucketSize))yield h},async getPublicKey(s){t._log("getPublicKey %s",s.toB58String());let o=t.peerStore.get(s);if(o&&o.id.pubKey)return t._log("getPublicKey: found local copy"),o.id.pubKey;let a;try{a=await n(s)}catch(f){let d=c3.keyForPublicKey(s),h=await t.get(d);a=EWe.keys.unmarshalPublicKey(h)}let c=new wC(s.id,void 0,a),u=(o&&o.addresses||[]).map(f=>f.multiaddr);return t.peerStore.addressBook.add(c,u),t.peerStore.keyBook.set(c,a),a}}}});var E1e=v((dkt,_1e)=>{l();"use strict";var AWe=x0(),m1e=Ss(),IWe=it(),{Key:TWe}=(Br(),wy),{default:RWe}=Fa(),u3=Sh(),f3=Ti(),b1e=class{constructor(e,r,i){this.datastore=e,this._log=f3.logger(r,"providers"),this.cleanupInterval=u3.PROVIDERS_CLEANUP_INTERVAL,this.provideValidity=u3.PROVIDERS_VALIDITY,this.lruCacheSize=i||u3.PROVIDERS_LRU_CACHE_SIZE,this.providers=AWe(this.lruCacheSize),this.syncQueue=new RWe({concurrency:1})}start(){this._started||(this._started=!0,this._cleaner=setInterval(()=>this._cleanup(),this.cleanupInterval))}stop(){this._started=!1,this._cleaner&&(clearInterval(this._cleaner),this._cleaner=null)}_cleanup(){return this.syncQueue.add(async()=>{this._log("start cleanup");let e=Date.now(),r=0,i=0,n=new Map,s=this.datastore.batch(),o=this.datastore.query({prefix:u3.PROVIDERS_KEY_PREFIX});for await(let a of o)try{let{cid:c,peerId:u}=v1e(a.key),f=w1e(a.value),d=Date.now(),h=d-f,p=h>this.provideValidity;if(this._log("comparing: %d - %d = %d > %d %s",d,f,h,this.provideValidity,p?"(expired)":""),p){i++,s.delete(a.key);let y=n.get(c)||new Set;y.add(u),n.set(c,y)}r++}catch(c){this._log.error(c.message)}this._log("deleting %d / %d entries",i,r),n.size&&await s.commit();for(let[a,c]of n){let u=l3(a),f=this.providers.get(u);if(f){for(let d of c)f.delete(d);f.size===0?this.providers.remove(u):this.providers.set(u,f)}}this._log("Cleanup successful (%dms)",Date.now()-e)})}async _getProvidersMap(e){let r=l3(e),i=this.providers.get(r);return i||(i=await CWe(this.datastore,e),this.providers.set(r,i)),i}async addProvider(e,r){return this.syncQueue.add(async()=>{this._log("addProvider %s",e.toString());let i=await this._getProvidersMap(e);this._log("loaded %s provs",i.size);let n=new Date;i.set(f3.encodeBase32(r.id),n);let s=l3(e);return this.providers.set(s,i),PWe(this.datastore,e,r,n)})}async getProviders(e){return this.syncQueue.add(async()=>(this._log("getProviders %s",e.toString()),[...(await this._getProvidersMap(e)).keys()].map(i=>new IWe(f3.decodeBase32(i)))))}};function l3(t){return t=typeof t=="string"?t:f3.encodeBase32(t.bytes),u3.PROVIDERS_KEY_PREFIX+t}async function PWe(t,e,r,i){let n=[l3(e),"/",f3.encodeBase32(r.id)].join(""),s=new TWe(n),o=Uint8Array.from(m1e.encode(i.getTime()));return t.put(s,o)}function v1e(t){let e=t.toString().split("/");if(e.length!==4)throw new Error("incorrectly formatted provider entry key in datastore: "+t);return{cid:e[2],peerId:e[3]}}async function CWe(t,e){let r=new Map,i=t.query({prefix:l3(e)});for await(let n of i){let{peerId:s}=v1e(n.key);r.set(s,w1e(n.value))}return r}function w1e(t){return m1e.decode(t)}_1e.exports=b1e});var A1e=v((hkt,x1e)=>{l();"use strict";var S1e=class{constructor(){this.queries=new Set,this.running=!1}queryStarted(e){this.queries.add(e)}queryCompleted(e){this.queries.delete(e)}start(){this.running=!0}stop(){this.running=!1;for(let e of this.queries)e.stop();this.queries.clear()}};x1e.exports=S1e});var R1e=v((pkt,SC)=>{l();"use strict";var{EventEmitter:OWe}=vr(),B7=Sa(),d3=bd(),{MemoryDatastore:kWe}=(ES(),pz),{equals:I1e}=(wi(),vn),{toString:_C}=(tt(),pr),DWe=Y0e(),J1=Ti(),h3=Sh(),BWe=Rpe(),NWe=t1e(),MWe=h1e(),LWe=g1e(),N7=jc(),qWe=E1e(),jWe=A1e(),EC=d3.Record,T1e=class extends OWe{constructor({libp2p:e,dialer:r,peerId:i,peerStore:n,registrar:s,protocolPrefix:o="/ipfs",forceProtocolLegacy:a=!1,datastore:c=new kWe,kBucketSize:u=h3.K,clientMode:f=!1,concurrency:d=h3.ALPHA,validators:h={},selectors:p={},onPut:y=()=>{},onRemove:m=()=>{}}){super();if(!r)throw new Error("libp2p-kad-dht requires an instance of Dialer");this.libp2p=e,this.dialer=r,this.peerId=i,this.peerStore=n,this.registrar=s,this.protocol=o+(a?"":h3.PROTOCOL_DHT),this.kBucketSize=u,this._clientMode=f,this.concurrency=d,this.disjointPaths=Math.ceil(this.kBucketSize/2),this.routingTable=new DWe(this,{kBucketSize:this.kBucketSize}),this.datastore=c,this.providers=new qWe(this.datastore,this.peerId),this.validators={pk:d3.validator.validators.pk,...h},this.selectors={pk:d3.selection.selectors.pk,...p},this.network=new BWe(this),this._log=J1.logger(this.peerId),this._queryManager=new jWe,this._running=!1,this.contentFetching=NWe(this),this.contentRouting=MWe(this),this.peerRouting=LWe(this),this.onPut=y,this.onRemove=m}get isStarted(){return this._running}start(){return this._running=!0,Promise.all([this.providers.start(),this._queryManager.start(),this.network.start(),this.routingTable.start()])}stop(){return this._running=!1,Promise.all([this.providers.stop(),this._queryManager.stop(),this.network.stop(),this.routingTable.stop()])}async put(e,r,i={}){return this.contentFetching.put(e,r,i)}async get(e,r={}){return this.contentFetching.get(e,r)}async getMany(e,r,i={}){return this.contentFetching.getMany(e,r,i)}async removeLocal(e){this._log(`removeLocal: ${_C(e,"base32")}`);let r=J1.bufferToKey(e);try{await this.datastore.delete(r)}catch(i){if(i.code==="ERR_NOT_FOUND")return;throw i}}async _putLocal(e,r){this._log(`_putLocal: ${_C(e,"base32")}`);let i=J1.bufferToKey(e);await this.datastore.put(i,r)}async provide(e){return this.contentRouting.provide(e)}async*findProviders(e,r={timeout:6e3,maxNumProviders:5}){for await(let i of this.contentRouting.findProviders(e,r))yield i}async findPeer(e,r={timeout:6e4}){return this.peerRouting.findPeer(e,r)}async*getClosestPeers(e,r={shallow:!1}){yield*this.peerRouting.getClosestPeers(e,r)}getPublicKey(e){return this.peerRouting.getPublicKey(e)}_peerDiscovered(e,r){this.emit("peer",{id:e,multiaddrs:r})}async _nearestPeersToQuery(e){let r=await J1.convertBuffer(e.key);return this.routingTable.closestPeers(r,this.kBucketSize).map(n=>{let s=this.peerStore.get(n);return{id:n,multiaddrs:s?s.addresses.map(o=>o.multiaddr):[]}})}async _betterPeersToQuery(e,r){return this._log("betterPeersToQuery"),(await this._nearestPeersToQuery(e)).filter(n=>this._isSelf(n.id)?(this._log.error("trying to return self as closer"),!1):!n.id.isEqual(r))}async _checkLocalDatastore(e){this._log(`checkLocalDatastore: ${_C(e)} %b`,e);let r=J1.bufferToKey(e),i;try{i=await this.datastore.get(r)}catch(s){if(s.code==="ERR_NOT_FOUND")return;throw s}let n=EC.deserialize(i);if(!n)throw B7(new Error("Invalid record"),"ERR_INVALID_RECORD");if(n.timeReceived==null||J1.now()-n.timeReceived.getTime()>h3.MAX_RECORD_AGE){await this.datastore.delete(r),this.onRemove(n);return}return n}async _add(e){await this.routingTable.add(e)}async _verifyRecordLocally(e){this._log("verifyRecordLocally"),await d3.validator.verifyRecord(this.validators,e)}_isSelf(e){return e&&I1e(this.peerId.id,e.id)}async _putValueToPeer(e,r,i){let n=new N7(N7.TYPES.PUT_VALUE,e,0);n.record=EC.deserialize(r);let s=await this.network.sendRequest(i,n);if(s.record&&!I1e(s.record.value,EC.deserialize(r).value))throw B7(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")}async _getValueOrPeers(e,r){let i=await this._getValueSingle(e,r),n=i.closerPeers,s=i.record;if(s){try{await this._verifyRecordOnline(s)}catch(o){let a="invalid record received, discarded";throw this._log(a),B7(new Error(a),"ERR_INVALID_RECORD")}return{record:s,peers:n}}if(n.length>0)return{peers:n};throw B7(new Error("Not found"),"ERR_NOT_FOUND")}async _getValueSingle(e,r){let i=new N7(N7.TYPES.GET_VALUE,r,0);return this.network.sendRequest(e,i)}async _verifyRecordOnline(e){await d3.validator.verifyRecord(this.validators,e)}};SC.exports=T1e;SC.exports.multicodec="/ipfs"+h3.PROTOCOL_DHT});var F1e=v((xC,U1e)=>{l();"use strict";var UWe=it(),{Multiaddr:FWe}=rt(),KWe=zl(),{EventEmitter:VWe}=vr(),q1e=Ee(),M7=Object.assign(q1e("libp2p:bootstrap"),{error:q1e("libp2p:bootstrap:error")}),j1e=class extends VWe{constructor(e={list:[]}){if(!e.list||!e.list.length)throw new Error("Bootstrap requires a list of peer addresses");super();this._list=e.list,this._interval=e.interval||1e4,this._timer=null}start(){this._timer||(this._timer=setInterval(()=>this._discoverBootstrapPeers(),this._interval),M7("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){!this._timer||this._list.forEach(e=>{if(!KWe.P2P.matches(e))return M7.error("Invalid multiaddr");let r=new FWe(e),i=r.getPeerId();if(!i){M7.error("Invalid bootstrap multiaddr without peer id");return}let n=UWe.createFromB58String(i);try{this.emit("peer",{id:n,multiaddrs:[r]})}catch(s){M7.error("Invalid bootstrap peer id",s)}})}stop(){this._timer&&clearInterval(this._timer),this._timer=null}};xC=U1e.exports=j1e;xC.tag="bootstrap"});var AC=v((vkt,K1e)=>{l();"use strict";var zWe=_r(),HWe=sa(),$We=oo(),GWe=op();function WWe(t,e){return $We(t,r=>(e.addressBook.add(r.id,r.multiaddrs),r))}function YWe(t){let e=new Set;return HWe(t,r=>e.has(r.id.toString())?!1:(e.add(r.id.toString()),!0))}async function*XWe(t,e=1){let r=0;for await(let i of t)r++,yield i;if(r<e)throw zWe(new Error("not found"),"NOT_FOUND")}function QWe(t,e){return e?GWe(t,e):t}K1e.exports={storeAddresses:WWe,uniquePeers:YWe,requirePeers:XWe,maybeLimitSource:QWe}});var IC=v((wkt,V1e)=>{l();"use strict";var e2=new Map,ZWe=()=>`${Date.now()}:${Math.floor(Math.random()*1e6)}`;async function JWe(t,e,r){for(;e2.get(r);){try{await t()}catch(i){setTimeout(()=>{throw i},1);break}if(!e2.get(r))break;await new Promise(i=>{let n=setTimeout(i,e);e2.set(r,n)})}}function eYe(t,e,r){r=r||e;let i=ZWe(),n=setTimeout(()=>{JWe(t,e,i)},r);return e2.set(i,n),i}function tYe(t){let e=e2.get(t);e&&(clearTimeout(e),e2.delete(t))}V1e.exports={setDelayedInterval:eYe,clearDelayedInterval:tYe}});var X1e=v((_kt,Y1e)=>{l();"use strict";var z1e=Ee(),rYe=Object.assign(z1e("libp2p:peer-routing"),{error:z1e("libp2p:peer-routing:err")}),L7=_r(),{storeAddresses:H1e,uniquePeers:iYe,requirePeers:nYe}=AC(),$1e=cp(),{pipe:G1e}=Nr(),sYe=Od(),oYe=fc(),aYe=sa(),{setDelayedInterval:cYe,clearDelayedInterval:uYe}=IC(),W1e=class{constructor(e){this._peerId=e.peerId,this._peerStore=e.peerStore,this._routers=e._modules.peerRouting||[],e._dht&&e._config.dht.enabled&&this._routers.push(e._dht),this._refreshManagerOptions=e._options.peerRouting.refreshManager,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}start(){!this._routers.length||this._timeoutId||!this._refreshManagerOptions.enabled||(this._timeoutId=cYe(this._findClosestPeersTask,this._refreshManagerOptions.interval,this._refreshManagerOptions.bootDelay))}async _findClosestPeersTask(){try{await oYe(this.getClosestPeers(this._peerId.id))}catch(e){rYe.error(e)}}stop(){uYe(this._timeoutId)}async findPeer(e,r){if(!this._routers.length)throw L7(new Error("No peer routers available"),"NO_ROUTERS_AVAILABLE");if(e.toB58String()===this._peerId.toB58String())throw L7(new Error("Should not try to find self"),"ERR_FIND_SELF");let i=await G1e($1e(...this._routers.map(n=>[n.findPeer(e,r)])),n=>aYe(n,Boolean),n=>H1e(n,this._peerStore),n=>sYe(n));if(i)return i;throw L7(new Error("not found"),"NOT_FOUND")}async*getClosestPeers(e,r={timeout:3e4}){if(!this._routers.length)throw L7(new Error("No peer routers available"),"NO_ROUTERS_AVAILABLE");yield*G1e($1e(...this._routers.map(i=>i.getClosestPeers(e,r))),i=>H1e(i,this._peerStore),i=>iYe(i),i=>nYe(i))}};Y1e.exports=W1e});var J1e=v((Ekt,Z1e)=>{l();"use strict";var p3=_r(),{messages:TC,codes:RC}=Ei(),{storeAddresses:fYe,uniquePeers:lYe,requirePeers:dYe,maybeLimitSource:hYe}=AC(),pYe=cp(),{pipe:yYe}=Nr(),Q1e=class{constructor(e){this.libp2p=e,this.routers=e._modules.contentRouting||[],this.dht=e._dht,this.dht&&e._config.dht.enabled&&this.routers.push(this.dht)}async*findProviders(e,r={}){if(!this.routers.length)throw p3(new Error("No content this.routers available"),"NO_ROUTERS_AVAILABLE");yield*yYe(pYe(...this.routers.map(i=>i.findProviders(e,r))),i=>fYe(i,this.libp2p.peerStore),i=>lYe(i),i=>hYe(i,r.maxNumProviders),i=>dYe(i))}async provide(e){if(!this.routers.length)throw p3(new Error("No content routers available"),"NO_ROUTERS_AVAILABLE");await Promise.all(this.routers.map(r=>r.provide(e)))}put(e,r,i){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw p3(new Error(TC.NOT_STARTED_YET),RC.DHT_NOT_STARTED);return this.dht.put(e,r,i)}get(e,r){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw p3(new Error(TC.NOT_STARTED_YET),RC.DHT_NOT_STARTED);return this.dht.get(e,r)}async getMany(e,r,i){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw p3(new Error(TC.NOT_STARTED_YET),RC.DHT_NOT_STARTED);return this.dht.getMany(e,r,i)}};Z1e.exports=Q1e});var PC=v((Skt,i2e)=>{l();"use strict";var gYe=it(),{Multiaddr:e2e}=rt(),t2e=_r(),{codes:r2e}=Ei();function mYe(t){typeof t=="string"&&(t=new e2e(t));let e;if(e2e.isMultiaddr(t)){e=t;let r=t.getPeerId();if(!r)throw t2e(new Error(`${t} does not have a valid peer type`),r2e.ERR_INVALID_MULTIADDR);try{t=gYe.createFromB58String(r)}catch(i){throw t2e(new Error(`${t} is not a valid peer type`),r2e.ERR_INVALID_MULTIADDR)}}return{id:t,multiaddrs:e?[e]:void 0}}i2e.exports=mYe});var o2e=v((xkt,s2e)=>{l();"use strict";s2e.exports=n2e;var bYe=jw(),Tl=n2e.prototype,vYe=new Date%1e9;function wYe(){return(Math.random()*1e9>>>0)+vYe++}function n2e(t){t=t||{},this.id=t.id||wYe(),this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,r,i=this.items.length;i--;)e=this.items[i],r=new Date(e.expires)-new Date,this._lookup[e.key]=e,r>0?this.expire(e.key,r):r<=0&&this.delete(e.key)}Tl.has=function(t){return t in this._lookup};Tl.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value};Tl.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null};Tl.set=function(t,e,r){var i=this._lookup[t],n=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,i?(clearTimeout(i.timeout),this.items.splice(this.items.indexOf(i),1,n)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(n),this.size++),r&&("ttl"in r&&this.expire(t,r.ttl),"meta"in r&&(n.meta=r.meta),r.refresh&&(n.refresh=r.ttl)),this};Tl.delete=function(t){var e=this._lookup[t];return e?(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this):!1};Tl.expire=function(t,e){var r=e||0,i=this._lookup[t];if(!i)return this;if(typeof r=="string"&&(r=bYe(e)),typeof r!="number")throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this};Tl.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this};Tl.toJSON=function(){for(var t=new Array(this.items.length),e,r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}});var c2e=v((Akt,a2e)=>{l();"use strict";var{default:_Ye,Headers:EYe}=b_();function SYe({serverResolver:t,hostname:e,recordType:r}){return`${t}?name=${e}&type=${r}`}function xYe(t){return _Ye(t,{headers:new EYe({accept:"application/dns-json"})})}function AYe(t,e){return`${e}_${t}`}a2e.exports={buildResource:SYe,fetch:xYe,getCacheKey:AYe}});var l2e=v((Ikt,f2e)=>{l();"use strict";var u2e=Ee(),q7=u2e("dns-over-http-resolver");q7.error=u2e("dns-over-http-resolver:error");var IYe=o2e(),Co=c2e(),j7=class{constructor({maxCache:e=100}={}){this._cache=new IYe({max:e}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"]}getServers(){return this._servers}_getShuffledServers(){let e=[].concat(this._servers);for(let r=e.length-1;r>0;r--){let i=Math.floor(Math.random()*r),n=e[r];e[r]=e[i],e[i]=n}return e}setServers(e){this._servers=e}resolve(e,r="A"){switch(r){case"A":return this.resolve4(e);case"AAAA":return this.resolve6(e);case"TXT":return this.resolveTxt(e);default:throw new Error(`${r} is not supported`)}}async resolve4(e){let r="A",i=this._cache.get(Co.getCacheKey(e,r));if(i)return i;for(let n of this._getShuffledServers())try{let o=await(await Co.fetch(Co.buildResource({serverResolver:n,hostname:e,recordType:r}))).json(),a=o.Answer.map(u=>u.data),c=Math.min(o.Answer.map(u=>u.TTL));return this._cache.set(Co.getCacheKey(e,r),a,{ttl:c}),a}catch(s){q7.error(`${n} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}async resolve6(e){let r="AAAA",i=this._cache.get(Co.getCacheKey(e,r));if(i)return i;for(let n of this._getShuffledServers())try{let o=await(await Co.fetch(Co.buildResource({serverResolver:n,hostname:e,recordType:r}))).json(),a=o.Answer.map(u=>u.data),c=Math.min(o.Answer.map(u=>u.TTL));return this._cache.set(Co.getCacheKey(e,r),a,{ttl:c}),a}catch(s){q7.error(`${n} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}async resolveTxt(e){let r="TXT",i=this._cache.get(Co.getCacheKey(e,r));if(i)return i;for(let n of this._getShuffledServers())try{let o=await(await Co.fetch(Co.buildResource({serverResolver:n,hostname:e,recordType:r}))).json(),a=o.Answer.map(u=>[u.data.replace(/['"]+/g,"")]),c=Math.min(o.Answer.map(u=>u.TTL));return this._cache.set(Co.getCacheKey(e,r),a,{ttl:c}),a}catch(s){q7.error(`${n} could not resolve ${e} record ${r}`)}throw new Error(`Could not resolve ${e} record ${r}`)}};j7.Resolver=j7;f2e.exports=j7});var h2e=v((Tkt,d2e)=>{l();"use strict";var TYe=l2e();d2e.exports=TYe});var y2e=v((Rkt,p2e)=>{l();"use strict";var RYe=ly(),{code:PYe}=RYe("dnsaddr");async function CYe(t){let e=h2e(),r=new e,i=t.getPeerId(),[,n]=t.stringTuples().find(([a])=>a===PYe)||[],o=(await r.resolveTxt(`_dnsaddr.${n}`)).flat().map(a=>a.split("=")[1]);return i&&(o=o.filter(a=>a.includes(i))),o}p2e.exports={dnsaddrResolver:CYe}});var U7=v((Pkt,g2e)=>{l();"use strict";g2e.exports={DIAL_TIMEOUT:3e4,MAX_PARALLEL_DIALS:100,MAX_PER_PEER_DIALS:4,MAX_ADDRS_TO_DIAL:25,METRICS:{computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3],maxOldPeersRetention:50}}});var CC=v((Ckt,OYe)=>{OYe.exports={name:"libp2p",version:"0.33.0",description:"JavaScript implementation of libp2p, a modular peer to peer network stack",leadMaintainer:"Jacob Heun <jacobheun@gmail.com>",main:"src/index.js",types:"dist/src/index.d.ts",typesVersions:{"*":{"src/*":["dist/src/*","dist/src/*/index"]}},files:["dist","src"],scripts:{lint:"aegir lint",build:"aegir build","build:proto":"npm run build:proto:circuit && npm run build:proto:identify && npm run build:proto:plaintext && npm run build:proto:address-book && npm run build:proto:proto-book && npm run build:proto:peer-record && npm run build:proto:envelope","build:proto:circuit":"pbjs -t static-module -w commonjs -r libp2p-circuit --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/circuit/protocol/index.js ./src/circuit/protocol/index.proto","build:proto:identify":"pbjs -t static-module -w commonjs -r libp2p-identify --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/identify/message.js ./src/identify/message.proto","build:proto:plaintext":"pbjs -t static-module -w commonjs -r libp2p-plaintext --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/insecure/proto.js ./src/insecure/proto.proto","build:proto:address-book":"pbjs -t static-module -w commonjs -r libp2p-address-book --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/persistent/pb/address-book.js ./src/peer-store/persistent/pb/address-book.proto","build:proto:proto-book":"pbjs -t static-module -w commonjs -r libp2p-proto-book --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/persistent/pb/proto-book.js ./src/peer-store/persistent/pb/proto-book.proto","build:proto:peer-record":"pbjs -t static-module -w commonjs -r libp2p-peer-record --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/peer-record/peer-record.js ./src/record/peer-record/peer-record.proto","build:proto:envelope":"pbjs -t static-module -w commonjs -r libp2p-envelope --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/envelope/envelope.js ./src/record/envelope/envelope.proto","build:proto-types":"npm run build:proto-types:circuit && npm run build:proto-types:identify && npm run build:proto-types:plaintext && npm run build:proto-types:address-book && npm run build:proto-types:proto-book && npm run build:proto-types:peer-record && npm run build:proto-types:envelope","build:proto-types:circuit":"pbts -o src/circuit/protocol/index.d.ts src/circuit/protocol/index.js","build:proto-types:identify":"pbts -o src/identify/message.d.ts src/identify/message.js","build:proto-types:plaintext":"pbts -o src/insecure/proto.d.ts src/insecure/proto.js","build:proto-types:address-book":"pbts -o src/peer-store/persistent/pb/address-book.d.ts src/peer-store/persistent/pb/address-book.js","build:proto-types:proto-book":"pbts -o src/peer-store/persistent/pb/proto-book.d.ts src/peer-store/persistent/pb/proto-book.js","build:proto-types:peer-record":"pbts -o src/record/peer-record/peer-record.d.ts src/record/peer-record/peer-record.js","build:proto-types:envelope":"pbts -o src/record/envelope/envelope.d.ts src/record/envelope/envelope.js",test:"aegir test","test:ts":"aegir build --no-bundle && npm run test --prefix test/ts-use","test:node":'aegir test -t node -f "./test/**/*.{node,spec}.js"',"test:browser":"aegir test -t browser","test:examples":"cd examples && npm run test:all",prepare:"aegir build --no-bundle",release:"aegir release -t node -t browser","release-minor":"aegir release --type minor -t node -t browser","release-major":"aegir release --type major -t node -t browser",coverage:"nyc --reporter=text --reporter=lcov npm run test:node"},repository:{type:"git",url:"https://github.com/libp2p/js-libp2p.git"},keywords:["libp2p","network","p2p","peer","peer-to-peer","IPFS"],bugs:{url:"https://github.com/libp2p/js-libp2p/issues"},homepage:"https://libp2p.io",license:"MIT",engines:{node:">=14.0.0"},browser:{"@motrix/nat-api":!1},eslintConfig:{extends:"ipfs",ignorePatterns:["!.aegir.js","test/ts-use"]},dependencies:{"abortable-iterator":"^3.0.0","@motrix/nat-api":"^0.3.1","@vascosantos/moving-average":"^1.1.0","abort-controller":"^3.0.0","aggregate-error":"^3.1.0","any-signal":"^2.1.1","bignumber.js":"^9.0.1","class-is":"^1.1.0",debug:"^4.3.1","err-code":"^3.0.0","es6-promisify":"^7.0.0",events:"^3.3.0",hashlru:"^2.3.0","interface-datastore":"^6.0.2","it-all":"^1.0.4","it-buffer":"^0.1.2","it-drain":"^1.0.3","it-filter":"^1.0.1","it-first":"^1.0.4","it-handshake":"^2.0.0","it-length-prefixed":"^5.0.2","it-map":"^1.0.4","it-merge":"^1.0.0","it-pipe":"^1.1.0","it-take":"^1.0.0","libp2p-crypto":"^0.19.4","libp2p-interfaces":"^1.0.0","libp2p-utils":"^0.4.0",mafmt:"^10.0.0","merge-options":"^3.0.4",multiaddr:"^10.0.0",multiformats:"^9.0.0","multistream-select":"^2.0.0","mutable-proxy":"^1.0.0","node-forge":"^0.10.0","p-any":"^3.0.0","p-fifo":"^1.0.0","p-retry":"^4.4.0","p-settle":"^4.1.1","peer-id":"^0.15.0","private-ip":"^2.1.0",protobufjs:"^6.10.2",retimer:"^3.0.0","sanitize-filename":"^1.6.3","set-delayed-interval":"^1.0.0","streaming-iterables":"^6.0.0","timeout-abort-controller":"^1.1.1",uint8arrays:"^3.0.0",varint:"^6.0.0",wherearewe:"^1.0.0",xsalsa20:"^1.1.0"},devDependencies:{"@chainsafe/libp2p-noise":"^4.0.0","@nodeutils/defaults-deep":"^1.1.0","@types/es6-promisify":"^6.0.0","@types/node":"^16.0.1","@types/node-forge":"^0.10.1","@types/varint":"^6.0.0",aegir:"^33.1.1",buffer:"^6.0.3","datastore-core":"^6.0.7",delay:"^5.0.0","interop-libp2p":"^0.4.0","into-stream":"^7.0.0","ipfs-http-client":"^52.0.2","it-concat":"^2.0.0","it-pair":"^1.0.0","it-pushable":"^1.4.0",libp2p:".","libp2p-bootstrap":"^0.13.0","libp2p-delegated-content-routing":"^0.11.0","libp2p-delegated-peer-routing":"^0.10.0","libp2p-floodsub":"^0.27.0","libp2p-gossipsub":"^0.11.0","libp2p-interfaces-compliance-tests":"^1.0.0","libp2p-kad-dht":"^0.24.2","libp2p-mdns":"^0.17.0","libp2p-mplex":"^0.10.1","libp2p-tcp":"^0.17.0","libp2p-webrtc-star":"^0.23.0","libp2p-websockets":"^0.16.0",nock:"^13.0.3","p-defer":"^3.0.0","p-times":"^3.0.0","p-wait-for":"^3.2.0",rimraf:"^3.0.2",sinon:"^11.1.1",util:"^0.12.3"},contributors:["Vasco Santos <vasco.santos@moxy.studio>","David Dias <daviddias.p@gmail.com>","Jacob Heun <jacobheun@gmail.com>","Alex Potsides <alex@achingbrain.net>","Alan Shaw <alan@tableflip.io>","Cayman <caymannava@gmail.com>","Pedro Teixeira <i@pgte.me>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Maciej Kr\xFCger <mkg20001@gmail.com>","Hugo Dias <mail@hugodias.me>","Chris Dostert <chrisdostert@users.noreply.github.com>","dirkmc <dirkmdev@gmail.com>","Volker Mische <volker.mische@gmail.com>","zeim839 <50573884+zeim839@users.noreply.github.com>","Richard Littauer <richard.littauer@gmail.com>","a1300 <matthias-knopp@gmx.net>","Ryan Bell <ryan@piing.net>","\u1D20\u026A\u1D04\u1D1B\u1D0F\u0280 \u0299\u1D0A\u1D07\u029F\u1D0B\u029C\u1D0F\u029F\u1D0D <victorbjelkholm@gmail.com>","Franck Royer <franck@royer.one>","Thomas Eizinger <thomas@eizinger.io>","Giovanni T. Parra <fiatjaf@gmail.com>","acolytec3 <17355484+acolytec3@users.noreply.github.com>","Elven <mon.samuel@qq.com>","Andrew Nesbitt <andrewnez@gmail.com>","Samlior <samlior@foxmail.com>","Didrik Nordstr\xF6m <didrik.nordstrom@gmail.com>","RasmusErik Voel Jensen <github@solsort.com>","Robert Kiel <robert.kiel@hoprnet.org>","Smite Chow <xiaopengyou@live.com>","Soeren <nikorpoulsen@gmail.com>","S\xF6nke Hahn <soenkehahn@gmail.com>","TJKoury <TJKoury@gmail.com>","Tiago Alves <alvesjtiago@gmail.com>","XiaoZhang <zxinmyth@gmail.com>","Yusef Napora <yusef@napora.org>","Zane Starr <zcstarr@gmail.com>","ebinks <elizabethjbinks@gmail.com>","Aditya Bose <13054902+adbose@users.noreply.github.com>","isan_rivkin <isanrivkin@gmail.com>","mayerwin <mayerwin@users.noreply.github.com>","mcclure <andi.m.mcclure@gmail.com>","phillmac <phillmac@users.noreply.github.com>","robertkiel <robert.kiel@validitylabs.org>","shresthagrawal <34920931+shresthagrawal@users.noreply.github.com>","swedneck <40505480+swedneck@users.noreply.github.com>","greenSnot <greenSnot@users.noreply.github.com>","Aleksei <vozhdb@gmail.com>","Bernd Strehl <bernd.strehl@gmail.com>","Chris Bratlien <chrisbratlien@gmail.com>","Cindy Wu <ciindy.wu@gmail.com>","Daijiro Wachi <daijiro.wachi@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Ethan Lam <elmemphis2000@gmail.com>","Fei Liu <liu.feiwood@gmail.com>","Felipe Martins <felipebrasil93@gmail.com>","Florian-Merle <florian.david.merle@gmail.com>","Francis Gulotta <wizard@roborooter.com>","Guy Sviry <32539816+guysv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","Irakli Gozalishvili <rfobic@gmail.com>","Joel Gustafson <joelg@mit.edu>","John Rees <johnrees@users.noreply.github.com>","Jo\xE3o Santos <joaosantos15@users.noreply.github.com>","Julien Bouquillon <contact@revolunet.com>","Kevin Kwok <antimatter15@gmail.com>","Kevin Lacker <lacker@gmail.com>","Lars Gierth <lgierth@users.noreply.github.com>","Leask Wong <i@leaskh.com>","Marcin Tojek <mtojek@users.noreply.github.com>","Michael Burns <5170+mburns@users.noreply.github.com>","Miguel Mota <miguelmota2@gmail.com>","Nuno Nogueira <nunofmn@gmail.com>","Philipp Muens <raute1337@gmx.de>"]}});var OC=v((Okt,Uc)=>{l();"use strict";var kYe=CC().version;Uc.exports.PROTOCOL_VERSION="ipfs/0.1.0";Uc.exports.AGENT_VERSION=`js-libp2p/${kYe}`;Uc.exports.MULTICODEC_IDENTIFY="/ipfs/id/1.0.0";Uc.exports.MULTICODEC_IDENTIFY_PUSH="/ipfs/id/push/1.0.0";Uc.exports.IDENTIFY_PROTOCOL_VERSION="0.1.0";Uc.exports.MULTICODEC_IDENTIFY_PROTOCOL_NAME="id";Uc.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push";Uc.exports.MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0";Uc.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0"});var F7=v((kkt,b2e)=>{l();"use strict";var m2e=60*1e3;b2e.exports={ADVERTISE_BOOT_DELAY:15*m2e,ADVERTISE_TTL:30*m2e,CIRCUIT_PROTO_CODE:290,HOP_METADATA_KEY:"hop_relay",HOP_METADATA_VALUE:"true",RELAY_RENDEZVOUS_NS:"/libp2p/relay"}});var v2e=v(y3=>{l();(function(){var t,e,r,i,n,s,o,a;a=function(c){var u,f,d,h;return u=(c&255<<24)>>>24,f=(c&255<<16)>>>16,d=(c&255<<8)>>>8,h=c&255,[u,f,d,h].join(".")},o=function(c){var u,f,d,h,p,y;for(u=[],d=h=0;h<=3&&c.length!==0;d=++h){if(d>0){if(c[0]!==".")throw new Error("Invalid IP");c=c.substring(1)}y=e(c),p=y[0],f=y[1],c=c.substring(f),u.push(p)}if(c.length!==0)throw new Error("Invalid IP");switch(u.length){case 1:if(u[0]>4294967295)throw new Error("Invalid IP");return u[0]>>>0;case 2:if(u[0]>255||u[1]>16777215)throw new Error("Invalid IP");return(u[0]<<24|u[1])>>>0;case 3:if(u[0]>255||u[1]>255||u[2]>65535)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2])>>>0;case 4:if(u[0]>255||u[1]>255||u[2]>255||u[3]>255)throw new Error("Invalid IP");return(u[0]<<24|u[1]<<16|u[2]<<8|u[3])>>>0;default:throw new Error("Invalid IP")}},r=function(c){return c.charCodeAt(0)},i=r("0"),s=r("a"),n=r("A"),e=function(c){var u,f,d,h,p;for(h=0,u=10,f="9",d=0,c.length>1&&c[d]==="0"&&(c[d+1]==="x"||c[d+1]==="X"?(d+=2,u=16):"0"<=c[d+1]&&c[d+1]<="9"&&(d++,u=8,f="7")),p=d;d<c.length;){if("0"<=c[d]&&c[d]<=f)h=h*u+(r(c[d])-i)>>>0;else if(u===16)if("a"<=c[d]&&c[d]<="f")h=h*u+(10+r(c[d])-s)>>>0;else if("A"<=c[d]&&c[d]<="F")h=h*u+(10+r(c[d])-n)>>>0;else break;else break;if(h>4294967295)throw new Error("too large");d++}if(d===p)throw new Error("empty octet");return[h,d]},t=function(){function c(u,f){var d,h,p,y;if(typeof u!="string")throw new Error("Missing `net' parameter");if(f||(y=u.split("/",2),u=y[0],f=y[1]),f||(f=32),typeof f=="string"&&f.indexOf(".")>-1){try{this.maskLong=o(f)}catch(m){throw d=m,new Error("Invalid mask: "+f)}for(h=p=32;p>=0;h=--p)if(this.maskLong===4294967295<<32-h>>>0){this.bitmask=h;break}}else if(f||f===0)this.bitmask=parseInt(f,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(o(u)&this.maskLong)>>>0}catch(m){throw d=m,new Error("Invalid net address: "+u)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+f);this.size=Math.pow(2,32-this.bitmask),this.base=a(this.netLong),this.mask=a(this.maskLong),this.hostmask=a(~this.maskLong),this.first=this.bitmask<=30?a(this.netLong+1):this.base,this.last=this.bitmask<=30?a(this.netLong+this.size-2):a(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?a(this.netLong+this.size-1):void 0}return c.prototype.contains=function(u){return typeof u=="string"&&(u.indexOf("/")>0||u.split(".").length!==4)&&(u=new c(u)),u instanceof c?this.contains(u.base)&&this.contains(u.broadcast||u.last):(o(u)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},c.prototype.next=function(u){return u==null&&(u=1),new c(a(this.netLong+this.size*u),this.mask)},c.prototype.forEach=function(u){var f,d,h;for(h=o(this.first),d=o(this.last),f=0;h<=d;)u(a(h),h,f),f++,h++},c.prototype.toString=function(){return this.base+"/"+this.bitmask},c}(),y3.ip2long=o,y3.long2ip=a,y3.Netmask=t}).call(y3)});var _2e=v((w2e,K7)=>{l();(function(t){"use strict";let e="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${e}\\.${e}\\.${e}\\.${e}$`,"i"),threeOctet:new RegExp(`^${e}\\.${e}\\.${e}$`,"i"),twoOctet:new RegExp(`^${e}\\.${e}$`,"i"),longValue:new RegExp(`^${e}$`,"i")},i=new RegExp("^0[0-7]+$","i"),n=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(s,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${s})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${e}\\.${e}\\.${e}\\.${e}(${s})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${e}\\.${e}\\.${e}\\.${e}(${s})?$`,"i")};function c(p,y){if(p.indexOf("::")!==p.lastIndexOf("::"))return null;let m=0,w=-1,b=(p.match(a.zoneIndex)||[])[0],S,I;for(b&&(b=b.substring(1),p=p.replace(/%.+$/,""));(w=p.indexOf(":",w+1))>=0;)m++;if(p.substr(0,2)==="::"&&m--,p.substr(-2,2)==="::"&&m--,m>y)return null;for(I=y-m,S=":";I--;)S+="0:";return p=p.replace("::",S),p[0]===":"&&(p=p.slice(1)),p[p.length-1]===":"&&(p=p.slice(0,-1)),y=function(){let j=p.split(":"),B=[];for(let C=0;C<j.length;C++)B.push(parseInt(j[C],16));return B}(),{parts:y,zoneId:b}}function u(p,y,m,w){if(p.length!==y.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let b=0,S;for(;w>0;){if(S=m-w,S<0&&(S=0),p[b]>>S!=y[b]>>S)return!1;w-=m,b+=1}return!0}function f(p){if(n.test(p))return parseInt(p,16);if(p[0]==="0"&&!isNaN(parseInt(p[1],10))){if(i.test(p))return parseInt(p,8);throw new Error(`ipaddr: cannot parse ${p} as octal`)}return parseInt(p,10)}function d(p,y){for(;p.length<y;)p=`0${p}`;return p}let h={};h.IPv4=function(){function p(y){if(y.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let m,w;for(m=0;m<y.length;m++)if(w=y[m],!(0<=w&&w<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=y}return p.prototype.SpecialRanges={unspecified:[[new p([0,0,0,0]),8]],broadcast:[[new p([255,255,255,255]),32]],multicast:[[new p([224,0,0,0]),4]],linkLocal:[[new p([169,254,0,0]),16]],loopback:[[new p([127,0,0,0]),8]],carrierGradeNat:[[new p([100,64,0,0]),10]],private:[[new p([10,0,0,0]),8],[new p([172,16,0,0]),12],[new p([192,168,0,0]),16]],reserved:[[new p([192,0,0,0]),24],[new p([192,0,2,0]),24],[new p([192,88,99,0]),24],[new p([198,51,100,0]),24],[new p([203,0,113,0]),24],[new p([240,0,0,0]),4]]},p.prototype.kind=function(){return"ipv4"},p.prototype.match=function(y,m){let w;if(m===void 0&&(w=y,y=w[0],m=w[1]),y.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return u(this.octets,y.octets,8,m)},p.prototype.prefixLengthFromSubnetMask=function(){let y=0,m=!1,w={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},b,S,I;for(b=3;b>=0;b-=1)if(S=this.octets[b],S in w){if(I=w[S],m&&I!==0)return null;I!==8&&(m=!0),y+=I}else return null;return 32-y},p.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},p.prototype.toByteArray=function(){return this.octets.slice(0)},p.prototype.toIPv4MappedAddress=function(){return h.IPv6.parse(`::ffff:${this.toString()}`)},p.prototype.toNormalizedString=function(){return this.toString()},p.prototype.toString=function(){return this.octets.join(".")},p}(),h.IPv4.broadcastAddressFromCIDR=function(p){try{let y=this.parseCIDR(p),m=y[0].toByteArray(),w=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),b=[],S=0;for(;S<4;)b.push(parseInt(m[S],10)|parseInt(w[S],10)^255),S++;return new this(b)}catch(y){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.isIPv4=function(p){return this.parser(p)!==null},h.IPv4.isValid=function(p){try{return new this(this.parser(p)),!0}catch(y){return!1}},h.IPv4.isValidFourPartDecimal=function(p){return!!(h.IPv4.isValid(p)&&p.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},h.IPv4.networkAddressFromCIDR=function(p){let y,m,w,b,S;try{for(y=this.parseCIDR(p),w=y[0].toByteArray(),S=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),b=[],m=0;m<4;)b.push(parseInt(w[m],10)&parseInt(S[m],10)),m++;return new this(b)}catch(I){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},h.IPv4.parse=function(p){let y=this.parser(p);if(y===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(y)},h.IPv4.parseCIDR=function(p){let y;if(y=p.match(/^(.+)\/(\d+)$/)){let m=parseInt(y[2]);if(m>=0&&m<=32){let w=[this.parse(y[1]),m];return Object.defineProperty(w,"toString",{value:function(){return this.join("/")}}),w}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},h.IPv4.parser=function(p){let y,m,w;if(y=p.match(r.fourOctet))return function(){let b=y.slice(1,6),S=[];for(let I=0;I<b.length;I++)m=b[I],S.push(f(m));return S}();if(y=p.match(r.longValue)){if(w=f(y[1]),w>4294967295||w<0)throw new Error("ipaddr: address outside defined range");return function(){let b=[],S;for(S=0;S<=24;S+=8)b.push(w>>S&255);return b}().reverse()}else return(y=p.match(r.twoOctet))?function(){let b=y.slice(1,4),S=[];if(w=f(b[1]),w>16777215||w<0)throw new Error("ipaddr: address outside defined range");return S.push(f(b[0])),S.push(w>>16&255),S.push(w>>8&255),S.push(w&255),S}():(y=p.match(r.threeOctet))?function(){let b=y.slice(1,5),S=[];if(w=f(b[2]),w>65535||w<0)throw new Error("ipaddr: address outside defined range");return S.push(f(b[0])),S.push(f(b[1])),S.push(w>>8&255),S.push(w&255),S}():null},h.IPv4.subnetMaskFromPrefixLength=function(p){if(p=parseInt(p),p<0||p>32)throw new Error("ipaddr: invalid IPv4 prefix length");let y=[0,0,0,0],m=0,w=Math.floor(p/8);for(;m<w;)y[m]=255,m++;return w<4&&(y[w]=Math.pow(2,p%8)-1<<8-p%8),new this(y)},h.IPv6=function(){function p(y,m){let w,b;if(y.length===16)for(this.parts=[],w=0;w<=14;w+=2)this.parts.push(y[w]<<8|y[w+1]);else if(y.length===8)this.parts=y;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(w=0;w<this.parts.length;w++)if(b=this.parts[w],!(0<=b&&b<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");m&&(this.zoneId=m)}return p.prototype.SpecialRanges={unspecified:[new p([0,0,0,0,0,0,0,0]),128],linkLocal:[new p([65152,0,0,0,0,0,0,0]),10],multicast:[new p([65280,0,0,0,0,0,0,0]),8],loopback:[new p([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new p([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new p([0,0,0,0,0,65535,0,0]),96],rfc6145:[new p([0,0,0,0,65535,0,0,0]),96],rfc6052:[new p([100,65435,0,0,0,0,0,0]),96],"6to4":[new p([8194,0,0,0,0,0,0,0]),16],teredo:[new p([8193,0,0,0,0,0,0,0]),32],reserved:[[new p([8193,3512,0,0,0,0,0,0]),32]]},p.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},p.prototype.kind=function(){return"ipv6"},p.prototype.match=function(y,m){let w;if(m===void 0&&(w=y,y=w[0],m=w[1]),y.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return u(this.parts,y.parts,16,m)},p.prototype.prefixLengthFromSubnetMask=function(){let y=0,m=!1,w={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},b,S;for(let I=7;I>=0;I-=1)if(b=this.parts[I],b in w){if(S=w[b],m&&S!==0)return null;S!==16&&(m=!0),y+=S}else return null;return 128-y},p.prototype.range=function(){return h.subnetMatch(this,this.SpecialRanges)},p.prototype.toByteArray=function(){let y,m=[],w=this.parts;for(let b=0;b<w.length;b++)y=w[b],m.push(y>>8),m.push(y&255);return m},p.prototype.toFixedLengthString=function(){let y=function(){let w=[];for(let b=0;b<this.parts.length;b++)w.push(d(this.parts[b].toString(16),4));return w}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),y+m},p.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let y=this.parts.slice(-2),m=y[0],w=y[1];return new h.IPv4([m>>8,m&255,w>>8,w&255])},p.prototype.toNormalizedString=function(){let y=function(){let w=[];for(let b=0;b<this.parts.length;b++)w.push(this.parts[b].toString(16));return w}.call(this).join(":"),m="";return this.zoneId&&(m=`%${this.zoneId}`),y+m},p.prototype.toRFC5952String=function(){let y=/((^|:)(0(:|$)){2,})/g,m=this.toNormalizedString(),w=0,b=-1,S;for(;S=y.exec(m);)S[0].length>b&&(w=S.index,b=S[0].length);return b<0?m:`${m.substring(0,w)}::${m.substring(w+b)}`},p.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},p}(),h.IPv6.broadcastAddressFromCIDR=function(p){try{let y=this.parseCIDR(p),m=y[0].toByteArray(),w=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),b=[],S=0;for(;S<16;)b.push(parseInt(m[S],10)|parseInt(w[S],10)^255),S++;return new this(b)}catch(y){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${y})`)}},h.IPv6.isIPv6=function(p){return this.parser(p)!==null},h.IPv6.isValid=function(p){if(typeof p=="string"&&p.indexOf(":")===-1)return!1;try{let y=this.parser(p);return new this(y.parts,y.zoneId),!0}catch(y){return!1}},h.IPv6.networkAddressFromCIDR=function(p){let y,m,w,b,S;try{for(y=this.parseCIDR(p),w=y[0].toByteArray(),S=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),b=[],m=0;m<16;)b.push(parseInt(w[m],10)&parseInt(S[m],10)),m++;return new this(b)}catch(I){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${I})`)}},h.IPv6.parse=function(p){let y=this.parser(p);if(y.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(y.parts,y.zoneId)},h.IPv6.parseCIDR=function(p){let y,m,w;if((m=p.match(/^(.+)\/(\d+)$/))&&(y=parseInt(m[2]),y>=0&&y<=128))return w=[this.parse(m[1]),y],Object.defineProperty(w,"toString",{value:function(){return this.join("/")}}),w;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},h.IPv6.parser=function(p){let y,m,w,b,S,I;if(w=p.match(a.deprecatedTransitional))return this.parser(`::ffff:${w[1]}`);if(a.native.test(p))return c(p,8);if((w=p.match(a.transitional))&&(I=w[6]||"",y=c(w[1].slice(0,-1)+I,6),y.parts)){for(S=[parseInt(w[2]),parseInt(w[3]),parseInt(w[4]),parseInt(w[5])],m=0;m<S.length;m++)if(b=S[m],!(0<=b&&b<=255))return null;return y.parts.push(S[0]<<8|S[1]),y.parts.push(S[2]<<8|S[3]),{parts:y.parts,zoneId:y.zoneId}}return null},h.IPv6.subnetMaskFromPrefixLength=function(p){if(p=parseInt(p),p<0||p>128)throw new Error("ipaddr: invalid IPv6 prefix length");let y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,w=Math.floor(p/8);for(;m<w;)y[m]=255,m++;return w<16&&(y[w]=Math.pow(2,p%8)-1<<8-p%8),new this(y)},h.fromByteArray=function(p){let y=p.length;if(y===4)return new h.IPv4(p);if(y===16)return new h.IPv6(p);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},h.isValid=function(p){return h.IPv6.isValid(p)||h.IPv4.isValid(p)},h.parse=function(p){if(h.IPv6.isValid(p))return h.IPv6.parse(p);if(h.IPv4.isValid(p))return h.IPv4.parse(p);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},h.parseCIDR=function(p){try{return h.IPv6.parseCIDR(p)}catch(y){try{return h.IPv4.parseCIDR(p)}catch(m){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},h.process=function(p){let y=this.parse(p);return y.kind()==="ipv6"&&y.isIPv4MappedAddress()?y.toIPv4Address():y},h.subnetMatch=function(p,y,m){let w,b,S,I;m==null&&(m="unicast");for(b in y)if(Object.prototype.hasOwnProperty.call(y,b)){for(S=y[b],S[0]&&!(S[0]instanceof Array)&&(S=[S]),w=0;w<S.length;w++)if(I=S[w],p.kind()===I[0].kind()&&p.match.apply(p,I))return b}return m},typeof K7!="undefined"&&K7.exports?K7.exports=h:t.ipaddr=h})(w2e)});var A2e=v(g3=>{l();"use strict";var E2e=g3&&g3.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(g3,"__esModule",{value:!0});var DYe=v2e(),BYe=E2e(k9()),NYe=E2e(B9()),S2e=_2e(),MYe=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],LYe=MYe.map(t=>new DYe.Netmask(t));function qYe(t){for(let e of LYe)if(e.contains(t))return!0;return!1}function x2e(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}g3.default=t=>{if(S2e.isValid(t)){let e=S2e.parse(t);if(e.kind()==="ipv4")return qYe(e.toNormalizedString());if(e.kind()==="ipv6")return x2e(t)}else if(NYe.default(t)&&BYe.default.v6().test(t))return x2e(t)}});var kC=v((Nkt,I2e)=>{l();"use strict";I2e.exports=A2e().default});var R2e=v((Mkt,T2e)=>{l();"use strict";var jYe=kC();function UYe(t){let{address:e}=t.nodeAddress();return jYe(e)}T2e.exports=UYe});var DC=v((Lkt,C2e)=>{l();"use strict";var P2e=R2e();function FYe(t,e){let r=P2e(t.multiaddr),i=P2e(e.multiaddr);return r&&!i?1:!r&&i||t.isCertified&&!e.isCertified?-1:!t.isCertified&&e.isCertified?1:0}function KYe(t){return[...t].sort(FYe)}C2e.exports.publicAddressesFirst=KYe});var k2e=v((qkt,BC)=>{l();"use strict";var O2e=async t=>{try{let e=await t;return{isFulfilled:!0,isRejected:!1,value:e}}catch(e){return{isFulfilled:!1,isRejected:!0,reason:e}}};BC.exports=O2e;BC.exports.default=O2e});var B2e=v((jkt,NC)=>{l();"use strict";var D2e=(t,...e)=>new Promise(r=>{r(t(...e))});NC.exports=D2e;NC.exports.default=D2e});var M2e=v((Ukt,MC)=>{l();"use strict";var VYe=B2e(),N2e=t=>{if(!((Number.isInteger(t)||t===1/0)&&t>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));let e=[],r=0,i=()=>{r--,e.length>0&&e.shift()()},n=(a,c,...u)=>{r++;let f=VYe(a,...u);c(f),f.then(i,i)},s=(a,c,...u)=>{r<t?n(a,c,...u):e.push(n.bind(null,a,c,...u))},o=(a,...c)=>new Promise(u=>s(a,u,...c));return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>e.length},clearQueue:{value:()=>{e.length=0}}}),o};MC.exports=N2e;MC.exports.default=N2e});var q2e=v((Fkt,L2e)=>{l();"use strict";var LC=k2e(),zYe=M2e();L2e.exports=async(t,e={})=>{let{concurrency:r=1/0}=e,i=zYe(r);return Promise.all(t.map(n=>n&&typeof n.then=="function"?LC(n):LC(typeof n=="function"?i(()=>n()):Promise.resolve(n))))}});var U2e=v((Kkt,j2e)=>{l();"use strict";function HYe(t,e){return t.length===e.length&&e.sort()&&t.sort().every((r,i)=>e[i].equals(r))}j2e.exports=HYe});var V2e=v((Vkt,K2e)=>{l();"use strict";var Ah=Vi(),V7=Ah.Reader,F2e=Ah.Writer,si=Ah.util,Oo=Ah.roots["libp2p-peer-record"]||(Ah.roots["libp2p-peer-record"]={});Oo.PeerRecord=function(){function t(e){if(this.addresses=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.peerId=si.newBuffer([]),t.prototype.seq=si.Long?si.Long.fromBits(0,0,!0):0,t.prototype.addresses=si.emptyArray,t.encode=function(r,i){if(i||(i=F2e.create()),r.peerId!=null&&Object.hasOwnProperty.call(r,"peerId")&&i.uint32(10).bytes(r.peerId),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&i.uint32(16).uint64(r.seq),r.addresses!=null&&r.addresses.length)for(var n=0;n<r.addresses.length;++n)Oo.PeerRecord.AddressInfo.encode(r.addresses[n],i.uint32(26).fork()).ldelim();return i},t.decode=function(r,i){r instanceof V7||(r=V7.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Oo.PeerRecord;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.peerId=r.bytes();break;case 2:s.seq=r.uint64();break;case 3:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push(Oo.PeerRecord.AddressInfo.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Oo.PeerRecord)return r;var i=new Oo.PeerRecord;if(r.peerId!=null&&(typeof r.peerId=="string"?si.base64.decode(r.peerId,i.peerId=si.newBuffer(si.base64.length(r.peerId)),0):r.peerId.length&&(i.peerId=r.peerId)),r.seq!=null&&(si.Long?(i.seq=si.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?i.seq=parseInt(r.seq,10):typeof r.seq=="number"?i.seq=r.seq:typeof r.seq=="object"&&(i.seq=new si.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".PeerRecord.addresses: array expected");i.addresses=[];for(var n=0;n<r.addresses.length;++n){if(typeof r.addresses[n]!="object")throw TypeError(".PeerRecord.addresses: object expected");i.addresses[n]=Oo.PeerRecord.AddressInfo.fromObject(r.addresses[n])}}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.addresses=[]),i.defaults)if(i.bytes===String?n.peerId="":(n.peerId=[],i.bytes!==Array&&(n.peerId=si.newBuffer(n.peerId))),si.Long){var s=new si.Long(0,0,!0);n.seq=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.seq=i.longs===String?"0":0;if(r.peerId!=null&&r.hasOwnProperty("peerId")&&(n.peerId=i.bytes===String?si.base64.encode(r.peerId,0,r.peerId.length):i.bytes===Array?Array.prototype.slice.call(r.peerId):r.peerId),r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?n.seq=i.longs===String?String(r.seq):r.seq:n.seq=i.longs===String?si.Long.prototype.toString.call(r.seq):i.longs===Number?new si.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.addresses&&r.addresses.length){n.addresses=[];for(var o=0;o<r.addresses.length;++o)n.addresses[o]=Oo.PeerRecord.AddressInfo.toObject(r.addresses[o],i)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ah.util.toJSONOptions)},t.AddressInfo=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.multiaddr=si.newBuffer([]),e.encode=function(i,n){return n||(n=F2e.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&n.uint32(10).bytes(i.multiaddr),n},e.decode=function(i,n){i instanceof V7||(i=V7.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new Oo.PeerRecord.AddressInfo;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.multiaddr=i.bytes();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof Oo.PeerRecord.AddressInfo)return i;var n=new Oo.PeerRecord.AddressInfo;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?si.base64.decode(i.multiaddr,n.multiaddr=si.newBuffer(si.base64.length(i.multiaddr)),0):i.multiaddr.length&&(n.multiaddr=i.multiaddr)),n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.multiaddr="":(s.multiaddr=[],n.bytes!==Array&&(s.multiaddr=si.newBuffer(s.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(s.multiaddr=n.bytes===String?si.base64.encode(i.multiaddr,0,i.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ah.util.toJSONOptions)},e}(),t}();K2e.exports=Oo});var H2e=v((zkt,z2e)=>{l();"use strict";var $Ye="libp2p-peer-record",GYe=Uint8Array.from([3,1]);z2e.exports={ENVELOPE_DOMAIN_PEER_RECORD:$Ye,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:GYe}});var z7=v((Hkt,W2e)=>{l();"use strict";var{Multiaddr:WYe}=rt(),YYe=it(),XYe=U2e(),{PeerRecord:$2e}=V2e(),{ENVELOPE_DOMAIN_PEER_RECORD:G2e,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:QYe}=H2e(),Ih=class{constructor({peerId:e,multiaddrs:r=[],seqNumber:i=Date.now()}){this.domain=G2e,this.codec=QYe,this.peerId=e,this.multiaddrs=r,this.seqNumber=i,this._marshal=void 0}marshal(){return this._marshal?this._marshal:(this._marshal=$2e.encode({peerId:this.peerId.toBytes(),seq:this.seqNumber,addresses:this.multiaddrs.map(e=>({multiaddr:e.bytes}))}).finish(),this._marshal)}equals(e){return!(!(e instanceof Ih)||!this.peerId.equals(e.peerId)||this.seqNumber!==e.seqNumber||!XYe(this.multiaddrs,e.multiaddrs))}};Ih.createFromProtobuf=t=>{let e=$2e.decode(t),r=YYe.createFromBytes(e.peerId),i=(e.addresses||[]).map(s=>new WYe(s.multiaddr)),n=Number(e.seq);return new Ih({peerId:r,multiaddrs:i,seqNumber:n})};Ih.DOMAIN=G2e;W2e.exports=Ih});var qC=v(($kt,Y2e)=>{l();"use strict";var ZYe=Pm(),JYe=z7();async function eXe(t){let e=new JYe({peerId:t.peerId,multiaddrs:t.multiaddrs}),r=await ZYe.seal(e,t.peerId);t.peerStore.addressBook.consumePeerRecord(r)}Y2e.exports.updateSelfPeerRecord=eXe});var UC=v((Gkt,Z2e)=>{l();"use strict";var X2e=Ee(),Th=Object.assign(X2e("libp2p:transports"),{error:X2e("libp2p:transports:err")}),tXe=q2e(),{codes:t2}=Ei(),m3=_r(),{updateSelfPeerRecord:Q2e}=qC(),jC=class{constructor({libp2p:e,upgrader:r,faultTolerance:i=H7.FATAL_ALL}){this.libp2p=e,this.upgrader=r,this._transports=new Map,this._listeners=new Map,this._listenerOptions=new Map,this.faultTolerance=i}add(e,r,i={}){if(Th("adding %s",e),!e)throw m3(new Error(`Transport must have a valid key, was given '${e}'`),t2.ERR_INVALID_KEY);if(this._transports.has(e))throw m3(new Error("There is already a transport with this key"),t2.ERR_DUPLICATE_TRANSPORT);let n=new r({...i,libp2p:this.libp2p,upgrader:this.upgrader});this._transports.set(e,n),this._listenerOptions.set(e,i.listenerOptions||{}),this._listeners.has(e)||this._listeners.set(e,[])}async close(){let e=[];for(let[r,i]of this._listeners)for(Th("closing listeners for %s",r);i.length;){let n=i.pop();n.removeAllListeners("listening"),n.removeAllListeners("close"),e.push(n.close())}await Promise.all(e),Th("all listeners closed");for(let r of this._listeners.keys())this._listeners.set(r,[])}async dial(e,r){let i=this.transportForMultiaddr(e);if(!i)throw m3(new Error(`No transport available for address ${String(e)}`),t2.ERR_TRANSPORT_UNAVAILABLE);try{return await i.dial(e,r)}catch(n){throw n.code||(n.code=t2.ERR_TRANSPORT_DIAL_FAILED),n}}getAddrs(){let e=[];for(let r of this._listeners.values())for(let i of r)e=[...e,...i.getAddrs()];return e}getTransports(){return this._transports.values()}transportForMultiaddr(e){for(let r of this._transports.values())if(r.filter([e]).length)return r;return null}async listen(e){if(!e||e.length===0){Th("no addresses were provided for listening, this node is dial only");return}let r=[];for(let[i,n]of this._transports.entries()){let s=n.filter(e),o=[];for(let u of s){Th("creating listener for %s on %s",i,u);let f=n.createListener(this._listenerOptions.get(i));this._listeners.get(i).push(f),f.on("listening",()=>Q2e(this.libp2p)),f.on("close",()=>Q2e(this.libp2p)),o.push(f.listen(u))}if(o.length===0){r.push(i);continue}if(!(await tXe(o)).find(u=>u.isFulfilled===!0)&&this.faultTolerance!==H7.NO_FATAL)throw m3(new Error(`Transport (${i}) could not listen on any available address`),t2.ERR_NO_VALID_ADDRESSES)}if(r.length===this._transports.size){let i=`no valid addresses were provided for transports [${r}]`;if(this.faultTolerance===H7.FATAL_ALL)throw m3(new Error(i),t2.ERR_NO_VALID_ADDRESSES);Th(`libp2p in dial mode only: ${i}`)}}async remove(e){if(Th("removing %s",e),this._listeners.has(e))for(let r of this._listeners.get(e))r.removeAllListeners("listening"),r.removeAllListeners("close"),await r.close();this._transports.delete(e),this._listeners.delete(e)}async removeAll(){let e=[];for(let r of this._transports.keys())e.push(this.remove(r));await Promise.all(e)}},H7={FATAL_ALL:0,NO_FATAL:1};jC.FaultTolerance=H7;Z2e.exports=jC});var tye=v((Wkt,eye)=>{l();"use strict";var rXe=Ml(),{dnsaddrResolver:iXe}=y2e(),FC=U7(),{AGENT_VERSION:nXe}=OC(),J2e=F7(),{publicAddressesFirst:sXe}=DC(),{FaultTolerance:oXe}=UC(),aXe={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:t=>t},connectionManager:{minConnections:25},transportManager:{faultTolerance:oXe.FATAL_ALL},dialer:{maxParallelDials:FC.MAX_PARALLEL_DIALS,maxDialsPerPeer:FC.MAX_PER_PEER_DIALS,dialTimeout:FC.DIAL_TIMEOUT,resolvers:{dnsaddr:iXe},addressSorter:sXe},host:{agentVersion:nXe},metrics:{enabled:!1},peerStore:{persistence:!1,threshold:5},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},config:{protocolPrefix:"ipfs",dht:{enabled:!1,kBucketSize:20,randomWalk:{enabled:!1,queriesPerPeriod:1,interval:3e5,timeout:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0,gateway:null,externalIp:null,pmp:{enabled:!1}},peerDiscovery:{autoDial:!0},pubsub:{enabled:!0},relay:{enabled:!0,advertise:{bootDelay:J2e.ADVERTISE_BOOT_DELAY,enabled:!1,ttl:J2e.ADVERTISE_TTL},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},transport:{}}};eye.exports.validate=t=>{let e=rXe(aXe,t);if(e.modules.transport.length<1)throw new Error("'options.modules.transport' must contain at least 1 transport");return e}});var nye=v((Ykt,iye)=>{l();"use strict";var{EventEmitter:cXe}=vr(),{Multiaddr:b3}=rt(),uXe=it(),rye=class extends cXe{constructor(e,{listen:r=[],announce:i=[]}={}){super();this.peerId=e,this.listen=new Set(r.map(n=>n.toString())),this.announce=new Set(i.map(n=>n.toString())),this.observed=new Set}getListenAddrs(){return Array.from(this.listen).map(e=>new b3(e))}getAnnounceAddrs(){return Array.from(this.announce).map(e=>new b3(e))}getObservedAddrs(){return Array.from(this.observed).map(e=>new b3(e))}addObservedAddr(e){let r=new b3(e),i=r.getPeerId();i&&uXe.createFromB58String(i).equals(this.peerId)&&(r=r.decapsulate(new b3(`/p2p/${this.peerId}`)));let n=r.toString();this.observed.has(n)||(this.observed.add(n),this.emit("change:addresses"))}};iye.exports=rye});var aye=v((Xkt,oye)=>{l();"use strict";var{EventEmitter:fXe}=vr(),KC=Ee()("latency-monitor:VisibilityChangeEmitter"),sye=class extends fXe{constructor(){super();if(typeof document=="undefined"){KC('This is not a browser, no "document" found. Stopping.');return}this._initializeVisibilityVarNames(),this._addVisibilityChangeListener()}_initializeVisibilityVarNames(){let e,r;typeof document.hidden!="undefined"?(e="hidden",r="visibilitychange"):typeof document.mozHidden!="undefined"?(e="mozHidden",r="mozvisibilitychange"):typeof document.msHidden!="undefined"?(e="msHidden",r="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(e="webkitHidden",r="webkitvisibilitychange"),this._hidden=e,this._visibilityChange=r}_addVisibilityChangeListener(){typeof document.addEventListener=="undefined"||typeof document[this._hidden]=="undefined"?KC("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(!(this._hidden===void 0||document[this._hidden]===void 0))return!document[this._hidden]}_handleVisibilityChange(){let e=!document[this._hidden];KC(e?"Page Visible":"Page Hidden"),this.emit("visibilityChange",e)}};oye.exports=sye});var fye=v((Qkt,uye)=>{l();"use strict";var{EventEmitter:lXe}=vr(),dXe=aye(),$u=Ee()("latency-monitor:LatencyMonitor"),cye=class extends lXe{constructor({latencyCheckIntervalMs:e,dataEmitIntervalMs:r,asyncTestFn:i,latencyRandomPercentage:n}={}){super();let s=this;s.latencyCheckIntervalMs=e||500,s.latencyRandomPercentage=n||10,s._latecyCheckMultiply=2*(s.latencyRandomPercentage/100)*s.latencyCheckIntervalMs,s._latecyCheckSubtract=s._latecyCheckMultiply/2,s.dataEmitIntervalMs=r===null||r===0?void 0:r||5*1e3,$u("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",s.latencyCheckIntervalMs,s.dataEmitIntervalMs),s.dataEmitIntervalMs?$u("Expecting ~%s events per summary",s.latencyCheckIntervalMs/s.dataEmitIntervalMs):$u("Not emitting summaries"),s.asyncTestFn=i}start(){globalThis.process&&globalThis.process.hrtime?($u("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=e=>{let r=this.now(e);return r[0]*1e3+r[1]/1e6}):typeof window!="undefined"&&window.performance&&window.performance.now?($u("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=e=>Math.round(this.now()-e)):($u("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=e=>this.now()-e),this._latencyData=this._initLatencyData(),hXe()&&(this._visibilityChangeEmitter=new dXe,this._visibilityChangeEmitter.on("visibilityChange",e=>{e?this._startTimers():(this._emitSummary(),this._stopTimers())})),(!this._visibilityChangeEmitter||this._visibilityChangeEmitter.isVisible())&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval(()=>this._emitSummary(),this.dataEmitIntervalMs),typeof this._emitIntervalID.unref=="function"&&this._emitIntervalID.unref()))}_stopTimers(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}_emitSummary(){let e=this.getSummary();e.events>0&&this.emit("data",e)}getSummary(){let e={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),$u("Summary: %O",e),e}_checkLatency(){let e=this,r=Math.random()*e._latecyCheckMultiply-e._latecyCheckSubtract,i={deltaOffset:Math.ceil(e.latencyCheckIntervalMs+r),startTime:e.now()},n=()=>{if(!this._checkLatencyID)return;let s=e.getDeltaMS(i.startTime)-i.deltaOffset;e._checkLatency(),e._latencyData.events++,e._latencyData.minMs=Math.min(e._latencyData.minMs,s),e._latencyData.maxMs=Math.max(e._latencyData.maxMs,s),e._latencyData.totalMs+=s,$u("MS: %s Data: %O",s,e._latencyData)};$u("localData: %O",i),this._checkLatencyID=setTimeout(()=>{e.asyncTestFn?(i.deltaOffset=0,i.startTime=e.now(),e.asyncTestFn(n)):(i.deltaOffset-=1,n())},i.deltaOffset),typeof this._checkLatencyID.unref=="function"&&this._checkLatencyID.unref()}_initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}};function hXe(){return typeof window!="undefined"}uye.exports=cye});var dye=v((Zkt,lye)=>{l();"use strict";lye.exports=function(){return Date.now()}});var VC=v((Jkt,pye)=>{l();"use strict";var $7=dye(),hye=class{constructor(e,r,i){let n=this;this._started=$7(),this._rescheduled=0,this._scheduled=r,this._args=i,this._triggered=!1,this._timerWrapper=()=>{n._rescheduled>0?(n._scheduled=n._rescheduled-($7()-n._started),n._schedule(n._scheduled)):(n._triggered=!0,e.apply(null,n._args))},this._timer=setTimeout(this._timerWrapper,r)}reschedule(e){e||(e=this._scheduled);let r=$7();r+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=r,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=$7(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function pXe(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new hye(arguments[0],arguments[1],t)}pye.exports=pXe});var wye=v((eDt,vye)=>{l();"use strict";var yye=Ee(),xa=Object.assign(yye("libp2p:connection-manager"),{error:yye("libp2p:connection-manager:err")}),gye=_r(),yXe=Ml(),gXe=fye(),G7=VC(),{EventEmitter:mXe}=vr(),bXe=it(),{codes:{ERR_INVALID_PARAMETERS:mye}}=Ei(),vXe={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:1},bye=class extends mXe{constructor(e,r={}){super();if(this._libp2p=e,this._peerId=e.peerId.toB58String(),this._options=yXe.call({ignoreUndefined:!0},vXe,r),this._options.maxConnections<this._options.minConnections)throw gye(new Error("Connection Manager maxConnections must be greater than minConnections"),mye);xa("options: %j",this._options),this._peerValues=new Map,this.connections=new Map,this._started=!1,this._timer=null,this._autoDialTimeout=null,this._checkMetrics=this._checkMetrics.bind(this),this._autoDial=this._autoDial.bind(this),this._latencyMonitor=new gXe({latencyCheckIntervalMs:this._options.pollInterval,dataEmitIntervalMs:this._options.pollInterval})}get size(){return Array.from(this.connections.values()).reduce((e,r)=>e+r.length,0)}start(){this._libp2p.metrics&&(this._timer=this._timer||G7(this._checkMetrics,this._options.pollInterval)),this._latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure),this._started=!0,xa("started"),this._options.autoDial&&this._autoDial()}async stop(){this._autoDialTimeout&&this._autoDialTimeout.clear(),this._timer&&this._timer.clear(),this._latencyMonitor.removeListener("data",this._onLatencyMeasure),this._latencyMonitor.stop(),this._started=!1,await this._close(),xa("stopped")}async _close(){let e=[];for(let r of this.connections.values())for(let i of r)e.push(i.close());await Promise.all(e),this.connections.clear()}setPeerValue(e,r){if(r<0||r>1)throw new Error("value should be a number between 0 and 1");this._peerValues.set(e.toB58String(),r)}_checkMetrics(){if(this._libp2p.metrics){let e=this._libp2p.metrics.global.movingAverages,r=e.dataReceived[this._options.movingAverageInterval].movingAverage();this._checkMaxLimit("maxReceivedData",r);let i=e.dataSent[this._options.movingAverageInterval].movingAverage();this._checkMaxLimit("maxSentData",i);let n=r+i;this._checkMaxLimit("maxData",n),xa("metrics update",n),this._timer=G7(this._checkMetrics,this._options.pollInterval)}}onConnect(e){let r=e.remotePeer,i=r.toB58String(),n=this.connections.get(i);this.emit("peer:connect",e),n?n.push(e):this.connections.set(i,[e]),this._libp2p.peerStore.keyBook.set(r,r.pubKey),this._peerValues.has(i)||this._peerValues.set(i,this._options.defaultPeerValue),this._checkMaxLimit("maxConnections",this.size)}onDisconnect(e){let r=e.remotePeer.toB58String(),i=this.connections.get(r);i&&i.length>1?(i=i.filter(n=>n.id!==e.id),this.connections.set(r,i)):i&&(this.connections.delete(r),this._peerValues.delete(e.remotePeer.toB58String()),this.emit("peer:disconnect",e))}get(e){let r=this.getAll(e);return r.length?r[0]:null}getAll(e){if(!bXe.isPeerId(e))throw gye(new Error("peerId must be an instance of peer-id"),mye);let r=e.toB58String(),i=this.connections.get(r);return i?i.filter(n=>n.stat.status==="open"):[]}_onLatencyMeasure(e){this._checkMaxLimit("maxEventLoopDelay",e.avgMs)}_checkMaxLimit(e,r){let i=this._options[e];xa("checking limit of %s. current value: %d of %d",e,r,i),r>i&&(xa("%s: limit exceeded: %s, %d",this._peerId,e,r),this._maybeDisconnectOne())}async _autoDial(){let e=this._options.minConnections;if(this.size>=e){this._autoDialTimeout=G7(this._autoDial,this._options.autoDialInterval);return}let r=Array.from(this._libp2p.peerStore.peers.values()).sort((i,n)=>n.protocols&&n.protocols.length&&(!i.protocols||!i.protocols.length)||n.id.pubKey&&!i.id.pubKey?1:-1);for(let i=0;i<r.length&&this.size<e;i++)if(!this.get(r[i].id)){xa("connecting to a peerStore stored peer %s",r[i].id.toB58String());try{if(await this._libp2p.dialer.connectToPeer(r[i].id),!this._started)return}catch(n){xa.error("could not connect to peerStore stored peer",n)}}this._autoDialTimeout=G7(this._autoDial,this._options.autoDialInterval)}_maybeDisconnectOne(){if(this._options.minConnections<this.connections.size){let e=Array.from(new Map([...this._peerValues.entries()].sort((i,n)=>i[1]-n[1])));xa("%s: sorted peer values: %j",this._peerId,e);let r=e[0];if(r){let i=r[0];xa("%s: lowest value peer is %s",this._peerId,i),xa("%s: closing a connection to %j",this._peerId,i);for(let n of this.connections.values())if(n[0].remotePeer.toB58String()===i){n[0].close();break}}}}};vye.exports=bye});var r2=v((tDt,Eye)=>{l();"use strict";var Rh=Vi(),W7=Rh.Reader,_ye=Rh.Writer,ko=Rh.util,tn=Rh.roots["libp2p-circuit"]||(Rh.roots["libp2p-circuit"]={});tn.CircuitRelay=function(){function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.type=1,t.prototype.srcPeer=null,t.prototype.dstPeer=null,t.prototype.code=100,t.encode=function(r,i){return i||(i=_ye.create()),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&i.uint32(8).int32(r.type),r.srcPeer!=null&&Object.hasOwnProperty.call(r,"srcPeer")&&tn.CircuitRelay.Peer.encode(r.srcPeer,i.uint32(18).fork()).ldelim(),r.dstPeer!=null&&Object.hasOwnProperty.call(r,"dstPeer")&&tn.CircuitRelay.Peer.encode(r.dstPeer,i.uint32(26).fork()).ldelim(),r.code!=null&&Object.hasOwnProperty.call(r,"code")&&i.uint32(32).int32(r.code),i},t.decode=function(r,i){r instanceof W7||(r=W7.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new tn.CircuitRelay;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.type=r.int32();break;case 2:s.srcPeer=tn.CircuitRelay.Peer.decode(r,r.uint32());break;case 3:s.dstPeer=tn.CircuitRelay.Peer.decode(r,r.uint32());break;case 4:s.code=r.int32();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof tn.CircuitRelay)return r;var i=new tn.CircuitRelay;switch(r.type){case"HOP":case 1:i.type=1;break;case"STOP":case 2:i.type=2;break;case"STATUS":case 3:i.type=3;break;case"CAN_HOP":case 4:i.type=4;break}if(r.srcPeer!=null){if(typeof r.srcPeer!="object")throw TypeError(".CircuitRelay.srcPeer: object expected");i.srcPeer=tn.CircuitRelay.Peer.fromObject(r.srcPeer)}if(r.dstPeer!=null){if(typeof r.dstPeer!="object")throw TypeError(".CircuitRelay.dstPeer: object expected");i.dstPeer=tn.CircuitRelay.Peer.fromObject(r.dstPeer)}switch(r.code){case"SUCCESS":case 100:i.code=100;break;case"HOP_SRC_ADDR_TOO_LONG":case 220:i.code=220;break;case"HOP_DST_ADDR_TOO_LONG":case 221:i.code=221;break;case"HOP_SRC_MULTIADDR_INVALID":case 250:i.code=250;break;case"HOP_DST_MULTIADDR_INVALID":case 251:i.code=251;break;case"HOP_NO_CONN_TO_DST":case 260:i.code=260;break;case"HOP_CANT_DIAL_DST":case 261:i.code=261;break;case"HOP_CANT_OPEN_DST_STREAM":case 262:i.code=262;break;case"HOP_CANT_SPEAK_RELAY":case 270:i.code=270;break;case"HOP_CANT_RELAY_TO_SELF":case 280:i.code=280;break;case"STOP_SRC_ADDR_TOO_LONG":case 320:i.code=320;break;case"STOP_DST_ADDR_TOO_LONG":case 321:i.code=321;break;case"STOP_SRC_MULTIADDR_INVALID":case 350:i.code=350;break;case"STOP_DST_MULTIADDR_INVALID":case 351:i.code=351;break;case"STOP_RELAY_REFUSED":case 390:i.code=390;break;case"MALFORMED_MESSAGE":case 400:i.code=400;break}return i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.type=i.enums===String?"HOP":1,n.srcPeer=null,n.dstPeer=null,n.code=i.enums===String?"SUCCESS":100),r.type!=null&&r.hasOwnProperty("type")&&(n.type=i.enums===String?tn.CircuitRelay.Type[r.type]:r.type),r.srcPeer!=null&&r.hasOwnProperty("srcPeer")&&(n.srcPeer=tn.CircuitRelay.Peer.toObject(r.srcPeer,i)),r.dstPeer!=null&&r.hasOwnProperty("dstPeer")&&(n.dstPeer=tn.CircuitRelay.Peer.toObject(r.dstPeer,i)),r.code!=null&&r.hasOwnProperty("code")&&(n.code=i.enums===String?tn.CircuitRelay.Status[r.code]:r.code),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Rh.util.toJSONOptions)},t.Status=function(){var e={},r=Object.create(e);return r[e[100]="SUCCESS"]=100,r[e[220]="HOP_SRC_ADDR_TOO_LONG"]=220,r[e[221]="HOP_DST_ADDR_TOO_LONG"]=221,r[e[250]="HOP_SRC_MULTIADDR_INVALID"]=250,r[e[251]="HOP_DST_MULTIADDR_INVALID"]=251,r[e[260]="HOP_NO_CONN_TO_DST"]=260,r[e[261]="HOP_CANT_DIAL_DST"]=261,r[e[262]="HOP_CANT_OPEN_DST_STREAM"]=262,r[e[270]="HOP_CANT_SPEAK_RELAY"]=270,r[e[280]="HOP_CANT_RELAY_TO_SELF"]=280,r[e[320]="STOP_SRC_ADDR_TOO_LONG"]=320,r[e[321]="STOP_DST_ADDR_TOO_LONG"]=321,r[e[350]="STOP_SRC_MULTIADDR_INVALID"]=350,r[e[351]="STOP_DST_MULTIADDR_INVALID"]=351,r[e[390]="STOP_RELAY_REFUSED"]=390,r[e[400]="MALFORMED_MESSAGE"]=400,r}(),t.Type=function(){var e={},r=Object.create(e);return r[e[1]="HOP"]=1,r[e[2]="STOP"]=2,r[e[3]="STATUS"]=3,r[e[4]="CAN_HOP"]=4,r}(),t.Peer=function(){function e(r){if(this.addrs=[],r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.id=ko.newBuffer([]),e.prototype.addrs=ko.emptyArray,e.encode=function(i,n){if(n||(n=_ye.create()),n.uint32(10).bytes(i.id),i.addrs!=null&&i.addrs.length)for(var s=0;s<i.addrs.length;++s)n.uint32(18).bytes(i.addrs[s]);return n},e.decode=function(i,n){i instanceof W7||(i=W7.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new tn.CircuitRelay.Peer;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.id=i.bytes();break;case 2:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(i.bytes());break;default:i.skipType(a&7);break}}if(!o.hasOwnProperty("id"))throw ko.ProtocolError("missing required 'id'",{instance:o});return o},e.fromObject=function(i){if(i instanceof tn.CircuitRelay.Peer)return i;var n=new tn.CircuitRelay.Peer;if(i.id!=null&&(typeof i.id=="string"?ko.base64.decode(i.id,n.id=ko.newBuffer(ko.base64.length(i.id)),0):i.id.length&&(n.id=i.id)),i.addrs){if(!Array.isArray(i.addrs))throw TypeError(".CircuitRelay.Peer.addrs: array expected");n.addrs=[];for(var s=0;s<i.addrs.length;++s)typeof i.addrs[s]=="string"?ko.base64.decode(i.addrs[s],n.addrs[s]=ko.newBuffer(ko.base64.length(i.addrs[s])),0):i.addrs[s].length&&(n.addrs[s]=i.addrs[s])}return n},e.toObject=function(i,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.addrs=[]),n.defaults&&(n.bytes===String?s.id="":(s.id=[],n.bytes!==Array&&(s.id=ko.newBuffer(s.id)))),i.id!=null&&i.hasOwnProperty("id")&&(s.id=n.bytes===String?ko.base64.encode(i.id,0,i.id.length):n.bytes===Array?Array.prototype.slice.call(i.id):i.id),i.addrs&&i.addrs.length){s.addrs=[];for(var o=0;o<i.addrs.length;++o)s.addrs[o]=n.bytes===String?ko.base64.encode(i.addrs[o],0,i.addrs[o].length):n.bytes===Array?Array.prototype.slice.call(i.addrs[o]):i.addrs[o]}return s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Rh.util.toJSONOptions)},e}(),t}();Eye.exports=tn});var Aye=v((rDt,xye)=>{l();"use strict";var{source:Sye}=Tc(),wXe=Ee(),_Xe=wXe("libp2p:stream:converter");function EXe({stream:t,remoteAddr:e,localAddr:r},i={}){let{sink:n,source:s}=t,o={async sink(c){i.signal&&(c=Sye(c,i.signal));try{await n(c)}catch(u){u.type!=="aborted"&&_Xe(u)}a()},source:i.signal?Sye(s,i.signal):s,conn:t,localAddr:r,remoteAddr:e,timeline:{open:Date.now(),close:void 0},close(){return n(new Uint8Array(0)),a()}};function a(){return o.timeline.close||(o.timeline.close=Date.now()),Promise.resolve()}return o}xye.exports=EXe});var v3=v((iDt,Iye)=>{l();"use strict";Iye.exports={relay:"/libp2p/circuit/relay/0.1.0"}});var Rye=v((nDt,Tye)=>{l();"use strict";var{EventEmitter:SXe}=vr(),{Multiaddr:xXe}=rt();Tye.exports=t=>{let e=new Map;async function r(s){let o=String(s).split("/p2p-circuit").find(u=>u!==""),a=await t.dial(new xXe(o)),c=a.remoteAddr.encapsulate("/p2p-circuit");e.set(a.remotePeer.toB58String(),c),n.emit("listening")}function i(){let s=[];for(let o of e.values())s.push(o);return s}let n=Object.assign(new SXe,{close:()=>Promise.resolve(),listen:r,getAddrs:i});return t.connectionManager.on("peer:disconnect",s=>{e.delete(s.remotePeer.toB58String())&&n.emit("close")}),n}});var zC=v((sDt,Oye)=>{l();"use strict";var{Multiaddr:Pye}=rt(),{CircuitRelay:Ph}=r2();function Cye(t,e){t.write({type:Ph.Type.STATUS,code:e})}function AXe(t,e){try{t.dstPeer&&t.dstPeer.addrs&&t.dstPeer.addrs.forEach(r=>new Pye(r))}catch(r){throw Cye(e,t.type===Ph.Type.HOP?Ph.Status.HOP_DST_MULTIADDR_INVALID:Ph.Status.STOP_DST_MULTIADDR_INVALID),r}try{t.srcPeer&&t.srcPeer.addrs&&t.srcPeer.addrs.forEach(r=>new Pye(r))}catch(r){throw Cye(e,t.type===Ph.Type.HOP?Ph.Status.HOP_SRC_MULTIADDR_INVALID:Ph.Status.STOP_SRC_MULTIADDR_INVALID),r}}Oye.exports={validateAddrs:AXe}});var X7=v((oDt,Mye)=>{l();"use strict";var kye=Ee(),Y7=Object.assign(kye("libp2p:circuit:stream-handler"),{error:kye("libp2p:circuit:stream-handler:err")}),Dye=ga(),IXe=q1(),{CircuitRelay:Bye}=r2(),Nye=class{constructor({stream:e,maxLength:r=4096}){this.stream=e,this.shake=IXe(this.stream),this.decoder=Dye.decode.fromReader(this.shake.reader,{maxDataLength:r})}async read(){let e=await this.decoder.next();if(e.value){let r=Bye.decode(e.value.slice());return Y7("read message type",r.type),r}Y7("read received no value, closing stream"),this.close()}write(e){Y7("write message type %s",e.type),this.shake.write(Dye.encode.single(Bye.encode(e).finish()))}rest(){return this.shake.rest(),this.shake.stream}end(e){this.write(e),this.close()}close(){Y7("closing the stream"),this.rest().sink([])}};Mye.exports=Nye});var GC=v((aDt,$C)=>{l();"use strict";var Lye=Ee(),w3=Object.assign(Lye("libp2p:circuit:stop"),{error:Lye("libp2p:circuit:stop:err")}),{CircuitRelay:HC}=r2(),TXe=v3(),RXe=X7(),{validateAddrs:PXe}=zC();$C.exports.handleStop=function({connection:e,request:r,streamHandler:i}){try{PXe(r,i)}catch(n){return w3.error("invalid stop request via peer %s",e.remotePeer.toB58String(),n)}return w3("stop request is valid"),i.write({type:HC.Type.STATUS,code:HC.Status.SUCCESS}),i.rest()};$C.exports.stop=async function({connection:e,request:r}){let{stream:i}=await e.newStream([TXe.relay]);w3("starting stop request to %s",e.remotePeer.toB58String());let n=new RXe({stream:i});n.write(r);let s=await n.read();if(!s)return n.close();if(s.code===HC.Status.SUCCESS)return w3("stop request to %s was successful",e.remotePeer.toB58String()),n.rest();w3("stop request failed with code %d",s.code),n.close()}});var WC=v((cDt,Vye)=>{l();"use strict";var qye=Ee(),Gu=Object.assign(qye("libp2p:circuit:hop"),{error:qye("libp2p:circuit:hop:err")}),jye=_r(),CXe=it(),{validateAddrs:OXe}=zC(),Uye=X7(),{CircuitRelay:Ds}=r2(),{pipe:kXe}=Nr(),{codes:Fye}=Ei(),{stop:DXe}=GC(),Kye=v3();async function BXe({connection:t,request:e,streamHandler:r,circuit:i}){if(!i._options.hop.enabled)return Gu("HOP request received but we are not acting as a relay"),r.end({type:Ds.Type.STATUS,code:Ds.Status.HOP_CANT_SPEAK_RELAY});try{OXe(e,r)}catch(u){return Gu.error("invalid hop request via peer %s",t.remotePeer.toB58String(),u)}if(!e.dstPeer){Gu("HOP request received but we do not receive a dstPeer");return}let n=new CXe(e.dstPeer.id),s=i._connectionManager.get(n);if(!s&&!i._options.hop.active)return Gu("HOP request received but we are not connected to the destination peer"),r.end({type:Ds.Type.STATUS,code:Ds.Status.HOP_NO_CONN_TO_DST});if(!s)return;let o={type:Ds.Type.STOP,dstPeer:e.dstPeer,srcPeer:e.srcPeer},a;try{a=await DXe({connection:s,request:o})}catch(u){return Gu.error(u)}Gu("hop request from %s is valid",t.remotePeer.toB58String()),r.write({type:Ds.Type.STATUS,code:Ds.Status.SUCCESS});let c=r.rest();return kXe(c,a,c)}async function NXe({connection:t,request:e}){let{stream:r}=await t.newStream([Kye.relay]),i=new Uye({stream:r});i.write(e);let n=await i.read();if(!n)throw jye(new Error("HOP request had no response"),Fye.ERR_HOP_REQUEST_FAILED);if(n.code===Ds.Status.SUCCESS)return Gu("hop request was successful"),i.rest();throw Gu("hop request failed with code %d, closing stream",n.code),i.close(),jye(new Error(`HOP request failed with code ${n.code}`),Fye.ERR_HOP_REQUEST_FAILED)}async function MXe({connection:t}){let{stream:e}=await t.newStream([Kye.relay]),r=new Uye({stream:e});r.write({type:Ds.Type.CAN_HOP});let i=await r.read();return await r.close(),!(!i||i.code!==Ds.Status.SUCCESS)}function LXe({connection:t,streamHandler:e,circuit:r}){let i=r._options.hop.enabled;Gu("can hop (%s) request from %s",i,t.remotePeer.toB58String()),e.end({type:Ds.Type.STATUS,code:i?Ds.Status.SUCCESS:Ds.Status.HOP_CANT_SPEAK_RELAY})}Vye.exports={handleHop:BXe,hop:NXe,canHop:MXe,handleCanHop:LXe}});var Yye=v((uDt,Wye)=>{l();"use strict";var zye=Ee(),Wu=Object.assign(zye("libp2p:circuit"),{error:zye("libp2p:circuit:err")}),qXe=_r(),jXe=zl(),{Multiaddr:_3}=rt(),Hye=it(),{CircuitRelay:E3}=r2(),{codes:UXe}=Ei(),$ye=Aye(),{relay:FXe}=v3(),KXe=Rye(),{handleCanHop:VXe,handleHop:zXe,hop:HXe}=WC(),{handleStop:$Xe}=GC(),GXe=X7(),WXe=Symbol.for("@libp2p/js-libp2p-circuit/circuit"),Gye=class{constructor({libp2p:e,upgrader:r}){this._dialer=e.dialer,this._registrar=e.registrar,this._connectionManager=e.connectionManager,this._upgrader=r,this._options=e._config.relay,this._libp2p=e,this.peerId=e.peerId,this._registrar.handle(FXe,this._onProtocol.bind(this))}async _onProtocol({connection:e,stream:r}){let i=new GXe({stream:r}),n=await i.read();if(!n)return;let s=this,o;switch(n.type){case E3.Type.CAN_HOP:{Wu("received CAN_HOP request from %s",e.remotePeer.toB58String()),await VXe({circuit:s,connection:e,streamHandler:i});break}case E3.Type.HOP:{Wu("received HOP request from %s",e.remotePeer.toB58String()),o=await zXe({connection:e,request:n,streamHandler:i,circuit:s});break}case E3.Type.STOP:{Wu("received STOP request from %s",e.remotePeer.toB58String()),o=await $Xe({connection:e,request:n,streamHandler:i});break}default:Wu("Request of type %s not supported",n.type)}if(o){let a=new _3(n.dstPeer.addrs[0]),c=new _3(n.srcPeer.addrs[0]),u=$ye({stream:o,remoteAddr:a,localAddr:c}),f=n.type===E3.Type.HOP?"relay":"inbound";Wu("new %s connection %s",f,u.remoteAddr);let d=await this._upgrader.upgradeInbound(u);Wu("%s connection %s upgraded",f,u.remoteAddr),this.handler&&this.handler(d)}}async dial(e,r){let i=e.toString().split("/p2p-circuit"),n=new _3(i[0]),s=new _3(i[i.length-1]),o=n.getPeerId(),a=s.getPeerId();if(!o||!a){let h="Circuit relay dial failed as addresses did not have peer id";throw Wu.error(h),qXe(new Error(h),UXe.ERR_RELAYED_DIAL)}let c=Hye.createFromB58String(o),u=Hye.createFromB58String(a),f=!1,d=this._connectionManager.get(c);d||(d=await this._dialer.connectToPeer(n,r),f=!0);try{let h=await HXe({connection:d,request:{type:E3.Type.HOP,srcPeer:{id:this.peerId.toBytes(),addrs:this._libp2p.multiaddrs.map(m=>m.bytes)},dstPeer:{id:u.toBytes(),addrs:[new _3(s).bytes]}}}),p=n.encapsulate(`/p2p-circuit/p2p/${this.peerId.toB58String()}`),y=$ye({stream:h,remoteAddr:e,localAddr:p});return Wu("new outbound connection %s",y.remoteAddr),this._upgrader.upgradeOutbound(y)}catch(h){throw Wu.error("Circuit relay dial failed",h),f&&await d.close(),h}}createListener(e,r){return typeof e=="function"&&(r=e,e={}),this.handler=r,KXe(this._libp2p)}filter(e){return e=Array.isArray(e)?e:[e],e.filter(r=>jXe.Circuit.matches(r))}get[Symbol.toStringTag](){return"Circuit"}static isTransport(e){return Boolean(e&&e[WXe])}};Wye.exports=Gye});var YC=v((fDt,Xye)=>{l();"use strict";var{CID:YXe}=(Te(),af),{sha256:XXe}=(mi(),zs);Xye.exports.namespaceToCid=async t=>{let e=new TextEncoder().encode(t),r=await XXe.digest(e);return YXe.createV0(r)}});var ige=v((lDt,rge)=>{l();"use strict";var Qye=Ee(),Zye=Object.assign(Qye("libp2p:auto-relay"),{error:Qye("libp2p:auto-relay:err")}),{fromString:QXe}=(dt(),bi),{toString:ZXe}=(tt(),pr),{Multiaddr:JXe}=rt(),eQe=it(),{relay:tQe}=v3(),{canHop:rQe}=WC(),{namespaceToCid:iQe}=YC(),{CIRCUIT_PROTO_CODE:nQe,HOP_METADATA_KEY:Jye,HOP_METADATA_VALUE:ege,RELAY_RENDEZVOUS_NS:sQe}=F7(),tge=class{constructor({libp2p:e,maxListeners:r=1,onError:i}){this._libp2p=e,this._peerId=e.peerId,this._peerStore=e.peerStore,this._connectionManager=e.connectionManager,this._transportManager=e.transportManager,this._addressSorter=e.dialer.addressSorter,this.maxListeners=r,this._listenRelays=new Set,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this._peerStore.on("change:protocols",this._onProtocolChange),this._connectionManager.on("peer:disconnect",this._onPeerDisconnected),this._onError=(n,s)=>{Zye.error(s||n),i&&i(n,s)}}async _onProtocolChange({peerId:e,protocols:r}){let i=e.toB58String(),n=r.find(s=>s===tQe);if(!n&&this._listenRelays.has(i)){this._removeListenRelay(i);return}else if(!n||this._listenRelays.has(i))return;try{let s=this._connectionManager.get(e);if(!s)return;if(s.remoteAddr.protoCodes().includes(nQe)){Zye(`relayed connection to ${i} will not be used to hop on`);return}await rQe({connection:s})&&(this._peerStore.metadataBook.set(e,Jye,QXe(ege)),await this._addListenRelay(s,i))}catch(s){this._onError(s)}}_onPeerDisconnected(e){let i=e.remotePeer.toB58String();!this._listenRelays.has(i)||this._removeListenRelay(i)}async _addListenRelay(e,r){if(this._listenRelays.size>=this.maxListeners)return;let i=this._peerStore.addressBook.getMultiaddrsForPeer(e.remotePeer,this._addressSorter);if(!i||!i.length)return;let n=`${i[0].toString()}/p2p-circuit`;this._listenRelays.add(r);try{await this._transportManager.listen([new JXe(n)])}catch(s){this._onError(s),this._listenRelays.delete(r)}}_removeListenRelay(e){this._listenRelays.delete(e)&&this._listenOnAvailableHopRelays([e])}async _listenOnAvailableHopRelays(e=[]){if(this._listenRelays.size>=this.maxListeners)return;let r=[];for(let[i,n]of this._peerStore.metadataBook.data.entries()){if(this._listenRelays.has(i)||e.includes(i))continue;let s=n.get(Jye);if(!s||ZXe(s)!==ege)continue;let o=eQe.createFromB58String(i),a=this._connectionManager.get(o);if(!a){r.push(o);continue}if(await this._addListenRelay(a,i),this._listenRelays.size>=this.maxListeners)return}for(let i of r)if(await this._tryToListenOnRelay(i),this._listenRelays.size>=this.maxListeners)return;try{let i=await iQe(sQe);for await(let n of this._libp2p.contentRouting.findProviders(i)){if(!n.multiaddrs.length)continue;let s=n.id;if(this._peerStore.addressBook.add(s,n.multiaddrs),await this._tryToListenOnRelay(s),this._listenRelays.size>=this.maxListeners)return}}catch(i){this._onError(i)}}async _tryToListenOnRelay(e){try{let r=await this._libp2p.dial(e);await this._addListenRelay(r,e.toB58String())}catch(r){this._onError(r,`could not connect and listen on known hop relay ${e.toB58String()}`)}}};rge.exports=tge});var cge=v((dDt,age)=>{l();"use strict";var nge=Ee(),sge=Object.assign(nge("libp2p:relay"),{error:nge("libp2p:relay:err")}),{setDelayedInterval:oQe,clearDelayedInterval:aQe}=IC(),cQe=ige(),{namespaceToCid:uQe}=YC(),{RELAY_RENDEZVOUS_NS:fQe}=F7(),oge=class{constructor(e){this._libp2p=e,this._options={...e._config.relay},this._autoRelay=this._options.autoRelay.enabled&&new cQe({libp2p:e,...this._options.autoRelay}),this._advertiseService=this._advertiseService.bind(this)}start(){this._options.hop.enabled&&this._options.advertise.enabled&&(this._timeout=oQe(this._advertiseService,this._options.advertise.ttl,this._options.advertise.bootDelay))}stop(){aQe(this._timeout)}async _advertiseService(){try{let e=await uQe(fQe);await this._libp2p.contentRouting.provide(e)}catch(e){e.code==="NO_ROUTERS_AVAILABLE"?(sge.error("a content router, such as a DHT, must be provided in order to advertise the relay service",e),this.stop()):sge.error(e)}}};age.exports=oge});var dge=v((pDt,lge)=>{l();var uge=uS(),fge=gu();lge.exports=class{constructor(){this._buffer=new uge,this._waitingConsumers=new uge}push(e){let{promise:r,resolve:i}=fge();return this._buffer.push({chunk:e,resolve:i}),this._consume(),r}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){let e=this._waitingConsumers.shift(),r=this._buffer.shift();e.resolve(r.chunk),r.resolve()}}shift(){let{promise:e,resolve:r}=fge();return this._waitingConsumers.push({resolve:r}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}}});var hge=v((yDt,QC)=>{l();"use strict";var XC=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},S3=class{static fn(e){return(...r)=>new S3((i,n,s)=>{r.push(s),e(...r).then(i,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,i)=>{this._reject=i;let n=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},s=a=>{this._isPending=!1,i(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(n,s,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new XC(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(S3.prototype,Promise.prototype);QC.exports=S3;QC.exports.CancelError=XC});var yge=v((gDt,Q7)=>{l();"use strict";var pge=cC(),lQe=hge(),ZC=class extends Error{},dQe=(t,e)=>new lQe((r,i,n)=>{let{count:s,filter:o=()=>!0}=e;if(!Number.isFinite(s)){i(new TypeError(`Expected a finite number, got ${typeof e.count}`));return}let a=[],c=[],u=0,f=!1,d=new Set,h=()=>(a.length===s&&(r(a),f=!0),u-c.length<s&&(i(new pge(c)),f=!0),f),p=()=>{for(let y of t)!d.has(y)&&typeof y.cancel=="function"&&y.cancel()};n(p);for(let y of t)u++,(async()=>{try{let m=await y;if(f)return;if(!o(m))throw new ZC("Value does not satisfy filter");a.push(m)}catch(m){c.push(m)}finally{d.add(y),!f&&h()&&p()}})();s>u&&(i(new RangeError(`Expected input to contain at least ${e.count} items, but contains ${u} items`)),p())});Q7.exports=dQe;Q7.exports.AggregateError=pge;Q7.exports.FilterError=ZC});var gge=v((mDt,eO)=>{l();"use strict";var JC=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},x3=class{static fn(e){return(...r)=>new x3((i,n,s)=>{r.push(s),e(...r).then(i,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,i)=>{this._reject=i;let n=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},s=a=>{this._isPending=!1,i(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(n,s,o)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new JC(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(x3.prototype,Promise.prototype);eO.exports=x3;eO.exports.CancelError=JC});var bge=v((bDt,tO)=>{l();"use strict";var mge=yge(),hQe=gge();tO.exports=(t,e)=>{let r=mge(t,{...e,count:1});return hQe.fn(async i=>{i(()=>{r.cancel()});let[n]=await r;return n})()};tO.exports.AggregateError=mge.AggregateError});var _ge=v((vDt,wge)=>{l();"use strict";var pQe=_r(),yQe=E0().default,{anySignal:gQe}=yf(),mQe=dge(),bQe=bge(),vge=class{constructor({addrs:e,dialAction:r,dialer:i}){this.addrs=e,this.dialer=i,this.dialAction=r}async run(e={}){let r=this.dialer.getTokens(this.addrs.length);if(r.length<1)throw pQe(new Error("No dial tokens available"),"ERR_NO_DIAL_TOKENS");let i=new mQe;r.forEach(o=>i.push(o));let n=this.addrs.map(()=>new yQe),s=0;try{return await bQe(this.addrs.map(async(o,a)=>{let c=await i.shift(),u;try{let f=n[a].signal;u=await this.dialAction(o,{...e,signal:e.signal?gQe([f,e.signal]):f}),n.splice(a,1)}finally{s++,this.addrs.length-s>=r.length?i.push(c):this.dialer.releaseToken(r.splice(r.indexOf(c),1)[0])}return u}))}finally{n.map(o=>o.abort()),r.forEach(o=>this.dialer.releaseToken(o))}}};wge.exports=vge});var Age=v((wDt,xge)=>{l();"use strict";var Ege=Ee(),i2=Object.assign(Ege("libp2p:dialer"),{error:Ege("libp2p:dialer:err")}),rO=_r(),{Multiaddr:iO}=rt(),vQe=$6(),{AbortError:wQe}=Tc(),{anySignal:_Qe}=yf(),EQe=_ge(),{publicAddressesFirst:SQe}=DC(),xQe=PC(),{codes:Z7}=Ei(),{DIAL_TIMEOUT:AQe,MAX_PARALLEL_DIALS:IQe,MAX_PER_PEER_DIALS:TQe,MAX_ADDRS_TO_DIAL:RQe}=U7(),Sge=class{constructor({transportManager:e,peerStore:r,addressSorter:i=SQe,maxParallelDials:n=IQe,maxAddrsToDial:s=RQe,dialTimeout:o=AQe,maxDialsPerPeer:a=TQe,resolvers:c={}}){this.transportManager=e,this.peerStore=r,this.addressSorter=i,this.maxParallelDials=n,this.maxAddrsToDial=s,this.timeout=o,this.maxDialsPerPeer=a,this.tokens=[...new Array(n)].map((u,f)=>f),this._pendingDials=new Map,this._pendingDialTargets=new Map;for(let[u,f]of Object.entries(c))iO.resolvers.set(u,f)}destroy(){for(let e of this._pendingDials.values())try{e.controller.abort()}catch(r){i2.error(r)}this._pendingDials.clear();for(let e of this._pendingDialTargets.values())e.reject(new wQe("Dialer was destroyed"));this._pendingDialTargets.clear()}async connectToPeer(e,r={}){let i=await this._createCancellableDialTarget(e);if(!i.addrs.length)throw rO(new Error("The dial request has no valid addresses"),Z7.ERR_NO_VALID_ADDRESSES);let n=this._pendingDials.get(i.id)||this._createPendingDial(i,r);try{let s=await n.promise;return i2("dial succeeded to %s",i.id),s}catch(s){throw n.controller.signal.aborted&&(s.code=Z7.ERR_TIMEOUT),i2.error(s),s}finally{n.destroy()}}async _createCancellableDialTarget(e){let r=`${parseInt(String(Math.random()*1e9),10).toString()+Date.now()}`,i=new Promise((s,o)=>{this._pendingDialTargets.set(r,{resolve:s,reject:o})}),n=await Promise.race([this._createDialTarget(e),i]);return this._pendingDialTargets.delete(r),n}async _createDialTarget(e){let{id:r,multiaddrs:i}=xQe(e);i&&this.peerStore.addressBook.add(r,i);let n=this.peerStore.addressBook.getMultiaddrsForPeer(r,this.addressSorter)||[];iO.isMultiaddr(e)&&(n=n.filter(a=>!e.equals(a)),n.unshift(e));let s=[];for(let a of n)(await this._resolve(a)).forEach(u=>s.push(u));let o=s.filter(a=>this.transportManager.transportForMultiaddr(a));if(o.length>this.maxAddrsToDial)throw this.peerStore.delete(r),rO(new Error("dial with more addresses than allowed"),Z7.ERR_TOO_MANY_ADDRESSES);return{id:r.toB58String(),addrs:o}}_createPendingDial(e,r={}){let i=(u,f)=>{if(f.signal.aborted)throw rO(new Error("already aborted"),Z7.ERR_ALREADY_ABORTED);return this.transportManager.dial(u,f)},n=new EQe({addrs:e.addrs,dialAction:i,dialer:this}),s=new vQe(this.timeout),o=[s.signal];r.signal&&o.push(r.signal);let a=_Qe(o),c={dialRequest:n,controller:s,promise:n.run({...r,signal:a}),destroy:()=>{s.clear(),this._pendingDials.delete(e.id)}};return this._pendingDials.set(e.id,c),c}getTokens(e){let r=Math.min(e,this.maxDialsPerPeer,this.tokens.length),i=this.tokens.splice(0,r);return i2("%d tokens request, returning %d, %d remaining",e,r,this.tokens.length),i}releaseToken(e){this.tokens.indexOf(e)>-1||(i2("token %d released",e),this.tokens.push(e))}async _resolve(e){if(!e.protoNames().includes("dnsaddr"))return[e];let i=await this._resolveRecord(e);return(await Promise.all(i.map(o=>this._resolve(o)))).flat().reduce((o,a)=>(o.find(c=>c.equals(a))||o.push(a),o),[])}async _resolveRecord(e){try{return e=new iO(e.toString()),await e.resolve()}catch(r){return i2.error(`multiaddr ${e} could not be resolved`),[]}}};xge.exports=Sge});var Tge=v((_Dt,Ige)=>{l();"use strict";function PQe(t){return t>=55296&&t<=56319}function CQe(t){return t>=56320&&t<=57343}Ige.exports=function(e,r,i){if(typeof r!="string")throw new Error("Input must be string");for(var n=r.length,s=0,o,a,c=0;c<n;c+=1){if(o=r.charCodeAt(c),a=r[c],PQe(o)&&CQe(r.charCodeAt(c+1))&&(c+=1,a+=r[c]),s+=e(a),s===i)return r.slice(0,c+1);if(s>i)return r.slice(0,c-a.length+1)}return r}});var Pge=v((EDt,Rge)=>{l();"use strict";function OQe(t){return t>=55296&&t<=56319}function kQe(t){return t>=56320&&t<=57343}Rge.exports=function(e){if(typeof e!="string")throw new Error("Input must be string");for(var r=e.length,i=0,n=null,s=null,o=0;o<r;o++)n=e.charCodeAt(o),kQe(n)?s!=null&&OQe(s)?i+=1:i+=3:n<=127?i+=1:n>=128&&n<=2047?i+=2:n>=2048&&n<=65535&&(i+=3),s=n;return i}});var Oge=v((SDt,Cge)=>{l();"use strict";var DQe=Tge(),BQe=Pge();Cge.exports=DQe.bind(null,BQe)});var Bge=v((xDt,Dge)=>{l();"use strict";var NQe=Oge(),MQe=/[\/\?<>\\:\*\|"]/g,LQe=/[\x00-\x1f\x80-\x9f]/g,qQe=/^\.+$/,jQe=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,UQe=/[\. ]+$/;function kge(t,e){if(typeof t!="string")throw new Error("Input must be string");var r=t.replace(MQe,e).replace(LQe,e).replace(qQe,e).replace(jQe,e).replace(UQe,e);return NQe(r,255)}Dge.exports=function(t,e){var r=e&&e.replacement||"",i=kge(t,r);return r===""?i:kge(i,"")}});var qge=v((ADt,Lge)=>{l();var n2=yt();iu();or();var Le=n2.asn1,s2=Lge.exports=n2.pkcs7asn1=n2.pkcs7asn1||{};n2.pkcs7=n2.pkcs7||{};n2.pkcs7.asn1=s2;var Nge={name:"ContentInfo",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Le.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s2.contentInfoValidator=Nge;var Mge={name:"EncryptedContentInfo",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Le.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Le.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s2.envelopedDataValidator={name:"EnvelopedData",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Le.Class.UNIVERSAL,type:Le.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Mge)};s2.encryptedDataValidator={name:"EncryptedData",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Le.Class.UNIVERSAL,type:Le.Type.INTEGER,constructed:!1,capture:"version"}].concat(Mge)};var FQe={name:"SignerInfo",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Le.Class.UNIVERSAL,type:Le.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Le.Class.UNIVERSAL,type:Le.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Le.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Le.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Le.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s2.signedDataValidator={name:"SignedData",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Le.Class.UNIVERSAL,type:Le.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Nge,{name:"SignedData.Certificates",tagClass:Le.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Le.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SET,capture:"signerInfos",optional:!0,value:[FQe]}]};s2.recipientInfoValidator={name:"RecipientInfo",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Le.Class.UNIVERSAL,type:Le.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Le.Class.UNIVERSAL,type:Le.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Le.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Uge=v((IDt,jge)=>{l();var Ch=yt();or();Ch.mgf=Ch.mgf||{};var KQe=jge.exports=Ch.mgf.mgf1=Ch.mgf1=Ch.mgf1||{};KQe.create=function(t){var e={generate:function(r,i){for(var n=new Ch.util.ByteBuffer,s=Math.ceil(i/t.digestLength),o=0;o<s;o++){var a=new Ch.util.ByteBuffer;a.putInt32(o),t.start(),t.update(r+a.getBytes()),n.putBuffer(t.digest())}return n.truncate(n.length()-i),n.getBytes()}};return e}});var Kge=v((TDt,Fge)=>{l();var J7=yt();Uge();Fge.exports=J7.mgf=J7.mgf||{};J7.mgf.mgf1=J7.mgf1});var zge=v((RDt,Vge)=>{l();var Oh=yt();Sf();or();var VQe=Vge.exports=Oh.pss=Oh.pss||{};VQe.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,i=e.digestLength,n=t.salt||null;typeof n=="string"&&(n=Oh.util.createBuffer(n));var s;if("saltLength"in t)s=t.saltLength;else if(n!==null)s=n.length();else throw new Error("Salt length not specified or specific salt not given.");if(n!==null&&n.length()!==s)throw new Error("Given salt length does not match length of given salt.");var o=t.prng||Oh.random,a={};return a.encode=function(c,u){var f,d=u-1,h=Math.ceil(d/8),p=c.digest().getBytes();if(h<i+s+2)throw new Error("Message is too long to encrypt.");var y;n===null?y=o.getBytesSync(s):y=n.bytes();var m=new Oh.util.ByteBuffer;m.fillWithByte(0,8),m.putBytes(p),m.putBytes(y),e.start(),e.update(m.getBytes());var w=e.digest().getBytes(),b=new Oh.util.ByteBuffer;b.fillWithByte(0,h-s-i-2),b.putByte(1),b.putBytes(y);var S=b.getBytes(),I=h-i-1,j=r.generate(w,I),B="";for(f=0;f<I;f++)B+=String.fromCharCode(S.charCodeAt(f)^j.charCodeAt(f));var C=65280>>8*h-d&255;return B=String.fromCharCode(B.charCodeAt(0)&~C)+B.substr(1),B+w+String.fromCharCode(188)},a.verify=function(c,u,f){var d,h=f-1,p=Math.ceil(h/8);if(u=u.substr(-p),p<i+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var y=p-i-1,m=u.substr(0,y),w=u.substr(y,i),b=65280>>8*p-h&255;if((m.charCodeAt(0)&b)!=0)throw new Error("Bits beyond keysize not zero as expected.");var S=r.generate(w,y),I="";for(d=0;d<y;d++)I+=String.fromCharCode(m.charCodeAt(d)^S.charCodeAt(d));I=String.fromCharCode(I.charCodeAt(0)&~b)+I.substr(1);var j=p-i-s-2;for(d=0;d<j;d++)if(I.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(I.charCodeAt(j)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=I.substr(-s),C=new Oh.util.ByteBuffer;C.fillWithByte(0,8),C.putBytes(c),C.putBytes(B),e.start(),e.update(C.getBytes());var z=e.digest().getBytes();return w===z},a}});var sO=v((PDt,Wge)=>{l();var ke=yt();P0();iu();f4();Ef();Kge();I0();p4();zge();ky();or();var k=ke.asn1,Re=Wge.exports=ke.pki=ke.pki||{},st=Re.oids,oi={};oi.CN=st.commonName;oi.commonName="CN";oi.C=st.countryName;oi.countryName="C";oi.L=st.localityName;oi.localityName="L";oi.ST=st.stateOrProvinceName;oi.stateOrProvinceName="ST";oi.O=st.organizationName;oi.organizationName="O";oi.OU=st.organizationalUnitName;oi.organizationalUnitName="OU";oi.E=st.emailAddress;oi.emailAddress="E";var Hge=ke.pki.rsa.publicKeyValidator,zQe={name:"Certificate",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:k.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:k.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:k.Class.UNIVERSAL,type:k.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:k.Class.UNIVERSAL,type:k.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:k.Class.UNIVERSAL,type:k.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:k.Class.UNIVERSAL,type:k.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Hge,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:k.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:k.Class.UNIVERSAL,type:k.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:k.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:k.Class.UNIVERSAL,type:k.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:k.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:k.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:k.Class.UNIVERSAL,type:k.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},HQe={name:"rsapss",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:k.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:k.Class.UNIVERSAL,type:k.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:k.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:k.Class.UNIVERSAL,type:k.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:k.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:k.Class.UNIVERSAL,type:k.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:k.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:k.Class.UNIVERSAL,type:k.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},$Qe={name:"CertificationRequestInfo",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Hge,{name:"CertificationRequestInfo.attributes",tagClass:k.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:k.Class.UNIVERSAL,type:k.Type.SET,constructed:!0}]}]}]},GQe={name:"CertificationRequest",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[$Qe,{name:"CertificationRequest.signatureAlgorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:k.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:k.Class.UNIVERSAL,type:k.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Re.RDNAttributesAsArray=function(t,e){for(var r=[],i,n,s,o=0;o<t.value.length;++o){i=t.value[o];for(var a=0;a<i.value.length;++a)s={},n=i.value[a],s.type=k.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in st&&(s.name=st[s.type],s.name in oi&&(s.shortName=oi[s.name])),e&&(e.update(s.type),e.update(s.value)),r.push(s)}return r};Re.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var i=t[r],n=k.derToOid(i.value[0].value),s=i.value[1].value,o=0;o<s.length;++o){var a={};if(a.type=n,a.value=s[o].value,a.valueTagClass=s[o].type,a.type in st&&(a.name=st[a.type],a.name in oi&&(a.shortName=oi[a.name])),a.type===st.extensionRequest){a.extensions=[];for(var c=0;c<a.value.length;++c)a.extensions.push(Re.certificateExtensionFromAsn1(a.value[c]))}e.push(a)}return e};function Rl(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,i,n=0;r===null&&n<t.attributes.length;++n)i=t.attributes[n],(e.type&&e.type===i.type||e.name&&e.name===i.name||e.shortName&&e.shortName===i.shortName)&&(r=i);return r}var ew=function(t,e,r){var i={};if(t!==st["RSASSA-PSS"])return i;r&&(i={hash:{algorithmOid:st.sha1},mgf:{algorithmOid:st.mgf1,hash:{algorithmOid:st.sha1}},saltLength:20});var n={},s=[];if(!k.validate(e,HQe,n,s)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=s,o}return n.hashOid!==void 0&&(i.hash=i.hash||{},i.hash.algorithmOid=k.derToOid(n.hashOid)),n.maskGenOid!==void 0&&(i.mgf=i.mgf||{},i.mgf.algorithmOid=k.derToOid(n.maskGenOid),i.mgf.hash=i.mgf.hash||{},i.mgf.hash.algorithmOid=k.derToOid(n.maskGenHashOid)),n.saltLength!==void 0&&(i.saltLength=n.saltLength.charCodeAt(0)),i};Re.certificateFromPem=function(t,e,r){var i=ke.pem.decode(t)[0];if(i.type!=="CERTIFICATE"&&i.type!=="X509 CERTIFICATE"&&i.type!=="TRUSTED CERTIFICATE"){var n=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw n.headerType=i.type,n}if(i.procType&&i.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=k.fromDer(i.body,r);return Re.certificateFromAsn1(s,e)};Re.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:k.toDer(Re.certificateToAsn1(t)).getBytes()};return ke.pem.encode(r,{maxline:e})};Re.publicKeyFromPem=function(t){var e=ke.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var i=k.fromDer(e.body);return Re.publicKeyFromAsn1(i)};Re.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:k.toDer(Re.publicKeyToAsn1(t)).getBytes()};return ke.pem.encode(r,{maxline:e})};Re.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:k.toDer(Re.publicKeyToRSAPublicKey(t)).getBytes()};return ke.pem.encode(r,{maxline:e})};Re.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||ke.md.sha1.create(),i=e.type||"RSAPublicKey",n;switch(i){case"RSAPublicKey":n=k.toDer(Re.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":n=k.toDer(Re.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(n);var s=r.digest();if(e.encoding==="hex"){var o=s.toHex();return e.delimiter?o.match(/.{2}/g).join(e.delimiter):o}else{if(e.encoding==="binary")return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return s};Re.certificationRequestFromPem=function(t,e,r){var i=ke.pem.decode(t)[0];if(i.type!=="CERTIFICATE REQUEST"){var n=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw n.headerType=i.type,n}if(i.procType&&i.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=k.fromDer(i.body,r);return Re.certificationRequestFromAsn1(s,e)};Re.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:k.toDer(Re.certificationRequestToAsn1(t)).getBytes()};return ke.pem.encode(r,{maxline:e})};Re.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Rl(t.issuer,e)},t.issuer.addField=function(e){Do([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Rl(t.subject,e)},t.subject.addField=function(e){Do([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Do(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Do(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)$ge(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,i,n=0;r===null&&n<t.extensions.length;++n)i=t.extensions[n],(e.id&&i.id===e.id||e.name&&i.name===e.name)&&(r=i);return r},t.sign=function(e,r){t.md=r||ke.md.sha1.create();var i=st[t.md.algorithm+"WithRSAEncryption"];if(!i){var n=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw n.algorithm=t.md.algorithm,n}t.signatureOid=t.siginfo.algorithmOid=i,t.tbsCertificate=Re.getTBSCertificate(t);var s=k.toDer(t.tbsCertificate);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var i=e.issuer,n=t.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var o=e.md;if(o===null){if(e.signatureOid in st){var a=st[e.signatureOid];switch(a){case"sha1WithRSAEncryption":o=ke.md.sha1.create();break;case"md5WithRSAEncryption":o=ke.md.md5.create();break;case"sha256WithRSAEncryption":o=ke.md.sha256.create();break;case"sha384WithRSAEncryption":o=ke.md.sha384.create();break;case"sha512WithRSAEncryption":o=ke.md.sha512.create();break;case"RSASSA-PSS":o=ke.md.sha256.create();break}}if(o===null){var s=new Error("Could not compute certificate digest. Unknown signature OID.");throw s.signatureOid=e.signatureOid,s}var c=e.tbsCertificate||Re.getTBSCertificate(e),u=k.toDer(c);o.update(u.getBytes())}if(o!==null){var f;switch(e.signatureOid){case st.sha1WithRSAEncryption:f=void 0;break;case st["RSASSA-PSS"]:var d,h;if(d=st[e.signatureParameters.mgf.hash.algorithmOid],d===void 0||ke.md[d]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=e.signatureParameters.mgf.hash.algorithmOid,s.name=d,s}if(h=st[e.signatureParameters.mgf.algorithmOid],h===void 0||ke.mgf[h]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=e.signatureParameters.mgf.algorithmOid,s.name=h,s}if(h=ke.mgf[h].create(ke.md[d].create()),d=st[e.signatureParameters.hash.algorithmOid],d===void 0||ke.md[d]===void 0)throw{message:"Unsupported RSASSA-PSS hash function.",oid:e.signatureParameters.hash.algorithmOid,name:d};f=ke.pss.create(ke.md[d].create(),h,e.signatureParameters.saltLength);break}r=t.publicKey.verify(o.digest().getBytes(),e.signature,f)}return r},t.isIssuer=function(e){var r=!1,i=t.issuer,n=e.subject;if(i.hash&&n.hash)r=i.hash===n.hash;else if(i.attributes.length===n.attributes.length){r=!0;for(var s,o,a=0;r&&a<i.attributes.length;++a)s=i.attributes[a],o=n.attributes[a],(s.type!==o.type||s.value!==o.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Re.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=st.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var i=t.extensions[r];if(i.id===e){var n=t.generateSubjectKeyIdentifier().getBytes();return ke.util.hexToBytes(i.subjectKeyIdentifier)===n}}return!1},t};Re.certificateFromAsn1=function(t,e){var r={},i=[];if(!k.validate(t,zQe,r,i)){var n=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw n.errors=i,n}var s=k.derToOid(r.publicKeyOid);if(s!==Re.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=Re.createCertificate();o.version=r.certVersion?r.certVersion.charCodeAt(0):0;var a=ke.util.createBuffer(r.certSerialNumber);o.serialNumber=a.toHex(),o.signatureOid=ke.asn1.derToOid(r.certSignatureOid),o.signatureParameters=ew(o.signatureOid,r.certSignatureParams,!0),o.siginfo.algorithmOid=ke.asn1.derToOid(r.certinfoSignatureOid),o.siginfo.parameters=ew(o.siginfo.algorithmOid,r.certinfoSignatureParams,!1),o.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(k.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(k.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(k.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(k.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(o.validity.notBefore=c[0],o.validity.notAfter=c[1],o.tbsCertificate=r.tbsCertificate,e){if(o.md=null,o.signatureOid in st){var s=st[o.signatureOid];switch(s){case"sha1WithRSAEncryption":o.md=ke.md.sha1.create();break;case"md5WithRSAEncryption":o.md=ke.md.md5.create();break;case"sha256WithRSAEncryption":o.md=ke.md.sha256.create();break;case"sha384WithRSAEncryption":o.md=ke.md.sha384.create();break;case"sha512WithRSAEncryption":o.md=ke.md.sha512.create();break;case"RSASSA-PSS":o.md=ke.md.sha256.create();break}}if(o.md===null){var n=new Error("Could not compute certificate digest. Unknown signature OID.");throw n.signatureOid=o.signatureOid,n}var u=k.toDer(o.tbsCertificate);o.md.update(u.getBytes())}var f=ke.md.sha1.create();o.issuer.getField=function(h){return Rl(o.issuer,h)},o.issuer.addField=function(h){Do([h]),o.issuer.attributes.push(h)},o.issuer.attributes=Re.RDNAttributesAsArray(r.certIssuer,f),r.certIssuerUniqueId&&(o.issuer.uniqueId=r.certIssuerUniqueId),o.issuer.hash=f.digest().toHex();var d=ke.md.sha1.create();return o.subject.getField=function(h){return Rl(o.subject,h)},o.subject.addField=function(h){Do([h]),o.subject.attributes.push(h)},o.subject.attributes=Re.RDNAttributesAsArray(r.certSubject,d),r.certSubjectUniqueId&&(o.subject.uniqueId=r.certSubjectUniqueId),o.subject.hash=d.digest().toHex(),r.certExtensions?o.extensions=Re.certificateExtensionsFromAsn1(r.certExtensions):o.extensions=[],o.publicKey=Re.publicKeyFromAsn1(r.subjectPublicKeyInfo),o};Re.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var i=t.value[r],n=0;n<i.value.length;++n)e.push(Re.certificateExtensionFromAsn1(i.value[n]));return e};Re.certificateExtensionFromAsn1=function(t){var e={};if(e.id=k.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===k.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in st){if(e.name=st[e.id],e.name==="keyUsage"){var r=k.fromDer(e.value),i=0,n=0;r.value.length>1&&(i=r.value.charCodeAt(1),n=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(i&128)==128,e.nonRepudiation=(i&64)==64,e.keyEncipherment=(i&32)==32,e.dataEncipherment=(i&16)==16,e.keyAgreement=(i&8)==8,e.keyCertSign=(i&4)==4,e.cRLSign=(i&2)==2,e.encipherOnly=(i&1)==1,e.decipherOnly=(n&128)==128}else if(e.name==="basicConstraints"){var r=k.fromDer(e.value);r.value.length>0&&r.value[0].type===k.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var s=null;r.value.length>0&&r.value[0].type===k.Type.INTEGER?s=r.value[0].value:r.value.length>1&&(s=r.value[1].value),s!==null&&(e.pathLenConstraint=k.derToInteger(s))}else if(e.name==="extKeyUsage")for(var r=k.fromDer(e.value),o=0;o<r.value.length;++o){var a=k.derToOid(r.value[o].value);a in st?e[st[a]]=!0:e[a]=!0}else if(e.name==="nsCertType"){var r=k.fromDer(e.value),i=0;r.value.length>1&&(i=r.value.charCodeAt(1)),e.client=(i&128)==128,e.server=(i&64)==64,e.email=(i&32)==32,e.objsign=(i&16)==16,e.reserved=(i&8)==8,e.sslCA=(i&4)==4,e.emailCA=(i&2)==2,e.objCA=(i&1)==1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=k.fromDer(e.value),u=0;u<r.value.length;++u){c=r.value[u];var f={type:c.type,value:c.value};switch(e.altNames.push(f),c.type){case 1:case 2:case 6:break;case 7:f.ip=ke.util.bytesToIP(c.value);break;case 8:f.oid=k.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=k.fromDer(e.value);e.subjectKeyIdentifier=ke.util.bytesToHex(r.value)}}return e};Re.certificationRequestFromAsn1=function(t,e){var r={},i=[];if(!k.validate(t,GQe,r,i)){var n=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw n.errors=i,n}var s=k.derToOid(r.publicKeyOid);if(s!==Re.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var o=Re.createCertificationRequest();if(o.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,o.signatureOid=ke.asn1.derToOid(r.csrSignatureOid),o.signatureParameters=ew(o.signatureOid,r.csrSignatureParams,!0),o.siginfo.algorithmOid=ke.asn1.derToOid(r.csrSignatureOid),o.siginfo.parameters=ew(o.siginfo.algorithmOid,r.csrSignatureParams,!1),o.signature=r.csrSignature,o.certificationRequestInfo=r.certificationRequestInfo,e){if(o.md=null,o.signatureOid in st){var s=st[o.signatureOid];switch(s){case"sha1WithRSAEncryption":o.md=ke.md.sha1.create();break;case"md5WithRSAEncryption":o.md=ke.md.md5.create();break;case"sha256WithRSAEncryption":o.md=ke.md.sha256.create();break;case"sha384WithRSAEncryption":o.md=ke.md.sha384.create();break;case"sha512WithRSAEncryption":o.md=ke.md.sha512.create();break;case"RSASSA-PSS":o.md=ke.md.sha256.create();break}}if(o.md===null){var n=new Error("Could not compute certification request digest. Unknown signature OID.");throw n.signatureOid=o.signatureOid,n}var a=k.toDer(o.certificationRequestInfo);o.md.update(a.getBytes())}var c=ke.md.sha1.create();return o.subject.getField=function(u){return Rl(o.subject,u)},o.subject.addField=function(u){Do([u]),o.subject.attributes.push(u)},o.subject.attributes=Re.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),o.subject.hash=c.digest().toHex(),o.publicKey=Re.publicKeyFromAsn1(r.subjectPublicKeyInfo),o.getAttribute=function(u){return Rl(o,u)},o.addAttribute=function(u){Do([u]),o.attributes.push(u)},o.attributes=Re.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),o};Re.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Rl(t.subject,e)},t.subject.addField=function(e){Do([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Rl(t,e)},t.addAttribute=function(e){Do([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Do(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Do(e),t.attributes=e},t.sign=function(e,r){t.md=r||ke.md.sha1.create();var i=st[t.md.algorithm+"WithRSAEncryption"];if(!i){var n=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw n.algorithm=t.md.algorithm,n}t.signatureOid=t.siginfo.algorithmOid=i,t.certificationRequestInfo=Re.getCertificationRequestInfo(t);var s=k.toDer(t.certificationRequestInfo);t.md.update(s.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){if(t.signatureOid in st){var i=st[t.signatureOid];switch(i){case"sha1WithRSAEncryption":r=ke.md.sha1.create();break;case"md5WithRSAEncryption":r=ke.md.md5.create();break;case"sha256WithRSAEncryption":r=ke.md.sha256.create();break;case"sha384WithRSAEncryption":r=ke.md.sha384.create();break;case"sha512WithRSAEncryption":r=ke.md.sha512.create();break;case"RSASSA-PSS":r=ke.md.sha256.create();break}}if(r===null){var n=new Error("Could not compute certification request digest. Unknown signature OID.");throw n.signatureOid=t.signatureOid,n}var s=t.certificationRequestInfo||Re.getCertificationRequestInfo(t),o=k.toDer(s);r.update(o.getBytes())}if(r!==null){var a;switch(t.signatureOid){case st.sha1WithRSAEncryption:break;case st["RSASSA-PSS"]:var c,u;if(c=st[t.signatureParameters.mgf.hash.algorithmOid],c===void 0||ke.md[c]===void 0){var n=new Error("Unsupported MGF hash function.");throw n.oid=t.signatureParameters.mgf.hash.algorithmOid,n.name=c,n}if(u=st[t.signatureParameters.mgf.algorithmOid],u===void 0||ke.mgf[u]===void 0){var n=new Error("Unsupported MGF function.");throw n.oid=t.signatureParameters.mgf.algorithmOid,n.name=u,n}if(u=ke.mgf[u].create(ke.md[c].create()),c=st[t.signatureParameters.hash.algorithmOid],c===void 0||ke.md[c]===void 0){var n=new Error("Unsupported RSASSA-PSS hash function.");throw n.oid=t.signatureParameters.hash.algorithmOid,n.name=c,n}a=ke.pss.create(ke.md[c].create(),u,t.signatureParameters.saltLength);break}e=t.publicKey.verify(r.digest().getBytes(),t.signature,a)}return e},t};function o2(t){for(var e=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]),r,i,n=t.attributes,s=0;s<n.length;++s){r=n[s];var o=r.value,a=k.Type.PRINTABLESTRING;"valueTagClass"in r&&(a=r.valueTagClass,a===k.Type.UTF8&&(o=ke.util.encodeUtf8(o))),i=k.create(k.Class.UNIVERSAL,k.Type.SET,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(r.type).getBytes()),k.create(k.Class.UNIVERSAL,a,!1,o)])]),e.value.push(i)}return e}function Do(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in Re.oids?e.name=Re.oids[e.type]:e.shortName&&e.shortName in oi&&(e.name=Re.oids[oi[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in Re.oids)e.type=Re.oids[e.name];else{var i=new Error("Attribute type not specified.");throw i.attribute=e,i}if(typeof e.shortName=="undefined"&&e.name&&e.name in oi&&(e.shortName=oi[e.name]),e.type===st.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=k.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var n=0;n<e.extensions.length;++n)e.value.push(Re.certificateExtensionToAsn1($ge(e.extensions[n])))}if(typeof e.value=="undefined"){var i=new Error("Attribute value not specified.");throw i.attribute=e,i}}}function $ge(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in Re.oids&&(t.name=Re.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in Re.oids)t.id=Re.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var i=0,n=0,s=0;t.digitalSignature&&(n|=128,i=7),t.nonRepudiation&&(n|=64,i=6),t.keyEncipherment&&(n|=32,i=5),t.dataEncipherment&&(n|=16,i=4),t.keyAgreement&&(n|=8,i=3),t.keyCertSign&&(n|=4,i=2),t.cRLSign&&(n|=2,i=1),t.encipherOnly&&(n|=1,i=0),t.decipherOnly&&(s|=128,i=7);var o=String.fromCharCode(i);s!==0?o+=String.fromCharCode(n)+String.fromCharCode(s):n!==0&&(o+=String.fromCharCode(n)),t.value=k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,o)}else if(t.name==="basicConstraints")t.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(k.create(k.Class.UNIVERSAL,k.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);var a=t.value.value;for(var c in t)t[c]===!0&&(c in st?a.push(k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(st[c]).getBytes())):c.indexOf(".")!==-1&&a.push(k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var i=0,n=0;t.client&&(n|=128,i=7),t.server&&(n|=64,i=6),t.email&&(n|=32,i=5),t.objsign&&(n|=16,i=4),t.reserved&&(n|=8,i=3),t.sslCA&&(n|=4,i=2),t.emailCA&&(n|=2,i=1),t.objCA&&(n|=1,i=0);var o=String.fromCharCode(i);n!==0&&(o+=String.fromCharCode(n)),t.value=k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,o)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);for(var u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var o=u.value;if(u.type===7&&u.ip){if(o=ke.util.bytesFromIP(u.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?o=k.oidToDer(k.oidToDer(u.oid)):o=k.oidToDer(o));t.value.value.push(k.create(k.Class.CONTEXT_SPECIFIC,u.type,!1,o))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=k.create(k.Class.UNIVERSAL,k.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var d=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=d.toHex(),t.value=k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,d.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);var a=t.value.value;if(t.keyIdentifier){var h=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;a.push(k.create(k.Class.CONTEXT_SPECIFIC,0,!1,h))}if(t.authorityCertIssuer){var p=[k.create(k.Class.CONTEXT_SPECIFIC,4,!0,[o2(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];a.push(k.create(k.Class.CONTEXT_SPECIFIC,1,!0,p))}if(t.serialNumber){var y=ke.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);a.push(k.create(k.Class.CONTEXT_SPECIFIC,2,!1,y))}}else if(t.name==="cRLDistributionPoints"){t.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);for(var a=t.value.value,m=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]),w=k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[]),u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var o=u.value;if(u.type===7&&u.ip){if(o=ke.util.bytesFromIP(u.ip),o===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?o=k.oidToDer(k.oidToDer(u.oid)):o=k.oidToDer(o));w.value.push(k.create(k.Class.CONTEXT_SPECIFIC,u.type,!1,o))}m.value.push(k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[w])),a.push(m)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function nO(t,e){switch(t){case st["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.hash.algorithmOid).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(k.create(k.Class.CONTEXT_SPECIFIC,1,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.mgf.algorithmOid).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.mgf.hash.algorithmOid).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(k.create(k.Class.CONTEXT_SPECIFIC,2,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(e.saltLength).getBytes())])),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,r);default:return k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")}}function WQe(t){var e=k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,i=0;i<r.length;++i){var n=r[i],s=n.value,o=k.Type.UTF8;"valueTagClass"in n&&(o=n.valueTagClass),o===k.Type.UTF8&&(s=ke.util.encodeUtf8(s));var a=!1;"valueConstructed"in n&&(a=n.valueConstructed);var c=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(n.type).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SET,!0,[k.create(k.Class.UNIVERSAL,o,a,s)])]);e.value.push(c)}return e}var YQe=new Date("1950-01-01T00:00:00Z"),XQe=new Date("2050-01-01T00:00:00Z");function Gge(t){return t>=YQe&&t<XQe?k.create(k.Class.UNIVERSAL,k.Type.UTCTIME,!1,k.dateToUtcTime(t)):k.create(k.Class.UNIVERSAL,k.Type.GENERALIZEDTIME,!1,k.dateToGeneralizedTime(t))}Re.getTBSCertificate=function(t){var e=Gge(t.validity.notBefore),r=Gge(t.validity.notAfter),i=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(t.version).getBytes())]),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,ke.util.hexToBytes(t.serialNumber)),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(t.siginfo.algorithmOid).getBytes()),nO(t.siginfo.algorithmOid,t.siginfo.parameters)]),o2(t.issuer),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[e,r]),o2(t.subject),Re.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&i.value.push(k.create(k.Class.CONTEXT_SPECIFIC,1,!0,[k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&i.value.push(k.create(k.Class.CONTEXT_SPECIFIC,2,!0,[k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&i.value.push(Re.certificateExtensionsToAsn1(t.extensions)),i};Re.getCertificationRequestInfo=function(t){var e=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(t.version).getBytes()),o2(t.subject),Re.publicKeyToAsn1(t.publicKey),WQe(t)]);return e};Re.distinguishedNameToAsn1=function(t){return o2(t)};Re.certificateToAsn1=function(t){var e=t.tbsCertificate||Re.getTBSCertificate(t);return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[e,k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(t.signatureOid).getBytes()),nO(t.signatureOid,t.signatureParameters)]),k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Re.certificateExtensionsToAsn1=function(t){var e=k.create(k.Class.CONTEXT_SPECIFIC,3,!0,[]),r=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);e.value.push(r);for(var i=0;i<t.length;++i)r.value.push(Re.certificateExtensionToAsn1(t[i]));return e};Re.certificateExtensionToAsn1=function(t){var e=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);e.value.push(k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(t.id).getBytes())),t.critical&&e.value.push(k.create(k.Class.UNIVERSAL,k.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=k.toDer(r).getBytes()),e.value.push(k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,r)),e};Re.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Re.getCertificationRequestInfo(t);return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[e,k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(t.signatureOid).getBytes()),nO(t.signatureOid,t.signatureParameters)]),k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};Re.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(o){var a=r(o.issuer);return a},e.addCertificate=function(o){if(typeof o=="string"&&(o=ke.pki.certificateFromPem(o)),i(o.subject),!e.hasCertificate(o))if(o.subject.hash in e.certs){var a=e.certs[o.subject.hash];ke.util.isArray(a)||(a=[a]),a.push(o),e.certs[o.subject.hash]=a}else e.certs[o.subject.hash]=o},e.hasCertificate=function(o){typeof o=="string"&&(o=ke.pki.certificateFromPem(o));var a=r(o.subject);if(!a)return!1;ke.util.isArray(a)||(a=[a]);for(var c=k.toDer(Re.certificateToAsn1(o)).getBytes(),u=0;u<a.length;++u){var f=k.toDer(Re.certificateToAsn1(a[u])).getBytes();if(c===f)return!0}return!1},e.listAllCertificates=function(){var o=[];for(var a in e.certs)if(e.certs.hasOwnProperty(a)){var c=e.certs[a];if(!ke.util.isArray(c))o.push(c);else for(var u=0;u<c.length;++u)o.push(c[u])}return o},e.removeCertificate=function(o){var a;if(typeof o=="string"&&(o=ke.pki.certificateFromPem(o)),i(o.subject),!e.hasCertificate(o))return null;var c=r(o.subject);if(!ke.util.isArray(c))return a=e.certs[o.subject.hash],delete e.certs[o.subject.hash],a;for(var u=k.toDer(Re.certificateToAsn1(o)).getBytes(),f=0;f<c.length;++f){var d=k.toDer(Re.certificateToAsn1(c[f])).getBytes();u===d&&(a=c[f],c.splice(f,1))}return c.length===0&&delete e.certs[o.subject.hash],a};function r(o){return i(o),e.certs[o.hash]||null}function i(o){if(!o.hash){var a=ke.md.sha1.create();o.attributes=Re.RDNAttributesAsArray(o2(o),a),o.hash=a.digest().toHex()}}if(t)for(var n=0;n<t.length;++n){var s=t[n];e.addCertificate(s)}return e};Re.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Re.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var i=e.slice(0),n=r.validityCheckDate;typeof n=="undefined"&&(n=new Date);var s=!0,o=null,a=0;do{var c=e.shift(),u=null,f=!1;if(n&&(n<c.validity.notBefore||n>c.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:Re.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:n}),o===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(f=!0,u=c),u){var d=u;ke.util.isArray(d)||(d=[d]);for(var h=!1;!h&&d.length>0;){u=d.shift();try{h=u.verify(c)}catch(B){}}h||(o={message:"Certificate signature is invalid.",error:Re.certificateError.bad_certificate})}o===null&&(!u||f)&&!t.hasCertificate(c)&&(o={message:"Certificate is not trusted.",error:Re.certificateError.unknown_ca})}if(o===null&&u&&!c.isIssuer(u)&&(o={message:"Certificate issuer is invalid.",error:Re.certificateError.bad_certificate}),o===null)for(var p={keyUsage:!0,basicConstraints:!0},y=0;o===null&&y<c.extensions.length;++y){var m=c.extensions[y];m.critical&&!(m.name in p)&&(o={message:"Certificate has an unsupported critical extension.",error:Re.certificateError.unsupported_certificate})}if(o===null&&(!s||e.length===0&&(!u||f))){var w=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||w===null)&&(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Re.certificateError.bad_certificate}),o===null&&w!==null&&!w.cA&&(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Re.certificateError.bad_certificate}),o===null&&b!==null&&"pathLenConstraint"in w){var S=a-1;S>w.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:Re.certificateError.bad_certificate})}}var I=o===null?!0:o.error,j=r.verify?r.verify(I,a,i):I;if(j===!0)o=null;else throw I===!0&&(o={message:"The application rejected the certificate.",error:Re.certificateError.bad_certificate}),(j||j===0)&&(typeof j=="object"&&!ke.util.isArray(j)?(j.message&&(o.message=j.message),j.error&&(o.error=j.error)):typeof j=="string"&&(o.error=j)),o;s=!1,++a}while(e.length>0);return!0}});var Qge=v((CDt,Xge)=>{l();var Be=yt();P0();iu();f4();I0();p4();qge();Sf();or();sO();var ne=Be.asn1,Yn=Xge.exports=Be.pkcs7=Be.pkcs7||{};Yn.messageFromPem=function(t){var e=Be.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var i=ne.fromDer(e.body);return Yn.messageFromAsn1(i)};Yn.messageToPem=function(t,e){var r={type:"PKCS7",body:ne.toDer(t.toAsn1()).getBytes()};return Be.pem.encode(r,{maxline:e})};Yn.messageFromAsn1=function(t){var e={},r=[];if(!ne.validate(t,Yn.asn1.contentInfoValidator,e,r)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw i.errors=r,i}var n=ne.derToOid(e.contentType),s;switch(n){case Be.pki.oids.envelopedData:s=Yn.createEnvelopedData();break;case Be.pki.oids.encryptedData:s=Yn.createEncryptedData();break;case Be.pki.oids.signedData:s=Yn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+n+" is not (yet) supported.")}return s.fromAsn1(e.content.value[0]),s};Yn.createSignedData=function(){var t=null;return t={type:Be.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(i){if(aO(t,i,Yn.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var n=t.rawCapture.certificates.value,s=0;s<n.length;++s)t.certificates.push(Be.pki.certificateFromAsn1(n[s]))},toAsn1:function(){t.contentInfo||t.sign();for(var i=[],n=0;n<t.certificates.length;++n)i.push(Be.pki.certificateToAsn1(t.certificates[n]));var s=[],o=ne.create(ne.Class.CONTEXT_SPECIFIC,0,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.INTEGER,!1,ne.integerToDer(t.version).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return i.length>0&&o.value[0].value.push(ne.create(ne.Class.CONTEXT_SPECIFIC,0,!0,i)),s.length>0&&o.value[0].value.push(ne.create(ne.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(ne.create(ne.Class.UNIVERSAL,ne.Type.SET,!0,t.signerInfos)),ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(t.type).getBytes()),o])},addSigner:function(i){var n=i.issuer,s=i.serialNumber;if(i.certificate){var o=i.certificate;typeof o=="string"&&(o=Be.pki.certificateFromPem(o)),n=o.issuer.attributes,s=o.serialNumber}var a=i.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof a=="string"&&(a=Be.pki.privateKeyFromPem(a));var c=i.digestAlgorithm||Be.pki.oids.sha1;switch(c){case Be.pki.oids.sha1:case Be.pki.oids.sha256:case Be.pki.oids.sha384:case Be.pki.oids.sha512:case Be.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=i.authenticatedAttributes||[];if(u.length>0){for(var f=!1,d=!1,h=0;h<u.length;++h){var p=u[h];if(!f&&p.type===Be.pki.oids.contentType){if(f=!0,d)break;continue}if(!d&&p.type===Be.pki.oids.messageDigest){if(d=!0,f)break;continue}}if(!f||!d)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:n,serialNumber:s,digestAlgorithm:c,signatureAlgorithm:Be.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(i){if(i=i||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(Be.pki.oids.data).getBytes())]),"content"in t)){var n;t.content instanceof Be.util.ByteBuffer?n=t.content.bytes():typeof t.content=="string"&&(n=Be.util.encodeUtf8(t.content)),i.detached?t.detachedContent=ne.create(ne.Class.UNIVERSAL,ne.Type.OCTETSTRING,!1,n):t.contentInfo.value.push(ne.create(ne.Class.CONTEXT_SPECIFIC,0,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OCTETSTRING,!1,n)]))}if(t.signers.length!==0){var s=e();r(s)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(i){typeof i=="string"&&(i=Be.pki.certificateFromPem(i)),t.certificates.push(i)},addCertificateRevokationList:function(i){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var i={},n=0;n<t.signers.length;++n){var s=t.signers[n],o=s.digestAlgorithm;o in i||(i[o]=Be.md[Be.pki.oids[o]].create()),s.authenticatedAttributes.length===0?s.md=i[o]:s.md=Be.md[Be.pki.oids[o]].create()}t.digestAlgorithmIdentifiers=[];for(var o in i)t.digestAlgorithmIdentifiers.push(ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(o).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.NULL,!1,"")]));return i}function r(i){var n;if(t.detachedContent?n=t.detachedContent:(n=t.contentInfo.value[1],n=n.value[0]),!n)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=ne.derToOid(t.contentInfo.value[0].value),o=ne.toDer(n);o.getByte(),ne.getBerValueLength(o),o=o.getBytes();for(var a in i)i[a].start().update(o);for(var c=new Date,u=0;u<t.signers.length;++u){var f=t.signers[u];if(f.authenticatedAttributes.length===0){if(s!==Be.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=ne.create(ne.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=ne.create(ne.Class.UNIVERSAL,ne.Type.SET,!0,[]),h=0;h<f.authenticatedAttributes.length;++h){var p=f.authenticatedAttributes[h];p.type===Be.pki.oids.messageDigest?p.value=i[f.digestAlgorithm].digest():p.type===Be.pki.oids.signingTime&&(p.value||(p.value=c)),d.value.push(oO(p)),f.authenticatedAttributesAsn1.value.push(oO(p))}o=ne.toDer(d).getBytes(),f.md.start().update(o)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=rZe(t.signers)}};Yn.createEncryptedData=function(){var t=null;return t={type:Be.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Be.pki.oids["aes256-CBC"]},fromAsn1:function(e){aO(t,e,Yn.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),Yge(t)}},t};Yn.createEnvelopedData=function(){var t=null;return t={type:Be.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Be.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=aO(t,e,Yn.asn1.envelopedDataValidator);t.recipients=JQe(r.recipientInfos.value)},toAsn1:function(){return ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(t.type).getBytes()),ne.create(ne.Class.CONTEXT_SPECIFIC,0,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.INTEGER,!1,ne.integerToDer(t.version).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.SET,!0,eZe(t.recipients)),ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,iZe(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,i=0;i<t.recipients.length;++i){var n=t.recipients[i],s=n.issuer;if(n.serialNumber===e.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return n}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Be.pki.oids.rsaEncryption:case Be.pki.oids.desCBC:var i=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Be.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Yge(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Be.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var i,n,s;switch(r){case Be.pki.oids["aes128-CBC"]:i=16,n=16,s=Be.aes.createEncryptionCipher;break;case Be.pki.oids["aes192-CBC"]:i=24,n=16,s=Be.aes.createEncryptionCipher;break;case Be.pki.oids["aes256-CBC"]:i=32,n=16,s=Be.aes.createEncryptionCipher;break;case Be.pki.oids["des-EDE3-CBC"]:i=24,n=8,s=Be.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Be.util.createBuffer(Be.random.getBytes(i));else if(e.length()!=i)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+i+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Be.util.createBuffer(Be.random.getBytes(n));var o=s(e);if(o.start(t.encryptedContent.parameter.copy()),o.update(t.content),!o.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=o.output}for(var a=0;a<t.recipients.length;++a){var c=t.recipients[a];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Be.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},t};function QQe(t){var e={},r=[];if(!ne.validate(t,Yn.asn1.recipientInfoValidator,e,r)){var i=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw i.errors=r,i}return{version:e.version.charCodeAt(0),issuer:Be.pki.RDNAttributesAsArray(e.issuer),serialNumber:Be.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:ne.derToOid(e.encAlgorithm),parameter:e.encParameter.value,content:e.encKey}}}function ZQe(t){return ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.INTEGER,!1,ne.integerToDer(t.version).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[Be.pki.distinguishedNameToAsn1({attributes:t.issuer}),ne.create(ne.Class.UNIVERSAL,ne.Type.INTEGER,!1,Be.util.hexToBytes(t.serialNumber))]),ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(t.encryptedContent.algorithm).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.NULL,!1,"")]),ne.create(ne.Class.UNIVERSAL,ne.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function JQe(t){for(var e=[],r=0;r<t.length;++r)e.push(QQe(t[r]));return e}function eZe(t){for(var e=[],r=0;r<t.length;++r)e.push(ZQe(t[r]));return e}function tZe(t){var e=ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.INTEGER,!1,ne.integerToDer(t.version).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[Be.pki.distinguishedNameToAsn1({attributes:t.issuer}),ne.create(ne.Class.UNIVERSAL,ne.Type.INTEGER,!1,Be.util.hexToBytes(t.serialNumber))]),ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(t.digestAlgorithm).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(t.signatureAlgorithm).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.NULL,!1,"")])),e.value.push(ne.create(ne.Class.UNIVERSAL,ne.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=ne.create(ne.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<t.unauthenticatedAttributes.length;++i){var n=t.unauthenticatedAttributes[i];r.values.push(oO(n))}e.value.push(r)}return e}function rZe(t){for(var e=[],r=0;r<t.length;++r)e.push(tZe(t[r]));return e}function oO(t){var e;if(t.type===Be.pki.oids.contentType)e=ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(t.value).getBytes());else if(t.type===Be.pki.oids.messageDigest)e=ne.create(ne.Class.UNIVERSAL,ne.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Be.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),n=t.value;if(typeof n=="string"){var s=Date.parse(n);isNaN(s)?n.length===13?n=ne.utcTimeToDate(n):n=ne.generalizedTimeToDate(n):n=new Date(s)}n>=r&&n<i?e=ne.create(ne.Class.UNIVERSAL,ne.Type.UTCTIME,!1,ne.dateToUtcTime(n)):e=ne.create(ne.Class.UNIVERSAL,ne.Type.GENERALIZEDTIME,!1,ne.dateToGeneralizedTime(n))}return ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(t.type).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.SET,!0,[e])])}function iZe(t){return[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(Be.pki.oids.data).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.SEQUENCE,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OID,!1,ne.oidToDer(t.algorithm).getBytes()),ne.create(ne.Class.UNIVERSAL,ne.Type.OCTETSTRING,!1,t.parameter.getBytes())]),ne.create(ne.Class.CONTEXT_SPECIFIC,0,!0,[ne.create(ne.Class.UNIVERSAL,ne.Type.OCTETSTRING,!1,t.content.getBytes())])]}function aO(t,e,r){var i={},n=[];if(!ne.validate(e,r,i,n)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var o=ne.derToOid(i.contentType);if(o!==Be.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var a="";if(Be.util.isArray(i.encryptedContent))for(var c=0;c<i.encryptedContent.length;++c){if(i.encryptedContent[c].type!==ne.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=i.encryptedContent[c].value}else a=i.encryptedContent;t.encryptedContent={algorithm:ne.derToOid(i.encAlgorithm),parameter:Be.util.createBuffer(i.encParameter.value),content:Be.util.createBuffer(a)}}if(i.content){var a="";if(Be.util.isArray(i.content))for(var c=0;c<i.content.length;++c){if(i.content[c].type!==ne.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=i.content[c].value}else a=i.content;t.content=Be.util.createBuffer(a)}return t.version=i.version.charCodeAt(0),t.rawCapture=i,i}function Yge(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Be.pki.oids["aes128-CBC"]:case Be.pki.oids["aes192-CBC"]:case Be.pki.oids["aes256-CBC"]:e=Be.aes.createDecryptionCipher(t.encryptedContent.key);break;case Be.pki.oids.desCBC:case Be.pki.oids["des-EDE3-CBC"]:e=Be.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var eme=v((ODt,Jge)=>{l();"use strict";sO();var nZe=yt(),Zge=nZe.pki,sZe=(t,e)=>{let r=Zge.setRsaPublicKey(e.n,e.e),i=Zge.createCertificate();i.publicKey=r,i.serialNumber="01",i.validity.notBefore=new Date,i.validity.notAfter=new Date,i.validity.notAfter.setFullYear(i.validity.notBefore.getFullYear()+10);let n=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:t.id}];return i.setSubject(n),i.setIssuer(n),i.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),i.sign(e),i};async function oZe(t,e){let r=t.map(e),n=(await Promise.all(r)).findIndex(s=>s);return t[n]}Jge.exports={certificateForKey:sZe,findAsync:oZe}});var nme=v((kDt,ime)=>{l();"use strict";Qge();H_();var Pl=yt(),{certificateForKey:aZe,findAsync:cZe}=eme(),a2=_r(),{fromString:tme}=(dt(),bi),{toString:uZe}=(tt(),pr),cO=new WeakMap,rme=class{constructor(e,r){if(!e)throw a2(new Error("keychain is required"),"ERR_KEYCHAIN_REQUIRED");this.keychain=e,cO.set(this,{dek:r})}async encrypt(e,r){if(!(r instanceof Uint8Array))throw a2(new Error("Plain data must be a Uint8Array"),"ERR_INVALID_PARAMS");let i=await this.keychain.findKeyByName(e),n=await this.keychain._getPrivateKey(e),s=cO.get(this).dek,o=Pl.pki.decryptRsaPrivateKey(n,s),a=await aZe(i,o),c=Pl.pkcs7.createEnvelopedData();c.addRecipient(a),c.content=Pl.util.createBuffer(r),c.encrypt();let u=Pl.asn1.toDer(c.toAsn1()).getBytes();return tme(u,"ascii")}async decrypt(e){if(!(e instanceof Uint8Array))throw a2(new Error("CMS data is required"),"ERR_INVALID_PARAMS");let r;try{let u=Pl.util.createBuffer(uZe(e,"ascii")),f=Pl.asn1.fromDer(u);r=Pl.pkcs7.messageFromAsn1(f)}catch(u){throw a2(new Error("Invalid CMS: "+u.message),"ERR_INVALID_CMS")}let i=r.recipients.filter(u=>u.issuer.find(f=>f.shortName==="O"&&f.value==="ipfs")).filter(u=>u.issuer.find(f=>f.shortName==="CN")).map(u=>({recipient:u,keyId:u.issuer.find(f=>f.shortName==="CN").value})),n=await cZe(i,async u=>{try{if(await this.keychain.findKeyById(u.keyId))return!0}catch(f){return!1}return!1});if(!n){let u=i.map(f=>f.keyId);throw a2(new Error("Decryption needs one of the key(s): "+u.join(", ")),"ERR_MISSING_KEYS",{missingKeys:u})}let s=await this.keychain.findKeyById(n.keyId);if(!s)throw a2(new Error("No key available to decrypto"),"ERR_NO_KEY");let o=await this.keychain._getPrivateKey(s.name),a=cO.get(this).dek,c=Pl.pki.decryptRsaPrivateKey(o,a);return r.decrypt(n.recipient,c),tme(r.content.getBytes(),"ascii")}};ime.exports=rme});var lme=v((DDt,fme)=>{l();"use strict";var sme=Ee(),ome=Object.assign(sme("libp2p:keychain"),{error:sme("libp2p:keychain:err")}),fZe=Bge(),lZe=Ml(),kh=uc(),{Key:ame}=(Br(),wy),dZe=nme(),Or=_r(),{toString:Dh}=(tt(),pr),{fromString:Yu}=(dt(),bi);w4();var hZe="/pkcs8/",cme="/info/",Cl=new WeakMap,Bh={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},uO={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function Xu(t){return!t||typeof t!="string"?!1:t===fZe(t.trim())}async function er(t){let e=200,r=1e3,i=Math.random()*(r-e)+e;throw await new Promise(n=>setTimeout(n,i)),t}function Fc(t){return new ame(hZe+t)}function Ol(t){return new ame(cme+t)}var ume=class{constructor(e,r){if(!e)throw new Error("store is required");if(this.store=e,this.opts=lZe(uO,r),this.opts.pass&&this.opts.pass.length<20)throw new Error("pass must be least 20 characters");if(this.opts.dek.keyLength<Bh.minKeyLength)throw new Error(`dek.keyLength must be least ${Bh.minKeyLength} bytes`);if(this.opts.dek.salt.length<Bh.minSaltLength)throw new Error(`dek.saltLength must be least ${Bh.minSaltLength} bytes`);if(this.opts.dek.iterationCount<Bh.minIterationCount)throw new Error(`dek.iterationCount must be least ${Bh.minIterationCount}`);let i=this.opts.pass?kh.pbkdf2(this.opts.pass,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";Cl.set(this,{dek:i})}get cms(){return new dZe(this,Cl.get(this).dek)}static generateOptions(){let e=Object.assign({},uO),r=Math.ceil(Bh.minSaltLength/3)*3;return e.dek.salt=Dh(kh.randomBytes(r),"base64"),e}static get options(){return uO}async createKey(e,r,i=2048){let n=this;if(!Xu(e)||e==="self")return er(Or(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(typeof r!="string")return er(Or(new Error(`Invalid key type '${r}'`),"ERR_INVALID_KEY_TYPE"));let s=Fc(e);if(await n.store.has(s))return er(Or(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));switch(r.toLowerCase()){case"rsa":if(!Number.isSafeInteger(i)||i<2048)return er(Or(new Error(`Invalid RSA key size ${i}`),"ERR_INVALID_KEY_SIZE"));break;default:break}let a;try{let c=await kh.keys.generateKeyPair(r,i),u=await c.id(),f=Cl.get(this).dek,d=await c.export(f);a={name:e,id:u};let h=n.store.batch();h.put(s,Yu(d)),h.put(Ol(e),Yu(JSON.stringify(a))),await h.commit()}catch(c){return er(c)}return a}async listKeys(){let e=this,r={prefix:cme},i=[];for await(let n of e.store.query(r))i.push(JSON.parse(Dh(n.value)));return i}async findKeyById(e){try{return(await this.listKeys()).find(i=>i.id===e)}catch(r){return er(r)}}async findKeyByName(e){if(!Xu(e))return er(Or(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));let r=Ol(e);try{let i=await this.store.get(r);return JSON.parse(Dh(i))}catch(i){return er(Or(new Error(`Key '${e}' does not exist. ${i.message}`),"ERR_KEY_NOT_FOUND"))}}async removeKey(e){let r=this;if(!Xu(e)||e==="self")return er(Or(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));let i=Fc(e),n=await r.findKeyByName(e),s=r.store.batch();return s.delete(i),s.delete(Ol(e)),await s.commit(),n}async renameKey(e,r){let i=this;if(!Xu(e)||e==="self")return er(Or(new Error(`Invalid old key name '${e}'`),"ERR_OLD_KEY_NAME_INVALID"));if(!Xu(r)||r==="self")return er(Or(new Error(`Invalid new key name '${r}'`),"ERR_NEW_KEY_NAME_INVALID"));let n=Fc(e),s=Fc(r),o=Ol(e),a=Ol(r);if(await i.store.has(s))return er(Or(new Error(`Key '${r}' already exists`),"ERR_KEY_ALREADY_EXISTS"));try{let u=await i.store.get(n),f=await i.store.get(o),d=JSON.parse(Dh(f));d.name=r;let h=i.store.batch();return h.put(s,u),h.put(a,Yu(JSON.stringify(d))),h.delete(n),h.delete(o),await h.commit(),d}catch(u){return er(u)}}async exportKey(e,r){if(!Xu(e))return er(Or(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!r)return er(Or(new Error("Password is required"),"ERR_PASSWORD_REQUIRED"));let i=Fc(e);try{let n=await this.store.get(i),s=Dh(n),o=Cl.get(this).dek;return(await kh.keys.import(s,o)).export(r)}catch(n){return er(n)}}async importKey(e,r,i){let n=this;if(!Xu(e)||e==="self")return er(Or(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!r)return er(Or(new Error("PEM encoded key is required"),"ERR_PEM_REQUIRED"));let s=Fc(e);if(await n.store.has(s))return er(Or(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));let a;try{a=await kh.keys.import(r,i)}catch(d){return er(Or(new Error("Cannot read the key, most likely the password is wrong"),"ERR_CANNOT_READ_KEY"))}let c;try{c=await a.id();let d=Cl.get(this).dek;r=await a.export(d)}catch(d){return er(d)}let u={name:e,id:c},f=n.store.batch();return f.put(s,Yu(r)),f.put(Ol(e),Yu(JSON.stringify(u))),await f.commit(),u}async importPeer(e,r){let i=this;if(!Xu(e))return er(Or(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!r||!r.privKey)return er(Or(new Error("Peer.privKey is required"),"ERR_MISSING_PRIVATE_KEY"));let n=r.privKey,s=Fc(e);if(await i.store.has(s))return er(Or(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));try{let a=await n.id(),c=Cl.get(this).dek,u=await n.export(c),f={name:e,id:a},d=i.store.batch();return d.put(s,Yu(u)),d.put(Ol(e),Yu(JSON.stringify(f))),await d.commit(),f}catch(a){return er(a)}}async _getPrivateKey(e){if(!Xu(e))return er(Or(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));try{let r=Fc(e),i=await this.store.get(r);return Dh(i)}catch(r){return er(Or(new Error(`Key '${e}' does not exist. ${r.message}`),"ERR_KEY_NOT_FOUND"))}}async rotateKeychainPass(e,r){if(typeof e!="string")return er(Or(new Error(`Invalid old pass type '${typeof e}'`),"ERR_INVALID_OLD_PASS_TYPE"));if(typeof r!="string")return er(Or(new Error(`Invalid new pass type '${typeof r}'`),"ERR_INVALID_NEW_PASS_TYPE"));if(r.length<20)return er(Or(new Error(`Invalid pass length ${r.length}`),"ERR_INVALID_PASS_LENGTH"));ome("recreating keychain");let i=Cl.get(this).dek;this.opts.pass=r;let n=r?kh.pbkdf2(r,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";Cl.set(this,{dek:n});let s=await this.listKeys();for(let o of s){let a=await this.store.get(Fc(o.name)),c=Dh(a),u=await kh.keys.import(c,i),f=n.toString(),d=await u.export(f),h=this.store.batch(),p={name:o.name,id:o.id};h.put(Fc(o.name),Yu(d)),h.put(Ol(o.name),Yu(JSON.stringify(p))),await h.commit()}ome("keychain reconstructed")}};fme.exports=ume});var hme=v((BDt,dme)=>{l();"use strict";var pZe=x0();dme.exports=t=>{let e=pZe(t);return e.delete=e.remove,e}});var yme=v((pme,tw)=>{l();(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,n=Math.floor,s="[BigNumber Error] ",o=s+"Number primitive has more than 15 significant digits: ",a=1e14,c=14,u=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,h=1e9;function p(B){var C,z,W,X=Q.prototype={constructor:Q,toString:null,valueOf:null},P=new Q(1),g=20,_=4,x=-7,O=21,L=-1e7,Y=1e7,V=!1,q=1,E=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},de="0123456789abcdefghijklmnopqrstuvwxyz";function Q(D,K){var G,ee,T,F,H,M,Z,ie,te=this;if(!(te instanceof Q))return new Q(D,K);if(K==null){if(D&&D._isBigNumber===!0){te.s=D.s,!D.c||D.e>Y?te.c=te.e=null:D.e<L?te.c=[te.e=0]:(te.e=D.e,te.c=D.c.slice());return}if((M=typeof D=="number")&&D*0==0){if(te.s=1/D<0?(D=-D,-1):1,D===~~D){for(F=0,H=D;H>=10;H/=10,F++);F>Y?te.c=te.e=null:(te.e=F,te.c=[D]);return}ie=String(D)}else{if(!r.test(ie=String(D)))return W(te,ie,M);te.s=ie.charCodeAt(0)==45?(ie=ie.slice(1),-1):1}(F=ie.indexOf("."))>-1&&(ie=ie.replace(".","")),(H=ie.search(/e/i))>0?(F<0&&(F=H),F+=+ie.slice(H+1),ie=ie.substring(0,H)):F<0&&(F=ie.length)}else{if(b(K,2,de.length,"Base"),K==10)return te=new Q(D),be(te,g+te.e+1,_);if(ie=String(D),M=typeof D=="number"){if(D*0!=0)return W(te,ie,M,K);if(te.s=1/D<0?(ie=ie.slice(1),-1):1,Q.DEBUG&&ie.replace(/^0\.0*|\./,"").length>15)throw Error(o+D)}else te.s=ie.charCodeAt(0)===45?(ie=ie.slice(1),-1):1;for(G=de.slice(0,K),F=H=0,Z=ie.length;H<Z;H++)if(G.indexOf(ee=ie.charAt(H))<0){if(ee=="."){if(H>F){F=Z;continue}}else if(!T&&(ie==ie.toUpperCase()&&(ie=ie.toLowerCase())||ie==ie.toLowerCase()&&(ie=ie.toUpperCase()))){T=!0,H=-1,F=0;continue}return W(te,String(D),M,K)}M=!1,ie=z(ie,K,10,te.s),(F=ie.indexOf("."))>-1?ie=ie.replace(".",""):F=ie.length}for(H=0;ie.charCodeAt(H)===48;H++);for(Z=ie.length;ie.charCodeAt(--Z)===48;);if(ie=ie.slice(H,++Z)){if(Z-=H,M&&Q.DEBUG&&Z>15&&(D>u||D!==n(D)))throw Error(o+te.s*D);if((F=F-H-1)>Y)te.c=te.e=null;else if(F<L)te.c=[te.e=0];else{if(te.e=F,te.c=[],H=(F+1)%c,F<0&&(H+=c),H<Z){for(H&&te.c.push(+ie.slice(0,H)),Z-=c;H<Z;)te.c.push(+ie.slice(H,H+=c));H=c-(ie=ie.slice(H)).length}else H-=Z;for(;H--;ie+="0");te.c.push(+ie)}}else te.c=[te.e=0]}Q.clone=p,Q.ROUND_UP=0,Q.ROUND_DOWN=1,Q.ROUND_CEIL=2,Q.ROUND_FLOOR=3,Q.ROUND_HALF_UP=4,Q.ROUND_HALF_DOWN=5,Q.ROUND_HALF_EVEN=6,Q.ROUND_HALF_CEIL=7,Q.ROUND_HALF_FLOOR=8,Q.EUCLID=9,Q.config=Q.set=function(D){var K,G;if(D!=null)if(typeof D=="object"){if(D.hasOwnProperty(K="DECIMAL_PLACES")&&(G=D[K],b(G,0,h,K),g=G),D.hasOwnProperty(K="ROUNDING_MODE")&&(G=D[K],b(G,0,8,K),_=G),D.hasOwnProperty(K="EXPONENTIAL_AT")&&(G=D[K],G&&G.pop?(b(G[0],-h,0,K),b(G[1],0,h,K),x=G[0],O=G[1]):(b(G,-h,h,K),x=-(O=G<0?-G:G))),D.hasOwnProperty(K="RANGE"))if(G=D[K],G&&G.pop)b(G[0],-h,-1,K),b(G[1],1,h,K),L=G[0],Y=G[1];else if(b(G,-h,h,K),G)L=-(Y=G<0?-G:G);else throw Error(s+K+" cannot be zero: "+G);if(D.hasOwnProperty(K="CRYPTO"))if(G=D[K],G===!!G)if(G)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))V=G;else throw V=!G,Error(s+"crypto unavailable");else V=G;else throw Error(s+K+" not true or false: "+G);if(D.hasOwnProperty(K="MODULO_MODE")&&(G=D[K],b(G,0,9,K),q=G),D.hasOwnProperty(K="POW_PRECISION")&&(G=D[K],b(G,0,h,K),E=G),D.hasOwnProperty(K="FORMAT"))if(G=D[K],typeof G=="object")U=G;else throw Error(s+K+" not an object: "+G);if(D.hasOwnProperty(K="ALPHABET"))if(G=D[K],typeof G=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(G))de=G;else throw Error(s+K+" invalid: "+G)}else throw Error(s+"Object expected: "+D);return{DECIMAL_PLACES:g,ROUNDING_MODE:_,EXPONENTIAL_AT:[x,O],RANGE:[L,Y],CRYPTO:V,MODULO_MODE:q,POW_PRECISION:E,FORMAT:U,ALPHABET:de}},Q.isBigNumber=function(D){if(!D||D._isBigNumber!==!0)return!1;if(!Q.DEBUG)return!0;var K,G,ee=D.c,T=D.e,F=D.s;e:if({}.toString.call(ee)=="[object Array]"){if((F===1||F===-1)&&T>=-h&&T<=h&&T===n(T)){if(ee[0]===0){if(T===0&&ee.length===1)return!0;break e}if(K=(T+1)%c,K<1&&(K+=c),String(ee[0]).length==K){for(K=0;K<ee.length;K++)if(G=ee[K],G<0||G>=a||G!==n(G))break e;if(G!==0)return!0}}}else if(ee===null&&T===null&&(F===null||F===1||F===-1))return!0;throw Error(s+"Invalid BigNumber: "+D)},Q.maximum=Q.max=function(){return le(arguments,X.lt)},Q.minimum=Q.min=function(){return le(arguments,X.gt)},Q.random=function(){var D=9007199254740992,K=Math.random()*D&2097151?function(){return n(Math.random()*D)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(G){var ee,T,F,H,M,Z=0,ie=[],te=new Q(P);if(G==null?G=g:b(G,0,h),H=i(G/c),V)if(crypto.getRandomValues){for(ee=crypto.getRandomValues(new Uint32Array(H*=2));Z<H;)M=ee[Z]*131072+(ee[Z+1]>>>11),M>=9e15?(T=crypto.getRandomValues(new Uint32Array(2)),ee[Z]=T[0],ee[Z+1]=T[1]):(ie.push(M%1e14),Z+=2);Z=H/2}else if(crypto.randomBytes){for(ee=crypto.randomBytes(H*=7);Z<H;)M=(ee[Z]&31)*281474976710656+ee[Z+1]*1099511627776+ee[Z+2]*4294967296+ee[Z+3]*16777216+(ee[Z+4]<<16)+(ee[Z+5]<<8)+ee[Z+6],M>=9e15?crypto.randomBytes(7).copy(ee,Z):(ie.push(M%1e14),Z+=7);Z=H/7}else throw V=!1,Error(s+"crypto unavailable");if(!V)for(;Z<H;)M=K(),M<9e15&&(ie[Z++]=M%1e14);for(H=ie[--Z],G%=c,H&&G&&(M=f[c-G],ie[Z]=n(H/M)*M);ie[Z]===0;ie.pop(),Z--);if(Z<0)ie=[F=0];else{for(F=-1;ie[0]===0;ie.splice(0,1),F-=c);for(Z=1,M=ie[0];M>=10;M/=10,Z++);Z<c&&(F-=c-Z)}return te.e=F,te.c=ie,te}}(),Q.sum=function(){for(var D=1,K=arguments,G=new Q(K[0]);D<K.length;)G=G.plus(K[D++]);return G},z=function(){var D="0123456789";function K(G,ee,T,F){for(var H,M=[0],Z,ie=0,te=G.length;ie<te;){for(Z=M.length;Z--;M[Z]*=ee);for(M[0]+=F.indexOf(G.charAt(ie++)),H=0;H<M.length;H++)M[H]>T-1&&(M[H+1]==null&&(M[H+1]=0),M[H+1]+=M[H]/T|0,M[H]%=T)}return M.reverse()}return function(G,ee,T,F,H){var M,Z,ie,te,he,we,_e,Ke,Pe=G.indexOf("."),Ve=g,et=_;for(Pe>=0&&(te=E,E=0,G=G.replace(".",""),Ke=new Q(ee),we=Ke.pow(G.length-Pe),E=te,Ke.c=K(j(m(we.c),we.e,"0"),10,T,D),Ke.e=Ke.c.length),_e=K(G,ee,T,H?(M=de,D):(M=D,de)),ie=te=_e.length;_e[--te]==0;_e.pop());if(!_e[0])return M.charAt(0);if(Pe<0?--ie:(we.c=_e,we.e=ie,we.s=F,we=C(we,Ke,Ve,et,T),_e=we.c,he=we.r,ie=we.e),Z=ie+Ve+1,Pe=_e[Z],te=T/2,he=he||Z<0||_e[Z+1]!=null,he=et<4?(Pe!=null||he)&&(et==0||et==(we.s<0?3:2)):Pe>te||Pe==te&&(et==4||he||et==6&&_e[Z-1]&1||et==(we.s<0?8:7)),Z<1||!_e[0])G=he?j(M.charAt(1),-Ve,M.charAt(0)):M.charAt(0);else{if(_e.length=Z,he)for(--T;++_e[--Z]>T;)_e[Z]=0,Z||(++ie,_e=[1].concat(_e));for(te=_e.length;!_e[--te];);for(Pe=0,G="";Pe<=te;G+=M.charAt(_e[Pe++]));G=j(G,ie,M.charAt(0))}return G}}(),C=function(){function D(ee,T,F){var H,M,Z,ie,te=0,he=ee.length,we=T%d,_e=T/d|0;for(ee=ee.slice();he--;)Z=ee[he]%d,ie=ee[he]/d|0,H=_e*Z+ie*we,M=we*Z+H%d*d+te,te=(M/F|0)+(H/d|0)+_e*ie,ee[he]=M%F;return te&&(ee=[te].concat(ee)),ee}function K(ee,T,F,H){var M,Z;if(F!=H)Z=F>H?1:-1;else for(M=Z=0;M<F;M++)if(ee[M]!=T[M]){Z=ee[M]>T[M]?1:-1;break}return Z}function G(ee,T,F,H){for(var M=0;F--;)ee[F]-=M,M=ee[F]<T[F]?1:0,ee[F]=M*H+ee[F]-T[F];for(;!ee[0]&&ee.length>1;ee.splice(0,1));}return function(ee,T,F,H,M){var Z,ie,te,he,we,_e,Ke,Pe,Ve,et,He,ze,mt,rr,dr,Bn,Xt,kt=ee.s==T.s?1:-1,ci=ee.c,nt=T.c;if(!ci||!ci[0]||!nt||!nt[0])return new Q(!ee.s||!T.s||(ci?nt&&ci[0]==nt[0]:!nt)?NaN:ci&&ci[0]==0||!nt?kt*0:kt/0);for(Pe=new Q(kt),Ve=Pe.c=[],ie=ee.e-T.e,kt=F+ie+1,M||(M=a,ie=y(ee.e/c)-y(T.e/c),kt=kt/c|0),te=0;nt[te]==(ci[te]||0);te++);if(nt[te]>(ci[te]||0)&&ie--,kt<0)Ve.push(1),he=!0;else{for(rr=ci.length,Bn=nt.length,te=0,kt+=2,we=n(M/(nt[0]+1)),we>1&&(nt=D(nt,we,M),ci=D(ci,we,M),Bn=nt.length,rr=ci.length),mt=Bn,et=ci.slice(0,Bn),He=et.length;He<Bn;et[He++]=0);Xt=nt.slice(),Xt=[0].concat(Xt),dr=nt[0],nt[1]>=M/2&&dr++;do{if(we=0,Z=K(nt,et,Bn,He),Z<0){if(ze=et[0],Bn!=He&&(ze=ze*M+(et[1]||0)),we=n(ze/dr),we>1)for(we>=M&&(we=M-1),_e=D(nt,we,M),Ke=_e.length,He=et.length;K(_e,et,Ke,He)==1;)we--,G(_e,Bn<Ke?Xt:nt,Ke,M),Ke=_e.length,Z=1;else we==0&&(Z=we=1),_e=nt.slice(),Ke=_e.length;if(Ke<He&&(_e=[0].concat(_e)),G(et,_e,He,M),He=et.length,Z==-1)for(;K(nt,et,Bn,He)<1;)we++,G(et,Bn<He?Xt:nt,He,M),He=et.length}else Z===0&&(we++,et=[0]);Ve[te++]=we,et[0]?et[He++]=ci[mt]||0:(et=[ci[mt]],He=1)}while((mt++<rr||et[0]!=null)&&kt--);he=et[0]!=null,Ve[0]||Ve.splice(0,1)}if(M==a){for(te=1,kt=Ve[0];kt>=10;kt/=10,te++);be(Pe,F+(Pe.e=te+ie*c-1)+1,H,he)}else Pe.e=ie,Pe.r=+he;return Pe}}();function ue(D,K,G,ee){var T,F,H,M,Z;if(G==null?G=_:b(G,0,8),!D.c)return D.toString();if(T=D.c[0],H=D.e,K==null)Z=m(D.c),Z=ee==1||ee==2&&(H<=x||H>=O)?I(Z,H):j(Z,H,"0");else if(D=be(new Q(D),K,G),F=D.e,Z=m(D.c),M=Z.length,ee==1||ee==2&&(K<=F||F<=x)){for(;M<K;Z+="0",M++);Z=I(Z,F)}else if(K-=H,Z=j(Z,F,"0"),F+1>M){if(--K>0)for(Z+=".";K--;Z+="0");}else if(K+=F-M,K>0)for(F+1==M&&(Z+=".");K--;Z+="0");return D.s<0&&T?"-"+Z:Z}function le(D,K){for(var G,ee=1,T=new Q(D[0]);ee<D.length;ee++)if(G=new Q(D[ee]),G.s)K.call(T,G)&&(T=G);else{T=G;break}return T}function me(D,K,G){for(var ee=1,T=K.length;!K[--T];K.pop());for(T=K[0];T>=10;T/=10,ee++);return(G=ee+G*c-1)>Y?D.c=D.e=null:G<L?D.c=[D.e=0]:(D.e=G,D.c=K),D}W=function(){var D=/^(-?)0([xbo])(?=\w[\w.]*$)/i,K=/^([^.]+)\.$/,G=/^\.([^.]+)$/,ee=/^-?(Infinity|NaN)$/,T=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(F,H,M,Z){var ie,te=M?H:H.replace(T,"");if(ee.test(te))F.s=isNaN(te)?null:te<0?-1:1;else{if(!M&&(te=te.replace(D,function(he,we,_e){return ie=(_e=_e.toLowerCase())=="x"?16:_e=="b"?2:8,!Z||Z==ie?we:he}),Z&&(ie=Z,te=te.replace(K,"$1").replace(G,"0.$1")),H!=te))return new Q(te,ie);if(Q.DEBUG)throw Error(s+"Not a"+(Z?" base "+Z:"")+" number: "+H);F.s=null}F.c=F.e=null}}();function be(D,K,G,ee){var T,F,H,M,Z,ie,te,he=D.c,we=f;if(he){e:{for(T=1,M=he[0];M>=10;M/=10,T++);if(F=K-T,F<0)F+=c,H=K,Z=he[ie=0],te=Z/we[T-H-1]%10|0;else if(ie=i((F+1)/c),ie>=he.length)if(ee){for(;he.length<=ie;he.push(0));Z=te=0,T=1,F%=c,H=F-c+1}else break e;else{for(Z=M=he[ie],T=1;M>=10;M/=10,T++);F%=c,H=F-c+T,te=H<0?0:Z/we[T-H-1]%10|0}if(ee=ee||K<0||he[ie+1]!=null||(H<0?Z:Z%we[T-H-1]),ee=G<4?(te||ee)&&(G==0||G==(D.s<0?3:2)):te>5||te==5&&(G==4||ee||G==6&&(F>0?H>0?Z/we[T-H]:0:he[ie-1])%10&1||G==(D.s<0?8:7)),K<1||!he[0])return he.length=0,ee?(K-=D.e+1,he[0]=we[(c-K%c)%c],D.e=-K||0):he[0]=D.e=0,D;if(F==0?(he.length=ie,M=1,ie--):(he.length=ie+1,M=we[c-F],he[ie]=H>0?n(Z/we[T-H]%we[H])*M:0),ee)for(;;)if(ie==0){for(F=1,H=he[0];H>=10;H/=10,F++);for(H=he[0]+=M,M=1;H>=10;H/=10,M++);F!=M&&(D.e++,he[0]==a&&(he[0]=1));break}else{if(he[ie]+=M,he[ie]!=a)break;he[ie--]=0,M=1}for(F=he.length;he[--F]===0;he.pop());}D.e>Y?D.c=D.e=null:D.e<L&&(D.c=[D.e=0])}return D}function xe(D){var K,G=D.e;return G===null?D.toString():(K=m(D.c),K=G<=x||G>=O?I(K,G):j(K,G,"0"),D.s<0?"-"+K:K)}return X.absoluteValue=X.abs=function(){var D=new Q(this);return D.s<0&&(D.s=1),D},X.comparedTo=function(D,K){return w(this,new Q(D,K))},X.decimalPlaces=X.dp=function(D,K){var G,ee,T,F=this;if(D!=null)return b(D,0,h),K==null?K=_:b(K,0,8),be(new Q(F),D+F.e+1,K);if(!(G=F.c))return null;if(ee=((T=G.length-1)-y(this.e/c))*c,T=G[T])for(;T%10==0;T/=10,ee--);return ee<0&&(ee=0),ee},X.dividedBy=X.div=function(D,K){return C(this,new Q(D,K),g,_)},X.dividedToIntegerBy=X.idiv=function(D,K){return C(this,new Q(D,K),0,1)},X.exponentiatedBy=X.pow=function(D,K){var G,ee,T,F,H,M,Z,ie,te,he=this;if(D=new Q(D),D.c&&!D.isInteger())throw Error(s+"Exponent not an integer: "+xe(D));if(K!=null&&(K=new Q(K)),M=D.e>14,!he.c||!he.c[0]||he.c[0]==1&&!he.e&&he.c.length==1||!D.c||!D.c[0])return te=new Q(Math.pow(+xe(he),M?2-S(D):+xe(D))),K?te.mod(K):te;if(Z=D.s<0,K){if(K.c?!K.c[0]:!K.s)return new Q(NaN);ee=!Z&&he.isInteger()&&K.isInteger(),ee&&(he=he.mod(K))}else{if(D.e>9&&(he.e>0||he.e<-1||(he.e==0?he.c[0]>1||M&&he.c[1]>=24e7:he.c[0]<8e13||M&&he.c[0]<=9999975e7)))return F=he.s<0&&S(D)?-0:0,he.e>-1&&(F=1/F),new Q(Z?1/F:F);E&&(F=i(E/c+2))}for(M?(G=new Q(.5),Z&&(D.s=1),ie=S(D)):(T=Math.abs(+xe(D)),ie=T%2),te=new Q(P);;){if(ie){if(te=te.times(he),!te.c)break;F?te.c.length>F&&(te.c.length=F):ee&&(te=te.mod(K))}if(T){if(T=n(T/2),T===0)break;ie=T%2}else if(D=D.times(G),be(D,D.e+1,1),D.e>14)ie=S(D);else{if(T=+xe(D),T===0)break;ie=T%2}he=he.times(he),F?he.c&&he.c.length>F&&(he.c.length=F):ee&&(he=he.mod(K))}return ee?te:(Z&&(te=P.div(te)),K?te.mod(K):F?be(te,E,_,H):te)},X.integerValue=function(D){var K=new Q(this);return D==null?D=_:b(D,0,8),be(K,K.e+1,D)},X.isEqualTo=X.eq=function(D,K){return w(this,new Q(D,K))===0},X.isFinite=function(){return!!this.c},X.isGreaterThan=X.gt=function(D,K){return w(this,new Q(D,K))>0},X.isGreaterThanOrEqualTo=X.gte=function(D,K){return(K=w(this,new Q(D,K)))===1||K===0},X.isInteger=function(){return!!this.c&&y(this.e/c)>this.c.length-2},X.isLessThan=X.lt=function(D,K){return w(this,new Q(D,K))<0},X.isLessThanOrEqualTo=X.lte=function(D,K){return(K=w(this,new Q(D,K)))===-1||K===0},X.isNaN=function(){return!this.s},X.isNegative=function(){return this.s<0},X.isPositive=function(){return this.s>0},X.isZero=function(){return!!this.c&&this.c[0]==0},X.minus=function(D,K){var G,ee,T,F,H=this,M=H.s;if(D=new Q(D,K),K=D.s,!M||!K)return new Q(NaN);if(M!=K)return D.s=-K,H.plus(D);var Z=H.e/c,ie=D.e/c,te=H.c,he=D.c;if(!Z||!ie){if(!te||!he)return te?(D.s=-K,D):new Q(he?H:NaN);if(!te[0]||!he[0])return he[0]?(D.s=-K,D):new Q(te[0]?H:_==3?-0:0)}if(Z=y(Z),ie=y(ie),te=te.slice(),M=Z-ie){for((F=M<0)?(M=-M,T=te):(ie=Z,T=he),T.reverse(),K=M;K--;T.push(0));T.reverse()}else for(ee=(F=(M=te.length)<(K=he.length))?M:K,M=K=0;K<ee;K++)if(te[K]!=he[K]){F=te[K]<he[K];break}if(F&&(T=te,te=he,he=T,D.s=-D.s),K=(ee=he.length)-(G=te.length),K>0)for(;K--;te[G++]=0);for(K=a-1;ee>M;){if(te[--ee]<he[ee]){for(G=ee;G&&!te[--G];te[G]=K);--te[G],te[ee]+=a}te[ee]-=he[ee]}for(;te[0]==0;te.splice(0,1),--ie);return te[0]?me(D,te,ie):(D.s=_==3?-1:1,D.c=[D.e=0],D)},X.modulo=X.mod=function(D,K){var G,ee,T=this;return D=new Q(D,K),!T.c||!D.s||D.c&&!D.c[0]?new Q(NaN):!D.c||T.c&&!T.c[0]?new Q(T):(q==9?(ee=D.s,D.s=1,G=C(T,D,0,3),D.s=ee,G.s*=ee):G=C(T,D,0,q),D=T.minus(G.times(D)),!D.c[0]&&q==1&&(D.s=T.s),D)},X.multipliedBy=X.times=function(D,K){var G,ee,T,F,H,M,Z,ie,te,he,we,_e,Ke,Pe,Ve,et=this,He=et.c,ze=(D=new Q(D,K)).c;if(!He||!ze||!He[0]||!ze[0])return!et.s||!D.s||He&&!He[0]&&!ze||ze&&!ze[0]&&!He?D.c=D.e=D.s=null:(D.s*=et.s,!He||!ze?D.c=D.e=null:(D.c=[0],D.e=0)),D;for(ee=y(et.e/c)+y(D.e/c),D.s*=et.s,Z=He.length,he=ze.length,Z<he&&(Ke=He,He=ze,ze=Ke,T=Z,Z=he,he=T),T=Z+he,Ke=[];T--;Ke.push(0));for(Pe=a,Ve=d,T=he;--T>=0;){for(G=0,we=ze[T]%Ve,_e=ze[T]/Ve|0,H=Z,F=T+H;F>T;)ie=He[--H]%Ve,te=He[H]/Ve|0,M=_e*ie+te*we,ie=we*ie+M%Ve*Ve+Ke[F]+G,G=(ie/Pe|0)+(M/Ve|0)+_e*te,Ke[F--]=ie%Pe;Ke[F]=G}return G?++ee:Ke.splice(0,1),me(D,Ke,ee)},X.negated=function(){var D=new Q(this);return D.s=-D.s||null,D},X.plus=function(D,K){var G,ee=this,T=ee.s;if(D=new Q(D,K),K=D.s,!T||!K)return new Q(NaN);if(T!=K)return D.s=-K,ee.minus(D);var F=ee.e/c,H=D.e/c,M=ee.c,Z=D.c;if(!F||!H){if(!M||!Z)return new Q(T/0);if(!M[0]||!Z[0])return Z[0]?D:new Q(M[0]?ee:T*0)}if(F=y(F),H=y(H),M=M.slice(),T=F-H){for(T>0?(H=F,G=Z):(T=-T,G=M),G.reverse();T--;G.push(0));G.reverse()}for(T=M.length,K=Z.length,T-K<0&&(G=Z,Z=M,M=G,K=T),T=0;K;)T=(M[--K]=M[K]+Z[K]+T)/a|0,M[K]=a===M[K]?0:M[K]%a;return T&&(M=[T].concat(M),++H),me(D,M,H)},X.precision=X.sd=function(D,K){var G,ee,T,F=this;if(D!=null&&D!==!!D)return b(D,1,h),K==null?K=_:b(K,0,8),be(new Q(F),D,K);if(!(G=F.c))return null;if(T=G.length-1,ee=T*c+1,T=G[T]){for(;T%10==0;T/=10,ee--);for(T=G[0];T>=10;T/=10,ee++);}return D&&F.e+1>ee&&(ee=F.e+1),ee},X.shiftedBy=function(D){return b(D,-u,u),this.times("1e"+D)},X.squareRoot=X.sqrt=function(){var D,K,G,ee,T,F=this,H=F.c,M=F.s,Z=F.e,ie=g+4,te=new Q("0.5");if(M!==1||!H||!H[0])return new Q(!M||M<0&&(!H||H[0])?NaN:H?F:1/0);if(M=Math.sqrt(+xe(F)),M==0||M==1/0?(K=m(H),(K.length+Z)%2==0&&(K+="0"),M=Math.sqrt(+K),Z=y((Z+1)/2)-(Z<0||Z%2),M==1/0?K="5e"+Z:(K=M.toExponential(),K=K.slice(0,K.indexOf("e")+1)+Z),G=new Q(K)):G=new Q(M+""),G.c[0]){for(Z=G.e,M=Z+ie,M<3&&(M=0);;)if(T=G,G=te.times(T.plus(C(F,T,ie,1))),m(T.c).slice(0,M)===(K=m(G.c)).slice(0,M))if(G.e<Z&&--M,K=K.slice(M-3,M+1),K=="9999"||!ee&&K=="4999"){if(!ee&&(be(T,T.e+g+2,0),T.times(T).eq(F))){G=T;break}ie+=4,M+=4,ee=1}else{(!+K||!+K.slice(1)&&K.charAt(0)=="5")&&(be(G,G.e+g+2,1),D=!G.times(G).eq(F));break}}return be(G,G.e+g+1,_,D)},X.toExponential=function(D,K){return D!=null&&(b(D,0,h),D++),ue(this,D,K,1)},X.toFixed=function(D,K){return D!=null&&(b(D,0,h),D=D+this.e+1),ue(this,D,K)},X.toFormat=function(D,K,G){var ee,T=this;if(G==null)D!=null&&K&&typeof K=="object"?(G=K,K=null):D&&typeof D=="object"?(G=D,D=K=null):G=U;else if(typeof G!="object")throw Error(s+"Argument not an object: "+G);if(ee=T.toFixed(D,K),T.c){var F,H=ee.split("."),M=+G.groupSize,Z=+G.secondaryGroupSize,ie=G.groupSeparator||"",te=H[0],he=H[1],we=T.s<0,_e=we?te.slice(1):te,Ke=_e.length;if(Z&&(F=M,M=Z,Z=F,Ke-=F),M>0&&Ke>0){for(F=Ke%M||M,te=_e.substr(0,F);F<Ke;F+=M)te+=ie+_e.substr(F,M);Z>0&&(te+=ie+_e.slice(F)),we&&(te="-"+te)}ee=he?te+(G.decimalSeparator||"")+((Z=+G.fractionGroupSize)?he.replace(new RegExp("\\d{"+Z+"}\\B","g"),"$&"+(G.fractionGroupSeparator||"")):he):te}return(G.prefix||"")+ee+(G.suffix||"")},X.toFraction=function(D){var K,G,ee,T,F,H,M,Z,ie,te,he,we,_e=this,Ke=_e.c;if(D!=null&&(M=new Q(D),!M.isInteger()&&(M.c||M.s!==1)||M.lt(P)))throw Error(s+"Argument "+(M.isInteger()?"out of range: ":"not an integer: ")+xe(M));if(!Ke)return new Q(_e);for(K=new Q(P),ie=G=new Q(P),ee=Z=new Q(P),we=m(Ke),F=K.e=we.length-_e.e-1,K.c[0]=f[(H=F%c)<0?c+H:H],D=!D||M.comparedTo(K)>0?F>0?K:ie:M,H=Y,Y=1/0,M=new Q(we),Z.c[0]=0;te=C(M,K,0,1),T=G.plus(te.times(ee)),T.comparedTo(D)!=1;)G=ee,ee=T,ie=Z.plus(te.times(T=ie)),Z=T,K=M.minus(te.times(T=K)),M=T;return T=C(D.minus(G),ee,0,1),Z=Z.plus(T.times(ie)),G=G.plus(T.times(ee)),Z.s=ie.s=_e.s,F=F*2,he=C(ie,ee,F,_).minus(_e).abs().comparedTo(C(Z,G,F,_).minus(_e).abs())<1?[ie,ee]:[Z,G],Y=H,he},X.toNumber=function(){return+xe(this)},X.toPrecision=function(D,K){return D!=null&&b(D,1,h),ue(this,D,K,2)},X.toString=function(D){var K,G=this,ee=G.s,T=G.e;return T===null?ee?(K="Infinity",ee<0&&(K="-"+K)):K="NaN":(D==null?K=T<=x||T>=O?I(m(G.c),T):j(m(G.c),T,"0"):D===10?(G=be(new Q(G),g+T+1,_),K=j(m(G.c),G.e,"0")):(b(D,2,de.length,"Base"),K=z(j(m(G.c),T,"0"),10,D,ee,!0)),ee<0&&G.c[0]&&(K="-"+K)),K},X.valueOf=X.toJSON=function(){return xe(this)},X._isBigNumber=!0,B!=null&&Q.set(B),Q}function y(B){var C=B|0;return B>0||B===C?C:C-1}function m(B){for(var C,z,W=1,X=B.length,P=B[0]+"";W<X;){for(C=B[W++]+"",z=c-C.length;z--;C="0"+C);P+=C}for(X=P.length;P.charCodeAt(--X)===48;);return P.slice(0,X+1||1)}function w(B,C){var z,W,X=B.c,P=C.c,g=B.s,_=C.s,x=B.e,O=C.e;if(!g||!_)return null;if(z=X&&!X[0],W=P&&!P[0],z||W)return z?W?0:-_:g;if(g!=_)return g;if(z=g<0,W=x==O,!X||!P)return W?0:!X^z?1:-1;if(!W)return x>O^z?1:-1;for(_=(x=X.length)<(O=P.length)?x:O,g=0;g<_;g++)if(X[g]!=P[g])return X[g]>P[g]^z?1:-1;return x==O?0:x>O^z?1:-1}function b(B,C,z,W){if(B<C||B>z||B!==n(B))throw Error(s+(W||"Argument")+(typeof B=="number"?B<C||B>z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(B))}function S(B){var C=B.c.length-1;return y(B.e/c)==C&&B.c[C]%2!=0}function I(B,C){return(B.length>1?B.charAt(0)+"."+B.slice(1):B)+(C<0?"e":"e+")+C}function j(B,C,z){var W,X;if(C<0){for(X=z+".";++C;X+=z);B=X+B}else if(W=B.length,++C>W){for(X=z,C-=W;--C;X+=z);B+=X}else C<W&&(B=B.slice(0,C)+"."+B.slice(C));return B}e=p(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof tw!="undefined"&&tw.exports?tw.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(pme)});var fO=v((gme,mme)=>{l();"use strict";var yZe=Math.exp;gme=mme.exports=function(e){if(typeof e!="number")throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let r,i=0,n=0,s=0,o,a={};function c(u,f){return 1-yZe(-(u-f)/e)}return a.push=function(f,d){if(o){let h=c(f,o),p=d-r,y=h*p;r=h*d+(1-h)*r,i=(1-h)*(i+p*y),n=Math.sqrt(i),s=r+h*p}else r=d;o=f},a.movingAverage=function(){return r},a.variance=function(){return i},a.deviation=function(){return n},a.forecast=function(){return s},a}});var _me=v((NDt,wme)=>{l();"use strict";var{EventEmitter:gZe}=vr(),{BigNumber:rw}=yme(),bme=fO(),mZe=VC(),vme=class extends gZe{constructor(e,r){super();this._options=r,this._queue=[],this._stats={dataReceived:rw(0),dataSent:rw(0)},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);let i=this._options.movingAverageIntervals;for(let n=0;n<e.length;n++){let s=e[n];this._stats[s]=rw(0),this._movingAverages[s]={};for(let o=0;o<i.length;o++){let a=i[o];(this._movingAverages[s][a]=bme(a)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}toJSON(){let e=this.snapshot,r=this.movingAverages,i={dataReceived:e.dataReceived.toString(),dataSent:e.dataSent.toString(),movingAverages:{}},n=Object.keys(r);for(let s of n){i.movingAverages[s]={};for(let o of Object.keys(r[s]))i.movingAverages[s][o]=r[s][o].movingAverage()}return i}push(e,r){this._queue.push([e,r,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout=mZe(this._update,this._nextTimeout())}_nextTimeout(){let e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(e of this._queue)this._applyOp(e);this._queue=[],this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){let r=e-this._frequencyLastTime;Object.keys(this._stats).forEach(i=>{this._updateFrequencyFor(i,r,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,r,i){let n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;let o=n/(r||1)*1e3,a=this._movingAverages[e];a||(a=this._movingAverages[e]={});let c=this._options.movingAverageIntervals;for(let u=0;u<c.length;u++){let f=c[u],d=a[f];d||(d=a[f]=bme(f)),d.push(i,o)}}_applyOp(e){let r=e[0],i=e[1];if(typeof i!="number")throw new Error(`invalid increment number: ${i}`);let n;Object.prototype.hasOwnProperty.call(this._stats,r)?n=this._stats[r]:n=this._stats[r]=rw(0),this._stats[r]=n.plus(i),this._frequencyAccumulators[r]||(this._frequencyAccumulators[r]=0),this._frequencyAccumulators[r]+=i}};wme.exports=vme});var xme=v((MDt,Sme)=>{l();"use strict";var bZe=Ml(),{pipe:vZe}=Nr(),{tap:Eme}=s3(),wZe=hme(),{METRICS:_Ze}=U7(),lO=_me(),dO=["dataReceived","dataSent"],EZe={in:"dataReceived",out:"dataSent"},iw=class{constructor(e){this._options=bZe(_Ze,e),this._globalStats=new lO(dO,this._options),this._peerStats=new Map,this._protocolStats=new Map,this._oldPeers=wZe(this._options.maxOldPeersRetention),this._running=!1,this._onMessage=this._onMessage.bind(this),this._connectionManager=e.connectionManager,this._connectionManager.on("peer:disconnect",r=>{this.onPeerDisconnected(r.remotePeer)})}start(){this._running=!0}stop(){this._running=!1,this._globalStats.stop();for(let e of this._peerStats.values())e.stop();for(let e of this._protocolStats.values())e.stop()}get global(){return this._globalStats}get peers(){return Array.from(this._peerStats.keys())}forPeer(e){let r=e.toB58String();return this._peerStats.get(r)||this._oldPeers.get(r)}get protocols(){return Array.from(this._protocolStats.keys())}forProtocol(e){return this._protocolStats.get(e)}onPeerDisconnected(e){let r=e.toB58String(),i=this._peerStats.get(r);i&&(i.stop(),this._peerStats.delete(r),this._oldPeers.set(r,i))}_onMessage({remotePeer:e,protocol:r,direction:i,dataLength:n}){if(!this._running)return;let s=EZe[i],o=this.forPeer(e);if(o||(o=new lO(dO,this._options),this._peerStats.set(e.toB58String(),o)),o.push(s,n),this._globalStats.push(s,n),r){let a=this.forProtocol(r);a||(a=new lO(dO,this._options),this._protocolStats.set(r,a)),a.push(s,n)}}updatePlaceholder(e,r){if(!this._running)return;let i=this.forPeer(e),n=r.toB58String(),s=this.forPeer(r),o=i;s&&(o=iw.mergeStats(s,o),this._oldPeers.delete(n)),this._peerStats.delete(e.toB58String()),this._peerStats.set(n,o),o.start()}trackStream({stream:e,remotePeer:r,protocol:i}){let n=this,s=e.source;e.source=Eme(a=>n._onMessage({remotePeer:r,protocol:i,direction:"in",dataLength:a.length}))(s);let o=e.sink;return e.sink=a=>vZe(a,Eme(c=>n._onMessage({remotePeer:r,protocol:i,direction:"out",dataLength:c.length})),o),e}static mergeStats(e,r){return e.stop(),r.stop(),e._queue=[...e._queue,...r._queue],e}};Sme.exports=iw});var hO=v((LDt,Ime)=>{l();"use strict";function Ame(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function SZe(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Ame(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),Ame(new n,r)}}Ime.exports=SZe});var nw=v(Nh=>{l();"use strict";var Tme=Pn(),Rme=ga(),xZe=Nr(),AZe=hO(),{fromString:IZe}=(dt(),bi),TZe=Od(),Pme=IZe(`
`);Nh.encode=t=>Rme.encode.single(new Tme([t,Pme]));Nh.write=(t,e)=>t.push(Nh.encode(e));Nh.writeAll=(t,e)=>{t.push(e.reduce((r,i)=>r.append(Nh.encode(i)),new Tme))};Nh.read=async t=>{let e=1,r={[Symbol.asyncIterator](){return this},next:()=>t.next(e)},i=s=>{e=s},n=await xZe(r,Rme.decode({onLength:i}),TZe);if(n.get(n.length-1)!==Pme[0])throw AZe(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return n.shallowSlice(0,-1)}});var Ome=v((jDt,Cme)=>{l();"use strict";var c2=Ee()("mss:select"),RZe=hO(),u2=nw(),PZe=q1();Cme.exports=async(t,e,r)=>{e=Array.isArray(e)?[...e]:[e];let{reader:i,writer:n,rest:s,stream:o}=PZe(t),a=e.shift();r?(c2('select: write ["%s", "%s"]',r,a),u2.writeAll(n,[r,a])):(c2('select: write "%s"',a),u2.write(n,a));let c=(await u2.read(i)).toString();if(c2('select: read "%s"',c),c===r&&(c=(await u2.read(i)).toString(),c2('select: read "%s"',c)),c===a)return s(),{stream:o,protocol:a};for(let u of e){c2('select: write "%s"',u),u2.write(n,u);let f=(await u2.read(i)).toString();if(c2('select: read "%s" for "%s"',f,u),f===u)return s(),{stream:o,protocol:u}}throw s(),RZe(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}});var pO=v(kme=>{l();"use strict";kme.PROTOCOL_ID="/multistream/1.0.0"});var Bme=v((FDt,Dme)=>{l();"use strict";var A3=Ee()("mss:handle"),CZe=Pn(),f2=nw(),OZe=q1(),{PROTOCOL_ID:yO}=pO();Dme.exports=async(t,e)=>{e=Array.isArray(e)?e:[e];let{writer:r,reader:i,rest:n,stream:s}=OZe(t);for(;;){let o=(await f2.read(i)).toString();if(A3('read "%s"',o),o===yO){A3('respond with "%s" for "%s"',yO,o),f2.write(r,yO);continue}if(e.includes(o))return f2.write(r,o),A3('respond with "%s" for "%s"',o,o),n(),{stream:s,protocol:o};if(o==="ls"){f2.write(r,new CZe(e.map(a=>f2.encode(a)))),A3('respond with "%s" for %s',e,o);continue}f2.write(r,"na"),A3('respond with "na" for "%s"',o)}}});var Lme=v((KDt,Mme)=>{l();"use strict";var kZe=Yb(),DZe=Ee()("it-multistream-select:ls"),Nme=nw(),BZe=q1(),NZe=ga(),MZe=Nr();Mme.exports=async t=>{let{reader:e,writer:r,rest:i,stream:n}=BZe(t);DZe('write "ls"'),Nme.write(r,"ls"),i();let s=await Nme.read(e),o=kZe([s]),a=[];return await MZe(o,NZe.decode(),async c=>{for await(let u of c)a.push(u.shallowSlice(0,-1).toString())}),{stream:n,protocols:a}}});var Fme=v(sw=>{l();"use strict";var qme=Ome(),LZe=Bme(),qZe=Lme(),{PROTOCOL_ID:gO}=pO();sw.PROTOCOL_ID=gO;var mO=class{constructor(e){this._stream=e,this._shaken=!1}async _handshake(){if(this._shaken)return;let{stream:e}=await qme(this._stream,gO);this._stream=e,this._shaken=!0}},jme=class extends mO{select(e){return qme(this._stream,e,this._shaken?null:gO)}async ls(){await this._handshake();let{stream:e,protocols:r}=await qZe(this._stream);return this._stream=e,r}};sw.Dialer=jme;var Ume=class extends mO{handle(e){return LZe(this._stream,e)}};sw.Listener=Ume});var Vme=v((zDt,Kme)=>{l();"use strict";var jZe={OPEN:"open",CLOSING:"closing",CLOSED:"closed"};Kme.exports=jZe});var Yme=v((HDt,Wme)=>{l();"use strict";var zme=it(),{Multiaddr:UZe}=rt(),Bs=zT(),{OPEN:FZe,CLOSING:Hme,CLOSED:bO}=Vme(),$me=Symbol.for("@libp2p/interface-connection/connection"),Gme=class{constructor({localAddr:e,remoteAddr:r,localPeer:i,remotePeer:n,newStream:s,close:o,getStreams:a,stat:c}){KZe(e,i,n,s,o,a,c),this.id=parseInt(String(Math.random()*1e9)).toString(36)+Date.now(),this.localAddr=e,this.remoteAddr=r,this.localPeer=i,this.remotePeer=n,this._stat={...c,status:FZe},this._newStream=s,this._close=o,this._getStreams=a,this.registry=new Map,this.tags=[]}get[Symbol.toStringTag](){return"Connection"}get[$me](){return!0}static isConnection(e){return Boolean(e&&e[$me])}get stat(){return this._stat}get streams(){return this._getStreams()}async newStream(e){if(this.stat.status===Hme)throw Bs(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===bO)throw Bs(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(e)||(e=[e]);let{stream:r,protocol:i}=await this._newStream(e);return this.addStream(r,{protocol:i}),{stream:r,protocol:i}}addStream(e,{protocol:r,metadata:i={}}){this.registry.set(e.id,{protocol:r,...i})}removeStream(e){this.registry.delete(e)}async close(){if(this.stat.status!==bO){if(this._closing)return this._closing;this.stat.status=Hme,this._closing=await this._close(),this._stat.timeline.close=Date.now(),this.stat.status=bO}}};Wme.exports=Gme;function KZe(t,e,r,i,n,s,o){if(t&&!UZe.isMultiaddr(t))throw Bs(new Error("localAddr must be an instance of multiaddr"),"ERR_INVALID_PARAMETERS");if(!zme.isPeerId(e))throw Bs(new Error("localPeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(!zme.isPeerId(r))throw Bs(new Error("remotePeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(typeof i!="function")throw Bs(new Error("new stream must be a function"),"ERR_INVALID_PARAMETERS");if(typeof n!="function")throw Bs(new Error("close must be a function"),"ERR_INVALID_PARAMETERS");if(typeof s!="function")throw Bs(new Error("getStreams must be a function"),"ERR_INVALID_PARAMETERS");if(!o)throw Bs(new Error("connection metadata object must be provided"),"ERR_INVALID_PARAMETERS");if(o.direction!=="inbound"&&o.direction!=="outbound")throw Bs(new Error('direction must be "inbound" or "outbound"'),"ERR_INVALID_PARAMETERS");if(!o.timeline)throw Bs(new Error("connection timeline object must be provided in the stat object"),"ERR_INVALID_PARAMETERS");if(!o.timeline.open)throw Bs(new Error("connection open timestamp must be provided"),"ERR_INVALID_PARAMETERS");if(!o.timeline.upgraded)throw Bs(new Error("connection upgraded timestamp must be provided"),"ERR_INVALID_PARAMETERS")}});var Qme=v(Xme=>{l();"use strict";Xme.Connection=Yme()});var Jme=v((GDt,Zme)=>{l();"use strict";function VZe(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}Zme.exports=function(e){var r=void 0,i=void 0;function n(a){if(!(a instanceof Object))throw new Error('Target "'+a+'" is not an object');i=a}function s(a){Object.keys(a).forEach(function(c){var u=a[c];if(typeof u!="function")throw new Error('Trap "'+c+": "+u+'" is not a function');if(!Reflect[c])throw new Error('Trap "'+c+": "+u+'" is not a valid trap')}),r=a}n(function(){}),e&&n(e),s(Reflect);var o=new Proxy({},{get:function(c,u){return function(){for(var f=arguments.length,d=Array(f),h=0;h<f;h++)d[h]=arguments[h];return r[u].apply(null,[i].concat(VZe(d.slice(1))))}}});return{setTarget:n,setHandler:s,getTarget:function(){return i},getHandler:function(){return r},proxy:new Proxy(i,o)}}});var n3e=v((WDt,i3e)=>{l();"use strict";var e3e=Ee(),Li=Object.assign(e3e("libp2p:upgrader"),{error:e3e("libp2p:upgrader:err")}),Mh=_r(),l2=Fme(),{Connection:zZe}=Qme(),HZe=it(),{pipe:$Ze}=Nr(),t3e=Jme(),{codes:d2}=Ei(),r3e=class{constructor({localPeer:e,metrics:r,cryptos:i=new Map,muxers:n=new Map,onConnectionEnd:s=()=>{},onConnection:o=()=>{}}){this.localPeer=e,this.metrics=r,this.cryptos=i,this.muxers=n,this.protector=null,this.protocols=new Map,this.onConnection=o,this.onConnectionEnd=s}async upgradeInbound(e){let r,i,n,s,o,a,c;if(this.metrics){({setTarget:a,proxy:c}=t3e());let f=(Math.random()*1e9).toString(36)+Date.now();a({toB58String:()=>f}),e=this.metrics.trackStream({stream:e,remotePeer:c})}Li("Starting the inbound connection upgrade");let u=e;this.protector&&(u=await this.protector.protect(e));try{({conn:r,remotePeer:i,protocol:o}=await this._encryptInbound(this.localPeer,u,this.cryptos)),this.muxers.size?{stream:n,Muxer:s}=await this._multiplexInbound(r,this.muxers):n=r}catch(f){throw Li.error("Failed to upgrade inbound connection",f),await e.close(f),f}return this.metrics&&(this.metrics.updatePlaceholder(c,i),a(i)),Li("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:o,direction:"inbound",maConn:e,upgradedConn:n,Muxer:s,remotePeer:i})}async upgradeOutbound(e){let r=e.remoteAddr.getPeerId();if(!r)throw Mh(new Error("outbound connection must have a peer id"),d2.ERR_INVALID_MULTIADDR);let i=HZe.createFromB58String(r),n,s,o,a,c,u,f;if(this.metrics){({setTarget:u,proxy:f}=t3e());let h=(Math.random()*1e9).toString(36)+Date.now();u({toB58String:()=>h}),e=this.metrics.trackStream({stream:e,remotePeer:f})}Li("Starting the outbound connection upgrade");let d=e;this.protector&&(d=await this.protector.protect(e));try{({conn:n,remotePeer:s,protocol:a}=await this._encryptOutbound(this.localPeer,d,i,this.cryptos)),this.muxers.size?{stream:o,Muxer:c}=await this._multiplexOutbound(n,this.muxers):o=n}catch(h){throw Li.error("Failed to upgrade outbound connection",h),await e.close(h),h}return this.metrics&&(this.metrics.updatePlaceholder(f,s),u(s)),Li("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:a,direction:"outbound",maConn:e,upgradedConn:o,Muxer:c,remotePeer:s})}_createConnection({cryptoProtocol:e,direction:r,maConn:i,upgradedConn:n,Muxer:s,remotePeer:o}){let a,c,u;s&&(a=new s({onStream:async h=>{if(!u)return;let p=new l2.Listener(h);try{let{stream:y,protocol:m}=await p.handle(Array.from(this.protocols.keys()));Li("%s: incoming stream opened on %s",r,m),this.metrics&&this.metrics.trackStream({stream:y,remotePeer:o,protocol:m}),u.addStream(h,{protocol:m}),this._onStream({connection:u,stream:{...h,...y},protocol:m})}catch(y){Li.error(y)}},onStreamEnd:h=>{u.removeStream(h.id)}}),c=async h=>{Li("%s: starting new stream on %s",r,h);let p=a.newStream(),y=new l2.Dialer(p);try{let{stream:m,protocol:w}=await y.select(h);return this.metrics&&this.metrics.trackStream({stream:m,remotePeer:o,protocol:w}),{stream:{...p,...m},protocol:w}}catch(m){throw Li.error("could not create new stream",m),Mh(m,d2.ERR_UNSUPPORTED_PROTOCOL)}},$Ze(n,a,n).catch(Li.error));let f=i.timeline;i.timeline=new Proxy(f,{set:(...h)=>(u&&h[1]==="close"&&h[2]&&!f.close&&(async()=>{try{u.stat.status==="open"&&await u.close()}catch(p){Li.error(p)}finally{this.onConnectionEnd(u)}})(),Reflect.set(...h))}),i.timeline.upgraded=Date.now();let d=()=>{throw Mh(new Error("connection is not multiplexed"),"ERR_CONNECTION_NOT_MULTIPLEXED")};return u=new zZe({localAddr:i.localAddr,remoteAddr:i.remoteAddr,localPeer:this.localPeer,remotePeer:o,stat:{direction:r,timeline:i.timeline,multiplexer:s&&s.multicodec,encryption:e},newStream:c||d,getStreams:()=>a?a.streams:d(),close:async()=>{await i.close(),a&&a.streams.map(h=>h.abort())}}),this.onConnection(u),u}_onStream({connection:e,stream:r,protocol:i}){this.protocols.get(i)({connection:e,stream:r,protocol:i})}async _encryptInbound(e,r,i){let n=new l2.Listener(r),s=Array.from(i.keys());Li("handling inbound crypto protocol selection",s);try{let{stream:o,protocol:a}=await n.handle(s),c=i.get(a);if(Li("encrypting inbound connection..."),!c)throw new Error(`no crypto module found for ${a}`);return{...await c.secureInbound(e,o),protocol:a}}catch(o){throw Mh(o,d2.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,r,i,n){let s=new l2.Dialer(r),o=Array.from(n.keys());Li("selecting outbound crypto protocol",o);try{let{stream:a,protocol:c}=await s.select(o),u=n.get(c);if(Li("encrypting outbound connection to %j",i),!u)throw new Error(`no crypto module found for ${c}`);return{...await u.secureOutbound(e,a,i),protocol:c}}catch(a){throw Mh(a,d2.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,r){let i=new l2.Dialer(e),n=Array.from(r.keys());Li("outbound selecting muxer %s",n);try{let{stream:s,protocol:o}=await i.select(n);Li("%s selected as muxer protocol",o);let a=r.get(o);return{stream:s,Muxer:a}}catch(s){throw Mh(s,d2.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,r){let i=new l2.Listener(e),n=Array.from(r.keys());Li("inbound handling muxers %s",n);try{let{stream:s,protocol:o}=await i.handle(n),a=r.get(o);return{stream:s,Muxer:a}}catch(s){throw Mh(s,d2.ERR_MUXER_UNAVAILABLE)}}};i3e.exports=r3e});var I3=v((YDt,c3e)=>{l();"use strict";var vO=_r(),s3e=it(),{codes:{ERR_INVALID_PARAMETERS:o3e}}=Ei(),GZe=t=>t,a3e=class{constructor({peerStore:e,eventName:r,eventProperty:i,eventTransformer:n=GZe}){this._ps=e,this.eventName=r,this.eventProperty=i,this.eventTransformer=n,this.data=new Map}set(e,r){throw vO(new Error("set must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}_setData(e,r,{emit:i=!0}={}){let n=e.toB58String();this.data.set(n,r),i&&this._emit(e,r)}_emit(e,r){this._ps.emit(this.eventName,{peerId:e,[this.eventProperty]:this.eventTransformer(r)})}get(e){if(!s3e.isPeerId(e))throw vO(new Error("peerId must be an instance of peer-id"),o3e);let r=this.data.get(e.toB58String());return r?[...r]:void 0}delete(e){if(!s3e.isPeerId(e))throw vO(new Error("peerId must be an instance of peer-id"),o3e);return this.data.delete(e.toB58String())?(this._emit(e,[]),!0):!1}};c3e.exports=a3e});var d3e=v((XDt,l3e)=>{l();"use strict";var u3e=Ee(),Aa=Object.assign(u3e("libp2p:peer-store:address-book"),{error:u3e("libp2p:peer-store:address-book:err")}),h2=_r(),{Multiaddr:WZe}=rt(),ow=it(),YZe=I3(),XZe=z7(),{codes:{ERR_INVALID_PARAMETERS:p2}}=Ei(),QZe=Pm(),f3e=class extends YZe{constructor(e){super({peerStore:e,eventName:"change:multiaddrs",eventProperty:"multiaddrs",eventTransformer:r=>r.addresses?r.addresses.map(i=>i.multiaddr):[]});this.data=new Map}consumePeerRecord(e){let r;try{r=XZe.createFromProtobuf(e.payload)}catch(c){return Aa.error("invalid peer record received"),!1}if(!r.peerId.equals(e.peerId))return Aa("signing key does not match PeerId in the PeerRecord"),!1;if(!r.multiaddrs||!r.multiaddrs.length)return!1;let i=r.peerId,n=i.toB58String(),o=(this.data.get(n)||{record:void 0}).record;if(o&&o.seqNumber>=r.seqNumber)return!1;let a=this._toAddresses(r.multiaddrs,!0);return this._setData(i,{addresses:a,record:{raw:e.marshal(),seqNumber:r.seqNumber}}),Aa(`stored provided peer record for ${n}`),!0}getRawEnvelope(e){let r=this.data.get(e.toB58String());if(!(!r||!r.record||!r.record.raw))return r.record.raw}getPeerRecord(e){let r=this.getRawEnvelope(e);if(!!r)return QZe.createFromProtobuf(r)}set(e,r){if(!ow.isPeerId(e))throw Aa.error("peerId must be an instance of peer-id to store data"),h2(new Error("peerId must be an instance of peer-id"),p2);let i=this._toAddresses(r);if(!i.length)return this;let n=e.toB58String(),s=this.data.get(n);return s&&s.addresses&&s.addresses.length===i.length&&s.addresses.filter(a=>i.some(c=>a.multiaddr.equals(c.multiaddr))).length===s.addresses.length?(Aa(`the addresses provided to store are equal to the already stored for ${n}`),this):(this._setData(e,{addresses:i,record:s&&s.record}),Aa(`stored provided multiaddrs for ${n}`),s||this._ps.emit("peer",e),this)}add(e,r){if(!ow.isPeerId(e))throw Aa.error("peerId must be an instance of peer-id to store data"),h2(new Error("peerId must be an instance of peer-id"),p2);let i=this._toAddresses(r),n=e.toB58String();if(!i.length)return this;let s=this.data.get(n);return s&&s.addresses&&(s.addresses.forEach(o=>{i.find(a=>a.multiaddr.equals(o.multiaddr))||i.push(o)}),s.addresses.length===i.length)?(Aa(`the addresses provided to store are already stored for ${n}`),this):(this._setData(e,{addresses:i,record:s&&s.record}),Aa(`added provided multiaddrs for ${n}`),s&&s.addresses||this._ps.emit("peer",e),this)}get(e){if(!ow.isPeerId(e))throw h2(new Error("peerId must be an instance of peer-id"),p2);let r=this.data.get(e.toB58String());return r&&r.addresses?[...r.addresses]:void 0}_toAddresses(e,r=!1){if(!e)throw Aa.error("multiaddrs must be provided to store data"),h2(new Error("multiaddrs must be provided"),p2);let i=[];return e.forEach(n=>{if(!WZe.isMultiaddr(n))throw Aa.error(`multiaddr ${n} must be an instance of multiaddr`),h2(new Error(`multiaddr ${n} must be an instance of multiaddr`),p2);i.find(s=>s.multiaddr.equals(n))||i.push({multiaddr:n,isCertified:r})}),i}getMultiaddrsForPeer(e,r=i=>i){if(!ow.isPeerId(e))throw h2(new Error("peerId must be an instance of peer-id"),p2);let i=this.data.get(e.toB58String());if(!(!i||!i.addresses))return r(i.addresses||[]).map(n=>{let s=n.multiaddr,o=s.getPeerId();return o&&o===e.toB58String()?s:s.encapsulate(`/p2p/${e.toB58String()}`)})}};l3e.exports=f3e});var w3e=v((QDt,v3e)=>{l();"use strict";var h3e=Ee(),p3e=Object.assign(h3e("libp2p:peer-store:key-book"),{error:h3e("libp2p:peer-store:key-book:err")}),y3e=_r(),g3e=it(),ZZe=I3(),{codes:{ERR_INVALID_PARAMETERS:m3e}}=Ei(),b3e=class extends ZZe{constructor(e){super({peerStore:e,eventName:"change:pubkey",eventProperty:"pubkey",eventTransformer:r=>r.pubKey});this.data=new Map}set(e,r){if(!g3e.isPeerId(e))throw p3e.error("peerId must be an instance of peer-id to store data"),y3e(new Error("peerId must be an instance of peer-id"),m3e);let i=e.toB58String();return!this.data.get(i)&&r&&(e.pubKey=r,this._setData(e,e),p3e(`stored provided public key for ${i}`)),this}get(e){if(!g3e.isPeerId(e))throw y3e(new Error("peerId must be an instance of peer-id"),m3e);let r=this.data.get(e.toB58String());return r?r.pubKey:void 0}};v3e.exports=b3e});var x3e=v((ZDt,S3e)=>{l();"use strict";var _3e=Ee(),wO=Object.assign(_3e("libp2p:peer-store:proto-book"),{error:_3e("libp2p:peer-store:proto-book:err")}),y2=_r(),{equals:JZe}=(wi(),vn),T3=it(),eJe=I3(),{codes:{ERR_INVALID_PARAMETERS:g2}}=Ei(),E3e=class extends eJe{constructor(e){super({peerStore:e,eventName:"change:metadata",eventProperty:"metadata"});this.data=new Map}set(e,r,i){if(!T3.isPeerId(e))throw wO.error("peerId must be an instance of peer-id to store data"),y2(new Error("peerId must be an instance of peer-id"),g2);if(typeof r!="string"||!(i instanceof Uint8Array))throw wO.error("valid key and value must be provided to store data"),y2(new Error("valid key and value must be provided"),g2);return this._setValue(e,r,i),this}_setValue(e,r,i,{emit:n=!0}={}){let s=e.toB58String(),o=this.data.get(s)||new Map,a=o.get(r);if(a&&JZe(i,a)){wO(`the metadata provided to store is equal to the already stored for ${s} on ${r}`);return}o.set(r,i),this.data.set(s,o),n&&this._emit(e,r)}get(e){if(!T3.isPeerId(e))throw y2(new Error("peerId must be an instance of peer-id"),g2);return this.data.get(e.toB58String())}getValue(e,r){if(!T3.isPeerId(e))throw y2(new Error("peerId must be an instance of peer-id"),g2);let i=this.data.get(e.toB58String());return i&&i.get(r)}delete(e){if(!T3.isPeerId(e))throw y2(new Error("peerId must be an instance of peer-id"),g2);return this.data.delete(e.toB58String())?(this._emit(e),!0):!1}deleteValue(e,r){if(!T3.isPeerId(e))throw y2(new Error("peerId must be an instance of peer-id"),g2);let i=this.data.get(e.toB58String());return!i||!i.delete(r)?!1:(this._emit(e,r),!0)}};S3e.exports=E3e});var R3e=v((JDt,T3e)=>{l();"use strict";var A3e=Ee(),Ia=Object.assign(A3e("libp2p:peer-store:proto-book"),{error:A3e("libp2p:peer-store:proto-book:err")}),m2=_r(),_O=it(),tJe=I3(),{codes:{ERR_INVALID_PARAMETERS:b2}}=Ei(),I3e=class extends tJe{constructor(e){super({peerStore:e,eventName:"change:protocols",eventProperty:"protocols",eventTransformer:r=>Array.from(r)});this.data=new Map}set(e,r){if(!_O.isPeerId(e))throw Ia.error("peerId must be an instance of peer-id to store data"),m2(new Error("peerId must be an instance of peer-id"),b2);if(!r)throw Ia.error("protocols must be provided to store data"),m2(new Error("protocols must be provided"),b2);let i=e.toB58String(),n=this.data.get(i),s=new Set(r);return n&&((a,c)=>a.size===c.size&&[...a].every(u=>c.has(u)))(n,s)?(Ia(`the protocols provided to store are equal to the already stored for ${i}`),this):(this._setData(e,s),Ia(`stored provided protocols for ${i}`),this)}add(e,r){if(!_O.isPeerId(e))throw Ia.error("peerId must be an instance of peer-id to store data"),m2(new Error("peerId must be an instance of peer-id"),b2);if(!r)throw Ia.error("protocols must be provided to store data"),m2(new Error("protocols must be provided"),b2);let i=e.toB58String(),n=this.data.get(i)||new Set,s=new Set([...n,...r]);return n.size===s.size?(Ia(`the protocols provided to store are already stored for ${i}`),this):(this._setData(e,s),Ia(`added provided protocols for ${i}`),this)}remove(e,r){if(!_O.isPeerId(e))throw Ia.error("peerId must be an instance of peer-id to store data"),m2(new Error("peerId must be an instance of peer-id"),b2);if(!r)throw Ia.error("protocols must be provided to store data"),m2(new Error("protocols must be provided"),b2);let i=e.toB58String(),n=this.data.get(i);if(n){let s=new Set([...n].filter(o=>!r.includes(o)));if(n.size===s.size)return this;this._setData(e,s),Ia(`removed provided protocols for ${i}`)}return this}};T3e.exports=I3e});var EO=v((eBt,O3e)=>{l();"use strict";var rJe=_r(),{EventEmitter:iJe}=vr(),P3e=it(),nJe=d3e(),sJe=w3e(),oJe=x3e(),aJe=R3e(),{codes:{ERR_INVALID_PARAMETERS:cJe}}=Ei(),C3e=class extends iJe{constructor({peerId:e}){super();this._peerId=e,this.addressBook=new nJe(this),this.keyBook=new sJe(this),this.metadataBook=new oJe(this),this.protoBook=new aJe(this)}start(){}stop(){}get peers(){let e=new Set([...this.addressBook.data.keys(),...this.keyBook.data.keys(),...this.protoBook.data.keys(),...this.metadataBook.data.keys()]);this._peerId&&e.delete(this._peerId.toB58String());let r=new Map;return e.forEach(i=>{r.set(i,this.get(P3e.createFromB58String(i)))}),r}delete(e){let r=this.addressBook.delete(e),i=this.keyBook.delete(e),n=this.protoBook.delete(e),s=this.metadataBook.delete(e);return r||i||n||s}get(e){if(!P3e.isPeerId(e))throw rJe(new Error("peerId must be an instance of peer-id"),cJe);let r=this.keyBook.data.get(e.toB58String()),i=this.addressBook.get(e),n=this.metadataBook.get(e),s=this.protoBook.get(e);if(!(!r&&!i&&!n&&!s))return{id:r||e,addresses:i||[],protocols:s||[],metadata:n}}};O3e.exports=C3e});var D3e=v((tBt,k3e)=>{l();"use strict";function uJe(t,e,r){let i=new t(e,r);i._subscribeAdapter=i.subscribe,i._unsubscribeAdapter=i.unsubscribe;function n(o,a){a&&i.on(o,a),i._subscribeAdapter(o)}function s(o,a){a?i.removeListener(o,a):i.removeAllListeners(o),i.listenerCount(o)===0&&i._unsubscribeAdapter(o)}return i.subscribe=n,i.unsubscribe=s,i}k3e.exports=uJe});var B3e=v((rBt,v2)=>{l();"use strict";v2.exports.NAMESPACE_COMMON="/peers/";v2.exports.NAMESPACE_ADDRESS="/peers/addrs/";v2.exports.NAMESPACE_KEYS="/peers/keys/";v2.exports.NAMESPACE_METADATA="/peers/metadata/";v2.exports.NAMESPACE_PROTOCOL="/peers/protos/"});var M3e=v((iBt,N3e)=>{l();"use strict";var kl=Vi(),w2=kl.Reader,SO=kl.Writer,ai=kl.util,qi=kl.roots["libp2p-address-book"]||(kl.roots["libp2p-address-book"]={});qi.Addresses=function(){function t(e){if(this.addrs=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.addrs=ai.emptyArray,t.prototype.certifiedRecord=null,t.encode=function(r,i){if(i||(i=SO.create()),r.addrs!=null&&r.addrs.length)for(var n=0;n<r.addrs.length;++n)qi.Addresses.Address.encode(r.addrs[n],i.uint32(10).fork()).ldelim();return r.certifiedRecord!=null&&Object.hasOwnProperty.call(r,"certifiedRecord")&&qi.Addresses.CertifiedRecord.encode(r.certifiedRecord,i.uint32(18).fork()).ldelim(),i},t.decode=function(r,i){r instanceof w2||(r=w2.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new qi.Addresses;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.addrs&&s.addrs.length||(s.addrs=[]),s.addrs.push(qi.Addresses.Address.decode(r,r.uint32()));break;case 2:s.certifiedRecord=qi.Addresses.CertifiedRecord.decode(r,r.uint32());break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof qi.Addresses)return r;var i=new qi.Addresses;if(r.addrs){if(!Array.isArray(r.addrs))throw TypeError(".Addresses.addrs: array expected");i.addrs=[];for(var n=0;n<r.addrs.length;++n){if(typeof r.addrs[n]!="object")throw TypeError(".Addresses.addrs: object expected");i.addrs[n]=qi.Addresses.Address.fromObject(r.addrs[n])}}if(r.certifiedRecord!=null){if(typeof r.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");i.certifiedRecord=qi.Addresses.CertifiedRecord.fromObject(r.certifiedRecord)}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.addrs=[]),i.defaults&&(n.certifiedRecord=null),r.addrs&&r.addrs.length){n.addrs=[];for(var s=0;s<r.addrs.length;++s)n.addrs[s]=qi.Addresses.Address.toObject(r.addrs[s],i)}return r.certifiedRecord!=null&&r.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=qi.Addresses.CertifiedRecord.toObject(r.certifiedRecord,i)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,kl.util.toJSONOptions)},t.Address=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.multiaddr=ai.newBuffer([]),e.prototype.isCertified=!1,e.encode=function(i,n){return n||(n=SO.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&n.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&n.uint32(16).bool(i.isCertified),n},e.decode=function(i,n){i instanceof w2||(i=w2.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new qi.Addresses.Address;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.multiaddr=i.bytes();break;case 2:o.isCertified=i.bool();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof qi.Addresses.Address)return i;var n=new qi.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?ai.base64.decode(i.multiaddr,n.multiaddr=ai.newBuffer(ai.base64.length(i.multiaddr)),0):i.multiaddr.length&&(n.multiaddr=i.multiaddr)),i.isCertified!=null&&(n.isCertified=Boolean(i.isCertified)),n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.multiaddr="":(s.multiaddr=[],n.bytes!==Array&&(s.multiaddr=ai.newBuffer(s.multiaddr))),s.isCertified=!1),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(s.multiaddr=n.bytes===String?ai.base64.encode(i.multiaddr,0,i.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(s.isCertified=i.isCertified),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,kl.util.toJSONOptions)},e}(),t.CertifiedRecord=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.seq=ai.Long?ai.Long.fromBits(0,0,!0):0,e.prototype.raw=ai.newBuffer([]),e.encode=function(i,n){return n||(n=SO.create()),i.seq!=null&&Object.hasOwnProperty.call(i,"seq")&&n.uint32(8).uint64(i.seq),i.raw!=null&&Object.hasOwnProperty.call(i,"raw")&&n.uint32(18).bytes(i.raw),n},e.decode=function(i,n){i instanceof w2||(i=w2.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new qi.Addresses.CertifiedRecord;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.seq=i.uint64();break;case 2:o.raw=i.bytes();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof qi.Addresses.CertifiedRecord)return i;var n=new qi.Addresses.CertifiedRecord;return i.seq!=null&&(ai.Long?(n.seq=ai.Long.fromValue(i.seq)).unsigned=!0:typeof i.seq=="string"?n.seq=parseInt(i.seq,10):typeof i.seq=="number"?n.seq=i.seq:typeof i.seq=="object"&&(n.seq=new ai.LongBits(i.seq.low>>>0,i.seq.high>>>0).toNumber(!0))),i.raw!=null&&(typeof i.raw=="string"?ai.base64.decode(i.raw,n.raw=ai.newBuffer(ai.base64.length(i.raw)),0):i.raw.length&&(n.raw=i.raw)),n},e.toObject=function(i,n){n||(n={});var s={};if(n.defaults){if(ai.Long){var o=new ai.Long(0,0,!0);s.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else s.seq=n.longs===String?"0":0;n.bytes===String?s.raw="":(s.raw=[],n.bytes!==Array&&(s.raw=ai.newBuffer(s.raw)))}return i.seq!=null&&i.hasOwnProperty("seq")&&(typeof i.seq=="number"?s.seq=n.longs===String?String(i.seq):i.seq:s.seq=n.longs===String?ai.Long.prototype.toString.call(i.seq):n.longs===Number?new ai.LongBits(i.seq.low>>>0,i.seq.high>>>0).toNumber(!0):i.seq),i.raw!=null&&i.hasOwnProperty("raw")&&(s.raw=n.bytes===String?ai.base64.encode(i.raw,0,i.raw.length):n.bytes===Array?Array.prototype.slice.call(i.raw):i.raw),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,kl.util.toJSONOptions)},e}(),t}();N3e.exports=qi});var j3e=v((nBt,q3e)=>{l();"use strict";var _2=Vi(),L3e=_2.Reader,fJe=_2.Writer,lJe=_2.util,R3=_2.roots["libp2p-proto-book"]||(_2.roots["libp2p-proto-book"]={});R3.Protocols=function(){function t(e){if(this.protocols=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.protocols=lJe.emptyArray,t.encode=function(r,i){if(i||(i=fJe.create()),r.protocols!=null&&r.protocols.length)for(var n=0;n<r.protocols.length;++n)i.uint32(10).string(r.protocols[n]);return i},t.decode=function(r,i){r instanceof L3e||(r=L3e.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new R3.Protocols;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof R3.Protocols)return r;var i=new R3.Protocols;if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Protocols.protocols: array expected");i.protocols=[];for(var n=0;n<r.protocols.length;++n)i.protocols[n]=String(r.protocols[n])}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.protocols=[]),r.protocols&&r.protocols.length){n.protocols=[];for(var s=0;s<r.protocols.length;++s)n.protocols[s]=r.protocols[s]}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,_2.util.toJSONOptions)},t}();q3e.exports=R3});var H3e=v((sBt,z3e)=>{l();"use strict";var U3e=Ee(),rn=Object.assign(U3e("libp2p:persistent-peer-store"),{error:U3e("libp2p:persistent-peer-store:err")}),{Key:aw}=(Br(),wy),{Multiaddr:dJe}=rt(),xO=it(),{base32:hJe}=(gn(),of),pJe=EO(),{NAMESPACE_ADDRESS:yJe,NAMESPACE_COMMON:gJe,NAMESPACE_KEYS:mJe,NAMESPACE_METADATA:bJe,NAMESPACE_PROTOCOL:vJe}=B3e(),{Addresses:F3e}=M3e(),{Protocols:K3e}=j3e(),V3e=class extends pJe{constructor({peerId:e,datastore:r,threshold:i=5}){super({peerId:e});this._datastore=r,this._dirtyPeers=new Set,this._dirtyMetadata=new Map,this.threshold=i,this._addDirtyPeer=this._addDirtyPeer.bind(this)}async start(){rn("PeerStore is starting"),this.on("change:protocols",this._addDirtyPeer),this.on("change:multiaddrs",this._addDirtyPeer),this.on("change:pubkey",this._addDirtyPeerKey),this.on("change:metadata",this._addDirtyPeerMetadata);for await(let e of this._datastore.query({prefix:gJe}))await this._processDatastoreEntry(e);rn("PeerStore started")}async stop(){rn("PeerStore is stopping"),this.removeAllListeners(),await this._commitData(),rn("PeerStore stopped")}_addDirtyPeer({peerId:e}){let r=e.toB58String();rn("add dirty peer",r),this._dirtyPeers.add(r),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(i=>{rn.error("error committing data",i)})}_addDirtyPeerKey({peerId:e}){if(e.hasInlinePublicKey())return;let r=e.toB58String();rn("add dirty peer key",r),this._dirtyPeers.add(r),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(i=>{rn.error("error committing data",i)})}_addDirtyPeerMetadata({peerId:e,metadata:r}){let i=e.toB58String();rn("add dirty metadata peer",i),this._dirtyPeers.add(i);let n=this._dirtyMetadata.get(i)||new Set;n.add(r),this._dirtyMetadata.set(i,n),this._dirtyPeers.size>=this.threshold&&this._commitData().catch(s=>{rn.error("error committing data",s)})}async _commitData(){let e=Array.from(this._dirtyPeers);if(!e.length)return;this._dirtyPeers.clear(),rn("create batch commit");let r=this._datastore.batch();for(let i of e){let n=this.keyBook.data.get(i)||xO.createFromB58String(i);this._batchAddressBook(n,r),!n.hasInlinePublicKey()&&this._batchKeyBook(n,r),this._batchMetadataBook(n,r),this._batchProtoBook(n,r)}await r.commit(),rn("batch committed")}_batchAddressBook(e,r){let i=e.toString(),n=new aw(`${yJe}${i}`),s=this.addressBook.data.get(e.toB58String());try{if(!s){r.delete(n);return}let o=F3e.encode({addrs:s.addresses.map(a=>({multiaddr:a.multiaddr.bytes,isCertified:a.isCertified})),certifiedRecord:s.record?{seq:s.record.seqNumber,raw:s.record.raw}:void 0}).finish();r.put(n,o)}catch(o){rn.error(o)}}_batchKeyBook(e,r){let i=e.toString(),n=new aw(`${mJe}${i}`);try{if(!e.pubKey){r.delete(n);return}let s=e.marshalPubKey();r.put(n,s)}catch(s){rn.error(s)}}_batchMetadataBook(e,r){let i=e.toString(),n=this._dirtyMetadata.get(e.toB58String())||[];try{n.forEach(s=>{let o=new aw(`${bJe}${i}/${s}`),a=this.metadataBook.getValue(e,s);a?r.put(o,a):r.delete(o)})}catch(s){rn.error(s)}}_batchProtoBook(e,r){let i=e.toString(),n=new aw(`${vJe}${i}`),s=this.protoBook.get(e);try{if(!s){r.delete(n);return}let o=K3e.encode({protocols:s}).finish();r.put(n,o)}catch(o){rn.error(o)}}async _processDatastoreEntry({key:e,value:r}){try{let i=e.toString().split("/"),n=xO.createFromBytes(hJe.decode(i[3])),s;switch(i[2]){case"addrs":s=F3e.decode(r),this.addressBook._setData(n,{addresses:s.addrs.map(o=>({multiaddr:new dJe(o.multiaddr),isCertified:Boolean(o.isCertified)})),record:s.certifiedRecord?{raw:s.certifiedRecord.raw,seqNumber:s.certifiedRecord.seq}:void 0},{emit:!1});break;case"keys":s=await xO.createFromPubKey(r),this.keyBook._setData(s,s,{emit:!1});break;case"metadata":this.metadataBook._setValue(n,i[4],r,{emit:!1});break;case"protos":s=K3e.decode(r),this.protoBook._setData(n,new Set(s.protocols),{emit:!1});break;default:rn("invalid data persisted for: ",e.toString())}}catch(i){rn.error(i)}}};z3e.exports=V3e});var Y3e=v((oBt,W3e)=>{l();"use strict";var $3e=Ee(),wJe=Object.assign($3e("libp2p:registrar"),{error:$3e("libp2p:registrar:err")}),_Je=_r(),{codes:{ERR_INVALID_PARAMETERS:EJe}}=Ei(),SJe=HT(),G3e=class{constructor({peerStore:e,connectionManager:r}){this.peerStore=e,this.connectionManager=r,this.topologies=new Map,this._handle=void 0,this._onDisconnect=this._onDisconnect.bind(this),this.connectionManager.on("peer:disconnect",this._onDisconnect)}get handle(){return this._handle}set handle(e){this._handle=e}getConnection(e){return this.connectionManager.get(e)}register(e){if(!SJe.isTopology(e))throw wJe.error("topology must be an instance of interfaces/topology"),_Je(new Error("topology must be an instance of interfaces/topology"),EJe);let r=(Math.random()*1e9).toString(36)+Date.now();return this.topologies.set(r,e),e.registrar=this,r}unregister(e){return this.topologies.delete(e)}_onDisconnect(e){for(let[,r]of this.topologies)r.disconnect(e.remotePeer)}};W3e.exports=G3e});var Q3e=v((aBt,X3e)=>{l();"use strict";X3e.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32,PROTOCOL_VERSION:"1.0.0",PROTOCOL_NAME:"ping"}});var t6e=v((cw,e6e)=>{l();"use strict";var Z3e=Ee(),xJe=Object.assign(Z3e("libp2p:ping"),{error:Z3e("libp2p:ping:err")}),AJe=_r(),IJe=uc(),{pipe:J3e}=Nr(),{toBuffer:TJe}=n7(),{collect:RJe,take:PJe}=s3(),{equals:CJe}=(wi(),vn),{PROTOCOL_NAME:AO,PING_LENGTH:OJe,PROTOCOL_VERSION:IO}=Q3e();async function kJe(t,e){let r=`/${t._config.protocolPrefix}/${AO}/${IO}`;xJe("dialing %s to %s",r,e.toB58String?e.toB58String():e);let i=await t.dial(e),{stream:n}=await i.newStream(r),s=Date.now(),o=IJe.randomBytes(OJe),[a]=await J3e([o],n,u=>PJe(1,u),TJe,RJe),c=Date.now();if(!CJe(o,a))throw AJe(new Error("Received wrong ping ack"),"ERR_WRONG_PING_ACK");return c-s}function DJe(t){t.handle(`/${t._config.protocolPrefix}/${AO}/${IO}`,({stream:e})=>J3e(e,e))}function BJe(t){t.unhandle(`/${t._config.protocolPrefix}/${AO}/${IO}`)}cw=e6e.exports=kJe;cw.mount=DJe;cw.unmount=BJe});var n6e=v((cBt,i6e)=>{l();"use strict";var E2=Vi(),r6e=E2.Reader,NJe=E2.Writer,kr=E2.util,P3=E2.roots["libp2p-identify"]||(E2.roots["libp2p-identify"]={});P3.Identify=function(){function t(e){if(this.listenAddrs=[],this.protocols=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.protocolVersion="",t.prototype.agentVersion="",t.prototype.publicKey=kr.newBuffer([]),t.prototype.listenAddrs=kr.emptyArray,t.prototype.observedAddr=kr.newBuffer([]),t.prototype.protocols=kr.emptyArray,t.prototype.signedPeerRecord=kr.newBuffer([]),t.encode=function(r,i){if(i||(i=NJe.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&i.uint32(10).bytes(r.publicKey),r.listenAddrs!=null&&r.listenAddrs.length)for(var n=0;n<r.listenAddrs.length;++n)i.uint32(18).bytes(r.listenAddrs[n]);if(r.protocols!=null&&r.protocols.length)for(var n=0;n<r.protocols.length;++n)i.uint32(26).string(r.protocols[n]);return r.observedAddr!=null&&Object.hasOwnProperty.call(r,"observedAddr")&&i.uint32(34).bytes(r.observedAddr),r.protocolVersion!=null&&Object.hasOwnProperty.call(r,"protocolVersion")&&i.uint32(42).string(r.protocolVersion),r.agentVersion!=null&&Object.hasOwnProperty.call(r,"agentVersion")&&i.uint32(50).string(r.agentVersion),r.signedPeerRecord!=null&&Object.hasOwnProperty.call(r,"signedPeerRecord")&&i.uint32(66).bytes(r.signedPeerRecord),i},t.decode=function(r,i){r instanceof r6e||(r=r6e.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new P3.Identify;r.pos<n;){var o=r.uint32();switch(o>>>3){case 5:s.protocolVersion=r.string();break;case 6:s.agentVersion=r.string();break;case 1:s.publicKey=r.bytes();break;case 2:s.listenAddrs&&s.listenAddrs.length||(s.listenAddrs=[]),s.listenAddrs.push(r.bytes());break;case 4:s.observedAddr=r.bytes();break;case 3:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;case 8:s.signedPeerRecord=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof P3.Identify)return r;var i=new P3.Identify;if(r.protocolVersion!=null&&(i.protocolVersion=String(r.protocolVersion)),r.agentVersion!=null&&(i.agentVersion=String(r.agentVersion)),r.publicKey!=null&&(typeof r.publicKey=="string"?kr.base64.decode(r.publicKey,i.publicKey=kr.newBuffer(kr.base64.length(r.publicKey)),0):r.publicKey.length&&(i.publicKey=r.publicKey)),r.listenAddrs){if(!Array.isArray(r.listenAddrs))throw TypeError(".Identify.listenAddrs: array expected");i.listenAddrs=[];for(var n=0;n<r.listenAddrs.length;++n)typeof r.listenAddrs[n]=="string"?kr.base64.decode(r.listenAddrs[n],i.listenAddrs[n]=kr.newBuffer(kr.base64.length(r.listenAddrs[n])),0):r.listenAddrs[n].length&&(i.listenAddrs[n]=r.listenAddrs[n])}if(r.observedAddr!=null&&(typeof r.observedAddr=="string"?kr.base64.decode(r.observedAddr,i.observedAddr=kr.newBuffer(kr.base64.length(r.observedAddr)),0):r.observedAddr.length&&(i.observedAddr=r.observedAddr)),r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Identify.protocols: array expected");i.protocols=[];for(var n=0;n<r.protocols.length;++n)i.protocols[n]=String(r.protocols[n])}return r.signedPeerRecord!=null&&(typeof r.signedPeerRecord=="string"?kr.base64.decode(r.signedPeerRecord,i.signedPeerRecord=kr.newBuffer(kr.base64.length(r.signedPeerRecord)),0):r.signedPeerRecord.length&&(i.signedPeerRecord=r.signedPeerRecord)),i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.listenAddrs=[],n.protocols=[]),i.defaults&&(i.bytes===String?n.publicKey="":(n.publicKey=[],i.bytes!==Array&&(n.publicKey=kr.newBuffer(n.publicKey))),i.bytes===String?n.observedAddr="":(n.observedAddr=[],i.bytes!==Array&&(n.observedAddr=kr.newBuffer(n.observedAddr))),n.protocolVersion="",n.agentVersion="",i.bytes===String?n.signedPeerRecord="":(n.signedPeerRecord=[],i.bytes!==Array&&(n.signedPeerRecord=kr.newBuffer(n.signedPeerRecord)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=i.bytes===String?kr.base64.encode(r.publicKey,0,r.publicKey.length):i.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.listenAddrs&&r.listenAddrs.length){n.listenAddrs=[];for(var s=0;s<r.listenAddrs.length;++s)n.listenAddrs[s]=i.bytes===String?kr.base64.encode(r.listenAddrs[s],0,r.listenAddrs[s].length):i.bytes===Array?Array.prototype.slice.call(r.listenAddrs[s]):r.listenAddrs[s]}if(r.protocols&&r.protocols.length){n.protocols=[];for(var s=0;s<r.protocols.length;++s)n.protocols[s]=r.protocols[s]}return r.observedAddr!=null&&r.hasOwnProperty("observedAddr")&&(n.observedAddr=i.bytes===String?kr.base64.encode(r.observedAddr,0,r.observedAddr.length):i.bytes===Array?Array.prototype.slice.call(r.observedAddr):r.observedAddr),r.protocolVersion!=null&&r.hasOwnProperty("protocolVersion")&&(n.protocolVersion=r.protocolVersion),r.agentVersion!=null&&r.hasOwnProperty("agentVersion")&&(n.agentVersion=r.agentVersion),r.signedPeerRecord!=null&&r.hasOwnProperty("signedPeerRecord")&&(n.signedPeerRecord=i.bytes===String?kr.base64.encode(r.signedPeerRecord,0,r.signedPeerRecord.length):i.bytes===Array?Array.prototype.slice.call(r.signedPeerRecord):r.signedPeerRecord),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,E2.util.toJSONOptions)},t}();i6e.exports=P3});var h6e=v((uBt,d6e)=>{l();"use strict";var s6e=Ee(),Kc=Object.assign(s6e("libp2p:identify"),{error:s6e("libp2p:identify:err")}),TO=_r(),uw=ga(),{pipe:fw}=Nr(),{collect:o6e,take:a6e,consume:c6e}=s3(),{fromString:S2}=(dt(),bi),MJe=it(),{Multiaddr:RO}=rt(),{toBuffer:u6e}=n7(),C3=n6e(),f6e=Pm(),l6e=z7(),{MULTICODEC_IDENTIFY:LJe,MULTICODEC_IDENTIFY_PUSH:qJe,IDENTIFY_PROTOCOL_VERSION:jJe,MULTICODEC_IDENTIFY_PROTOCOL_NAME:UJe,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME:FJe,MULTICODEC_IDENTIFY_PROTOCOL_VERSION:KJe,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION:VJe}=OC(),{codes:PO}=Ei(),Lh=class{static getProtocolStr(e){return{identifyProtocolStr:`/${e._config.protocolPrefix}/${UJe}/${KJe}`,identifyPushProtocolStr:`/${e._config.protocolPrefix}/${FJe}/${VJe}`}}constructor({libp2p:e}){this._libp2p=e,this.peerStore=e.peerStore,this.addressManager=e.addressManager,this.connectionManager=e.connectionManager,this.peerId=e.peerId,this.handleMessage=this.handleMessage.bind(this);let r=Lh.getProtocolStr(e);this.identifyProtocolStr=r.identifyProtocolStr,this.identifyPushProtocolStr=r.identifyPushProtocolStr,this._host={protocolVersion:`${e._config.protocolPrefix}/${jJe}`,...e._options.host},this.peerStore.metadataBook.set(this.peerId,"AgentVersion",S2(this._host.agentVersion)),this.peerStore.metadataBook.set(this.peerId,"ProtocolVersion",S2(this._host.protocolVersion)),this.connectionManager.on("peer:connect",i=>{this.identify(i).catch(Kc.error)}),this.peerStore.on("change:multiaddrs",({peerId:i})=>{i.toString()===this.peerId.toString()&&this.pushToPeerStore()}),this.peerStore.on("change:protocols",({peerId:i})=>{i.toString()===this.peerId.toString()&&this.pushToPeerStore()})}async push(e){let r=await this.peerStore.addressBook.getRawEnvelope(this.peerId),i=this._libp2p.multiaddrs.map(o=>o.bytes),n=this.peerStore.protoBook.get(this.peerId)||[],s=e.map(async o=>{try{let{stream:a}=await o.newStream(this.identifyPushProtocolStr);await fw([C3.Identify.encode({listenAddrs:i,signedPeerRecord:r,protocols:n}).finish()],uw.encode(),a,c6e)}catch(a){Kc.error("could not push identify update to peer",a)}});return Promise.all(s)}pushToPeerStore(){if(!this._libp2p.isStarted())return;let e=[],r;for(let i of this.peerStore.peers.values())i.protocols.includes(this.identifyPushProtocolStr)&&(r=this.connectionManager.get(i.id))&&e.push(r);this.push(e)}async identify(e){let{stream:r}=await e.newStream(this.identifyProtocolStr),[i]=await fw([],r,uw.decode(),a6e(1),u6e,o6e);if(!i)throw TO(new Error("No data could be retrieved"),PO.ERR_CONNECTION_ENDED);let n;try{n=C3.Identify.decode(i)}catch(h){throw TO(h,PO.ERR_INVALID_MESSAGE)}let{publicKey:s,listenAddrs:o,protocols:a,observedAddr:c,signedPeerRecord:u}=n,f=await MJe.createFromPubKey(s);if(e.remotePeer.toB58String()!==f.toB58String())throw TO(new Error("identified peer does not match the expected peer"),PO.ERR_INVALID_PEER);let d=Lh.getCleanMultiaddr(c);try{let h=await f6e.openAndCertify(u,l6e.DOMAIN);if(this.peerStore.addressBook.consumePeerRecord(h)){this.peerStore.protoBook.set(f,a),this.peerStore.metadataBook.set(f,"AgentVersion",S2(n.agentVersion)),this.peerStore.metadataBook.set(f,"ProtocolVersion",S2(n.protocolVersion));return}}catch(h){Kc("received invalid envelope, discard it and fallback to listenAddrs is available",h)}try{this.peerStore.addressBook.set(f,o.map(h=>new RO(h)))}catch(h){Kc.error("received invalid addrs",h)}this.peerStore.protoBook.set(f,a),this.peerStore.metadataBook.set(f,"AgentVersion",S2(n.agentVersion)),this.peerStore.metadataBook.set(f,"ProtocolVersion",S2(n.protocolVersion)),Kc("received observed address of %s",d)}handleMessage({connection:e,stream:r,protocol:i}){switch(i){case this.identifyProtocolStr:return this._handleIdentify({connection:e,stream:r});case this.identifyPushProtocolStr:return this._handlePush({connection:e,stream:r});default:Kc.error("cannot handle unknown protocol %s",i)}}async _handleIdentify({connection:e,stream:r}){let i=new Uint8Array(0);this.peerId.pubKey&&(i=this.peerId.pubKey.bytes);let n=await this.peerStore.addressBook.getRawEnvelope(this.peerId),s=this.peerStore.protoBook.get(this.peerId)||[],o=C3.Identify.encode({protocolVersion:this._host.protocolVersion,agentVersion:this._host.agentVersion,publicKey:i,listenAddrs:this._libp2p.multiaddrs.map(a=>a.bytes),signedPeerRecord:n,observedAddr:e.remoteAddr.bytes,protocols:s}).finish();try{await fw([o],uw.encode(),r,c6e)}catch(a){Kc.error("could not respond to identify request",a)}}async _handlePush({connection:e,stream:r}){let i;try{let[s]=await fw([],r,uw.decode(),a6e(1),u6e,o6e);i=C3.Identify.decode(s)}catch(s){return Kc.error("received invalid message",s)}let n=e.remotePeer;try{let s=await f6e.openAndCertify(i.signedPeerRecord,l6e.DOMAIN);if(this.peerStore.addressBook.consumePeerRecord(s)){this.peerStore.protoBook.set(n,i.protocols);return}}catch(s){Kc("received invalid envelope, discard it and fallback to listenAddrs is available",s)}try{this.peerStore.addressBook.set(n,i.listenAddrs.map(s=>new RO(s)))}catch(s){Kc.error("received invalid addrs",s)}this.peerStore.protoBook.set(n,i.protocols)}static getCleanMultiaddr(e){if(e&&e.length>0)try{return new RO(e)}catch(r){return null}return null}},zJe={IDENTIFY:LJe,IDENTIFY_PUSH:qJe};Lh.multicodecs=zJe;Lh.Messsage=C3;d6e.exports=Lh});var p6e=v(()=>{l()});var y6e=v(CO=>{l();"use strict";Object.defineProperty(CO,"__esModule",{value:!0}),CO.promisify=lw;var HJe="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function lw(t){if(typeof t!="function")throw new TypeError("Argument to promisify must be a function");var e=t[HJe],r=lw.Promise||Promise;if(typeof r!="function")throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var i=this,n=arguments.length,s=Array(n),o=0;o<n;o++)s[o]=arguments[o];return new r(function(a,c){s.push(function(u){if(u)return c(u);for(var f=arguments.length,d=Array(1<f?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];if(d.length===1||!e)return a(d[0]);var p={};d.forEach(function(y,m){var w=e[m];w&&(p[w]=y)}),a(p)}),t.apply(i,s)})}}lw.argumentNames="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__",lw.Promise=void 0});var m6e=v((hBt,g6e)=>{l();"use strict";var $Je=qw(),dw=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,O3=$Je(),GJe=dw&&!O3,WJe=O3&&!dw,YJe=O3&&dw,XJe=typeof Ra=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!O3,QJe=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,ZJe=typeof process!="undefined"&&typeof process.env!="undefined"&&!1;g6e.exports={isTest:ZJe,isElectron:O3,isElectronMain:WJe,isElectronRenderer:YJe,isNode:XJe,isBrowser:GJe,isWebWorker:QJe,isEnvWithDom:dw}});var v6e=v((pBt,b6e)=>{l();function Bo(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}b6e.exports=Bo;Bo.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Bo.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Bo.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0};Bo.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Bo.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};Bo.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};Bo.prototype.start=Bo.prototype.try;Bo.prototype.errors=function(){return this._errors};Bo.prototype.attempts=function(){return this._attempts};Bo.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,i=0;i<this._errors.length;i++){var n=this._errors[i],s=n.message,o=(t[s]||0)+1;t[s]=o,o>=r&&(e=n,r=o)}return e}});var w6e=v(qh=>{l();var JJe=v6e();qh.operation=function(t){var e=qh.timeouts(t);return new JJe(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};qh.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],n=0;n<e.retries;n++)i.push(this.createTimeout(n,e));return t&&t.forever&&!i.length&&i.push(this.createTimeout(n,e)),i.sort(function(s,o){return s-o}),i};qh.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,i=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return i=Math.min(i,e.maxTimeout),i};qh.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var i in t)typeof t[i]=="function"&&r.push(i)}for(var n=0;n<r.length;n++){var s=r[n],o=t[s];t[s]=function(c){var u=qh.operation(e),f=Array.prototype.slice.call(arguments,1),d=f.pop();f.push(function(h){u.retry(h)||(h&&(arguments[0]=u.mainError()),d.apply(this,arguments))}),u.attempt(function(){c.apply(t,f)})}.bind(t,o),t[s].options=e}}});var E6e=v((gBt,_6e)=>{l();_6e.exports=w6e()});var x6e=v((mBt,hw)=>{l();"use strict";var eet=E6e(),tet=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],OO=class extends Error{constructor(e){super();e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},ret=(t,e,r)=>{let i=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=i,t},iet=t=>tet.includes(t),S6e=(t,e)=>new Promise((r,i)=>{e={onFailedAttempt:()=>{},retries:10,...e};let n=eet.operation(e);n.attempt(async s=>{try{r(await t(s))}catch(o){if(!(o instanceof Error)){i(new TypeError(`Non-error was thrown: "${o}". You should only throw errors.`));return}if(o instanceof OO)n.stop(),i(o.originalError);else if(o instanceof TypeError&&!iet(o.message))n.stop(),i(o);else{ret(o,s,e);try{await e.onFailedAttempt(o)}catch(a){i(a);return}n.retry(o)||i(n.mainError())}}})});hw.exports=S6e;hw.exports.default=S6e;hw.exports.AbortError=OO});var I6e=v((bBt,A6e)=>{l();"use strict";function net(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}A6e.exports=net});var R6e=v((vBt,T6e)=>{l();"use strict";var set=I6e();function oet(t){let{address:e}=t.nodeAddress();return set(e)}T6e.exports=oet});var B6e=v((wBt,D6e)=>{l();"use strict";var aet=p6e(),P6e=Ee(),{promisify:kO}=y6e(),{Multiaddr:cet}=rt(),x2=Object.assign(P6e("libp2p:nat"),{error:P6e("libp2p:nat:err")}),{isBrowser:C6e}=m6e(),DO=x6e(),uet=kC(),O6e=CC(),fet=_r(),{codes:{ERR_INVALID_PARAMETERS:det}}=Ei(),het=R6e(),BO=7200;function pet(t=1024,e=65535){return Math.floor(Math.random()*(e-t+1)+t)}var k6e=class{constructor({peerId:e,addressManager:r,transportManager:i,...n}){if(this._peerId=e,this._addressManager=r,this._transportManager=i,this._enabled=n.enabled,this._externalIp=n.externalIp,this._options={description:n.description||`${O6e.name}@${O6e.version} ${this._peerId}`,ttl:n.ttl||BO,autoUpdate:n.keepAlive||!0,gateway:n.gateway,enablePMP:Boolean(n.pmp&&n.pmp.enabled)},this._options.ttl<BO)throw fet(new Error(`NatManager ttl should be at least ${BO} seconds`),det)}start(){C6e||!this._enabled||this._start().catch(e=>{x2.error(e)})}async _start(){let e=this._transportManager.getAddrs();for(let r of e){let{family:i,host:n,port:s,transport:o}=r.toOptions();if(!r.isThinWaistAddress()||o!=="tcp"||het(r)||i!==4)continue;let a=this._getClient(),c=this._externalIp||await a.externalIp();if(uet(c))throw new Error(`${c} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);let u=pet();x2(`opening uPnP connection from ${c}:${u} to ${n}:${s}`),await a.map({publicPort:u,privatePort:s,protocol:o.toUpperCase()}),this._addressManager.addObservedAddr(cet.fromNodeAddress({family:4,address:c,port:u},o))}}_getClient(){if(this._client)return this._client;let e=new aet(this._options),r=kO(e.map.bind(e)),i=kO(e.destroy.bind(e)),n=kO(e.externalIp.bind(e));return this._client={map:(...s)=>DO(()=>r(...s),{onFailedAttempt:x2.error,unref:!0}),destroy:(...s)=>DO(()=>i(...s),{onFailedAttempt:x2.error,unref:!0}),externalIp:(...s)=>DO(()=>n(...s),{onFailedAttempt:x2.error,unref:!0})},this._client}async stop(){if(!(C6e||!this._client))try{await this._client.destroy(),this._client=null}catch(e){x2.error(e)}}};D6e.exports=k6e});var U6e=v((_Bt,j6e)=>{l();"use strict";var N6e=Ee(),Ns=Object.assign(N6e("libp2p"),{error:N6e("libp2p:err")}),{EventEmitter:yet}=vr(),NO=_r(),get=it(),{Multiaddr:met}=rt(),bet=X1e(),vet=J1e(),MO=PC(),{validate:wet}=tye(),{codes:pw,messages:_et}=Ei(),Eet=nye(),xet=wye(),M6e=Yye(),Aet=cge(),Iet=Age(),L6e=lme(),Tet=xme(),Ret=UC(),Pet=n3e(),Cet=EO(),Oet=D3e(),ket=H3e(),Det=Y3e(),yw=t6e(),q6e=h6e(),Bet=B6e(),{updateSelfPeerRecord:Net}=qC(),k3=class extends yet{static async create(e){if(e.peerId)return new k3(e);let r=await get.create();return e.peerId=r,new k3(e)}constructor(e){super();if(this._options=wet(e),this.peerId=this._options.peerId,this.datastore=this._options.datastore,this.peerStore=this.datastore&&this._options.peerStore.persistence?new ket({peerId:this.peerId,datastore:this.datastore,...this._options.peerStore}):new Cet({peerId:this.peerId}),this.addresses=this._options.addresses,this.addressManager=new Eet(this.peerId,this._options.addresses),this.addressManager.on("change:addresses",()=>{Net(this).catch(i=>{Ns.error("Error updating self peer record",i)})}),this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=new Map,this.connectionManager=new xet(this,{autoDial:this._config.peerDiscovery.autoDial,...this._options.connectionManager}),this._options.metrics.enabled&&(this.metrics=new Tet({...this._options.metrics,connectionManager:this.connectionManager})),this._options.keychain&&this._options.keychain.datastore){Ns("creating keychain");let i=L6e.generateOptions();this.keychain=new L6e(this._options.keychain.datastore,{...i,...this._options.keychain}),Ns("keychain constructed")}if(this.upgrader=new Pet({localPeer:this.peerId,metrics:this.metrics,onConnection:i=>this.connectionManager.onConnect(i),onConnectionEnd:i=>this.connectionManager.onDisconnect(i)}),this.transportManager=new Ret({libp2p:this,upgrader:this.upgrader,faultTolerance:this._options.transportManager.faultTolerance}),this.natManager=new Bet({peerId:this.peerId,addressManager:this.addressManager,transportManager:this.transportManager,...this._options.config.nat}),this.registrar=new Det({peerStore:this.peerStore,connectionManager:this.connectionManager}),this.handle=this.handle.bind(this),this.registrar.handle=this.handle,!this._modules.connEncryption||!this._modules.connEncryption.length)throw NO(new Error(_et.CONN_ENCRYPTION_REQUIRED),pw.CONN_ENCRYPTION_REQUIRED);if(this._modules.connEncryption.forEach(i=>{this.upgrader.cryptos.set(i.protocol,i)}),this.dialer=new Iet({transportManager:this.transportManager,peerStore:this.peerStore,...this._options.dialer}),this._modules.transport.forEach(i=>{let n=i.prototype[Symbol.toStringTag],s=this._config.transport[n];this.transportManager.add(n,i,s)}),this._config.relay.enabled&&(this.transportManager.add(M6e.prototype[Symbol.toStringTag],M6e),this.relay=new Aet(this)),this._modules.streamMuxer&&(this._modules.streamMuxer.forEach(n=>{this.upgrader.muxers.set(n.multicodec,n)}),this.identifyService=new q6e({libp2p:this}),this.handle(Object.values(q6e.getProtocolStr(this)),this.identifyService.handleMessage)),this._modules.connProtector)this.upgrader.protector=this._modules.connProtector;else if(globalThis.process!==void 0&&globalThis.process.env&&globalThis.process.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._modules.dht){let i=this._modules.dht;this._dht=new i({libp2p:this,dialer:this.dialer,peerId:this.peerId,peerStore:this.peerStore,registrar:this.registrar,datastore:this.datastore,...this._config.dht})}if(this._modules.pubsub){let i=this._modules.pubsub;this.pubsub=Oet(i,this,this._config.pubsub)}this.peerRouting=new bet(this),this.contentRouting=new vet(this),yw.mount(this),this._onDiscoveryPeer=this._onDiscoveryPeer.bind(this)}emit(e,...r){return e==="error"&&!this._events.error?(Ns.error(r),!1):super.emit(e,...r)}async start(){Ns("libp2p is starting");try{await this._onStarting(),await this._onDidStart(),Ns("libp2p has started")}catch(e){throw this.emit("error",e),Ns.error("An error occurred starting libp2p",e),await this.stop(),e}}async stop(){Ns("libp2p is stopping");try{this._isStarted=!1,this.relay&&this.relay.stop(),this.peerRouting.stop();for(let e of this._discovery.values())e.removeListener("peer",this._onDiscoveryPeer);await Promise.all(Array.from(this._discovery.values(),e=>e.stop())),this._discovery=new Map,await this.peerStore.stop(),await this.connectionManager.stop(),await Promise.all([this.pubsub&&this.pubsub.stop(),this._dht&&this._dht.stop(),this.metrics&&this.metrics.stop()]),await this.natManager.stop(),await this.transportManager.close(),yw.unmount(this),this.dialer.destroy()}catch(e){e&&(Ns.error(e),this.emit("error",e))}Ns("libp2p has stopped")}async loadKeychain(){if(!!this.keychain)try{await this.keychain.findKeyByName("self")}catch(e){await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this._isStarted}get connections(){return this.connectionManager.connections}dial(e,r){return this._dial(e,r)}async dialProtocol(e,r,i){if(!r||!r.length)throw NO(new Error("no protocols were provided to open a stream"),pw.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this._dial(e,i)).newStream(r)}async _dial(e,r){let{id:i,multiaddrs:n}=MO(e);if(i.equals(this.peerId))throw NO(new Error("Cannot dial self"),pw.ERR_DIALED_SELF);let s=this.connectionManager.get(i);return s?n&&this.peerStore.addressBook.add(i,n):s=await this.dialer.connectToPeer(e,r),s}get multiaddrs(){let e=this.addressManager.getAnnounceAddrs().map(n=>n.toString());e.length||(e=this.transportManager.getAddrs().map(n=>n.toString())),e=e.concat(this.addressManager.getObservedAddrs().map(n=>n.toString()));let r=this._options.addresses.announceFilter,i=new Set(e);return r(Array.from(i).map(n=>new met(n)))}async hangUp(e){let{id:r}=MO(e),i=this.connectionManager.connections.get(r.toB58String());!i||await Promise.all(i.map(n=>n.close()))}ping(e){let{id:r,multiaddrs:i}=MO(e);return i?yw(this,i[0]):yw(this,r)}handle(e,r){e=Array.isArray(e)?e:[e],e.forEach(i=>{this.upgrader.protocols.set(i,r)}),this.peerStore.protoBook.add(this.peerId,e)}unhandle(e){e=Array.isArray(e)?e:[e],e.forEach(r=>{this.upgrader.protocols.delete(r)}),this.peerStore.protoBook.remove(this.peerId,e)}async _onStarting(){let e=this.addressManager.getListenAddrs();await this.transportManager.listen(e),this.natManager.start(),await this.peerStore.start(),this._config.pubsub.enabled&&this.pubsub&&this.pubsub.start(),this._config.dht.enabled&&(this._dht&&this._dht.start(),this._dht.on("peer",this._onDiscoveryPeer)),this.metrics&&this.metrics.start()}async _onDidStart(){this._isStarted=!0,this.peerStore.on("peer",e=>{this.emit("peer:discovery",e),this._maybeConnect(e)});for(let e of this.peerStore.peers.values())this.emit("peer:discovery",e.id);this.connectionManager.start(),await this._setupPeerDiscovery(),this.relay&&this.relay.start(),this.peerRouting.start()}_onDiscoveryPeer(e){if(e.id.toB58String()===this.peerId.toB58String()){Ns.error(new Error(pw.ERR_DISCOVERED_SELF));return}e.multiaddrs&&this.peerStore.addressBook.add(e.id,e.multiaddrs),e.protocols&&this.peerStore.protoBook.set(e.id,e.protocols)}async _maybeConnect(e){if(this._config.peerDiscovery.autoDial===!0&&!this.connectionManager.get(e)&&(this._options.connectionManager.minConnections||0)>this.connectionManager.size){Ns("connecting to discovered peer %s",e.toB58String());try{await this.dialer.connectToPeer(e)}catch(i){Ns.error(`could not connect to discovered peer ${e.toB58String()} with ${i}`)}}}async _setupPeerDiscovery(){let e=r=>{let i={enabled:!0};if(r.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[r.tag]&&(i={...i,...this._config.peerDiscovery[r.tag]}),i.enabled&&!this._discovery.has(r.tag)){let n;typeof r=="function"?n=new r(Object.assign({},i,{peerId:this.peerId,libp2p:this})):n=r,n.on("peer",this._onDiscoveryPeer),this._discovery.set(r.tag,n)}};for(let r of this._modules.peerDiscovery||[])e(r);for(let r of this.transportManager.getTransports())r.discovery&&e(r.discovery);await Promise.all(Array.from(this._discovery.values(),r=>r.start()))}};j6e.exports=k3});var e4e=v((qBt,J6e)=>{l();J6e.exports=Z6e;var Q6e=128,zet=127,Het=~zet,$et=Math.pow(2,31);function Z6e(t,e,r){e=e||[],r=r||0;for(var i=r;t>=$et;)e[r++]=t&255|Q6e,t/=128;for(;t&Het;)e[r++]=t&255|Q6e,t>>>=7;return e[r]=t|0,Z6e.bytes=r-i+1,e}});var i4e=v((jBt,r4e)=>{l();r4e.exports=LO;var Get=128,t4e=127;function LO(t,e){var r=0,e=e||0,i=0,n=e,s,o=t.length;do{if(n>=o)throw LO.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=i<28?(s&t4e)<<i:(s&t4e)*Math.pow(2,i),i+=7}while(s>=Get);return LO.bytes=n-e,r}});var s4e=v((UBt,n4e)=>{l();var Wet=Math.pow(2,7),Yet=Math.pow(2,14),Xet=Math.pow(2,21),Qet=Math.pow(2,28),Zet=Math.pow(2,35),Jet=Math.pow(2,42),ett=Math.pow(2,49),ttt=Math.pow(2,56),rtt=Math.pow(2,63);n4e.exports=function(t){return t<Wet?1:t<Yet?2:t<Xet?3:t<Qet?4:t<Zet?5:t<Jet?6:t<ett?7:t<ttt?8:t<rtt?9:10}});var a4e=v((FBt,o4e)=>{l();o4e.exports={encode:e4e(),decode:i4e(),encodingLength:s4e()}});var f4e=v((KBt,u4e)=>{l();"use strict";var c4e=a4e();u4e.exports=t=>{if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");let e=[];for(;t.length>0;){let r=c4e.decode(t);e.push(r),t=t.slice(c4e.decode.bytes)}return e}});var p4e=v((rNt,h4e)=>{l();"use strict";function d4e(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function stt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return d4e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),d4e(new n,r)}}h4e.exports=stt});var S4e=v((pNt,E4e)=>{l();E4e.exports=ott;function ott(t,e,r){var i=null,n=null,s=function(){i&&(clearTimeout(i),n=null,i=null)},o=function(){var c=n;s(),c&&c()},a=function(){if(!e)return t.apply(this,arguments);var c=this,u=arguments,f=r&&!i;if(s(),n=function(){t.apply(c,u)},i=setTimeout(function(){if(i=null,!f){var d=n;return n=null,d()}},e),f)return n()};return a.cancel=s,a.flush=o,a}});var U4e=v((uMt,j4e)=>{l();"use strict";function q4e(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function htt(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return q4e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;let n=function(){};return n.prototype=Object.create(Object.getPrototypeOf(t)),q4e(new n,r)}}j4e.exports=htt});var Rtt={};zt(Rtt,{CID:()=>Stt,PeerId:()=>Att,create:()=>wtt,crypto:()=>_tt,globSource:()=>Itt,isIPFS:()=>Ett,multiaddr:()=>xtt,urlSource:()=>Ttt});l();l();l();var Gk=N(Ml()),Tt=Gk.default;var nbe=N(z2()),sbe=N(Ee()),uk=N(Rt());l();var l6=N(iD());l();var Yc=N(Vi()),Zh=Yc.default.Reader,Jw=Yc.default.Writer,Qe=Yc.default.util,nn=Yc.default.roots["ipfs-unixfs"]||(Yc.default.roots["ipfs-unixfs"]={}),eB=nn.Data=(()=>{function t(e){if(this.blocksizes=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Type=0,t.prototype.Data=Qe.newBuffer([]),t.prototype.filesize=Qe.Long?Qe.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=Qe.emptyArray,t.prototype.hashType=Qe.Long?Qe.Long.fromBits(0,0,!0):0,t.prototype.fanout=Qe.Long?Qe.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(r,i){if(i||(i=Jw.create()),i.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&i.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&i.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var n=0;n<r.blocksizes.length;++n)i.uint32(32).uint64(r.blocksizes[n]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&i.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&i.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&i.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&nn.UnixTime.encode(r.mtime,i.uint32(66).fork()).ldelim(),i},t.decode=function(r,i){r instanceof Zh||(r=Zh.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new nn.Data;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;case 3:s.filesize=r.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(o&7)==2)for(var a=r.uint32()+r.pos;r.pos<a;)s.blocksizes.push(r.uint64());else s.blocksizes.push(r.uint64());break;case 5:s.hashType=r.uint64();break;case 6:s.fanout=r.uint64();break;case 7:s.mode=r.uint32();break;case 8:s.mtime=nn.UnixTime.decode(r,r.uint32());break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Qe.ProtocolError("missing required 'Type'",{instance:s});return s},t.fromObject=function(r){if(r instanceof nn.Data)return r;var i=new nn.Data;switch(r.Type){case"Raw":case 0:i.Type=0;break;case"Directory":case 1:i.Type=1;break;case"File":case 2:i.Type=2;break;case"Metadata":case 3:i.Type=3;break;case"Symlink":case 4:i.Type=4;break;case"HAMTShard":case 5:i.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?Qe.base64.decode(r.Data,i.Data=Qe.newBuffer(Qe.base64.length(r.Data)),0):r.Data.length&&(i.Data=r.Data)),r.filesize!=null&&(Qe.Long?(i.filesize=Qe.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?i.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?i.filesize=r.filesize:typeof r.filesize=="object"&&(i.filesize=new Qe.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");i.blocksizes=[];for(var n=0;n<r.blocksizes.length;++n)Qe.Long?(i.blocksizes[n]=Qe.Long.fromValue(r.blocksizes[n])).unsigned=!0:typeof r.blocksizes[n]=="string"?i.blocksizes[n]=parseInt(r.blocksizes[n],10):typeof r.blocksizes[n]=="number"?i.blocksizes[n]=r.blocksizes[n]:typeof r.blocksizes[n]=="object"&&(i.blocksizes[n]=new Qe.LongBits(r.blocksizes[n].low>>>0,r.blocksizes[n].high>>>0).toNumber(!0))}if(r.hashType!=null&&(Qe.Long?(i.hashType=Qe.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?i.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?i.hashType=r.hashType:typeof r.hashType=="object"&&(i.hashType=new Qe.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&(Qe.Long?(i.fanout=Qe.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?i.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?i.fanout=r.fanout:typeof r.fanout=="object"&&(i.fanout=new Qe.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(i.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");i.mtime=nn.UnixTime.fromObject(r.mtime)}return i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.blocksizes=[]),i.defaults){if(n.Type=i.enums===String?"Raw":0,i.bytes===String?n.Data="":(n.Data=[],i.bytes!==Array&&(n.Data=Qe.newBuffer(n.Data))),Qe.Long){var s=new Qe.Long(0,0,!0);n.filesize=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.filesize=i.longs===String?"0":0;if(Qe.Long){var s=new Qe.Long(0,0,!0);n.hashType=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.hashType=i.longs===String?"0":0;if(Qe.Long){var s=new Qe.Long(0,0,!0);n.fanout=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.fanout=i.longs===String?"0":0;n.mode=0,n.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=i.enums===String?nn.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=i.bytes===String?Qe.base64.encode(r.Data,0,r.Data.length):i.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?n.filesize=i.longs===String?String(r.filesize):r.filesize:n.filesize=i.longs===String?Qe.Long.prototype.toString.call(r.filesize):i.longs===Number?new Qe.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)typeof r.blocksizes[o]=="number"?n.blocksizes[o]=i.longs===String?String(r.blocksizes[o]):r.blocksizes[o]:n.blocksizes[o]=i.longs===String?Qe.Long.prototype.toString.call(r.blocksizes[o]):i.longs===Number?new Qe.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0):r.blocksizes[o]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?n.hashType=i.longs===String?String(r.hashType):r.hashType:n.hashType=i.longs===String?Qe.Long.prototype.toString.call(r.hashType):i.longs===Number?new Qe.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?n.fanout=i.longs===String?String(r.fanout):r.fanout:n.fanout=i.longs===String?Qe.Long.prototype.toString.call(r.fanout):i.longs===Number?new Qe.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(n.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(n.mtime=nn.UnixTime.toObject(r.mtime,i)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Yc.default.util.toJSONOptions)},t.DataType=function(){let e={},r=Object.create(e);return r[e[0]="Raw"]=0,r[e[1]="Directory"]=1,r[e[2]="File"]=2,r[e[3]="Metadata"]=3,r[e[4]="Symlink"]=4,r[e[5]="HAMTShard"]=5,r}(),t})(),art=nn.UnixTime=(()=>{function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.Seconds=Qe.Long?Qe.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(r,i){return i||(i=Jw.create()),i.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&i.uint32(21).fixed32(r.FractionalNanoseconds),i},t.decode=function(r,i){r instanceof Zh||(r=Zh.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new nn.UnixTime;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Seconds"))throw Qe.ProtocolError("missing required 'Seconds'",{instance:s});return s},t.fromObject=function(r){if(r instanceof nn.UnixTime)return r;var i=new nn.UnixTime;return r.Seconds!=null&&(Qe.Long?(i.Seconds=Qe.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?i.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?i.Seconds=r.Seconds:typeof r.Seconds=="object"&&(i.Seconds=new Qe.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(i.FractionalNanoseconds=r.FractionalNanoseconds>>>0),i},t.toObject=function(r,i){i||(i={});var n={};if(i.defaults){if(Qe.Long){var s=new Qe.Long(0,0,!1);n.Seconds=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.Seconds=i.longs===String?"0":0;n.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?n.Seconds=i.longs===String?String(r.Seconds):r.Seconds:n.Seconds=i.longs===String?Qe.Long.prototype.toString.call(r.Seconds):i.longs===Number?new Qe.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=r.FractionalNanoseconds),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Yc.default.util.toJSONOptions)},t})(),crt=nn.Metadata=(()=>{function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.MimeType="",t.encode=function(r,i){return i||(i=Jw.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&i.uint32(10).string(r.MimeType),i},t.decode=function(r,i){r instanceof Zh||(r=Zh.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new nn.Metadata;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.MimeType=r.string();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof nn.Metadata)return r;var i=new nn.Metadata;return r.MimeType!=null&&(i.MimeType=String(r.MimeType)),i},t.toObject=function(r,i){i||(i={});var n={};return i.defaults&&(n.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(n.MimeType=r.MimeType),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Yc.default.util.toJSONOptions)},t})();var Xc=eB,tB=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],z5e=["directory","hamt-sharded-directory"],rB=parseInt("0644",8),iB=parseInt("0755",8);function Qc(t){if(t!=null)return typeof t=="number"?t&4095:(t=t.toString(),t.substring(0,1)==="0"?parseInt(t,8)&4095:parseInt(t,10)&4095)}function rf(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),i=Math.floor(r/1e3);e={secs:i,nsecs:(r-i*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,l6.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}var ct=class{static unmarshal(e){let r=Xc.decode(e),i=Xc.toObject(r,{defaults:!1,arrays:!0,longs:Number,objects:!1}),n=new ct({type:tB[i.Type],data:i.Data,blockSizes:i.blocksizes,mode:i.mode,mtime:i.mtime?{secs:i.mtime.Seconds,nsecs:i.mtime.FractionalNanoseconds}:void 0});return n._originalMode=i.mode||0,n}constructor(e={type:"file"}){let{type:r,data:i,blockSizes:n,hashType:s,fanout:o,mtime:a,mode:c}=e;if(r&&!tB.includes(r))throw(0,l6.default)(new Error("Type: "+r+" is not valid"),"ERR_INVALID_TYPE");this.type=r||"file",this.data=i,this.hashType=s,this.fanout=o,this.blockSizes=n||[],this._originalMode=0,this.mode=Qc(c),a&&(this.mtime=rf(a),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?iB:rB;let r=Qc(e);r!==void 0&&(this._mode=r)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&z5e.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(r=>{e+=r}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=Xc.DataType.Raw;break;case"directory":e=Xc.DataType.Directory;break;case"file":e=Xc.DataType.File;break;case"metadata":e=Xc.DataType.Metadata;break;case"symlink":e=Xc.DataType.Symlink;break;case"hamt-sharded-directory":e=Xc.DataType.HAMTShard;break;default:throw(0,l6.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let r=this.data;(!this.data||!this.data.length)&&(r=void 0);let i;this.mode!=null&&(i=this._originalMode&4294963200|(Qc(this.mode)||0),i===rB&&!this.isDirectory()&&(i=void 0),i===iB&&this.isDirectory()&&(i=void 0));let n;if(this.mtime!=null){let o=rf(this.mtime);o&&(n={Seconds:o.secs,FractionalNanoseconds:o.nsecs},n.FractionalNanoseconds===0&&delete n.FractionalNanoseconds)}let s={Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:i,mtime:n};return Xc.encode(s).finish()}};var Mn={};zt(Mn,{code:()=>Pt,createLink:()=>IB,createNode:()=>AB,decode:()=>Dt,encode:()=>ot,name:()=>F8e,prepare:()=>zi,validate:()=>u9});l();Te();l();var O8e=new TextDecoder;function a9(t,e){let r=0;for(let i=0;;i+=7){if(i>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");let n=t[e++];if(r+=i<28?(n&127)<<i:(n&127)*2**i,n<128)break}return[r,e]}function m6(t,e){let r;[r,e]=a9(t,e);let i=e+r;if(r<0||i<0)throw new Error("protobuf: invalid length");if(i>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,i),i]}function mB(t,e){let r;return[r,e]=a9(t,e),[r&7,r>>3,e]}function k8e(t){let e={},r=t.length,i=0;for(;i<r;){let n,s;if([n,s,i]=mB(t,i),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,i]=m6(t,i)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,i]=m6(t,i),e.Name=O8e.decode(o)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(n!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[e.Tsize,i]=a9(t,i)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(i>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function bB(t){let e=t.length,r=0,i,n=!1,s;for(;r<e;){let a,c;if([a,c,r]=mB(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=m6(t,r),i&&(n=!0)}else if(c===2){if(n)throw new Error("protobuf: (PBNode) duplicate Links section");i||(i=[]);let u;[u,r]=m6(t,r),i.push(k8e(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");let o={};return s&&(o.Data=s),o.Links=i||[],o}l();var vB=new TextEncoder,wB=2**32,D8e=2**31;function B8e(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=Z2(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){let i=vB.encode(t.Name);r-=i.length,e.set(i,r),r=Z2(e,r,i.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=Z2(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function _B(t){let e=M8e(t),r=new Uint8Array(e),i=e;if(t.Data&&(i-=t.Data.length,r.set(t.Data,i),i=Z2(r,i,t.Data.length)-1,r[i]=10),t.Links)for(let n=t.Links.length-1;n>=0;n--){let s=B8e(t.Links[n],r.subarray(0,i));i-=s,i=Z2(r,i,s)-1,r[i]=18}return r}function N8e(t){let e=0;if(t.Hash){let r=t.Hash.length;e+=1+r+n0(r)}if(typeof t.Name=="string"){let r=vB.encode(t.Name).length;e+=1+r+n0(r)}return typeof t.Tsize=="number"&&(e+=1+n0(t.Tsize)),e}function M8e(t){let e=0;if(t.Data){let r=t.Data.length;e+=1+r+n0(r)}if(t.Links)for(let r of t.Links){let i=N8e(r);e+=1+i+n0(i)}return e}function Z2(t,e,r){e-=n0(r);let i=e;for(;r>=D8e;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,i}function n0(t){return t%2==0&&t++,Math.floor((L8e(t)+6)/7)}function L8e(t){let e=0;return t>=wB&&(t=Math.floor(t/wB),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+q8e[t]}var q8e=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];l();Te();var j8e=["Data","Links"],U8e=["Hash","Name","Tsize"],c9=new TextEncoder;function EB(t,e){if(t===e)return 0;let r=t.Name?c9.encode(t.Name):[],i=e.Name?c9.encode(e.Name):[],n=r.length,s=i.length;for(let o=0,a=Math.min(n,s);o<a;++o)if(r[o]!==i[o]){n=r[o],s=i[o];break}return n<s?-1:s<n?1:0}function SB(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function xB(t){if(typeof t.asCID=="object"){let r=J.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Hash){let r=J.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=J.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=J.decode(t.Hash)))}catch(i){throw new TypeError(`Invalid DAG-PB form: ${i.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function zi(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");let e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=c9.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(xB),e.Links.sort(EB);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function u9(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!SB(t,j8e))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){let r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!SB(r,U8e))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!=0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&EB(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function AB(t,e=[]){return zi({Data:t,Links:e})}function IB(t,e,r){return xB({Hash:r,Name:t,Tsize:e})}var F8e="dag-pb",Pt=112;function ot(t){u9(t);let e={};return t.Links&&(e.Links=t.Links.map(r=>{let i={};return r.Hash&&(i.Hash=r.Hash.bytes),r.Name!==void 0&&(i.Name=r.Name),r.Tsize!==void 0&&(i.Tsize=r.Tsize),i})),t.Data&&(e.Data=t.Data),_B(e)}function Dt(t){let e=bB(t),r={};return e.Data&&(r.Data=e.Data),e.Links&&(r.Links=e.Links.map(i=>{let n={};try{n.Hash=J.decode(i.Hash)}catch(s){}if(!n.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(n.Name=i.Name),i.Tsize!==void 0&&(n.Tsize=i.Tsize),n})),r}var sy={};zt(sy,{code:()=>Ul,decode:()=>Fl,encode:()=>v9,name:()=>pve});l();l();l();l();var K8e=["string","number","bigint","symbol"],V8e=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function TB(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(K8e.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(z8e(t))return"Buffer";let r=H8e(t);return r||"Object"}function z8e(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function H8e(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(V8e.includes(e))return e}l();var ge=class{constructor(e,r,i){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=i}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};ge.uint=new ge(0,"uint",!0);ge.negint=new ge(1,"negint",!0);ge.bytes=new ge(2,"bytes",!0);ge.string=new ge(3,"string",!0);ge.array=new ge(4,"array",!1);ge.map=new ge(5,"map",!1);ge.tag=new ge(6,"tag",!1);ge.float=new ge(7,"float",!0);ge.false=new ge(7,"false",!0);ge.true=new ge(7,"true",!0);ge.null=new ge(7,"null",!0);ge.undefined=new ge(7,"undefined",!0);ge.break=new ge(7,"break",!0);var Fe=class{constructor(e,r,i){this.type=e,this.value=r,this.encodedLength=i,this.encodedBytes=void 0}toString(){return`Token[${this.type}].${this.value}`}};l();l();var s0=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",$8e=new TextDecoder,G8e=new TextEncoder;function b6(t){return s0&&globalThis.Buffer.isBuffer(t)}function f9(t){return t instanceof Uint8Array?b6(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var RB=s0?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):BB(t,e,r):(t,e,r)=>r-e>64?$8e.decode(t.subarray(e,r)):BB(t,e,r),PB=s0?t=>t.length>64?globalThis.Buffer.from(t):DB(t):t=>t.length>64?G8e.encode(t):DB(t),Ma=t=>Uint8Array.from(t),v6=s0?(t,e,r)=>b6(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),CB=s0?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),f9(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),i=0;for(let n of t)i+n.length>r.length&&(n=n.subarray(0,r.length-i)),r.set(n,i),i+=n.length;return r},OB=s0?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function kB(t,e){if(b6(t)&&b6(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function DB(t,e=1/0){let r,i=t.length,n=null,s=[];for(let o=0;o<i;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function BB(t,e,r){let i=[];for(;e<r;){let n=t[e],s=null,o=n>239?4:n>223?3:n>191?2:1;if(e+o<=r){let a,c,u,f;switch(o){case 1:n<128&&(s=n);break;case 2:a=t[e+1],(a&192)==128&&(f=(n&31)<<6|a&63,f>127&&(s=f));break;case 3:a=t[e+1],c=t[e+2],(a&192)==128&&(c&192)==128&&(f=(n&15)<<12|(a&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:a=t[e+1],c=t[e+2],u=t[e+3],(a&192)==128&&(c&192)==128&&(u&192)==128&&(f=(n&15)<<18|(a&63)<<12|(c&63)<<6|u&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|s&1023),i.push(s),e+=o}return W8e(i)}var NB=4096;function W8e(t){let e=t.length;if(e<=NB)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=NB));return r}var Y8e=256,w6=class{constructor(e=Y8e){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.chunks=[],this.cursor=0,this.maxCursor=-1,this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let n=r.length-(this.maxCursor-this.cursor)-1;r.set(e,n)}else{if(r){let n=r.length-(this.maxCursor-this.cursor)-1;n<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,n),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=OB(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let i=this.chunks[0];e&&this.cursor>i.length/2?(r=this.cursor===i.length?i:i.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=v6(i,0,this.cursor)}else r=CB(this.chunks,this.cursor);return e&&this.reset(),r}};l();var at="CBOR decode error:",l9="CBOR encode error:",J2=[];J2[23]=1;J2[24]=2;J2[25]=3;J2[26]=5;J2[27]=9;function Zc(t,e,r){if(t.length-e<r)throw new Error(`${at} not enough data for type`)}l();l();var Hi=[24,256,65536,4294967296,BigInt("18446744073709551616")];function bs(t,e,r){Zc(t,e,1);let i=t[e];if(r.strict===!0&&i<Hi[0])throw new Error(`${at} integer encoded in more bytes than necessary (strict decode)`);return i}function vs(t,e,r){Zc(t,e,2);let i=t[e]<<8|t[e+1];if(r.strict===!0&&i<Hi[1])throw new Error(`${at} integer encoded in more bytes than necessary (strict decode)`);return i}function ws(t,e,r){Zc(t,e,4);let i=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&i<Hi[2])throw new Error(`${at} integer encoded in more bytes than necessary (strict decode)`);return i}function _s(t,e,r){Zc(t,e,8);let i=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],n=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(i)<<BigInt(32))+BigInt(n);if(r.strict===!0&&s<Hi[3])throw new Error(`${at} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${at} integers outside of the safe integer range are not supported`)}function MB(t,e,r,i){return new Fe(ge.uint,bs(t,e+1,i),2)}function LB(t,e,r,i){return new Fe(ge.uint,vs(t,e+1,i),3)}function qB(t,e,r,i){return new Fe(ge.uint,ws(t,e+1,i),5)}function jB(t,e,r,i){return new Fe(ge.uint,_s(t,e+1,i),9)}function Ks(t,e){return Zn(t,0,e.value)}function Zn(t,e,r){if(r<Hi[0]){let i=Number(r);t.push([e|i])}else if(r<Hi[1]){let i=Number(r);t.push([e|24,i])}else if(r<Hi[2]){let i=Number(r);t.push([e|25,i>>>8,i&255])}else if(r<Hi[3]){let i=Number(r);t.push([e|26,i>>>24&255,i>>>16&255,i>>>8&255,i&255])}else{let i=BigInt(r);if(i<Hi[4]){let n=[e|27,0,0,0,0,0,0,0],s=Number(i&BigInt(4294967295)),o=Number(i>>BigInt(32)&BigInt(4294967295));n[8]=s&255,s=s>>8,n[7]=s&255,s=s>>8,n[6]=s&255,s=s>>8,n[5]=s&255,n[4]=o&255,o=o>>8,n[3]=o&255,o=o>>8,n[2]=o&255,o=o>>8,n[1]=o&255,t.push(n)}else throw new Error(`${at} encountered BigInt larger than allowable range`)}}Ks.encodedSize=function(e){return Zn.encodedSize(e.value)};Zn.encodedSize=function(e){return e<Hi[0]?1:e<Hi[1]?2:e<Hi[2]?3:e<Hi[3]?5:9};Ks.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};l();function UB(t,e,r,i){return new Fe(ge.negint,-1-bs(t,e+1,i),2)}function FB(t,e,r,i){return new Fe(ge.negint,-1-vs(t,e+1,i),3)}function KB(t,e,r,i){return new Fe(ge.negint,-1-ws(t,e+1,i),5)}var d9=BigInt(-1),VB=BigInt(1);function zB(t,e,r,i){let n=_s(t,e+1,i);if(typeof n!="bigint"){let s=-1-n;if(s>=Number.MIN_SAFE_INTEGER)return new Fe(ge.negint,s,9)}if(i.allowBigInt!==!0)throw new Error(`${at} integers outside of the safe integer range are not supported`);return new Fe(ge.negint,d9-BigInt(n),9)}function _6(t,e){let r=e.value,i=typeof r=="bigint"?r*d9-VB:r*-1-1;Zn(t,e.type.majorEncoded,i)}_6.encodedSize=function(e){let r=e.value,i=typeof r=="bigint"?r*d9-VB:r*-1-1;return i<Hi[0]?1:i<Hi[1]?2:i<Hi[2]?3:i<Hi[3]?5:9};_6.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};l();function ey(t,e,r,i){Zc(t,e,r+i);let n=v6(t,e+r,e+r+i);return new Fe(ge.bytes,n,r+i)}function HB(t,e,r,i){return ey(t,e,1,r)}function $B(t,e,r,i){return ey(t,e,2,bs(t,e+1,i))}function GB(t,e,r,i){return ey(t,e,3,vs(t,e+1,i))}function WB(t,e,r,i){return ey(t,e,5,ws(t,e+1,i))}function YB(t,e,r,i){let n=_s(t,e+1,i);if(typeof n=="bigint")throw new Error(`${at} 64-bit integer bytes lengths not supported`);return ey(t,e,9,n)}function E6(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===ge.string?PB(t.value):t.value),t.encodedBytes}function o0(t,e){let r=E6(e);Zn(t,e.type.majorEncoded,r.length),t.push(r)}o0.encodedSize=function(e){let r=E6(e);return Zn.encodedSize(r.length)+r.length};o0.compareTokens=function(e,r){return X8e(E6(e),E6(r))};function X8e(t,e){return t.length<e.length?-1:t.length>e.length?1:kB(t,e)}l();function ty(t,e,r,i){let n=r+i;return Zc(t,e,n),new Fe(ge.string,RB(t,e+r,e+n),n)}function XB(t,e,r,i){return ty(t,e,1,r)}function QB(t,e,r,i){return ty(t,e,2,bs(t,e+1,i))}function ZB(t,e,r,i){return ty(t,e,3,vs(t,e+1,i))}function JB(t,e,r,i){return ty(t,e,5,ws(t,e+1,i))}function eN(t,e,r,i){let n=_s(t,e+1,i);if(typeof n=="bigint")throw new Error(`${at} 64-bit integer string lengths not supported`);return ty(t,e,9,n)}var tN=o0;l();function a0(t,e,r,i){return new Fe(ge.array,i,r)}function rN(t,e,r,i){return a0(t,e,1,r)}function iN(t,e,r,i){return a0(t,e,2,bs(t,e+1,i))}function nN(t,e,r,i){return a0(t,e,3,vs(t,e+1,i))}function sN(t,e,r,i){return a0(t,e,5,ws(t,e+1,i))}function oN(t,e,r,i){let n=_s(t,e+1,i);if(typeof n=="bigint")throw new Error(`${at} 64-bit integer array lengths not supported`);return a0(t,e,9,n)}function aN(t,e,r,i){if(i.allowIndefinite===!1)throw new Error(`${at} indefinite length items not allowed`);return a0(t,e,1,1/0)}function h9(t,e){Zn(t,ge.array.majorEncoded,e.value)}h9.compareTokens=Ks.compareTokens;l();function c0(t,e,r,i){return new Fe(ge.map,i,r)}function cN(t,e,r,i){return c0(t,e,1,r)}function uN(t,e,r,i){return c0(t,e,2,bs(t,e+1,i))}function fN(t,e,r,i){return c0(t,e,3,vs(t,e+1,i))}function lN(t,e,r,i){return c0(t,e,5,ws(t,e+1,i))}function dN(t,e,r,i){let n=_s(t,e+1,i);if(typeof n=="bigint")throw new Error(`${at} 64-bit integer map lengths not supported`);return c0(t,e,9,n)}function hN(t,e,r,i){if(i.allowIndefinite===!1)throw new Error(`${at} indefinite length items not allowed`);return c0(t,e,1,1/0)}function p9(t,e){Zn(t,ge.map.majorEncoded,e.value)}p9.compareTokens=Ks.compareTokens;l();function pN(t,e,r,i){return new Fe(ge.tag,r,1)}function yN(t,e,r,i){return new Fe(ge.tag,bs(t,e+1,i),2)}function gN(t,e,r,i){return new Fe(ge.tag,vs(t,e+1,i),3)}function mN(t,e,r,i){return new Fe(ge.tag,ws(t,e+1,i),5)}function bN(t,e,r,i){return new Fe(ge.tag,_s(t,e+1,i),9)}function y9(t,e){Zn(t,ge.tag.majorEncoded,e.value)}y9.compareTokens=Ks.compareTokens;l();var Q8e=20,Z8e=21,J8e=22,eve=23;function vN(t,e,r,i){if(i.allowUndefined===!1)throw new Error(`${at} undefined values are not supported`);return new Fe(ge.undefined,void 0,1)}function wN(t,e,r,i){if(i.allowIndefinite===!1)throw new Error(`${at} indefinite length items not allowed`);return new Fe(ge.break,void 0,1)}function g9(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${at} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${at} Infinity values are not supported`)}return new Fe(ge.float,t,e)}function _N(t,e,r,i){return g9(m9(t,e+1),3,i)}function EN(t,e,r,i){return g9(b9(t,e+1),5,i)}function SN(t,e,r,i){return g9(TN(t,e+1),9,i)}function S6(t,e,r){let i=e.value;if(i===!1)t.push([ge.float.majorEncoded|Q8e]);else if(i===!0)t.push([ge.float.majorEncoded|Z8e]);else if(i===null)t.push([ge.float.majorEncoded|J8e]);else if(i===void 0)t.push([ge.float.majorEncoded|eve]);else{let n,s=!1;(!r||r.float64!==!0)&&(AN(i),n=m9(Ko,1),i===n||Number.isNaN(i)?(Ko[0]=249,t.push(Ko.slice(0,3)),s=!0):(IN(i),n=b9(Ko,1),i===n&&(Ko[0]=250,t.push(Ko.slice(0,5)),s=!0))),s||(tve(i),n=TN(Ko,1),Ko[0]=251,t.push(Ko.slice(0,9)))}}S6.encodedSize=function(e,r){let i=e.value;if(i===!1||i===!0||i===null||i===void 0)return 1;let n;if(!r||r.float64!==!0){if(AN(i),n=m9(Ko,1),i===n||Number.isNaN(i))return 3;if(IN(i),n=b9(Ko,1),i===n)return 5}return 9};var xN=new ArrayBuffer(9),Vs=new DataView(xN,1),Ko=new Uint8Array(xN,0);function AN(t){if(t===1/0)Vs.setUint16(0,31744,!1);else if(t===-1/0)Vs.setUint16(0,64512,!1);else if(Number.isNaN(t))Vs.setUint16(0,32256,!1);else{Vs.setFloat32(0,t);let e=Vs.getUint32(0),r=(e&2139095040)>>23,i=e&8388607;if(r===255)Vs.setUint16(0,31744,!1);else if(r===0)Vs.setUint16(0,(t&2147483648)>>16|i>>13,!1);else{let n=r-127;n<-24?Vs.setUint16(0,0):n<-14?Vs.setUint16(0,(e&2147483648)>>16|1<<24+n,!1):Vs.setUint16(0,(e&2147483648)>>16|n+15<<10|i>>13,!1)}}}function m9(t,e){if(t.length-e<2)throw new Error(`${at} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let i=r>>10&31,n=r&1023,s;return i===0?s=n*2**-24:i!==31?s=(n+1024)*2**(i-25):s=n===0?1/0:NaN,r&32768?-s:s}function IN(t){Vs.setFloat32(0,t,!1)}function b9(t,e){if(t.length-e<4)throw new Error(`${at} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function tve(t){Vs.setFloat64(0,t,!1)}function TN(t,e){if(t.length-e<8)throw new Error(`${at} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}S6.compareTokens=Ks.compareTokens;function Ht(t,e,r){throw new Error(`${at} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function x6(t){return()=>{throw new Error(`${at} ${t}`)}}var De=[];for(let t=0;t<=23;t++)De[t]=Ht;De[24]=MB;De[25]=LB;De[26]=qB;De[27]=jB;De[28]=Ht;De[29]=Ht;De[30]=Ht;De[31]=Ht;for(let t=32;t<=55;t++)De[t]=Ht;De[56]=UB;De[57]=FB;De[58]=KB;De[59]=zB;De[60]=Ht;De[61]=Ht;De[62]=Ht;De[63]=Ht;for(let t=64;t<=87;t++)De[t]=HB;De[88]=$B;De[89]=GB;De[90]=WB;De[91]=YB;De[92]=Ht;De[93]=Ht;De[94]=Ht;De[95]=x6("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)De[t]=XB;De[120]=QB;De[121]=ZB;De[122]=JB;De[123]=eN;De[124]=Ht;De[125]=Ht;De[126]=Ht;De[127]=x6("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)De[t]=rN;De[152]=iN;De[153]=nN;De[154]=sN;De[155]=oN;De[156]=Ht;De[157]=Ht;De[158]=Ht;De[159]=aN;for(let t=160;t<=183;t++)De[t]=cN;De[184]=uN;De[185]=fN;De[186]=lN;De[187]=dN;De[188]=Ht;De[189]=Ht;De[190]=Ht;De[191]=hN;for(let t=192;t<=215;t++)De[t]=pN;De[216]=yN;De[217]=gN;De[218]=mN;De[219]=bN;De[220]=Ht;De[221]=Ht;De[222]=Ht;De[223]=Ht;for(let t=224;t<=243;t++)De[t]=x6("simple values are not supported");De[244]=Ht;De[245]=Ht;De[246]=Ht;De[247]=vN;De[248]=x6("simple values are not supported");De[249]=_N;De[250]=EN;De[251]=SN;De[252]=Ht;De[253]=Ht;De[254]=Ht;De[255]=wN;var Vo=[];for(let t=0;t<24;t++)Vo[t]=new Fe(ge.uint,t,1);for(let t=-1;t>=-24;t--)Vo[31-t]=new Fe(ge.negint,t,1);Vo[64]=new Fe(ge.bytes,new Uint8Array(0),1);Vo[96]=new Fe(ge.string,"",1);Vo[128]=new Fe(ge.array,0,1);Vo[160]=new Fe(ge.map,0,1);Vo[244]=new Fe(ge.false,!1,1);Vo[245]=new Fe(ge.true,!0,1);Vo[246]=new Fe(ge.null,null,1);function RN(t){switch(t.type){case ge.false:return Ma([244]);case ge.true:return Ma([245]);case ge.null:return Ma([246]);case ge.bytes:return t.value.length?void 0:Ma([64]);case ge.string:return t.value===""?Ma([96]):void 0;case ge.array:return t.value===0?Ma([128]):void 0;case ge.map:return t.value===0?Ma([160]):void 0;case ge.uint:return t.value<24?Ma([Number(t.value)]):void 0;case ge.negint:if(t.value>=-24)return Ma([31-Number(t.value)])}}var rve={float64:!1,mapSorter:nve,quickEncodeToken:RN},La=[];La[ge.uint.major]=Ks;La[ge.negint.major]=_6;La[ge.bytes.major]=o0;La[ge.string.major]=tN;La[ge.array.major]=h9;La[ge.map.major]=p9;La[ge.tag.major]=y9;La[ge.float.major]=S6;var PN=new w6,ry=class{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${l9} object contains circular references`);return new ry(r,e)}},cf={null:new Fe(ge.null,null),undefined:new Fe(ge.undefined,void 0),true:new Fe(ge.true,!0),false:new Fe(ge.false,!1),emptyArray:new Fe(ge.array,0),emptyMap:new Fe(ge.map,0)},uf={number(t,e,r,i){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Fe(ge.float,t):t>=0?new Fe(ge.uint,t):new Fe(ge.negint,t)},bigint(t,e,r,i){return t>=BigInt(0)?new Fe(ge.uint,t):new Fe(ge.negint,t)},Uint8Array(t,e,r,i){return new Fe(ge.bytes,t)},string(t,e,r,i){return new Fe(ge.string,t)},boolean(t,e,r,i){return t?cf.true:cf.false},null(t,e,r,i){return cf.null},undefined(t,e,r,i){return cf.undefined},ArrayBuffer(t,e,r,i){return new Fe(ge.bytes,new Uint8Array(t))},DataView(t,e,r,i){return new Fe(ge.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,i){if(!t.length)return r.addBreakTokens===!0?[cf.emptyArray,new Fe(ge.break)]:cf.emptyArray;i=ry.createCheck(i,t);let n=[],s=0;for(let o of t)n[s++]=A6(o,r,i);return r.addBreakTokens?[new Fe(ge.array,t.length),n,new Fe(ge.break)]:[new Fe(ge.array,t.length),n]},Object(t,e,r,i){let n=e!=="Object",s=n?t.keys():Object.keys(t),o=n?t.size:s.length;if(!o)return r.addBreakTokens===!0?[cf.emptyMap,new Fe(ge.break)]:cf.emptyMap;i=ry.createCheck(i,t);let a=[],c=0;for(let u of s)a[c++]=[A6(u,r,i),A6(n?t.get(u):t[u],r,i)];return ive(a,r),r.addBreakTokens?[new Fe(ge.map,o),a,new Fe(ge.break)]:[new Fe(ge.map,o),a]}};uf.Map=uf.Object;uf.Buffer=uf.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))uf[`${t}Array`]=uf.DataView;function A6(t,e={},r){let i=TB(t),n=e&&e.typeEncoders&&e.typeEncoders[i]||uf[i];if(typeof n=="function"){let o=n(t,i,e,r);if(o!=null)return o}let s=uf[i];if(!s)throw new Error(`${l9} unsupported type: ${i}`);return s(t,i,e,r)}function ive(t,e){e.mapSorter&&t.sort(e.mapSorter)}function nve(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],i=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==i.type)return r.type.compare(i.type);let n=r.type.major,s=La[n].compareTokens(r,i);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function CN(t,e,r,i){if(Array.isArray(e))for(let n of e)CN(t,n,r,i);else r[e.type.major](t,e,i)}function sve(t,e,r){let i=A6(t,r);if(!Array.isArray(i)&&r.quickEncodeToken){let n=r.quickEncodeToken(i);if(n)return n;let s=e[i.type.major];if(s.encodedSize){let o=s.encodedSize(i,r),a=new w6(o);if(s(a,i,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${i} was wrong`);return f9(a.chunks[0])}}return CN(PN,i,e,r),PN.toBytes(!0)}function zo(t,e){return e=Object.assign({},rve,e),sve(t,La,e)}l();var ove={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},ON=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],r=Vo[e];if(r===void 0){let i=De[e];if(!i)throw new Error(`${at} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let n=e&31;r=i(this.data,this.pos,n,this.options)}return this.pos+=r.encodedLength,r}},iy=Symbol.for("DONE"),I6=Symbol.for("BREAK");function ave(t,e,r){let i=[];for(let n=0;n<t.value;n++){let s=ny(e,r);if(s===I6){if(t.value===1/0)break;throw new Error(`${at} got unexpected break to lengthed array`)}if(s===iy)throw new Error(`${at} found array but not enough entries (got ${n}, expected ${t.value})`);i[n]=s}return i}function cve(t,e,r){let i=r.useMaps===!0,n=i?void 0:{},s=i?new Map:void 0;for(let o=0;o<t.value;o++){let a=ny(e,r);if(a===I6){if(t.value===1/0)break;throw new Error(`${at} got unexpected break to lengthed map`)}if(a===iy)throw new Error(`${at} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(i!==!0&&typeof a!="string")throw new Error(`${at} non-string keys not supported (got ${typeof a})`);let c=ny(e,r);if(c===iy)throw new Error(`${at} found map but not enough entries (got ${o} [no value], expected ${t.value})`);i?s.set(a,c):n[a]=c}return i?s:n}function ny(t,e){if(t.done())return iy;let r=t.next();if(r.type===ge.break)return I6;if(r.type.terminal)return r.value;if(r.type===ge.array)return ave(r,t,e);if(r.type===ge.map)return cve(r,t,e);if(r.type===ge.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let i=ny(t,e);return e.tags[r.value](i)}throw new Error(`${at} tag not supported (${r.value})`)}throw new Error("unsupported")}function Jn(t,e){if(!(t instanceof Uint8Array))throw new Error(`${at} data to decode must be a Uint8Array`);e=Object.assign({},ove,e);let r=e.tokenizer||new ON(t,e),i=ny(r,e);if(i===iy)throw new Error(`${at} did not find any content to decode`);if(i===I6)throw new Error(`${at} got unexpected break`);if(!r.done())throw new Error(`${at} too many terminals, data makes no sense`);return i}Te();var kN=42;function uve(t){if(t.asCID!==t)return null;let e=J.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new Fe(ge.tag,kN),new Fe(ge.bytes,r)]}function fve(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function lve(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var dve={float64:!0,typeEncoders:{Object:uve,undefined:fve,number:lve}};function hve(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return J.decode(t.subarray(1))}var DN={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};DN.tags[kN]=hve;var pve="dag-cbor",Ul=113,v9=t=>zo(t,dve),Fl=t=>Jn(t,DN);Jc();O6();l();function FN(){}l();var lf=class extends Error{constructor(e="not initialized"){super(e);this.name="NotInitializedError",this.code=lf.code}};lf.code="ERR_NOT_INITIALIZED";var KN=class extends Error{constructor(e="cannot initialize an initializing node"){super(e);this.name="AlreadyInitializingError",this.code=qa.code}};KN.code="ERR_ALREADY_INITIALIZING";var qa=class extends Error{constructor(e="cannot re-initialize an initialized node"){super(e);this.name="AlreadyInitializedError",this.code=qa.code}};qa.code="ERR_ALREADY_INITIALIZED";var df=class extends Error{constructor(e="not started"){super(e);this.name="NotStartedError",this.code=df.code}};df.code="ERR_NOT_STARTED";var f0=class extends Error{constructor(e="cannot start, already startin"){super(e);this.name="AlreadyStartingError",this.code=f0.code}};f0.code="ERR_ALREADY_STARTING";var l0=class extends Error{constructor(e="cannot start, already started"){super(e);this.name="AlreadyStartedError",this.code=l0.code}};l0.code="ERR_ALREADY_STARTED";var ja=class extends Error{constructor(e="not enabled"){super(e);this.name="NotEnabledError",this.code=ja.code}};ja.code="ERR_NOT_ENABLED";dt();l();l();l();var CL=N(_0());Te();Br();var W6=N(Rt());l();var AL=N($6()),IL=N(yf());l();var Q7e=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;vt.nanosecond=vt.ns=1/1e6;vt.\u00B5s=vt.\u03BCs=vt.us=vt.microsecond=1/1e3;vt.millisecond=vt.ms=vt[""]=1;vt.second=vt.sec=vt.s=vt.ms*1e3;vt.minute=vt.min=vt.m=vt.s*60;vt.hour=vt.hr=vt.h=vt.m*60;vt.day=vt.d=vt.h*24;vt.week=vt.wk=vt.w=vt.d*7;vt.month=vt.b=vt.d*(365.25/12);vt.year=vt.yr=vt.y=vt.d*365.25;function vt(t="",e="ms"){var r=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(Q7e,function(i,n,s){s=xL(s),s&&(r=(r||0)+parseFloat(n,10)*s)}),r&&r/(xL(e)||1)}function xL(t){return vt[t]||vt[t.toLowerCase().replace(/s$/,"")]}var gf=vt;l();var mf=class extends Error{constructor(e="request timed out"){super(e);this.name="TimeoutError",this.code=mf.code}};mf.code="ERR_TIMEOUT";function ce(t,e){return(...r)=>{let i=r[e??r.length-1];if(!i||!i.timeout)return t(...r);let n=typeof i.timeout=="string"?gf(i.timeout):i.timeout,s=new AL.default(n);i.signal=(0,IL.anySignal)([i.signal,s.signal]);let o=t(...r),a=new Promise((f,d)=>{s.signal.addEventListener("abort",()=>{d(new mf)})}),c=Date.now(),u=()=>{if(s.signal.aborted)throw new mf;if(Date.now()-c>n)throw s.abort(),new mf};return o[Symbol.asyncIterator]?async function*(){let f=o[Symbol.asyncIterator]();try{for(;;){let{value:d,done:h}=await Promise.race([f.next(),a]);if(h)break;u(),yield d}}catch(d){throw u(),d}finally{s.clear(),f.return&&f.return()}}():(async()=>{try{let f=await Promise.race([o,a]);return u(),f}catch(f){throw u(),f}finally{s.clear()}})()}}l();Te();var c_=N(Hl()),PL="/ipfs/";function tu(t){if(t instanceof Uint8Array)try{t=J.decode(t)}catch(n){throw(0,c_.default)(n,"ERR_INVALID_CID")}let e=J.asCID(t);if(e)return{cid:e,path:void 0};t=t.toString(),t.startsWith(PL)&&(t=t.substring(PL.length));let r=t.split("/"),i;try{e=J.parse(r.shift()||"")}catch(n){throw(0,c_.default)(n,"ERR_INVALID_CID")}return r.length&&(i=`/${r.join("/")}`),{cid:e,path:i}}var J7e="ERR_BAD_PATH",Y6="This command must be run in online mode. Try running 'ipfs daemon' first.",Ey=new qe("/local/filesroot"),Sy=262144;var OL=t=>{if(J.asCID(t))return`/ipfs/${t}`;let r=t.toString();try{return`/ipfs/${J.parse(r)}`}catch{}if(CL.default.path(r))return r;throw(0,W6.default)(new Error(`invalid path: ${t}`),J7e)},S0=t=>t instanceof Uint8Array?J.decode(t).toString():(t=t.toString(),t.indexOf("/ipfs/")===0&&(t=t.substring("/ipfs/".length)),t.charAt(t.length-1)==="/"&&(t=t.substring(0,t.length-1)),t),bf=async function(t,e,r,i={}){let{cid:n,path:s}=tu(r);s&&(i.path=s);let o=n,a=i.path||"";if(a.startsWith("/")&&(a=a.substring(1)),i.path)try{for await(let{value:c,remainderPath:u}of vf(n,i.path,e,t,{signal:i.signal})){if(!J.asCID(c))break;a=u,o=c}}catch(c){throw c.message.startsWith("Object has no property")&&(c.message=`no link named "${a.split("/")[0]}" under ${o}`,c.code="ERR_NO_LINK"),c}return{cid:o,remainderPath:a||""}},u_=t=>{if(t.type!=="file"&&t.type!=="directory"&&t.type!=="raw")throw new Error(`Unknown node type '${t.type}'`);let e={cid:t.cid,path:t.path,name:t.name,size:t.size,type:"file"};return t.type==="directory"&&(e.type="dir"),t.type==="file"&&(e.size=t.unixfs.fileSize()),(t.type==="file"||t.type==="directory")&&(e.mode=t.unixfs.mode,t.unixfs.mtime!==void 0&&(e.mtime=t.unixfs.mtime)),e},kL=ce(async(t,e)=>await t),vf=async function*(t,e,r,i,n){let s=async u=>{let f=await r.getCodec(u.code),d=await i.blocks.get(u,n);return f.decode(d)},o=e.split("/").filter(Boolean),a=await s(t),c=t;for(o.length||(yield{value:a,remainderPath:""});o.length;){let u=o.shift();if(!u)throw(0,W6.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(t.code===Pt&&Array.isArray(a.Links)){let f=a.Links.find(d=>d.Name===u);if(f){yield{value:f.Hash,remainderPath:o.join("/")},a=await s(f.Hash),c=f.Hash;continue}}if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:o.join("/")};else throw(0,W6.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");J.asCID(a)&&(c=a,a=await s(a))}};var qn=class{static create({start:e,stop:r}){return new qn(e,r)}static async start(e,r){let{state:i,activate:n}=e;switch(i.status){case"stopped":try{let s=n(r);e.state={status:"starting",ready:s};let o=await s;return e.state={status:"started",value:o},o}catch(s){throw e.state={status:"stopped"},s}case"starting":throw new f0;case"started":throw new l0;case"stopping":return await i.ready,await qn.start(e,r);default:return qn.panic(e)}}static async stop(e){let{state:r,deactivate:i}=e;switch(r.status){case"stopped":break;case"starting":{try{await r.ready}catch(n){}return await qn.stop(e)}case"stopping":return await r.ready;case"started":{i&&await i(r.value),e.state={status:"stopped"};break}default:qn.panic(r)}}static try({state:e}){switch(e.status){case"started":return e.value;default:return null}}static async use({state:e},r){switch(e.status){case"started":return e.value;case"starting":return await kL(e.ready,r);default:throw new df}}static panic({state:e}){let r=JSON.stringify({status:e.status});throw RangeError(`Service in invalid state ${r}, should never happen if you see this please report a bug`)}constructor(e,r){this.activate=e,this.deactivate=r,this.state={status:"stopped"}}async use(e){return await qn.use(this,e)}try(){return qn.try(this)}};function DL({network:t,preload:e,peerId:r,keychain:i,repo:n,ipns:s,mfsPreload:o,print:a,options:c}){return async()=>{let{libp2p:f}=await qn.start(t,{peerId:r,repo:n,print:a,options:c});await Promise.all([s.startOnline({keychain:i,libp2p:f,peerId:r,repo:n}),e.start(),o.start()])}}l();function BL({network:t,preload:e,ipns:r,repo:i,mfsPreload:n}){return async()=>{await Promise.all([e.stop(),r.stop(),n.stop(),qn.stop(t),i.close()])}}l();l();l();var ML=N(x0()),f_=class{constructor(e){this.lru=(0,ML.default)(e)}get(e){let r=this.lru.get(e);if(r){if(r.expire&&r.expire<Date.now()){this.lru.remove(e);return}return r.value}}set(e,r,i){this.lru.set(e,{value:r,expire:Date.now()+i})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}};var e4=N(Fa()),fq=N(Iy()),E_=new f_(1e3),Pwe=60*1e3,Cwe=e4.default.default?e4.default.default:e4.default,Owe=new Cwe({concurrency:4}),lq=t=>{if(t.Path)return t.Path;throw new Error(t.Message)};async function dq(t,e){return(async(i,n={})=>{let s=new URLSearchParams(n);s.set("arg",i);let o=s.toString();if(!n.nocache&&E_.has(o)){let c=E_.get(o);return lq(c)}let a=await Owe.add(async()=>{let c=await fq.default.get("https://ipfs.io/api/v0/dns",{searchParams:s}),u=new URL(c.url).search.slice(1),f=await c.json();return E_.set(u,f,Pwe),f});return lq(a)})(t,e)}function kwe(t){return t.endsWith(".eth")&&(t=t.replace(/.eth$/,".eth.link")),t}function hq(){return ce(async(e,r={recursive:!0})=>{if(typeof e!="string")throw new Error("Invalid arguments, domain must be a string");return e=kwe(e),dq(e,r)})}l();function pq({network:t}){return()=>{let e=t.try();return e!=null&&Boolean(e.libp2p.isStarted())}}l();var qE=N(_0());Te();var HK=N(it());function $K({repo:t,codecs:e,bases:r,name:i}){async function n(s,o={}){if(!qE.default.path(s))throw new Error("invalid argument "+s);if(qE.default.ipnsPath(s))for await(let w of i.resolve(s,o))s=w;let[,a,c,...u]=s.split("/"),f=o.cidBase?await r.getBase(o.cidBase):void 0,d=BAe(c);if(u.length===0){let w=f?f.encoder.encode(d):c;return`/${a}/${w}`}let h=J.decode(d);s=u.join("/");let p=vf(h,s,e,t,o),y=h,m=s;for await(let w of p)J.asCID(w.value)&&(y=w.value,m=w.remainderPath);return`/ipfs/${y.toString(f&&f.encoder)}${m?"/"+m:""}`}return ce(n)}function BAe(t){try{return HK.default.parse(t).toBytes()}catch{return J.parse(t).bytes}}l();l();var WK=N(ss());Te();function YK({addAll:t}){return(e,r={})=>{let i,n=J.asCID(e);return n?i=t([{cid:n,...r}],r):i=t([{path:e.toString(),...r}],r),(0,WK.default)(i)}}l();l();var Z0=N(Hl());Te();async function*cc(t){if(t==null)throw(0,Z0.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");let e=J.asCID(t);if(e){yield ra({cid:e});return}if(t instanceof String||typeof t=="string"){yield ra({path:t});return}if(t.cid!=null||t.path!=null)return yield ra(t);if(Symbol.iterator in t){let r=t[Symbol.iterator](),i=r.next();if(i.done)return r;if(J.asCID(i.value)||i.value instanceof String||typeof i.value=="string"){yield ra({cid:i.value});for(let n of r)yield ra({cid:n});return}if(i.value.cid!=null||i.value.path!=null){yield ra(i.value);for(let n of r)yield ra(n);return}throw(0,Z0.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in t){let r=t[Symbol.asyncIterator](),i=await r.next();if(i.done)return r;if(J.asCID(i.value)||i.value instanceof String||typeof i.value=="string"){yield ra({cid:i.value});for await(let n of r)yield ra({cid:n});return}if(i.value.cid!=null||i.value.path!=null){yield ra(i.value);for await(let n of r)yield ra(n);return}throw(0,Z0.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}throw(0,Z0.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}function ra(t){let e=t.cid||`${t.path}`;if(!e)throw(0,Z0.default)(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}l();var Ct={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function XK({repo:t,codecs:e}){async function*r(i,n={}){let s=async function*(){for await(let{path:c,recursive:u,metadata:f}of cc(i)){let{cid:d}=await bf(t,e,c),{reason:h}=await t.pins.isPinnedWithType(d,[Ct.recursive,Ct.direct]);if(h==="recursive"&&!u)throw new Error(`${d} already pinned recursively`);u?await t.pins.pinRecursively(d,{metadata:f}):await t.pins.pinDirectly(d,{metadata:f}),yield d}};if(!Boolean(n.lock)){yield*s();return}let a=await t.gcLock.readLock();try{yield*s()}finally{a()}}return ce(r)}l();var jE=N(Rt());function Qy(t,e,r){let i={type:t,cid:e};return r&&(i.metadata=r),i}function QK({repo:t,codecs:e}){async function*r(i={}){let n=Ct.all;if(i.type&&(n=i.type,!Object.keys(Ct).includes(n)))throw(0,jE.default)(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(i.paths){let s=!1;for await(let{path:o}of cc(i.paths)){let{cid:a}=await bf(t,e,o),{reason:c,pinned:u,parent:f,metadata:d}=await t.pins.isPinnedWithType(a,n);if(!u)throw(0,jE.default)(new Error(`path '${o}' is not pinned`),"ERR_NOT_PINNED");switch(c){case Ct.direct:case Ct.recursive:s=!0,yield Qy(c,a,d);break;default:s=!0,yield Qy(`${Ct.indirect} through ${f}`,a,d)}}if(!s)throw new Error("No match found");return}if(n===Ct.recursive||n===Ct.all)for await(let{cid:s,metadata:o}of t.pins.recursiveKeys())yield Qy(Ct.recursive,s,o);if(n===Ct.indirect||n===Ct.all)for await(let s of t.pins.indirectKeys(i))yield Qy(Ct.indirect,s);if(n===Ct.direct||n===Ct.all)for await(let{cid:s,metadata:o}of t.pins.directKeys())yield Qy(Ct.direct,s,o)}return ce(r)}l();var ZK=N(ss());function JK({rmAll:t}){async function e(r,i={}){let n=await(0,ZK.default)(t([{path:r,...i}],i));if(!n)throw new Error("CID expected");return n}return e}l();function eV({repo:t,codecs:e}){async function*r(i,n={}){let s=await t.gcLock.readLock();try{for await(let{path:o,recursive:a}of cc(i)){let{cid:c}=await bf(t,e,o),{pinned:u,reason:f}=await t.pins.isPinnedWithType(c,Ct.all);if(!u)throw new Error(`${c} is not pinned`);switch(f){case Ct.recursive:if(!a)throw new Error(`${c} is pinned recursively`);await t.pins.unpin(c),yield c;break;case Ct.direct:await t.pins.unpin(c),yield c;break;default:throw new Error(`${c} is pinned indirectly under ${f}`)}}}finally{s()}}return ce(r)}var UE=class{constructor({codecs:e,repo:r}){let i=XK({codecs:e,repo:r});this.addAll=i,this.add=YK({addAll:i});let n=eV({codecs:e,repo:r});this.rmAll=n,this.rm=JK({rmAll:n}),this.ls=QK({codecs:e,repo:r}),this.remote={add:(s,o={})=>Promise.reject(new Error("Not implemented")),ls:async function*(s,o={}){return Promise.reject(new Error("Not implemented"))},rm:(s,o={})=>Promise.reject(new Error("Not implemented")),rmAll:(s,o={})=>Promise.reject(new Error("Not implemented")),service:{add:(s,o)=>Promise.reject(new Error("Not implemented")),rm:(s,o={})=>Promise.reject(new Error("Not implemented")),ls:(s={})=>Promise.reject(new Error("Not implemented"))}}}};l();l();var ZV=N(it()),JV=N(Rt()),sS=N(Ee());l();var rg=N(it());Br();ia();var Tn=N(Rt()),ZE=N(Ee());tt();wi();l();var jV=N(nV());Br();var nb=N(uc()),sb=N(it());Nn();Jc();var ki=N(vV());gn();dt();tt();bn();wi();var $E=N(CV()),GE=N(Ee());l();var ld=N(Vi()),OV=ld.default.Reader,YAe=ld.default.Writer,Ye=ld.default.util,Zy=ld.default.roots["ipfs-ipns"]||(ld.default.roots["ipfs-ipns"]={}),np=Zy.IpnsEntry=(()=>{function t(e){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.value=Ye.newBuffer([]),t.prototype.signature=Ye.newBuffer([]),t.prototype.validityType=0,t.prototype.validity=Ye.newBuffer([]),t.prototype.sequence=Ye.Long?Ye.Long.fromBits(0,0,!0):0,t.prototype.ttl=Ye.Long?Ye.Long.fromBits(0,0,!0):0,t.prototype.pubKey=Ye.newBuffer([]),t.prototype.signatureV2=Ye.newBuffer([]),t.prototype.data=Ye.newBuffer([]),t.encode=function(r,i){return i||(i=YAe.create()),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&i.uint32(10).bytes(r.value),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&i.uint32(18).bytes(r.signature),r.validityType!=null&&Object.hasOwnProperty.call(r,"validityType")&&i.uint32(24).int32(r.validityType),r.validity!=null&&Object.hasOwnProperty.call(r,"validity")&&i.uint32(34).bytes(r.validity),r.sequence!=null&&Object.hasOwnProperty.call(r,"sequence")&&i.uint32(40).uint64(r.sequence),r.ttl!=null&&Object.hasOwnProperty.call(r,"ttl")&&i.uint32(48).uint64(r.ttl),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&i.uint32(58).bytes(r.pubKey),r.signatureV2!=null&&Object.hasOwnProperty.call(r,"signatureV2")&&i.uint32(66).bytes(r.signatureV2),r.data!=null&&Object.hasOwnProperty.call(r,"data")&&i.uint32(74).bytes(r.data),i},t.decode=function(r,i){r instanceof OV||(r=OV.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new Zy.IpnsEntry;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.value=r.bytes();break;case 2:s.signature=r.bytes();break;case 3:s.validityType=r.int32();break;case 4:s.validity=r.bytes();break;case 5:s.sequence=r.uint64();break;case 6:s.ttl=r.uint64();break;case 7:s.pubKey=r.bytes();break;case 8:s.signatureV2=r.bytes();break;case 9:s.data=r.bytes();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof Zy.IpnsEntry)return r;var i=new Zy.IpnsEntry;switch(r.value!=null&&(typeof r.value=="string"?Ye.base64.decode(r.value,i.value=Ye.newBuffer(Ye.base64.length(r.value)),0):r.value.length&&(i.value=r.value)),r.signature!=null&&(typeof r.signature=="string"?Ye.base64.decode(r.signature,i.signature=Ye.newBuffer(Ye.base64.length(r.signature)),0):r.signature.length&&(i.signature=r.signature)),r.validityType){case"EOL":case 0:i.validityType=0;break}return r.validity!=null&&(typeof r.validity=="string"?Ye.base64.decode(r.validity,i.validity=Ye.newBuffer(Ye.base64.length(r.validity)),0):r.validity.length&&(i.validity=r.validity)),r.sequence!=null&&(Ye.Long?(i.sequence=Ye.Long.fromValue(r.sequence)).unsigned=!0:typeof r.sequence=="string"?i.sequence=parseInt(r.sequence,10):typeof r.sequence=="number"?i.sequence=r.sequence:typeof r.sequence=="object"&&(i.sequence=new Ye.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0))),r.ttl!=null&&(Ye.Long?(i.ttl=Ye.Long.fromValue(r.ttl)).unsigned=!0:typeof r.ttl=="string"?i.ttl=parseInt(r.ttl,10):typeof r.ttl=="number"?i.ttl=r.ttl:typeof r.ttl=="object"&&(i.ttl=new Ye.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0))),r.pubKey!=null&&(typeof r.pubKey=="string"?Ye.base64.decode(r.pubKey,i.pubKey=Ye.newBuffer(Ye.base64.length(r.pubKey)),0):r.pubKey.length&&(i.pubKey=r.pubKey)),r.signatureV2!=null&&(typeof r.signatureV2=="string"?Ye.base64.decode(r.signatureV2,i.signatureV2=Ye.newBuffer(Ye.base64.length(r.signatureV2)),0):r.signatureV2.length&&(i.signatureV2=r.signatureV2)),r.data!=null&&(typeof r.data=="string"?Ye.base64.decode(r.data,i.data=Ye.newBuffer(Ye.base64.length(r.data)),0):r.data.length&&(i.data=r.data)),i},t.toObject=function(r,i){i||(i={});var n={};if(i.defaults){if(i.bytes===String?n.value="":(n.value=[],i.bytes!==Array&&(n.value=Ye.newBuffer(n.value))),i.bytes===String?n.signature="":(n.signature=[],i.bytes!==Array&&(n.signature=Ye.newBuffer(n.signature))),n.validityType=i.enums===String?"EOL":0,i.bytes===String?n.validity="":(n.validity=[],i.bytes!==Array&&(n.validity=Ye.newBuffer(n.validity))),Ye.Long){var s=new Ye.Long(0,0,!0);n.sequence=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.sequence=i.longs===String?"0":0;if(Ye.Long){var s=new Ye.Long(0,0,!0);n.ttl=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else n.ttl=i.longs===String?"0":0;i.bytes===String?n.pubKey="":(n.pubKey=[],i.bytes!==Array&&(n.pubKey=Ye.newBuffer(n.pubKey))),i.bytes===String?n.signatureV2="":(n.signatureV2=[],i.bytes!==Array&&(n.signatureV2=Ye.newBuffer(n.signatureV2))),i.bytes===String?n.data="":(n.data=[],i.bytes!==Array&&(n.data=Ye.newBuffer(n.data)))}return r.value!=null&&r.hasOwnProperty("value")&&(n.value=i.bytes===String?Ye.base64.encode(r.value,0,r.value.length):i.bytes===Array?Array.prototype.slice.call(r.value):r.value),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=i.bytes===String?Ye.base64.encode(r.signature,0,r.signature.length):i.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),r.validityType!=null&&r.hasOwnProperty("validityType")&&(n.validityType=i.enums===String?Zy.IpnsEntry.ValidityType[r.validityType]:r.validityType),r.validity!=null&&r.hasOwnProperty("validity")&&(n.validity=i.bytes===String?Ye.base64.encode(r.validity,0,r.validity.length):i.bytes===Array?Array.prototype.slice.call(r.validity):r.validity),r.sequence!=null&&r.hasOwnProperty("sequence")&&(typeof r.sequence=="number"?n.sequence=i.longs===String?String(r.sequence):r.sequence:n.sequence=i.longs===String?Ye.Long.prototype.toString.call(r.sequence):i.longs===Number?new Ye.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0):r.sequence),r.ttl!=null&&r.hasOwnProperty("ttl")&&(typeof r.ttl=="number"?n.ttl=i.longs===String?String(r.ttl):r.ttl:n.ttl=i.longs===String?Ye.Long.prototype.toString.call(r.ttl):i.longs===Number?new Ye.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0):r.ttl),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=i.bytes===String?Ye.base64.encode(r.pubKey,0,r.pubKey.length):i.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.signatureV2!=null&&r.hasOwnProperty("signatureV2")&&(n.signatureV2=i.bytes===String?Ye.base64.encode(r.signatureV2,0,r.signatureV2.length):i.bytes===Array?Array.prototype.slice.call(r.signatureV2):r.signatureV2),r.data!=null&&r.hasOwnProperty("data")&&(n.data=i.bytes===String?Ye.base64.encode(r.data,0,r.data.length):i.bytes===Array?Array.prototype.slice.call(r.data):r.data),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,ld.default.util.toJSONOptions)},t.ValidityType=function(){let e={},r=Object.create(e);return r[e[0]="EOL"]=0,r}(),t})();l();function rb(t){let e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(t).trim().match(e);if(!r)throw new Error("Invalid format");let i=parseInt(r[1],10),n=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(i,n,s,o,a,c,u))}l();var kV="ERR_IPNS_EXPIRED_RECORD",HE="ERR_UNRECOGNIZED_VALIDITY",DV="ERR_SIGNATURE_CREATION",dd="ERR_SIGNATURE_VERIFICATION",BV="ERR_UNRECOGNIZED_FORMAT",NV="ERR_PEER_ID_FROM_PUBLIC_KEY",MV="ERR_PUBLIC_KEY_FROM_ID",ib="ERR_UNDEFINED_PARAMETER",LV="ERR_INVALID_RECORD_DATA",qV="ERR_INVALID_EMBEDDED_KEY";var As=Object.assign((0,GE.default)("jsipns"),{error:(0,GE.default)("jsipns:error")}),XAe=Es.code,QAe=Xe("/ipns/"),Jy="/ipns/",ob=Jy.length,UV=(t,e,r,i)=>{let n=new jV.default(Date.now()+Number(i)),s=np.ValidityType.EOL,[o,a]=i.toString().split("."),c=BigInt(o)*BigInt(1e5)+BigInt(a||0);return ZAe(t,e,r,s,n,c)};var ZAe=async(t,e,r,i,n,s)=>{r=BigInt(r);let o=Xe(n.toString()),a=await tIe(t,e,i,o),c=JAe(e,o,i,r,s),u=VV(c),f=await t.sign(u),d={value:e,signature:a,validityType:i,validity:o,sequence:r,ttl:s,signatureV2:f,data:c};return As(`ipns entry for ${e} created`),d},JAe=(t,e,r,i,n)=>zo({Value:t,Validity:e,ValidityType:r,Sequence:i,TTL:n}),WE=async(t,e)=>{let{value:r,validityType:i,validity:n}=e,s,o;e.signatureV2&&e.data?(o=e.signatureV2,s=VV(e.data),eIe(e)):(o=e.signature,s=KV(r,i,n));let a;try{a=await t.verify(s,o)}catch(c){a=!1}if(!a)throw As.error("record signature verification failed"),(0,ki.default)(new Error("record signature verification failed"),dd);if(i===np.ValidityType.EOL){let c;try{c=rb($e(n))}catch(u){throw As.error("unrecognized validity format (not an rfc3339 format)"),(0,ki.default)(new Error("unrecognized validity format (not an rfc3339 format)"),BV)}if(c.getTime()<Date.now())throw As.error("record has expired"),(0,ki.default)(new Error("record has expired"),kV)}else if(i)throw As.error("unrecognized validity type"),(0,ki.default)(new Error("unrecognized validity type"),HE);As(`ipns entry for ${r} is valid`)},eIe=t=>{if(!t.data)throw(0,ki.default)(new Error("Record data is missing"),LV);let e=Jn(t.data);if(Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),!Ua(e.Value,t.value))throw(0,ki.default)(new Error('Field "value" did not match between protobuf and CBOR'),dd);if(!Ua(e.Validity,t.validity))throw(0,ki.default)(new Error('Field "validity" did not match between protobuf and CBOR'),dd);if(e.ValidityType!==t.validityType)throw(0,ki.default)(new Error('Field "validityType" did not match between protobuf and CBOR'),dd);if(e.Sequence!==t.sequence)throw(0,ki.default)(new Error('Field "sequence" did not match between protobuf and CBOR'),dd);if(e.TTL!==t.ttl)throw(0,ki.default)(new Error('Field "ttl" did not match between protobuf and CBOR'),dd)},FV=async(t,e)=>{if(!t||!t.bytes||!e){let n=new Error("one or more of the provided parameters are not defined");throw As.error(n),(0,ki.default)(n,ib)}let r;try{r=await sb.default.createFromPubKey(t.bytes)}catch(n){throw(0,ki.default)(n,NV)}let i;try{i=iIe(r)}catch(n){throw As.error(n),(0,ki.default)(n,MV)}if(i)return null;try{e.pubKey=nb.default.keys.marshalPublicKey(t)}catch(n){throw As.error(n),n}return e},YE=async(t,e)=>{if(!e||!t){let i=new Error("one or more of the provided parameters are not defined");throw As.error(i),(0,ki.default)(i,ib)}let r;if(e.pubKey){try{r=nb.default.keys.unmarshalPublicKey(e.pubKey)}catch(n){throw As.error(n),n}if(!(await sb.default.createFromPubKey(e.pubKey)).equals(t))throw(0,ki.default)(new Error("Embedded public key did not match PeerID"),qV)}else t.pubKey&&(r=t.pubKey);if(r)return r;throw(0,ki.default)(new Error("no public key is available"),ib)},XE=t=>s9.encode(t).slice(1),eg=t=>new qe(`/ipns/${XE(t)}`),hd=t=>{let e=Xe("/pk/"),r=Xe("/ipns/");return{routingPubKey:new qe(mn([e,t]),!1),pkKey:new qe(XE(mn([e,t]))),routingKey:new qe(mn([r,t]),!1),ipnsKey:new qe(XE(mn([r,t])))}},tIe=(t,e,r,i)=>{try{let n=KV(e,r,i);return t.sign(n)}catch(n){throw As.error("record signature creation failed"),(0,ki.default)(new Error("record signature creation failed: "+n.message),DV)}},rIe=t=>{if(t.toString()==="0")return"EOL";let e=new Error(`unrecognized validity type ${t.toString()}`);throw As.error(e),(0,ki.default)(e,HE)},KV=(t,e,r)=>{let i=Xe(rIe(e));return mn([t,r,i])},VV=t=>{let e=Xe("ipns-signature:");return mn([e,t])},iIe=t=>{let e=Pi(t.id);return e.code!==XAe?null:nb.default.keys.unmarshalPublicKey(e.digest)},QE=t=>np.encode({...t,sequence:$E.default.fromString(t.sequence.toString()),ttl:t.ttl==null?void 0:$E.default.fromString(t.ttl.toString())}).finish(),pu=t=>{let e=np.decode(t),r=np.toObject(e,{defaults:!1,arrays:!0,objects:!1});return{value:r.value,signature:r.signature,validityType:r.validityType,validity:r.validity,sequence:Object.hasOwnProperty.call(r,"sequence")?BigInt(`${r.sequence}`):0,pubKey:r.pubKey,ttl:Object.hasOwnProperty.call(r,"ttl")?BigInt(`${r.ttl}`):void 0,signatureV2:r.signatureV2,data:r.data}},tg={validate:async(t,e)=>{let r=pu(t),i=e.slice(QAe.length),n=sb.default.createFromBytes(i),s=await YE(n,r);await WE(s,r)},select:(t,e)=>{let r=pu(t),i=pu(e);if(r.signatureV2&&!i.signatureV2)return 0;if(i.signatureV2&&!r.signatureV2)return 1;if(r.sequence>i.sequence)return 0;if(r.sequence<i.sequence)return 1;let n=rb($e(r.validity));return rb($e(i.validity)).getTime()>n.getTime()?1:0}};var Di=Object.assign((0,ZE.default)("ipfs:ipns:publisher"),{error:(0,ZE.default)("ipfs:ipns:publisher:error")}),zV=un().code,HV=60*60*1e3,sp=class{constructor(e,r){this._routing=e,this._datastore=r}async publishWithEOL(e,r,i){if(!e||!e.bytes)throw(0,Tn.default)(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");let n=await rg.default.createFromPrivKey(e.bytes),s=await this._updateOrCreateRecord(e,r,i,n);return this._putRecordToRouting(s,n)}publish(e,r){return this.publishWithEOL(e,r,HV)}async _putRecordToRouting(e,r){if(!rg.default.isPeerId(r)){let o="peerId received is not valid";throw Di.error(o),(0,Tn.default)(new Error(o),"ERR_INVALID_PEER_ID")}let i=r._pubKey,n=await FV(i,e),s=hd(r.toBytes());return await this._publishEntry(s.routingKey,n||e),await this._publishPublicKey(s.routingPubKey,i),n||e}async _publishEntry(e,r){let i=qe.asKey(e);if(!i){let s="datastore key does not have a valid format";throw Di.error(s),(0,Tn.default)(new Error(s),"ERR_INVALID_DATASTORE_KEY")}let n;try{n=QE(r)}catch(s){throw Di.error(s),s}try{let s=await this._routing.put(i.uint8Array(),n);return Di(`ipns record for ${$e(i.uint8Array(),"base64")} was stored in the routing`),s}catch(s){let o=`ipns record for ${$e(i.uint8Array(),"base64")} could not be stored in the routing`;throw Di.error(o),Di.error(s),(0,Tn.default)(new Error(o),"ERR_PUTTING_TO_ROUTING")}}async _publishPublicKey(e,r){let i=qe.asKey(e);if(!i){let n="datastore key does not have a valid format";throw Di.error(n),(0,Tn.default)(new Error(n),"ERR_INVALID_DATASTORE_KEY")}if(!r||!r.bytes){let n="one or more of the provided parameters are not defined";throw Di.error(n),(0,Tn.default)(new Error(n),"ERR_UNDEFINED_PARAMETER")}try{let n=await this._routing.put(i.uint8Array(),r.bytes);return Di(`public key for ${$e(i.uint8Array(),"base64")} was stored in the routing`),n}catch(n){let s=`public key for ${$e(i.uint8Array(),"base64")} could not be stored in the routing`;throw Di.error(s),Di.error(n),(0,Tn.default)(new Error(s),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(e,r={}){if(!rg.default.isPeerId(e)){let n="peerId received is not valid";throw Di.error(n),(0,Tn.default)(new Error(n),"ERR_INVALID_PEER_ID")}let i=r.checkRouting!==!1;try{let n=await this._datastore.get(eg(e.id));return this._unmarshalData(n)}catch(n){if(n.code!==zV){let s=`unexpected error getting the ipns record ${e.id} from datastore`;throw Di.error(s),(0,Tn.default)(new Error(s),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!i)throw(0,Tn.default)(n,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{let s=hd(e.toBytes()),o=await this._routing.get(s.routingKey.uint8Array());return this._unmarshalData(o)}catch(s){throw Di.error(s),s}}}_unmarshalData(e){try{return pu(e)}catch(r){throw(0,Tn.default)(r,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(e,r,i,n){if(!rg.default.isPeerId(n)){let u="peerId received is not valid";throw Di.error(u),(0,Tn.default)(new Error(u),"ERR_INVALID_PEER_ID")}let s={checkRouting:!0},o;try{o=await this._getPublished(n,s)}catch(u){if(u.code!==zV){let f=`unexpected error when determining the last published IPNS record for ${n.id} ${u.stack}`;throw Di.error(f),(0,Tn.default)(new Error(f),"ERR_DETERMINING_PUBLISHED_RECORD")}}let a=0n;o&&o.sequence!==void 0&&(a=Ua(o.value,r)?BigInt(o.sequence):BigInt(o.sequence)+BigInt(1));let c;try{c=await UV(e,r,a,i)}catch(u){let f=`ipns record for ${r} could not be created`;throw Di.error(u),(0,Tn.default)(new Error(f),"ERR_CREATING_IPNS_RECORD")}try{let u=QE(c);return await this._datastore.put(eg(n.id),u),Di(`ipns record for ${$e(r,"base32")} was stored in the datastore`),c}catch(u){let f=`ipns record for ${r} could not be stored in the datastore`;throw Di.error(f),(0,Tn.default)(new Error(f),"ERR_STORING_IN_DATASTORE")}}};sp.defaultRecordLifetime=HV;l();var $V=N(uc()),JE=N(it()),Mf=N(Rt()),eS=N(Ee()),ab=Object.assign((0,eS.default)("ipfs:ipns:republisher"),{error:(0,eS.default)("ipfs:ipns:republisher:error")}),GV=60*1e3,WV=60*GV,nIe=4*WV,sIe=24*WV,tS=class{constructor(e,r,i,n,s={pass:""}){this._publisher=e,this._datastore=r,this._peerId=i,this._keychain=n,this._options=s,this._republishHandle=null}async start(){if(this._republishHandle)throw(0,Mf.default)(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");let e={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:s=>{e._timeoutId=setTimeout(async()=>{e._timeoutId=null;try{e._inflightTask=e._task(),await e._inflightTask,e._task&&e.runPeriodically(s)}catch(o){ab.error(o)}},s())},cancel:async()=>{e._timeoutId!=null&&clearTimeout(e._timeoutId),e._task=null,await e._inflightTask}},{privKey:r}=this._peerId,{pass:i}=this._options,n=!0;e._task=()=>this._republishEntries(r,i),e.runPeriodically(()=>n?(n=!1,this._options.initialBroadcastInterval||GV):this._options.broadcastInterval||nIe),this._republishHandle=e}async stop(){let e=this._republishHandle;if(!e)throw(0,Mf.default)(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await e.cancel()}async _republishEntries(e,r){try{await this._republishEntry(e)}catch(i){let n="cannot republish entry for the node's private key";ab.error(n);return}if(r)try{let i=await this._keychain.listKeys();for(let n of i){if(n.name==="self")continue;let s=await this._keychain.exportKey(n.name,r),o=await $V.default.keys.import(s,r);await this._republishEntry(o)}}catch(i){ab.error(i)}}async _republishEntry(e){if(!e||!e.bytes)throw(0,Mf.default)(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");try{let r=await JE.default.createFromPrivKey(e.bytes),i=await this._getPreviousValue(r);await this._publisher.publishWithEOL(e,i,sIe)}catch(r){if(r.code==="ERR_NO_ENTRY_FOUND")return;throw r}}async _getPreviousValue(e){if(!JE.default.isPeerId(e))throw(0,Mf.default)(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{let r=await this._datastore.get(eg(e.id));if(!(r instanceof Uint8Array))throw(0,Mf.default)(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{return pu(r).value}catch(i){throw ab.error(i),(0,Mf.default)(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(r){throw r&&r.notFound?(0,Mf.default)(new Error(`no previous entry for record with id: ${e.id}`),"ERR_NO_ENTRY_FOUND"):r}}};l();var YV=N(it()),pd=N(Rt()),rS=N(Ee());tt();ia();var cb=Object.assign((0,rS.default)("ipfs:ipns:resolver"),{error:(0,rS.default)("ipfs:ipns:resolver:error")}),oIe=un().code,XV=32,iS=class{constructor(e){this._routing=e}async resolve(e,r={}){if(typeof e!="string")throw(0,pd.default)(new Error("invalid name"),"ERR_INVALID_NAME");let i=r.recursive&&r.recursive.toString()==="true",n=e.split("/");if(n.length!==3||n[0]!=="")throw(0,pd.default)(new Error("invalid name"),"ERR_INVALID_NAME");let s=n[2],o=1/0;i&&(o=XV);let a=await this.resolver(s,o);return cb(`${e} was locally resolved correctly`),a}async resolver(e,r){if(r===0){let s=`could not resolve name (recursion limit of ${XV} exceeded)`;throw cb.error(s),(0,pd.default)(new Error(s),"ERR_RESOLVE_RECURSION_LIMIT")}let i=await this._resolveName(e),n=i.split("/");return n[1]==="ipfs"||!r?i:this.resolver(n[2],r-1)}async _resolveName(e){let r=YV.default.parse(e),{routingKey:i}=hd(r.toBytes()),n;try{n=await this._routing.get(i.uint8Array())}catch(o){throw cb.error("could not get record from routing",o),o.code===oIe?(0,pd.default)(new Error(`record requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND"):(0,pd.default)(new Error(`unexpected error getting the ipns record ${r.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}let s;try{s=pu(n)}catch(o){throw cb.error("could not unmarshal record",o),(0,pd.default)(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_RECORD_RECEIVED")}return this._validateRecord(r,s)}async _validateRecord(e,r){let i=await YE(e,r);return await WE(i,r),$e(r.value)}};l();var QV=N(x0()),nS=class{constructor(e){this.lru=(0,QV.default)(e)}get(e){let r=this.lru.get(e);if(r){if(r.expire&&r.expire<Date.now()){this.lru.remove(e);return}return r.value}}set(e,r,i){this.lru.set(e,{value:r,expire:Date.now()+i})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}};tt();var ig=Object.assign((0,sS.default)("ipfs:ipns"),{error:(0,sS.default)("ipfs:ipns:error")}),ez=60*1e3,ub=class{constructor(e,r,i,n,s){this.publisher=new sp(e,r),this.republisher=new tS(this.publisher,r,i,n,s),this.resolver=new iS(e),this.cache=new nS(1e3),this.routing=e}async publish(e,r,i=sp.defaultRecordLifetime){try{let n=await(0,ZV.createFromPrivKey)(e.bytes);await this.publisher.publishWithEOL(e,r,i),ig(`IPNS value ${$e(r,"base32")} was published correctly`);let s=n.toB58String(),o=parseFloat(i),a=o<ez?o:ez;return this.cache.set(s,r,a),ig(`IPNS value ${$e(r,"base32")} was cached correctly`),{name:s,value:r}}catch(n){throw ig.error(n),n}}async resolve(e,r={}){if(typeof e!="string")throw(0,JV.default)(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!r.nocache&&!r.recursive){let i=e.split("/")[2],n=this.cache.get(i);if(n)return n}try{let i=await this.resolver.resolve(e,r);return ig(`IPNS record from ${e} was resolved correctly`),i}catch(i){throw ig.error(i),i}}async initializeKeyspace(e,r){return this.publish(e,r,sp.defaultRecordLifetime)}};l();l();md();ia();var lz=N(Ee()),lS=N(lc()),dS=N(fc()),lIe=(0,lz.default)("datastore:core:tiered"),lb=class extends Is{constructor(e){super();this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map(e=>e.open()))}catch(e){throw Q4()}}async put(e,r){try{await Promise.all(this.stores.map(i=>i.put(e,r)))}catch(i){throw J4()}}async get(e,r){for(let i of this.stores)try{let n=await i.get(e,r);if(n)return n}catch(n){lIe(n)}throw un()}async has(e,r){for(let i of this.stores)if(await i.has(e,r))return!0;return!1}async delete(e,r){try{await Promise.all(this.stores.map(i=>i.delete(e,r)))}catch(i){throw Z4()}}async*putMany(e,r={}){let i,n=this.stores.map(s=>{let o=(0,lS.default)();return(0,dS.default)(s.putMany(o,r)).catch(a=>{i=a}),o});try{for await(let s of e){if(i)throw i;n.forEach(o=>o.push(s)),yield s}}finally{n.forEach(s=>s.end())}}async*deleteMany(e,r={}){let i,n=this.stores.map(s=>{let o=(0,lS.default)();return(0,dS.default)(s.deleteMany(o,r)).catch(a=>{i=a}),o});try{for await(let s of e){if(i)throw i;n.forEach(o=>o.push(s)),yield s}}finally{n.forEach(s=>s.end())}}async close(){await Promise.all(this.stores.map(e=>e.close()))}batch(){let e=this.stores.map(r=>r.batch());return{put:(r,i)=>{e.forEach(n=>n.put(r,i))},delete:r=>{e.forEach(i=>i.delete(r))},commit:async r=>{for(let i of e)await i.commit(r)}}}query(e,r){return this.stores[this.stores.length-1].query(e,r)}queryKeys(e,r){return this.stores[this.stores.length-1].queryKeys(e,r)}};var bb=N(ng());l();li();l();l();Br();l();ia();var wS={};zt(wS,{NextToLast:()=>vS,PREFIX:()=>db,Prefix:()=>mS,README_FN:()=>gS,SHARDING_FN:()=>hb,ShardBase:()=>sg,Suffix:()=>bS,parseShardFun:()=>dz,readShardFun:()=>hz,readme:()=>yS});l();Br();l();var yS=`This is a repository of IPLD objects. Each IPLD object is in a single file,
named <base32 encoding of cid>.data. Where <base32 encoding of cid> is the
"base32" encoding of the CID (as specified in
https://github.com/multiformats/multibase) without the 'B' prefix.
All the object files are placed in a tree of directories, based on a
function of the CID. This is a form of sharding similar to
the objects directory in git repositories. Previously, we used
prefixes, we now use the next-to-last two charters.
    func NextToLast(base32cid string) {
      nextToLastLen := 2
      offset := len(base32cid) - nextToLastLen - 1
      return str[offset : offset+nextToLastLen]
    }
For example, an object with a base58 CIDv1 of
    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f
has a base32 CIDv1 of
    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA
and will be placed at
    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data
with 'SC' being the last-to-next two characters and the 'B' at the
beginning of the CIDv1 string is the multibase prefix that is not
stored in the filename.
`;var db="/repo/flatfs/shard/",hb="SHARDING",gS="_README",sg=class{constructor(e){this.param=e,this.name="base",this._padding=""}fun(e){return"implement me"}toString(){return`${db}v1/${this.name}/${this.param}`}},mS=class extends sg{constructor(e){super(e);this._padding="".padStart(e,"_"),this.name="prefix"}fun(e){return(e+this._padding).slice(0,this.param)}},bS=class extends sg{constructor(e){super(e);this._padding="".padStart(e,"_"),this.name="suffix"}fun(e){let r=this._padding+e;return r.slice(r.length-this.param)}},vS=class extends sg{constructor(e){super(e);this._padding="".padStart(e+1,"_"),this.name="next-to-last"}fun(e){let r=this._padding+e,i=r.length-this.param-1;return r.slice(i,i+this.param)}};function dz(t){if(t=t.trim(),t.length===0)throw new Error("empty shard string");if(!t.startsWith(db))throw new Error(`invalid or no path prefix: ${t}`);let e=t.slice(db.length).split("/"),r=e[0];if(r!=="v1")throw new Error(`expect 'v1' version, got '${r}'`);let i=e[1];if(!e[2])throw new Error("missing param");let n=parseInt(e[2],10);switch(i){case"prefix":return new mS(n);case"suffix":return new bS(n);case"next-to-last":return new vS(n);default:throw new Error(`unkown sharding function: ${i}`)}}var hz=async(t,e)=>{let r=new qe(t).child(new qe(hb)),n=await(typeof e.getRaw=="function"?e.getRaw.bind(e):e.get.bind(e))(r);return dz(new TextDecoder().decode(n||"").trim())};md();ES();l();md();var pIe=N(oo()),yIe=N(Nr());l();md();ia();var Put=new qe(hb),Cut=new qe(gS);l();var bIe=N(sa()),vIe=N(op()),wIe=N(cp());md();ia();oS();Br();l();var up={...FE},$ut={...wS};l();var _z=N(AS());tt();dt();var yb="/record/";function IS(t){return $e(t,"base32")}function og(t){(typeof t=="string"||t instanceof String)&&(t=Xe(t.toString()));let e=$e(t,"base64url");return`${yb}${e}`}function Ez(t){if(t.substring(0,yb.length)!==yb)throw(0,_z.default)(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");let e=t.substring(yb.length);return Xe(e,"base64url")}wi();var Ts=N(AS()),TS=N(Ee()),Rn=Object.assign((0,TS.default)("datastore-pubsub:publisher"),{error:(0,TS.default)("datastore-pubsub:publisher:error")}),RS=class extends Is{constructor(e,r,i,n,s){super();if(!n)throw(0,Ts.default)(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if(typeof n.validate!="function")throw(0,Ts.default)(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if(typeof n.select!="function")throw(0,Ts.default)(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(s&&typeof s!="function")throw(0,Ts.default)(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=r,this._peerId=i,this._validator=n,this._handleSubscriptionKeyFn=s,this._onMessage=this._onMessage.bind(this)}async put(e,r){if(!(e instanceof Uint8Array)){let n="datastore key does not have a valid format";throw Rn.error(n),(0,Ts.default)(new Error(n),"ERR_INVALID_DATASTORE_KEY")}if(!(r instanceof Uint8Array)){let n="received value is not a Uint8Array";throw Rn.error(n),(0,Ts.default)(new Error(n),"ERR_INVALID_VALUE_RECEIVED")}let i=og(e);Rn(`publish value for topic ${i}`),await this._pubsub.publish(i,r)}async get(e){if(!(e instanceof Uint8Array)){let n="datastore key does not have a valid format";throw Rn.error(n),(0,Ts.default)(new Error(n),"ERR_INVALID_DATASTORE_KEY")}let r=og(e),i=await this._pubsub.getTopics();if(i&&Array.isArray(i)&&i.indexOf(r)>-1)return this._getLocal(e);try{this._pubsub.on(r,this._onMessage),await this._pubsub.subscribe(r)}catch(n){let s=`cannot subscribe topic ${r}`;throw Rn.error(s),(0,Ts.default)(new Error(s),"ERR_SUBSCRIBING_TOPIC")}return Rn(`subscribed values for key ${r}`),this._getLocal(e)}unsubscribe(e){let r=og(e);return this._pubsub.removeListener(r,this._onMessage),this._pubsub.unsubscribe(r)}async _getLocal(e){let r=new qe("/"+IS(e),!1),i;try{i=await this._datastore.get(r)}catch(n){if(n.code!=="ERR_NOT_FOUND"){let o=`unexpected error getting the ipns record for ${r.toString()}`;throw Rn.error(o),(0,Ts.default)(new Error(o),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}let s=`local record requested was not found for ${r.toString()}`;throw Rn.error(s),(0,Ts.default)(new Error(s),"ERR_NOT_FOUND")}if(!(i instanceof Uint8Array)){let n="found record that we couldn't convert to a value";throw Rn.error(n),(0,Ts.default)(new Error(n),"ERR_INVALID_RECORD_RECEIVED")}return i}async _onMessage(e){let{data:r,from:i,topicIDs:n}=e,s;try{s=Ez(n[0])}catch(o){Rn.error(o);return}if(Rn(`message received for topic ${n[0]}`),i===this._peerId.toB58String()){Rn("message discarded as it is from the same peer");return}if(this._handleSubscriptionKeyFn){let o;try{o=await this._handleSubscriptionKeyFn(s)}catch(a){Rn.error("message discarded by the subscriptionKeyFn");return}s=o}try{await this._storeIfSubscriptionIsBetter(s,r)}catch(o){Rn.error(o)}}async _storeIfSubscriptionIsBetter(e,r){let i=!1;try{i=await this._isBetter(e,r)}catch(n){if(n.code!=="ERR_NOT_VALID_RECORD")throw n}i&&await this._storeRecord(e,r)}async _validateRecord(e,r){return this._validator.validate(e,r)}async _selectRecord(e,r){return await this._validator.select(e,r)===0}async _isBetter(e,r){try{await this._validateRecord(r,e)}catch(s){let o="record received through pubsub is not valid";throw Rn.error(o),(0,Ts.default)(new Error(o),"ERR_NOT_VALID_RECORD")}let i=new qe(e),n;try{n=await this._getLocal(i.uint8Array())}catch(s){return!0}return Ua(n,r)?!1:this._selectRecord(e,[n,r])}async _storeRecord(e,r){let i=new qe("/"+IS(e),!1);await this._datastore.put(i,r),Rn(`record for ${og(e)} was stored in the datastore`)}};dt();tt();var PS=N(Rt()),CS=N(Ee()),OS=Object.assign((0,CS.default)("ipfs:ipns:pubsub"),{error:(0,CS.default)("ipfs:ipns:pubsub:error")}),fp=class{constructor(e,r,i){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new RS(e,r,i,tg,this._handleSubscriptionKey)}put(e,r){return this._pubsubDs.put(e,r)}async get(e){let r,i;try{r=await this._pubsubDs.get(e)}catch(s){i=s}let n=e.slice(0,ob);if($e(n)===Jy){let s=pt.encode(e).substring(1),o=pt.encode(e.slice(ob)).substring(1);this._subscriptions[s]=o,OS(`subscribed to pubsub topic ${s}, id ${o}`)}if(i)throw i;return r}_handleSubscriptionKey(e){e instanceof Uint8Array&&(e=$e(e,"base58btc"));let r=this._subscriptions[e];if(!r)throw(0,PS.default)(new Error(`key ${e} does not correspond to a subscription`),"ERR_INVALID_KEY");let i;try{i=hd(Xe(r,"base58btc"))}catch(n){throw OS.error(n),n}return i.routingKey.uint8Array()}getSubscriptions(){return Object.values(this._subscriptions).filter(Boolean).map(r=>`${Jy}${r}`)}async cancel(e){if(typeof e!="string")throw(0,PS.default)(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");e.startsWith(Jy)&&(e=e.substring(ob));let r=Object.keys(this._subscriptions).find(n=>this._subscriptions[n]===e);if(!r)return{canceled:!1};let i=Xe(r);return this._pubsubDs.unsubscribe(i),delete this._subscriptions[r],OS(`unsubscribed pubsub ${r}: ${e}`),{canceled:!0}}};l();Br();var NS=N(bd()),dp=N(Rt()),MS=N(Ee());tt();var LS=Object.assign((0,MS.default)("ipfs:ipns:offline-datastore"),{error:(0,MS.default)("ipfs:ipns:offline-datastore:error")}),ug=class{constructor(e){this._repo=e,this.stores=[]}async put(e,r){if(!(e instanceof Uint8Array))throw(0,dp.default)(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(r instanceof Uint8Array))throw(0,dp.default)(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let i;try{i=this._routingKey(e)}catch(s){throw LS.error(s),(0,dp.default)(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}let n=new NS.Record(e,r);return this._repo.datastore.put(i,n.serialize())}async get(e){if(!(e instanceof Uint8Array))throw(0,dp.default)(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let r;try{r=this._routingKey(e)}catch(s){throw LS.error(s),(0,dp.default)(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}let i=await this._repo.datastore.get(r),n;try{n=NS.Record.deserialize(i)}catch(s){throw LS.error(s),s}return n.value}_routingKey(e){return new qe("/"+$e(e,"base32upper"),!1)}};function Hz({libp2p:t,repo:e,peerId:r,options:i}){let n=[],s;if((0,bb.default)(i,"EXPERIMENTAL.ipnsPubsub",!1)){let o=t.pubsub,a=e.datastore;s=new fp(o,a,r),n.push(s)}if((0,bb.default)(i,"offline")||!(0,bb.default)(i,"libp2p.config.dht.enabled",!1)){let o=new ug(e);n.push(o)}else n.push(t._dht);return new lb(n)}var $z=N(Ee()),BIe=(0,$z.default)("ipfs:components:ipns"),qS=class{constructor(e={pass:""}){this.options=e,this.offline=null,this.online=null}getIPNS(){let e=this.online||this.offline;if(e)return e;throw new lf}get routing(){return this.getIPNS().routing}startOffline({repo:e,peerId:r,keychain:i}){if(this.offline!=null)throw new qa;BIe("initializing IPNS keyspace");let n=new ug(e),s=new ub(n,e.datastore,r,i,this.options);this.offline=s}async startOnline({libp2p:e,repo:r,peerId:i,keychain:n}){if(this.online!=null)throw new qa;let s=Hz({libp2p:e,repo:r,peerId:i,options:this.options}),o=new ub(s,r.datastore,i,n,this.options);await o.republisher.start(),this.online=o}async stop(){let e=this.online;e&&(await e.republisher.stop(),this.online=null)}publish(e,r,i){return this.getIPNS().publish(e,r,i)}resolve(e,r){return this.getIPNS().resolve(e,r)}initializeKeyspace(e,r){return this.getIPNS().initializeKeyspace(e,r)}};l();l();var jS=N(Ee());var Xz=N(uc()),US=N(Rt());dt();tt();l();var Gz=N(_0());var Wz=N(fc());async function Yz({ipns:t,repo:e,codecs:r},i,n){if(Gz.default.ipnsPath(i))return t.resolve(i);let{cid:s,path:o}=tu(i);await(0,Wz.default)(vf(s,o||"",r,e,n))}var FS=Object.assign((0,jS.default)("ipfs:name:publish"),{error:(0,jS.default)("ipfs:name:publish:error")});function Qz({ipns:t,repo:e,codecs:r,peerId:i,isOnline:n,keychain:s}){let o=async c=>{if(c==="self")return i.privKey;try{let u=await s.exportKey(c,"temp");return await Xz.default.keys.import(u,"temp")}catch(u){throw FS.error(u),(0,US.default)(u,"ERR_CANNOT_GET_KEY")}};async function a(c,u={}){let f=u.resolve!==!1,d=u.lifetime||"24h",h=u.key||"self";if(!n())throw(0,US.default)(new Error(Y6),"OFFLINE_ERROR");try{c=OL(c)}catch(b){throw FS.error(b),b}let p=0;try{p=gf(d)||0,p=parseFloat(p.toFixed(6))}catch(b){throw FS.error(b),b}let y=await Promise.all([o(h),f?Yz({ipns:t,repo:e,codecs:r},c):Promise.resolve()]),m=Xe(c),w=await t.publish(y[0],m,p);return{name:w.name,value:$e(w.value)}}return ce(a)}l();var KS=N(Ee()),vb=N(Rt());Te();var eH=N(it()),tH=N(Jz());tt();var MIe=Tt.bind({ignoreUndefined:!0}),LIe=Object.assign((0,KS.default)("ipfs:name:resolve"),{error:(0,KS.default)("ipfs:name:resolve:error")}),rH=(t,e)=>e.length>0?t+"/"+e.join("/"):t;function iH({dns:t,ipns:e,peerId:r,isOnline:i,options:{offline:n}}){async function*s(o,a={}){if(a=MIe({nocache:!1,recursive:!0},a),n&&a&&a.nocache)throw(0,vb.default)(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");o||(o=r.toB58String()),o.startsWith("/ipns/")||(o=`/ipns/${o}`);let[c,u,...f]=o.slice(1).split("/");try{u.substring(0,1)==="1"?eH.default.parse(u):J.parse(u)}catch(h){if((0,tH.default)(u)){yield rH(await t(u,a),f);return}throw LIe.error(h),(0,vb.default)(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}if(!i()&&!n)throw(0,vb.default)(new Error(Y6),"OFFLINE_ERROR");let d=await e.resolve(`/${c}/${u}`,a);yield rH(d instanceof Uint8Array?$e(d):d,f)}return ce(s)}l();l();l();var VS=N(Rt());function hp(t,e){if(!t||!(e&&e.ipnsPubsub))throw(0,VS.default)(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(t.routing instanceof fp)return t.routing;let r=(t.routing.stores||[]).find(i=>i instanceof fp);if(!r)throw(0,VS.default)(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return r}function nH({ipns:t,options:e}){let r=e.EXPERIMENTAL;async function i(n,s={}){return hp(t,r).cancel(n,s)}return ce(i)}l();function sH({ipns:t,options:e}){let r=e.EXPERIMENTAL;async function i(n={}){try{return{enabled:Boolean(hp(t,r))}}catch(s){return{enabled:!1}}}return ce(i)}l();function oH({ipns:t,options:e}){let r=e.EXPERIMENTAL;async function i(n={}){return hp(t,r).getSubscriptions(n)}return ce(i)}var zS=class{constructor({ipns:e,options:r}){this.cancel=nH({ipns:e,options:r}),this.state=sH({ipns:e,options:r}),this.subs=oH({ipns:e,options:r})}};var HS=class{constructor({dns:e,ipns:r,repo:i,codecs:n,peerId:s,isOnline:o,keychain:a,options:c}){this.publish=Qz({ipns:r,repo:i,codecs:n,peerId:s,isOnline:o,keychain:a}),this.resolve=iH({dns:e,ipns:r,peerId:s,isOnline:o,options:c}),this.pubsub=new zS({ipns:r,options:c})}};l();ia();Te();var aH=N($6()),cH=N(yf()),qIe=un().code,$S={default:"<dst>",edges:"<src> -> <dst>"};function uH({repo:t,codecs:e,resolve:r,preload:i}){async function*n(s,o={}){if(o.maxDepth===0)return;if(o.edges&&o.format&&o.format!==$S.default)throw new Error("Cannot set edges to true and also specify format");if(o.format=o.edges?$S.edges:o.format,typeof o.maxDepth!="number"&&(o.maxDepth=o.recursive?1/0:1),o.timeout){let u=new aH.default(o.timeout);o.signal=(0,cH.anySignal)([o.signal,u.signal])}let c=(Array.isArray(s)?s:[s]).map(u=>jIe(i,u,o));for(let u of c)try{yield*UIe(r,t,e,u,o)}catch(f){yield{ref:"",err:f.message}}}return n}function jIe(t,e,r){let{cid:i,path:n}=tu(e);return r.preload!==!1&&t(i),`/ipfs/${i}${n||""}`}async function*UIe(t,e,r,i,n){let s=await t(i,n),{cid:o}=tu(s),a=n.maxDepth!=null?n.maxDepth:1/0,c=n.unique||!1;for await(let u of KIe(e,r,o,a,c,n))!u.parent||u.isDuplicate||(yield{ref:FIe(u.parent.cid,u.node.cid,u.node.name,n.format)})}function FIe(t,e,r="",i=$S.default){let n=i.replace(/<src>/g,t.toString());return n=n.replace(/<dst>/g,e.toString()),n=n.replace(/<linkname>/g,r),n}async function*KIe(t,e,r,i,n,s){let o=new Set;async function*a(c,u){let f=u+1;if(!(f>i))try{for await(let d of VIe(t,e,c.cid,s))yield{parent:c,node:d,isDuplicate:n&&o.has(d.cid.toString())},n&&o.add(d.cid.toString()),yield*a(d,f)}catch(d){throw d.code===qIe&&(d.message=`Could not find object with CID: ${c.cid}`),d}}yield*a({cid:r},0)}async function*VIe(t,e,r,i){let n=await t.blocks.get(r,i),o=(await e.getCodec(r.code)).decode(n),a=r.code===Pt,c=[];for(let[u,f]of GS(o,c)){if(a){let d=u.match(/^Links\/(\d+)\/Hash$/);if(d){let h=Number(d[1]);if(h<o.Links.length){yield{name:o.Links[h].Name,cid:f};continue}}}yield{name:u,cid:f}}}var GS=function*(t,e){if(t!=null&&!(t instanceof Uint8Array)){for(let[r,i]of Object.entries(t)){let n=[...e,r];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let[s,o]of i.entries()){let a=[...n,s],c=J.asCID(o);c?yield[a.join("/"),c]:typeof o=="object"&&(yield*GS(o,a))}else{let s=J.asCID(i);s?yield[n.join("/"),s]:yield*GS(i,n)}}return[]}};l();function fH({repo:t}){async function*e(r={}){for await(let i of t.blocks.queryKeys({},{signal:r.signal}))yield{ref:i.toString()}}return ce(e)}l();l();function lH({network:t}){async function e(r={}){let{bitswap:i}=await t.use(r),n=i.getWantlist();return Array.from(n).map(s=>s[1].cid)}return ce(e)}l();var dH=N(it());function hH({network:t}){async function e(r,i={}){let{bitswap:n}=await t.use(i),s=n.wantlistForPeer(dH.default.createFromB58String(r));return Array.from(s).map(o=>o[1].cid)}return ce(e)}l();function pH({network:t}){async function e(r,i={}){let{bitswap:n}=await t.use(i);return Array.isArray(r)||(r=[r]),n.unwant(r)}return ce(e)}l();function wb({network:t}){async function e(r={}){let i=(await t.use(r)).bitswap,n=i.stat().snapshot;return{provideBufLen:parseInt(n.providesBufferLength.toString()),blocksReceived:BigInt(n.blocksReceived.toString()),wantlist:Array.from(i.getWantlist()).map(s=>s[1].cid),peers:i.peers().map(s=>s.toB58String()),dupBlksReceived:BigInt(n.dupBlksReceived.toString()),dupDataReceived:BigInt(n.dupDataReceived.toString()),dataReceived:BigInt(n.dataReceived.toString()),blocksSent:BigInt(n.blocksSent.toString()),dataSent:BigInt(n.dataSent.toString())}}return ce(e)}var WS=class{constructor({network:e}){this.wantlist=lH({network:e}),this.wantlistForPeer=hH({network:e}),this.unwant=pH({network:e}),this.stat=wb({network:e})}};l();l();l();var yH=N(zl());function _b(t){try{return yH.default.IPFS.matches(t)}catch(e){return!1}}function gH({repo:t}){async function e(r,i={}){if(!_b(r))throw new Error(`${r} is not a valid Multiaddr`);let n=await t.config.getAll(i),s=n.Bootstrap||[];return s.push(r.toString()),n.Bootstrap=Array.from(new Set(s)).sort((o,a)=>o.localeCompare(a)),await t.config.replace(n),{Peers:[r]}}return ce(e)}l();var mH=N(rt());function bH({repo:t}){async function e(r={}){let i=await t.config.getAll(r),n=i.Bootstrap||[];return i.Bootstrap=[],await t.config.replace(i),{Peers:n.map(s=>new mH.Multiaddr(s))}}return ce(e)}l();var vH=N(rt());function wH({repo:t}){async function e(r={}){return{Peers:(await t.config.get("Bootstrap",r)||[]).map(n=>new vH.Multiaddr(n))}}return ce(e)}l();l();var yu=()=>({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:200,HighWater:500},DisableNatPortMap:!0},Routing:{Type:"none"}});var _H=N(rt());function EH({repo:t}){async function e(r={}){let i=await t.config.getAll(r);return i.Bootstrap=yu().Bootstrap,await t.config.replace(i),{Peers:yu().Bootstrap.map(n=>new _H.Multiaddr(n))}}return ce(e)}l();function SH({repo:t}){async function e(r,i={}){if(!_b(r))throw new Error(`${r} is not a valid Multiaddr`);let n=await t.config.getAll(i);return n.Bootstrap=(n.Bootstrap||[]).filter(s=>s.toString()!==r.toString()),await t.config.replace(n),{Peers:[r]}}return ce(e)}var YS=class{constructor({repo:e}){this.add=gH({repo:e}),this.list=wH({repo:e}),this.rm=SH({repo:e}),this.clear=bH({repo:e}),this.reset=EH({repo:e})}};l();l();function xH({preload:t,repo:e}){async function r(i,n={}){return n.preload!==!1&&t(i),e.blocks.get(i,n)}return ce(r)}l();Te();function AH({codecs:t,hashers:e,repo:r,preload:i}){async function n(s,o={}){let a=o.pin?await r.gcLock.readLock():null;try{let c=o.version!=null?o.version:0,u=o.format||(c===0?"dag-pb":"raw"),d=await(await e.getHasher(o.mhtype||"sha2-256")).digest(s),h=await t.getCodec(u),p=J.create(c,h.code,d);return await r.blocks.put(p,s,{signal:o.signal}),o.preload!==!1&&i(p),o.pin===!0&&await r.pins.pinRecursively(p,{signal:o.signal}),p}finally{a&&a()}}return ce(n)}l();var jH=N(Rt()),UH=N(qH()),FH=N(oo()),KH=N(sa()),VH=N(Nr());l();Te();function Ab(t){return t instanceof Uint8Array?J.decode(t):J.parse(t.toString())}var JIe=8;function zH({repo:t}){async function*e(r,i={}){Array.isArray(r)||(r=[r]);let n=await t.gcLock.writeLock();try{yield*(0,VH.pipe)(r,s=>(0,FH.default)(s,o=>async()=>{o=Ab(o);let a={cid:o};try{if(!await t.blocks.has(o))throw(0,jH.default)(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await t.blocks.delete(o)}catch(c){i.force||(c.message=`cannot remove ${o}: ${c.message}`,a.error=c)}return a}),s=>(0,UH.default)(s,JIe),s=>(0,KH.default)(s,()=>!i.quiet))}finally{n()}}return ce(e)}l();function HH({repo:t,preload:e}){async function r(i,n={}){i=Ab(i),n.preload!==!1&&e(i);let s=await t.blocks.get(i);return{cid:i,size:s.length}}return ce(r)}var QS=class{constructor({codecs:e,hashers:r,preload:i,repo:n}){this.get=xH({preload:i,repo:n}),this.put=AH({codecs:e,hashers:r,preload:i,repo:n}),this.rm=zH({repo:n}),this.stat=HH({preload:i,repo:n})}};l();l();var o$=N(ss());l();l();var QH=N(Hl());dt();var ZH=N(yp()),JH=N(YH()),e$=N(gp()),t$=N(yd()),r$=N(oo());l();function co(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function mu(t){return t.constructor&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function fg(t){return typeof t=="object"&&(t.path||t.content)}var bu=t=>t&&typeof t.getReader=="function";async function*Ib(t){yield t}async function Tb(t){if(co(t))return Ib(ZS(t));if(typeof t=="string"||t instanceof String)return Ib(ZS(t.toString()));if(mu(t))return(0,JH.default)(t);if(bu(t)&&(t=(0,ZH.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=(0,e$.default)(t),{value:r,done:i}=await e.peek();if(i)return Ib(new Uint8Array(0));if(e.push(r),Number.isInteger(r))return Ib(Uint8Array.from(await(0,t$.default)(e)));if(co(r)||typeof r=="string"||r instanceof String)return(0,r$.default)(e,ZS)}throw(0,QH.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function ZS(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):Xe(t.toString())}l();var Rb=N(Hl()),i$=N(yp()),n$=N(gp());async function*s$(t,e){if(t==null)throw(0,Rb.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield Pb(t.toString(),e);return}if(co(t)||mu(t)){yield Pb(t,e);return}if(bu(t)&&(t=(0,i$.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=(0,n$.default)(t),{value:i,done:n}=await r.peek();if(n){yield{content:[]};return}if(r.push(i),Number.isInteger(i)||co(i)||typeof i=="string"||i instanceof String){yield Pb(r,e);return}throw(0,Rb.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(fg(t)){yield Pb(t,e);return}throw(0,Rb.default)(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Pb(t,e){let{path:r,mode:i,mtime:n,content:s}=t,o={path:r||"",mode:Qc(i),mtime:rf(n)};return s?o.content=await e(s):r||(o.content=await e(t)),o}function Cb(t){return s$(t,Tb)}function a$({addAll:t}){async function e(r,i={}){let n=await(0,o$.default)(t(Cb(r),i));if(n==null)throw Error("Failed to add a file, if you see this please report a bug");return n}return e}l();l();var AG=N(kb());l();mi();l();oy();fy();var JS=N(d$());function oTe(t){let e=new Array(4);for(let r=0;r<4;r++)e[r]=t&255,t=t>>8;return new Uint8Array(e)}var Ydt=ff({name:"murmur3-32",code:35,encode:t=>oTe(JS.default.x86.hash32(t))}),vd=ff({name:"murmur3-128",code:34,encode:t=>t0.fromHex(JS.default.x64.hash128(t))});async function aTe(t){return(await vd.encode(t)).slice(0,8).reverse()}var cTe={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:Ir,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:17437180132763652,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:aTe,hamtHashCode:34,hamtBucketBits:8},h$=(t={})=>Tt.bind({ignoreUndefined:!0})(cTe,t);l();l();l();Te();mi();var uTe=async(t,e,r)=>{r.codec||(r.codec=Mn),r.hasher||(r.hasher=Ir),r.cidVersion===void 0&&(r.cidVersion=1),r.codec===Mn&&r.hasher!==Ir&&(r.cidVersion=1);let i=await r.hasher.digest(t),n=J.create(r.cidVersion,r.codec.code,i);return r.onlyHash||await e.put(n,t,{signal:r.signal}),n},oa=uTe;var fTe=async(t,e,r)=>{let i=new ct({type:"directory",mtime:t.mtime,mode:t.mode}),n=ot(zi({Data:i.marshal()})),s=await oa(n,e,r),o=t.path;return{cid:s,path:o,unixfs:i,size:n.length}},p$=fTe;l();var I$=N(dg());var T$=N(kb());Hs();l();var m$=N(yd());async function dTe(t,e){return e(await(0,m$.default)(t))}var b$=dTe;l();var v$=N(Ob());function hTe(t,e,r){return w$(t,e,r)}async function w$(t,e,r){let i=[];for await(let n of(0,v$.default)(t,r.maxChildrenPerNode))i.push(await e(n));return i.length>1?w$(i,e,r):i[0]}var _$=hTe;l();var E$=N(Ob());async function pTe(t,e,r){let i=new x$(r.layerRepeat),n=0,s=1,o=i;for await(let a of(0,E$.default)(t,r.maxChildrenPerNode))o.isFull()&&(o!==i&&i.addChild(await o.reduce(e)),n&&n%r.layerRepeat==0&&s++,o=new ex(s,r.layerRepeat,n),n++),o.append(a);return o&&o!==i&&i.addChild(await o.reduce(e)),i.reduce(e)}var S$=pTe,ex=class{constructor(e,r,i=0){this.maxDepth=e,this.layerRepeat=r,this.currentDepth=1,this.iteration=i,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;let e=this._findParent(this.node,this.currentDepth);return e?(this._addNextNodeToParent(e),!1):!0}_addNextNodeToParent(e){this.parent=e;let r={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(r),this.currentDepth=r.depth,this.node=r}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,r){let i=[];return e.children.length&&(i=await Promise.all(e.children.filter(n=>n.data).map(n=>this._reduce(n,r)))),r((e.data||[]).concat(i))}_findParent(e,r){let i=e.parent;if(!(!i||i.depth===0))return i.children.length===i.maxChildren||!i.maxChildren?this._findParent(i,r):i}},x$=class extends ex{constructor(e){super(0,e);this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}};l();Hs();async function*yTe(t,e,r){for await(let i of t.content)yield async()=>{r.progress(i.length,t.path);let n,s={codec:Mn,cidVersion:r.cidVersion,hasher:r.hasher,onlyHash:r.onlyHash};return r.rawLeaves?(s.codec=uy,s.cidVersion=1):(n=new ct({type:r.leafType,data:i,mtime:t.mtime,mode:t.mode}),i=ot({Data:n.marshal(),Links:[]})),{cid:await oa(i,e,s),unixfs:n,size:i.length}}}var A$=yTe;var gTe={flat:b$,balanced:_$,trickle:S$};async function*mTe(t,e,r){let i=-1,n,s;typeof r.bufferImporter=="function"?s=r.bufferImporter:s=A$;for await(let o of(0,T$.default)(s(t,e,r),r.blockWriteConcurrency)){if(i++,i===0){n=o;continue}else i===1&&n&&(yield n,n=null);yield o}n&&(n.single=!0,yield n)}var bTe=(t,e,r)=>{async function i(n){if(n.length===1&&n[0].single&&r.reduceSingleLeafToSelf){let f=n[0];if(f.cid.code===Ci&&(t.mtime!==void 0||t.mode!==void 0)){let d=await e.get(f.cid);f.unixfs=new ct({type:"file",mtime:t.mtime,mode:t.mode,data:d}),d=ot(zi({Data:f.unixfs.marshal()})),f.cid=await oa(d,e,{...r,codec:Mn,hasher:r.hasher,cidVersion:r.cidVersion}),f.size=d.length}return{cid:f.cid,path:t.path,unixfs:f.unixfs,size:f.size}}let s=new ct({type:"file",mtime:t.mtime,mode:t.mode}),o=n.filter(f=>f.cid.code===Ci&&f.size||f.unixfs&&!f.unixfs.data&&f.unixfs.fileSize()?!0:Boolean(f.unixfs&&f.unixfs.data&&f.unixfs.data.length)).map(f=>f.cid.code===Ci?(s.addBlockSize(f.size),{Name:"",Tsize:f.size,Hash:f.cid}):(!f.unixfs||!f.unixfs.data?s.addBlockSize(f.unixfs&&f.unixfs.fileSize()||0):s.addBlockSize(f.unixfs.data.length),{Name:"",Tsize:f.size,Hash:f.cid})),a={Data:s.marshal(),Links:o},c=ot(zi(a));return{cid:await oa(c,e,r),path:t.path,unixfs:s,size:c.length+a.Links.reduce((f,d)=>f+d.Tsize,0)}}return i};function vTe(t,e,r){let i=gTe[r.strategy];if(!i)throw(0,I$.default)(new Error(`Unknown importer build strategy name: ${r.strategy}`),"ERR_BAD_STRATEGY");return i(mTe(t,e,r),bTe(t,e,r),r)}var R$=vTe;var cx=N(dg());l();var Z$=N(Pn()),J$=N(Q$()),ox=N(dg());async function*OTe(t,e){let r,i,n;if(e.minChunkSize&&e.maxChunkSize&&e.avgChunkSize)n=e.avgChunkSize,r=e.minChunkSize,i=e.maxChunkSize;else if(e.avgChunkSize)n=e.avgChunkSize,r=n/3,i=n+n/2;else throw(0,ox.default)(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(r<16)throw(0,ox.default)(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");i<r&&(i=r),n<r&&(n=r);let s=Math.floor(Math.log2(n));for await(let o of kTe(t,{min:r,max:i,bits:s,window:e.window,polynomial:e.polynomial}))yield o}var eG=OTe;async function*kTe(t,e){let r=await(0,J$.create)(e.bits,e.min,e.max,e.window),i=new Z$.default;for await(let n of t){i.append(n);let s=r.fingerprint(n);for(let o=0;o<s.length;o++){let a=s[o],c=i.slice(0,a);i.consume(a),yield c}}i.length&&(yield i.slice(0))}l();var Mb=N(Pn());async function*DTe(t,e){let r=new Mb.default,i=0,n=!1,s=e.maxChunkSize;for await(let o of t)for(r.append(o),i+=o.length;i>=s;)if(yield r.slice(0,s),n=!0,s===r.length)r=new Mb.default,i=0;else{let a=new Mb.default;a.append(r.shallowSlice(s)),r=a,i-=s}(!n||i)&&(yield r.slice(0,i))}var tG=DTe;l();var ax=N(dg());dt();async function*BTe(t){for await(let e of t){if(e.length===void 0)throw(0,ax.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof e=="string"||e instanceof String)yield Xe(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else if(e instanceof Uint8Array)yield e;else throw(0,ax.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}var rG=BTe;function NTe(t){return Symbol.iterator in t}function MTe(t){return Symbol.asyncIterator in t}function LTe(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(NTe(t))return async function*(){yield*t}();if(MTe(t))return t}catch{throw(0,cx.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,cx.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*qTe(t,e,r){for await(let i of t)if(i.path&&(i.path.substring(0,2)==="./"&&(r.wrapWithDirectory=!0),i.path=i.path.split("/").filter(n=>n&&n!==".").join("/")),i.content){let n;typeof r.chunker=="function"?n=r.chunker:r.chunker==="rabin"?n=eG:n=tG;let s;typeof r.chunkValidator=="function"?s=r.chunkValidator:s=rG;let o={path:i.path,mtime:i.mtime,mode:i.mode,content:n(s(LTe(i.content),r),r)};yield()=>R$(o,e,r)}else if(i.path){let n={path:i.path,mtime:i.mtime,mode:i.mode};yield()=>p$(n,e,r)}else throw new Error("Import candidate must have content or path or both")}var iG=qTe;l();l();l();var nG=class{constructor(e,r){this.options=r||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,r){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},Lf=nG;var sG=class extends Lf{constructor(e,r){super(e,r);this._children={}}async put(e,r){this.cid=void 0,this.size=void 0,this._children[e]=r}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){let e=Object.keys(this._children);for(let r=0;r<e.length;r++){let i=e[r];yield{key:i,child:this._children[i]}}}async*flush(e){let r=Object.keys(this._children),i=[];for(let u=0;u<r.length;u++){let f=this._children[r[u]];if(f instanceof Lf)for await(let d of f.flush(e))f=d,yield f;f.size!=null&&f.cid&&i.push({Name:r[u],Tsize:f.size,Hash:f.cid})}let n=new ct({type:"directory",mtime:this.mtime,mode:this.mode}),s={Data:n.marshal(),Links:i},o=ot(zi(s)),a=await oa(o,e,this.options),c=o.length+s.Links.reduce((u,f)=>u+(f.Tsize==null?0:f.Tsize),0);this.cid=a,this.size=c,yield{cid:a,unixfs:n,path:this.path,size:c}}},gg=sG;l();l();var jb=N(mg()),mG=class extends Lf{constructor(e,r){super(e,r);this._bucket=(0,jb.createHAMT)({hashFn:r.hamtHashFn,bits:r.hamtBucketBits})}async put(e,r){await this._bucket.put(e,r)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}async*flush(e){for await(let r of vG(this._bucket,e,this,this.options))yield{...r,path:this.path}}},bG=mG;async function*vG(t,e,r,i){let n=t._children,s=[],o=0;for(let p=0;p<n.length;p++){let y=n.get(p);if(!y)continue;let m=p.toString(16).toUpperCase().padStart(2,"0");if(y instanceof jb.Bucket){let w;for await(let b of await vG(y,e,null,i))w=b;if(!w)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:m,Tsize:w.size,Hash:w.cid}),o+=w.size}else if(typeof y.value.flush=="function"){let w=y.value,b;for await(let I of w.flush(e))b=I,yield b;let S=m+y.key;s.push({Name:S,Tsize:b.size,Hash:b.cid}),o+=b.size}else{let w=y.value;if(!w.cid)continue;let b=m+y.key,S=w.size;s.push({Name:b,Tsize:S,Hash:w.cid}),o+=S}}let a=Uint8Array.from(n.bitField().reverse()),c=new ct({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:i.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode}),u={Data:c.marshal(),Links:s},f=ot(zi(u)),d=await oa(f,e,i),h=f.length+o;yield{cid:d,unixfs:c,size:h}}async function wG(t,e,r,i){let n=e;e instanceof gg&&e.directChildrenCount()>=r&&(n=await rRe(e,i));let s=n.parent;if(s){if(n!==e){if(t&&(t.parent=n),!n.parentKey)throw new Error("No parent key found");await s.put(n.parentKey,n)}return wG(n,s,r,i)}return n}async function rRe(t,e){let r=new bG({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(let{key:i,child:n}of t.eachChildSeries())await r.put(i,n);return r}var _G=wG;l();var iRe=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),EG=iRe;async function nRe(t,e,r){let i=EG(t.path||""),n=i.length-1,s=e,o="";for(let a=0;a<i.length;a++){let c=i[a];o+=`${o?"/":""}${c}`;let u=a===n;if(s.dirty=!0,s.cid=void 0,s.size=void 0,u)await s.put(c,t),e=await _G(null,s,r.shardSplitThreshold,r);else{let f=await s.get(c);(!f||!(f instanceof Lf))&&(f=new gg({root:!1,dir:!0,parent:s,parentKey:c,path:o,dirty:!0,flat:!0,mtime:f&&f.unixfs&&f.unixfs.mtime,mode:f&&f.unixfs&&f.unixfs.mode},r)),await s.put(c,f),s=f}}return e}async function*SG(t,e){if(!(t instanceof Lf)){t&&t.unixfs&&t.unixfs.isDirectory()&&(yield t);return}yield*t.flush(e)}async function*sRe(t,e,r){let i=new gg({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r);for await(let n of t)!n||(i=await nRe(n,i,r),(!n.unixfs||!n.unixfs.isDirectory())&&(yield n));if(r.wrapWithDirectory)yield*SG(i,e);else for await(let n of i.eachChildSeries())!n||(yield*SG(n.child,e))}var xG=sRe;async function*mp(t,e,r={}){let i=h$(r),n;typeof r.dagBuilder=="function"?n=r.dagBuilder:n=iG;let s;typeof r.treeBuilder=="function"?s=r.treeBuilder:s=xG;let o;Symbol.asyncIterator in t||Symbol.iterator in t?o=t:o=[t];for await(let a of s((0,AG.default)(n(o,e,i),i.fileImportConcurrency),e,i))yield{cid:a.cid,path:a.path,unixfs:a.unixfs,size:a.size}}l();l();var bg=N(Hl()),IG=N(yp()),TG=N(gp()),fx=N(oo());async function*Ub(t,e){if(typeof t=="string"||t instanceof String||co(t)||mu(t)||t._readableState)throw(0,bg.default)(new Error("Unexpected input: single item passed - if you are using ipfs.allAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(bu(t)&&(t=(0,IG.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let r=(0,TG.default)(t),{value:i,done:n}=await r.peek();if(n){yield*[];return}if(r.push(i),Number.isInteger(i))throw(0,bg.default)(new Error("Unexpected input: single item passed - if you are using ipfs.allAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(i._readableState){yield*(0,fx.default)(r,s=>lx({content:s},e));return}if(co(i)){yield lx({content:r},e);return}if(fg(i)||i[Symbol.iterator]||i[Symbol.asyncIterator]||bu(i)||mu(i)){yield*(0,fx.default)(r,s=>lx(s,e));return}}throw fg(t)?(0,bg.default)(new Error("Unexpected input: single item passed - if you are using ipfs.allAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,bg.default)(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function lx(t,e){let{path:r,mode:i,mtime:n,content:s}=t,o={path:r||"",mode:Qc(i),mtime:rf(n)};return s?o.content=await e(s):r||(o.content=await e(t)),o}function RG(t){return Ub(t,Tb)}l();var PG=t=>{if(t)if(t.startsWith("size-")){let e=t.split("-")[1],r=parseInt(e);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:r}}else{if(t.startsWith("rabin"))return{chunker:"rabin",...oRe(t)};throw new Error(`Unrecognized chunker option: ${t}`)}else return{chunker:"fixed"}},oRe=t=>{let e={},r=t.split("-");switch(r.length){case 1:e.avgChunkSize=262144;break;case 2:e.avgChunkSize=Fb(r[1],"avg");break;case 4:e.minChunkSize=Fb(r[1],"min"),e.avgChunkSize=Fb(r[2],"avg"),e.maxChunkSize=Fb(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return e},Fb=(t,e)=>{let r=parseInt(t);if(isNaN(r))throw new Error(`Chunker parameter ${e} must be an integer`);return r};var CG=N(Nr());var aRe=Tt.bind({ignoreUndefined:!0});function OG({repo:t,preload:e,options:r}){let i=r&&r.sharding;async function*n(s,o={}){let a=aRe({shardSplitThreshold:i?1e3:1/0,strategy:"balanced"},o,{...PG(o.chunker)});a.hashAlg&&a.hashAlg!=="sha2-256"&&a.cidVersion!==1&&(a.cidVersion=1),a.trickle&&(a.strategy="trickle"),a.strategy==="trickle"&&(a.leafType="raw",a.reduceSingleLeafToSelf=!1),a.cidVersion>0&&a.rawLeaves===void 0&&(a.rawLeaves=!0),a.hashAlg!==void 0&&a.rawLeaves===void 0&&(a.rawLeaves=!0),delete a.trickle;let c={};if(a.progress){let d=a.progress;a.progress=(h,p)=>{c[p]||(c[p]=0),c[p]+=h,d(c[p],p)}}let u=(0,CG.pipe)(RG(s),d=>mp(d,t.blocks,{...a,pin:!1}),cRe(a),uRe(e,a),fRe(t,a)),f=await t.gcLock.readLock();try{for await(let d of u)delete c[d.path],yield d}finally{f()}}return ce(n)}function cRe(t){async function*e(r){for await(let i of r){let n=i.cid;t.cidVersion===1&&(n=n.toV1());let s=i.path?i.path:n.toString();t.wrapWithDirectory&&!i.path&&(s=""),yield{path:s,cid:n,size:i.size,mode:i.unixfs&&i.unixfs.mode,mtime:i.unixfs&&i.unixfs.mtime}}}return e}function uRe(t,e){async function*r(i){for await(let n of i)(!n.path||e.wrapWithDirectory?n.path==="":!n.path.includes("/"))&&!e.onlyHash&&e.preload!==!1&&t(n.cid),yield n}return r}function fRe(t,e){async function*r(i){for await(let n of i){let s=!(n.path&&n.path.includes("/"));(e.pin==null?!0:e.pin)&&s&&!e.onlyHash&&await t.pins.pinRecursively(n.cid),yield n}}return r}l();l();var Hb=N(vu());Te();l();var WG=N(vu());Hs();Jc();l();var zb=N(vu());l();var Kb=N(mg());var dRe=async function(t){return(await vd.encode(t)).slice(0,8).reverse()},hRe=(t,e,r)=>Promise.all(t.map(i=>{if(i.Name==null)throw new Error("Unexpected Link without a Name");if(i.Name.length===2){let n=parseInt(i.Name,16);return e._putObjectAt(n,new Kb.Bucket({hash:r._options.hash,bits:r._options.bits},e,n))}return r.put(i.Name.substring(2),!0)})),BG=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),pRe=t=>{let e=t.bucket,r=[];for(;e._parent;)r.push(e),e=e._parent;return r.push(e),r.reverse()},NG=async(t,e,r,i,n)=>{if(!i){let f=(0,Kb.createHAMT)({hashFn:dRe});i={rootBucket:f,hamtDepth:1,lastBucket:f}}await hRe(t.Links,i.lastBucket,i.rootBucket);let s=await i.rootBucket._findNewBucketAndPos(e),o=BG(s.pos),a=pRe(s);a.length>i.hamtDepth&&(i.lastBucket=a[i.hamtDepth],o=BG(i.lastBucket._posAtParent));let c=t.Links.find(f=>{if(f.Name==null)return!1;let d=f.Name.substring(0,2),h=f.Name.substring(2);return!(d!==o||h&&h!==e)});if(!c)return null;if(c.Name!=null&&c.Name.substring(2)===e)return c.Hash;i.hamtDepth++;let u=await r.get(c.Hash,n);return t=Dt(u),NG(t,e,r,i,n)},MG=NG;l();l();function yRe(t,e,r,i){let n=t.length,s=e+n;return r>=s||i<e?new Uint8Array(0):(i>=e&&i<s&&(t=t.slice(0,i-e)),r>=e&&r<s&&(t=t.slice(r-e)),t)}var wd=yRe;l();var Vb=N(vu()),gRe=(t,e,r)=>{if(e||(e=0),e<0)throw(0,Vb.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(e>t)throw(0,Vb.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(!r&&r!==0&&(r=t-e),r<0)throw(0,Vb.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return e+r>t&&(r=t-e),{offset:e,length:r}},bp=gRe;var dx=N(vu());Hs();async function*LG(t,e,r,i,n=0,s){if(e instanceof Uint8Array){let c=wd(e,n,r,i);return c.length&&(yield c),n+=c.length,n}if(e.Data==null)throw(0,dx.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let o;try{o=ct.unmarshal(e.Data)}catch(c){throw(0,dx.default)(c,"ERR_NOT_UNIXFS")}if(o.data&&o.data.length){let c=wd(o.data,n,r,i);c.length&&(yield c),n+=o.data.length}let a=n;for(let c=0;c<e.Links.length;c++){let u=e.Links[c],f=n+o.blockSizes[c];if(r>=a&&r<f||i>a&&i<=f||r<a&&i>f){let d=await t.get(u.Hash,{signal:s.signal}),h;switch(u.Hash.code){case Pt:h=await Dt(d);break;case Ci:h=d;break;case Ul:h=await Fl(d);break;default:throw Error(`Unsupported codec: ${u.Hash.code}`)}for await(let p of LG(t,h,r,i,n,s))n+=p.length,yield p}n=f,a=f+1}}var mRe=(t,e,r,i,n,s,o)=>{function a(c={}){let u=r.fileSize();if(u===void 0)throw new Error("File was a directory");let{offset:f,length:d}=bp(u,c.offset,c.length),h=f,p=f+d;return LG(o,e,h,p,0,c)}return a},hx=mRe;l();var bRe=(t,e,r,i,n,s,o)=>{async function*a(c={}){let u=c.offset||0,f=c.length||e.Links.length,d=e.Links.slice(u,f);for(let h of d){let p=await n(h.Hash,h.Name||"",`${i}/${h.Name||""}`,[],s+1,o,c);p.entry&&(yield p.entry)}}return a},qG=bRe;l();var vRe=(t,e,r,i,n,s,o)=>{function a(c={}){return jG(e,i,n,s,o,c)}return a};async function*jG(t,e,r,i,n,s){let o=t.Links;for(let a of o){let c=a.Name!=null?a.Name.substring(2):null;if(c)yield(await r(a.Hash,c,`${e}/${c}`,[],i+1,n,s)).entry;else{let u=await n.get(a.Hash);t=Dt(u);for await(let f of jG(t,e,r,i,n,s))yield f}}}var UG=vRe;var wRe=(t,e)=>{let r=t.Links.find(i=>i.Name===e);return r&&r.Hash},_Re={raw:hx,file:hx,directory:qG,"hamt-sharded-directory":UG,metadata:(t,e,r,i,n,s,o)=>()=>[],symlink:(t,e,r,i,n,s,o)=>()=>[]},ERe=async(t,e,r,i,n,s,o,a)=>{let c=await o.get(t,a),u=Dt(c),f,d;if(e||(e=t.toString()),u.Data==null)throw(0,zb.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{f=ct.unmarshal(u.Data)}catch(h){throw(0,zb.default)(h,"ERR_NOT_UNIXFS")}if(r||(r=e),i.length){let h;if(f&&f.type==="hamt-sharded-directory"?h=await MG(u,i[0],o):h=wRe(u,i[0]),!h)throw(0,zb.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let p=i.shift(),y=`${r}/${p}`;d={cid:h,toResolve:i,name:p||"",path:y}}return{entry:{type:f.isDirectory()?"directory":"file",name:e,path:r,cid:t,content:_Re[f.type](t,u,f,r,n,s,o),unixfs:f,depth:s,node:u,size:f.fileSize()},next:d}},FG=ERe;l();var KG=N(vu());var SRe=t=>{async function*e(r={}){let{offset:i,length:n}=bp(t.length,r.offset,r.length);yield wd(t,0,i,i+n)}return e},xRe=async(t,e,r,i,n,s,o,a)=>{if(i.length)throw(0,KG.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let c=await o.get(t,a);return{entry:{type:"raw",name:e,path:r,cid:t,content:SRe(c),depth:s,size:c.length,node:c}}},VG=xRe;l();Te();var zG=N(vu());var ARe=async(t,e,r,i,n,s,o,a)=>{let c=await o.get(t),u=Fl(c),f=u,d=r;for(;i.length;){let h=i[0];if(h in f){i.shift(),d=`${d}/${h}`;let p=J.asCID(f[h]);if(p)return{entry:{type:"object",name:e,path:r,cid:t,node:c,depth:s,size:c.length,content:async function*(){yield u}},next:{cid:p,name:h,path:d,toResolve:i}};f=f[h]}else throw(0,zG.default)(new Error(`No property named ${h} found in cbor node ${t}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:r,cid:t,node:c,depth:s,size:c.length,content:async function*(){yield u}}}},HG=ARe;l();var $G=N(vu());Nn();var IRe=t=>{async function*e(r={}){let{offset:i,length:n}=bp(t.length,r.offset,r.length);yield wd(t,0,i,i+n)}return e},TRe=async(t,e,r,i,n,s,o,a)=>{if(i.length)throw(0,$G.default)(new Error(`No link named ${r} found in raw node ${t}`),"ERR_NOT_FOUND");let c=await Pi(t.multihash.bytes);return{entry:{type:"identity",name:e,path:r,cid:t,content:IRe(c.digest),depth:s,size:c.digest.length,node:c.digest}}},GG=TRe;var RRe={[Pt]:FG,[Ci]:VG,[Ul]:HG,[Es.code]:GG};function YG(t,e,r,i,n,s,o){let a=RRe[t.code];if(!a)throw(0,WG.default)(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return a(t,e,r,i,YG,n,s,o)}var XG=YG;var QG=N(ss()),PRe=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),CRe=t=>{if(t instanceof Uint8Array)return{cid:J.decode(t),toResolve:[]};let e=J.asCID(t);if(e)return{cid:e,toResolve:[]};if(typeof t=="string"){t.indexOf("/ipfs/")===0&&(t=t.substring(6));let r=PRe(t);return{cid:J.parse(r[0]),toResolve:r.slice(1)}}throw(0,Hb.default)(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")};async function*px(t,e,r={}){let{cid:i,toResolve:n}=CRe(t),s=i.toString(),o=s,a=n.length;for(;;){let c=await XG(i,s,o,n,a,e,r);if(!c.entry&&!c.next)throw(0,Hb.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(c.entry&&(yield c.entry),!c.next)return;n=c.next.toResolve,i=c.next.cid,s=c.next.name,o=c.next.path}}async function fn(t,e,r={}){let i=await(0,QG.default)(px(t,e,r));if(!i)throw(0,Hb.default)(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return i}async function*$b(t,e,r={}){let i=await fn(t,e,r);if(!i)return;if(yield i,i.type==="directory")for await(let s of n(i,r))yield s;async function*n(s,o){for await(let a of s.content(o))yield a,!(a instanceof Uint8Array)&&a.type==="directory"&&(yield*n(a,o))}}Te();function ZG({repo:t,preload:e}){async function*r(i,n={}){if(i=S0(i),n.preload!==!1){let o=i.split("/");e(J.parse(o[0]))}let s=await fn(i,t.blocks,n);if(s.type==="directory")throw new Error("this dag node is a directory");if(!s.content)throw new Error("this dag node has no content");yield*s.content(n)}return ce(r)}l();var Op=N(Rt());Te();var sA=N(yW()),oA=N(Nr()),aA=N(rX()),cA=N(oo()),uA=N(nX()),sX=6;function oX({repo:t,preload:e}){async function*r(i,n={}){if(n.compressionLevel<0||n.compressionLevel>9)throw(0,Op.default)(new Error("Compression level must be between 1 and 9"),"ERR_INVALID_PARAMS");if(n.preload!==!1){let a;try{a=S0(i).split("/")}catch(c){throw(0,Op.default)(c,"ERR_INVALID_PATH")}e(J.parse(a[0]))}let s=J.asCID(i)||i,o=await fn(s,t.blocks,n);if(o.type==="file"||o.type==="raw"){let a=[];!n.compress||n.archive===!0?a.push([{header:{name:o.path,mode:o.type==="file"&&o.unixfs.mode,mtime:o.type==="file"&&o.unixfs.mtime?new Date(o.unixfs.mtime.secs*1e3):void 0,size:o.size,type:"file"},body:o.content()}],(0,sA.pack)(),c=>(0,cA.default)(c,u=>u.slice())):a.push(o.content),n.compress&&a.push(async function*(c){let u=await(0,uA.default)(c);yield aA.default.gzip(u,{level:n.compressionLevel||sX})}),yield*(0,oA.pipe)(...a);return}if(o.type==="directory"){let a=[$b(s,t.blocks,n),async function*(c){for await(let u of c){let f={header:{name:u.path,size:u.size}};if(u.type==="file")f.header.type="file",f.header.mode=u.unixfs.mode!=null?u.unixfs.mode:void 0,f.header.mtime=u.unixfs.mtime?new Date(u.unixfs.mtime.secs*1e3):void 0,f.body=u.content();else if(u.type==="raw")f.header.type="file",f.body=u.content();else if(u.type==="directory")f.header.type="directory",f.header.mode=u.unixfs.mode!=null?u.unixfs.mode:void 0,f.header.mtime=u.unixfs.mtime?new Date(u.unixfs.mtime.secs*1e3):void 0;else throw(0,Op.default)(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");yield f}},(0,sA.pack)(),c=>(0,cA.default)(c,u=>u.slice())];if(n.compress){if(!n.archive)throw(0,Op.default)(new Error("file is not regular"),"ERR_INVALID_PATH");n.compress&&a.push(async function*(c){let u=await(0,uA.default)(c);yield aA.default.gzip(u,{level:n.compressionLevel||sX})})}yield*(0,oA.pipe)(...a);return}throw(0,Op.default)(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS")}return ce(r)}l();var aX=N(Rt());Te();function cX({repo:t,preload:e}){async function*r(i,n={}){let s=S0(i),o=s.split("/");n.preload!==!1&&e(J.parse(o[0]));let a=J.asCID(s)||s,c=await fn(a,t.blocks,n);if(c.type==="file"){yield u_(c);return}if(c.type==="directory"){for await(let u of c.content())yield u_(u);return}throw(0,aX.default)(new Error(`Unknown UnixFS type ${c.type}`),"ERR_UNKNOWN_UNIXFS_TYPE")}return ce(r)}var fA=class{constructor({preload:e,repo:r,options:i}){let n=OG({preload:e,repo:r,options:i});this.addAll=n,this.add=a$({addAll:n}),this.cat=ZG({repo:r,preload:e}),this.get=oX({repo:r,preload:e}),this.ls=cX({repo:r,preload:e})}};l();l();var Cd="0.12.0",uX="568aeadd8f308cc230de06a956c1a9e6102094b6",fX="^0.152.0";function lX({repo:t}){async function e(r={}){let i=await t.version.get();return{version:Cd,commit:uX,repo:`${i}`,"ipfs-core":Cd,"interface-ipfs-core":fX}}return ce(e)}l();var dX=N(rt());tt();var hX=N(it());function pX({peerId:t,network:e}){async function r(i={}){i.peerId===t.toB58String()&&delete i.peerId;let n=e.try();if(!n){if(i.peerId)throw new df;return{id:t.toB58String(),publicKey:$e(t.pubKey.bytes,"base64pad"),addresses:[],agentVersion:`js-ipfs/${Cd}`,protocolVersion:"9000",protocols:[]}}let s=i.peerId?hX.default.createFromB58String(i.peerId.toString()):t,{libp2p:o}=n,a=i.peerId?o.peerStore.keyBook.get(s):s.pubKey,c=i.peerId?o.peerStore.addressBook.getMultiaddrsForPeer(s):o.multiaddrs,u=i.peerId?o.peerStore.protoBook.get(s):Array.from(o.upgrader.protocols.keys()),f=$e(o.peerStore.metadataBook.getValue(s,"AgentVersion")||new Uint8Array),d=$e(o.peerStore.metadataBook.getValue(s,"ProtocolVersion")||new Uint8Array),h=s.toB58String();return{id:h,publicKey:$e(a.bytes,"base64pad"),addresses:(c||[]).map(p=>{let y=p.toString();return y.endsWith(`/p2p/${h}`)?y:`${y}/p2p/${h}`}).sort().map(p=>new dX.Multiaddr(p)),agentVersion:f,protocolVersion:d,protocols:(u||[]).sort()}}return ce(r)}l();var mX=N(Ee());l();var Jr=N(lA());var kp={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:t=>((0,Jr.default)(t,"Discovery.MDNS.Enabled",!1),(0,Jr.default)(t,"Discovery.webRTCStar.Enabled",!1),t.Swarm={...t.Swarm||{},DisableNatPortMap:!0},t)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:t=>((0,Jr.default)(t,"Discovery.MDNS.Enabled",!0),(0,Jr.default)(t,"Discovery.webRTCStar.Enabled",!0),(0,Jr.default)(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!1}),t)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:t=>{let e=yu();return(0,Jr.default)(t,"Addresses.API",e.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),(0,Jr.default)(t,"Addresses.Gateway",e.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),(0,Jr.default)(t,"Addresses.Swarm",e.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),(0,Jr.default)(t,"Addresses.Delegates",[]),(0,Jr.default)(t,"Bootstrap",[]),(0,Jr.default)(t,"Discovery.MDNS.Enabled",!1),(0,Jr.default)(t,"Discovery.webRTCStar.Enabled",!1),(0,Jr.default)(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!0}),t}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:t=>{let e=yu();return(0,Jr.default)(t,"Addresses.API",e.Addresses.API),(0,Jr.default)(t,"Addresses.Gateway",e.Addresses.Gateway),(0,Jr.default)(t,"Addresses.Swarm",e.Addresses.Swarm),(0,Jr.default)(t,"Addresses.Delegates",e.Addresses.Delegates),(0,Jr.default)(t,"Bootstrap",e.Bootstrap),(0,Jr.default)(t,"Discovery.MDNS.Enabled",e.Discovery.MDNS.Enabled),(0,Jr.default)(t,"Discovery.webRTCStar.Enabled",e.Discovery.webRTCStar.Enabled),(0,Jr.default)(t,"Swarm",{...t.Swarm||{},DisableNatPortMap:!1}),t}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:t=>{let e=t.Swarm||{},r=e.ConnMgr||{};return r.LowWater=20,r.HighWater=40,e.ConnMgr=r,t.Swarm=e,t}},"default-power":{description:'Inverse of "lowpower" profile.',transform:t=>{let e=yu();return t.Swarm=e.Swarm,t}}};var aOe=(0,mX.default)("ipfs:core:config");function bX({repo:t}){return{getAll:ce(e),get:ce(r),set:ce(i),replace:ce(n),profiles:{apply:ce(s),list:ce(cOe)}};async function e(o={}){return t.config.getAll(o)}async function r(o,a){return o?t.config.get(o,a):Promise.reject(new Error("key argument is required"))}async function i(o,a,c){return t.config.set(o,a,c)}async function n(o,a){return t.config.replace(o,a)}async function s(o,a={dryRun:!1}){let{dryRun:c}=a,u=kp[o];if(!u)throw new Error(`No profile with name '${o}' exists`);try{let f=await t.config.getAll(a),d=JSON.parse(JSON.stringify(f));return d=u.transform(d),c||await t.config.replace(d,a),delete f.Identity.PrivKey,delete d.Identity.PrivKey,{original:f,updated:d}}catch(f){throw aOe(f),new Error(`Could not apply profile '${o}' to config: ${f.message}`)}}}async function cOe(t){return Object.keys(kp).map(e=>({name:e,description:kp[e].description}))}l();l();Te();l();fy();var h5=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),dA=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(let[r,i]of Object.entries(t)){let n=[...e,r];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let[s,o]of i.entries()){let a=[...n,s],c=J.asCID(o);c?yield[a.join("/"),c]:typeof o=="object"&&(yield*dA(o,a))}else{let s=J.asCID(i);s?yield[n.join("/"),s]:yield*dA(i,n)}}},hA=function*(t,e){if(t!=null)for(let[r,i]of Object.entries(t)){let n=[...e,r];if(yield n.join("/"),i!=null&&!(i instanceof Uint8Array)&&typeof i=="object"&&!J.asCID(i))if(Array.isArray(i))for(let[s,o]of i.entries()){let a=[...n,s];yield a.join("/"),typeof o=="object"&&!J.asCID(o)&&(yield*hA(o,a))}else yield*hA(i,n)}},uOe=(t,e)=>{let r=t;for(let[i,n]of e.entries()){if(r=r[n],r==null)throw new Error(`Object has no property at ${e.slice(0,i+1).map(o=>`[${JSON.stringify(o)}]`).join("")}`);let s=J.asCID(r);if(s)return{value:s,remaining:e.slice(i+1).join("/")}}return{value:r}},vX=class{constructor({cid:e,bytes:r,value:i}){if(!e||!r||typeof i=="undefined")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=i,this.asBlock=this,Object.defineProperties(this,{cid:h5(),bytes:h5(),value:h5(),asBlock:h5()})}links(){return dA(this.value,[])}tree(){return hA(this.value,[])}get(e="/"){return uOe(this.value,e.split("/").filter(Boolean))}};var Dp=({bytes:t,cid:e,value:r,codec:i})=>{let n=r!==void 0?r:i&&i.decode(t);if(n===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new vX({cid:e,bytes:t,value:n})};li();l();Te();l();var pA=N(Ss());function yA(t){let e=v9({version:1,roots:t}),r=pA.default.encode(e.length),i=new Uint8Array(r.length+e.length);return i.set(r,0),i.set(e,r.length),i}function wX(t){return{async setRoots(e){let r=yA(e);await t.write(r)},async writeBlock(e){let{cid:r,bytes:i}=e;await t.write(new Uint8Array(pA.default.encode(r.bytes.length+i.length))),await t.write(r.bytes),i.length&&await t.write(i)},async close(){return t.end()}}}l();function p5(){}function _X(){let t=[],e=null,r=p5,i=!1,n=null,s=p5,o=()=>(e||(e=new Promise(u=>{r=()=>{e=null,r=p5,u()}})),e),a={write(u){t.push(u);let f=o();return s(),f},async end(){i=!0;let u=o();return s(),u}},c={async next(){let u=t.shift();return u?(t.length===0&&r(),{done:!1,value:u}):i?(r(),{done:!0,value:void 0}):(n||(n=new Promise(f=>{s=()=>(n=null,s=p5,f(c.next()))})),n)}};return{writer:a,iterator:c}}l();var $f=N(Ss());Te();Nn();var gA={SHA2_256:18,LENGTH:32,DAG_PB:112};async function y5(t){let e=await t.upTo(8),r=$f.default.decode(e);return t.seek($f.default.decode.bytes),r}async function mA(t){let e=await y5(t);if(e===0)throw new Error("Invalid CAR header (zero length)");let r=await t.exactly(e);t.seek(e);let i=Fl(r);if(i==null||Array.isArray(i)||typeof i!="object")throw new Error("Invalid CAR header format");if(i.version!==1)throw typeof i.version=="string"?new Error(`Invalid CAR version: "${i.version}"`):new Error(`Invalid CAR version: ${i.version}`);if(!Array.isArray(i.roots))throw new Error("Invalid CAR header format");if(Object.keys(i).filter(n=>n!=="roots"&&n!=="version").length)throw new Error("Invalid CAR header format");return i}async function fOe(t){let e=await t.upTo(8);$f.default.decode(e);let r=$f.default.decode.bytes,i=$f.default.decode(e.subarray($f.default.decode.bytes)),n=$f.default.decode.bytes,s=r+n+i,o=await t.exactly(s);return t.seek(s),o}async function lOe(t){let e=await t.exactly(2);if(e[0]===gA.SHA2_256&&e[1]===gA.LENGTH){let o=await t.exactly(34);t.seek(34);let a=Pi(o);return J.create(0,gA.DAG_PB,a)}let r=await y5(t);if(r!==1)throw new Error(`Unexpected CID version (${r})`);let i=await y5(t),n=await fOe(t),s=Pi(n);return J.create(r,i,s)}async function EX(t){let e=t.pos,r=await y5(t);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=t.pos-e;let i=await lOe(t),n=r-(t.pos-e);return{cid:i,length:r,blockLength:n}}async function dOe(t){let{cid:e,blockLength:r}=await EX(t),i=await t.exactly(r);return t.seek(r),{bytes:i,cid:e}}async function hOe(t){let e=t.pos,{cid:r,length:i,blockLength:n}=await EX(t),s={cid:r,length:i,blockLength:n,offset:e,blockOffset:t.pos};return t.seek(s.blockLength),s}function SX(t){let e=mA(t);return{header:()=>e,async*blocks(){for(await e;(await t.upTo(8)).length>0;)yield await dOe(t)},async*blocksIndex(){for(await e;(await t.upTo(8)).length>0;)yield await hOe(t)}}}function g5(t){let e=0;return{async upTo(r){return t.subarray(e,e+Math.min(r,t.length-e))},async exactly(r){if(r>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+r)},seek(r){e+=r},get pos(){return e}}}function pOe(t){let e=0,r=0,i=0,n=new Uint8Array(0),s=async o=>{r=n.length-i;let a=[n.subarray(i)];for(;r<o;){let u=await t();if(u==null)break;r<0?u.length>r&&a.push(u.subarray(-r)):a.push(u),r+=u.length}n=new Uint8Array(a.reduce((u,f)=>u+f.length,0));let c=0;for(let u of a)n.set(u,c),c+=u.length;i=0};return{async upTo(o){return n.length-i<o&&await s(o),n.subarray(i,i+Math.min(n.length-i,o))},async exactly(o){if(n.length-i<o&&await s(o),n.length-i<o)throw new Error("Unexpected end of data");return n.subarray(i,i+o)},seek(o){e+=o,i+=o},get pos(){return e}}}function xX(t){let e=t[Symbol.asyncIterator]();async function r(){let i=await e.next();return i.done?null:i.value}return pOe(r)}var Bp=class{constructor(e,r){this._encoder=r,this._mutex=r.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let r=J.asCID(e.cid);if(!r)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:r,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=yOe(e);let{encoder:r,iterator:i}=AX(),n=new Bp(e,r),s=new bA(i);return{writer:n,out:s}}static createAppender(){let{encoder:e,iterator:r}=AX();e.setRoots=()=>Promise.resolve();let i=new Bp([],e),n=new bA(r);return{writer:i,out:n}}static async updateRootsInBytes(e,r){let i=g5(e);await mA(i);let n=yA(r);if(i.pos!==n.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${i.pos} bytes, new header is ${n.length} bytes)`);return e.set(n,0),e}},bA=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function AX(){let t=_X(),{writer:e,iterator:r}=t;return{encoder:wX(e),iterator:r}}function yOe(t){if(t===void 0)return[];if(!Array.isArray(t)){let r=J.asCID(t);if(!r)throw new TypeError("roots must be a single CID or an array of CIDs");return[r]}let e=[];for(let r of t){let i=J.asCID(r);if(!i)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(i)}return e}var IX=N(Ee());Hs();R9();var TX=(0,IX.default)("ipfs:components:dag:import"),gOe=[Ci,I9];function RX({repo:t,preload:e,codecs:r}){async function*i(n,s={}){s.preload!==!1&&e(n);let o=J.asCID(n);if(!o)throw new Error(`Unexpected error converting CID type: ${n}`);TX(`Exporting ${o} as car`);let{writer:a,out:c}=await Bp.create([o]),u=null;(async()=>{try{await PX(t,{signal:s.signal,timeout:s.timeout},o,a,r),a.close()}catch(f){u=f}})();for await(let f of c){if(u)break;yield f}if(u)throw u}return ce(i)}async function PX(t,e,r,i,n,s=new Set){let o=r.toString(pt);if(s.has(o))return;let a=await mOe(t,e,r,n);TX(`Adding block ${r} to car`),await i.put(a),s.add(o);for(let c of a.links)await PX(t,e,c,i,n,s)}async function mOe(t,e,r,i){let n=await t.blocks.get(r,e),s=[],o=await i.getCodec(r.code);if(o)s=[...Dp({bytes:n,cid:r,codec:o}).links()].map(c=>c[1]);else if(!gOe.includes(r.code))throw new Error(`Can't decode links in block with codec 0x${r.code.toString(16)} to form complete DAG`);return{cid:r,bytes:n,links:s}}l();var OX=N(Od()),kX=N(ss());var DX=N(Rt());function BX({codecs:t,repo:e,preload:r}){return ce(async function(s,o={}){if(o.preload!==!1&&r(s),o.path){let d=o.localResolve?await(0,OX.default)(vf(s,o.path,t,e,o)):await(0,kX.default)(vf(s,o.path,t,e,o));if(!d)throw(0,DX.default)(new Error("Not found"),"ERR_NOT_FOUND");return d}let a=await t.getCodec(s.code),c=await e.blocks.get(s,o);return{value:a.decode(c),remainderPath:""}})}l();l();var vA=class{constructor(e,r,i){this._version=e,this._roots=r,this._iterable=i,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},Np=class extends vA{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:r,roots:i,iterator:n}=await NX(e);return new Np(r,i,n)}static async fromIterable(e){let{version:r,roots:i,iterator:n}=await MX(e);return new Np(r,i,n)}},m5=class extends vA{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;let e=this._iterable[Symbol.asyncIterator]();return{async next(){let r=await e.next();return r.done?r:{done:!1,value:r.value.cid}}}}static async fromBytes(e){let{version:r,roots:i,iterator:n}=await NX(e);return new m5(r,i,n)}static async fromIterable(e){let{version:r,roots:i,iterator:n}=await MX(e);return new m5(r,i,n)}};async function NX(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return LX(g5(t))}async function MX(t){if(!t||typeof t[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return LX(xX(t))}async function LX(t){let e=SX(t),{version:r,roots:i}=await e.header();return{version:r,roots:i,iterator:e.blocks()}}var qX=N(gp()),jX=N(fc()),UX=N(oo()),FX=N(Ee()),KX=(0,FX.default)("ipfs:components:dag:import");function VX({repo:t}){async function*e(r,i={}){let n=await t.gcLock.readLock();try{let s={signal:i.signal,timeout:i.timeout},o=(0,qX.default)(r),{value:a,done:c}=await o.peek();if(c)return;a&&o.push(a);let u;a instanceof Uint8Array?u=[o]:u=o;for await(let f of u){let d=await vOe(t,s,f);if(i.pinRoots!==!1)for(let h of d){let p="";try{await t.blocks.has(h)?(KX(`Pinning root ${h}`),await t.pins.pinRecursively(h)):p="blockstore: block not found"}catch(y){p=y.message}yield{root:{cid:h,pinErrorMsg:p}}}}}finally{n()}}return ce(e)}async function vOe(t,e,r){let i=await Np.fromIterable(r),n=await i.getRoots();return await(0,jX.default)(t.blocks.putMany((0,UX.default)(i,({cid:s,bytes:o})=>(KX(`Import block ${s}`),{key:s,value:o})),{signal:e.signal})),n}l();Te();function zX({repo:t,codecs:e,hashers:r,preload:i}){async function n(s,o={}){let a=o.pin?await t.gcLock.readLock():null;try{let c=o.format||"dag-cbor",u=o.version!=null?o.version:c==="dag-pb"?0:1,f=await e.getCodec(c);if(!f)throw new Error(`Unknown codec ${o.format}, please configure additional BlockCodecs for this IPFS instance`);let d=await r.getHasher(o.hashAlg||"sha2-256");if(!d)throw new Error(`Unknown hash algorithm ${o.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);let h=f.encode(s),p=await d.digest(h),y=J.create(u,f.code,p);return await t.blocks.put(y,h,{signal:o.signal}),o.pin&&await t.pins.pinRecursively(y),o.preload!==!1&&i(y),y}finally{a&&a()}}return ce(n)}l();function HX({repo:t,codecs:e,preload:r}){async function i(n,s={}){let{cid:o}=tu(n);return s.preload!==!1&&r(o),bf(t,e,n,s)}return ce(i)}var wA=class{constructor({repo:e,codecs:r,hashers:i,preload:n}){this.export=RX({repo:e,preload:n,codecs:r}),this.get=BX({codecs:r,repo:e,preload:n}),this.import=VX({repo:e}),this.resolve=HX({repo:e,codecs:r,preload:n}),this.put=zX({repo:e,codecs:r,hashers:i,preload:n})}};l();var QX=N(v5()),EA=N(Ee()),ZX=N(WX()),JX=N(_n());l();var YX=N(Iy()),_A=N(Ee()),w5=N(Fa()),SOe=Object.assign((0,_A.default)("ipfs:preload"),{error:(0,_A.default)("ipfs:preload:error")}),xOe=w5.default.default?w5.default.default:w5.default,AOe=new xOe({concurrency:4});function XX(t,e={}){return SOe(t),AOe.add(async()=>{let i=(await YX.default.post(t,{signal:e.signal})).body.getReader();try{for(;;){let{done:n}=await i.read();if(n)return}}finally{i.releaseLock()}})}var eQ=N(x0()),Lg=Object.assign((0,EA.default)("ipfs:preload"),{error:(0,EA.default)("ipfs:preload:error")});function tQ(t={}){if(t.enabled=Boolean(t.enabled),t.addresses=t.addresses||[],t.cache=t.cache||1e3,!t.enabled||!t.addresses.length)return Lg("preload disabled"),Object.assign(()=>{},{start:()=>{},stop:()=>{}});let e=!0,r=[],i=t.addresses.map(QX.default),n=(0,eQ.default)(t.cache),s=async o=>{try{if(e)throw new Error(`preload ${o} but preloader is not started`);let a=o.toString();if(n.has(a))return;n.set(a,!0);let c=(0,ZX.default)(i),u=!1,f=Date.now();for(let d of c){if(e)throw new Error(`preload aborted for ${a}`);let h;try{h=new JX.AbortController,r=r.concat(h),await XX(`${d}/api/v0/refs?r=true&arg=${encodeURIComponent(a)}`,{signal:h.signal}),u=!0}catch(p){p.type!=="aborted"&&Lg.error(p)}finally{r=r.filter(p=>p!==h)}if(u)break}Lg(`${u?"":"un"}successfully preloaded ${a} in ${Date.now()-f}ms`)}catch(a){Lg.error(a)}};return s.start=()=>{e=!1},s.stop=()=>{e=!0,Lg(`aborting ${r.length} pending preload request(s)`),r.forEach(o=>o.abort()),r=[]},s}l();var SA=N(Ee()),_5=Object.assign((0,SA.default)("ipfs:mfs-preload"),{error:(0,SA.default)("ipfs:mfs-preload:error")});function rQ({preload:t,files:e,options:r={}}){if(r.interval=r.interval||30*1e3,!r.enabled){_5("MFS preload disabled");let o=async()=>{};return{start:o,stop:o}}let i="",n,s=async()=>{try{let o=await e.stat("/"),a=o.cid.toString();i!==a&&(_5(`preloading updated MFS root ${i} -> ${o.cid}`),await t(o.cid),i=a)}catch(o){_5.error("failed to preload MFS root",o)}finally{n=setTimeout(s,r.interval)}};return{async start(){let o=await e.stat("/");i=o.cid.toString(),_5(`monitoring MFS root ${o.cid}`),n=setTimeout(s,r.interval)},stop(){clearTimeout(n)}}}l();l();var PQ=N(PA()),S5;function jg(t=!1){if(S5)return S5;let e=(0,PQ.default)({singleProcess:t});return S5={readLock:r=>async(...i)=>{let n=await e.readLock();try{return await r.apply(null,i)}finally{n()}},writeLock:r=>async(...i)=>{let n=await e.writeLock();try{return await r.apply(null,i)}finally{n()}}},S5}var qA=N(_0());l();l();l();Te();mi();var CQ=N(Ee()),CA=N(Rt());var OQ=(0,CQ.default)("ipfs:mfs:utils:with-mfs-root");async function Lp(t,e){if(e&&e.signal&&e.signal.aborted)throw(0,CA.default)(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await t.repo.datastore.open();let r;try{let i=await t.repo.datastore.get(Ey);r=J.decode(i)}catch(i){if(i.code!=="ERR_NOT_FOUND")throw i;OQ("Creating new MFS root");let n=ot({Data:new ct({type:"directory"}).marshal(),Links:[]}),s=await Ir.digest(n);if(r=J.createV0(s),await t.repo.blocks.put(r,n),e&&e.signal&&e.signal.aborted)throw(0,CA.default)(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await t.repo.datastore.put(Ey,r.bytes)}return OQ(`Loaded MFS root /ipfs/${r}`),r}l();function qp(t=""){return(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}var OA=N(Rt());Te();var kA="ipfs",ei=async(t,e,r)=>{let i=await Lp(t,r),n={entryType:"file"},s="";if(J.asCID(e)?s=`/ipfs/${e}`:s=e.toString(),s=s.trim(),s=s.replace(/(\/\/+)/g,"/"),s.endsWith("/")&&s.length>1&&(s=s.substring(0,s.length-1)),!s)throw(0,OA.default)(new Error("paths must not be empty"),"ERR_NO_PATH");if(s.substring(0,1)!=="/")throw(0,OA.default)(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");s.substring(s.length-1)==="/"&&(s=s.substring(0,s.length-1));let o=qp(s);if(o[0]===kA){let c;o.length===2?c=`/${o.join("/")}`:c=`/${o.slice(0,o.length-1).join("/")}`,n={type:"ipfs",depth:o.length-2,entryType:"file",mfsPath:`/${o.join("/")}`,mfsDirectory:c,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}else{let c=`/${kA}/${i}${o.length?"/"+o.join("/"):""}`,u=`/${kA}/${i}/${o.slice(0,o.length-1).join("/")}`;n={type:"mfs",depth:o.length,entryType:"file",mfsDirectory:u,mfsPath:c,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}let a=n.type==="mfs"?n.mfsPath:n.path;try{let c=await fn(a,t.repo.blocks,r);n.cid=c.cid,n.mfsPath=`/ipfs/${c.path}`,n.entryType=c.type,n.content=c.content,(n.entryType==="file"||n.entryType==="directory")&&(c.type==="file"||c.type==="directory")&&(n.unixfs=c.unixfs)}catch(c){if(c.code!=="ERR_NOT_FOUND")throw c}return n.exists=Boolean(n.cid),n};var kQ=N(Ee()),DQ=N(Rt());var LOe=Tt.bind({ignoreUndefined:!0}),qOe=(0,kQ.default)("ipfs:mfs:stat"),jOe={withLocal:!1};function Yf(t){async function e(r,i={}){i=LOe(jOe,i),qOe(`Fetching stats for ${r}`);let{type:n,cid:s,mfsPath:o}=await ei(t,r,i),a=n==="ipfs"&&s?s:o,c;try{c=await fn(a,t.repo.blocks)}catch(u){throw u.code==="ERR_NOT_FOUND"?(0,DQ.default)(new Error(`${r} does not exist`),"ERR_NOT_FOUND"):u}if(!BQ[c.type])throw new Error(`Cannot stat codec ${c.cid.code}`);return BQ[c.type](c)}return ce(e)}var BQ={raw:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:t=>{let e={cid:t.cid,type:"file",size:t.unixfs.fileSize(),cumulativeSize:ot(t.node).length+(t.node.Links||[]).reduce((r,i)=>r+(i.Tsize||0),0),blocks:t.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:t.unixfs.mode};return t.unixfs.mtime&&(e.mtime=t.unixfs.mtime),e},directory:t=>{let e={cid:t.cid,type:"directory",size:0,cumulativeSize:ot(t.node).length+(t.node.Links||[]).reduce((r,i)=>r+(i.Tsize||0),0),blocks:t.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:t.unixfs.mode};return t.unixfs.mtime&&(e.mtime=t.unixfs.mtime),e},object:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:t=>({cid:t.cid,size:t.node.length,cumulativeSize:t.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})};l();var iZ=N(Ee()),Vp=N(Rt());l();var NQ=N(Ee()),UOe=(0,NQ.default)("ipfs:mfs:utils:to-trail");async function bc(t,e){UOe(`Creating trail for path ${e}`);let r=[];for await(let i of px(e,t.repo.blocks))r.push({name:i.name,cid:i.cid,size:i.size,type:i.type});return r}l();Te();var KQ=N(Ee());l();l();Te();mi();var x5=async(t,e,r)=>{r.codec||(r.codec=Mn),r.hasher||(r.hasher=Ir),r.cidVersion===void 0&&(r.cidVersion=1),r.codec===Mn&&r.hasher!==Ir&&(r.cidVersion=1);let i=await r.hasher.digest(t),n=J.create(r.cidVersion,r.codec.code,i);return r.onlyHash||await e.put(n,t,{signal:r.signal}),n};var R5=N(mg());l();var A5=vd.code,I5=8;async function T5(t){return(await vd.encode(t)).slice(0,8).reverse()}var MQ=class{constructor(e,r){this.options=r||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,r){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},Ug=class extends MQ{constructor(e,r){super(e,r);this._bucket=(0,R5.createHAMT)({hashFn:T5,bits:I5})}async put(e,r){await this._bucket.put(e,r)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:r}of this._bucket.eachLeafSeries())yield{key:e,child:r}}async*flush(e){yield*LQ(this._bucket,e,this,this.options)}};async function*LQ(t,e,r,i){let n=t._children,s=[],o=0;for(let p=0;p<n.length;p++){let y=n.get(p);if(!y)continue;let m=p.toString(16).toUpperCase().padStart(2,"0");if(y instanceof R5.Bucket){let w;for await(let b of await LQ(y,e,null,i))w=b;if(!w)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:m,Tsize:w.size,Hash:w.cid}),o+=w.size}else if(typeof y.value.flush=="function"){let w=y.value,b;for await(let I of w.flush(e))b=I,yield b;let S=m+y.key;s.push({Name:S,Tsize:b.size,Hash:b.cid}),o+=b.size}else{let w=y.value;if(!w.cid)continue;let b=m+y.key,S=w.size;s.push({Name:b,Tsize:S,Hash:w.cid}),o+=S}}let a=Uint8Array.from(n.bitField().reverse()),u={Data:new ct({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:A5,mtime:r&&r.mtime,mode:r&&r.mode}).marshal(),Links:s},f=ot(zi(u)),d=await x5(f,e,i),h=f.length+o;yield{cid:d,node:u,size:h}}l();var jp=N(mg());var qQ=N(Ee());var jQ=N(ss());Te();var Fg=(0,qQ.default)("ipfs:mfs:core:utils:hamt-utils"),Up=async(t,e,r,i)=>{if(!i.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");let n=Uint8Array.from(r._children.bitField().reverse()),s=ct.unmarshal(i.parent.Data),o=new ct({type:"hamt-sharded-directory",data:n,fanout:r.tableSize(),hashType:A5,mode:s.mode,mtime:s.mtime}),a=await t.hashers.getHasher(i.hashAlg),c={Data:o.marshal(),Links:e.sort((h,p)=>(h.Name||"").localeCompare(p.Name||""))},u=ot(c),f=await a.digest(u),d=J.create(i.cidVersion,Pt,f);return i.flush&&await t.repo.blocks.put(d,u),{node:c,cid:d,size:e.reduce((h,p)=>h+(p.Tsize||0),u.length)}},DA=async(t,e,r,i,n)=>{let s=new jp.Bucket({hash:r._options.hash,bits:r._options.bits},i,n);return i._putObjectAt(n,s),await Kg(t,e,s,r),s},BA=async t=>{let e=(0,jp.createHAMT)({hashFn:T5,bits:I5});return await Promise.all(t.map(async r=>{let i=r.Name||"";if(i.length===2){let n=parseInt(i,16),s=new jp.Bucket({hash:e._options.hash,bits:e._options.bits},e,n);return e._putObjectAt(n,s),Promise.resolve()}return e.put(i.substring(2),{size:r.Tsize,cid:r.Hash})})),e},Kg=async(t,e,r,i)=>{await Promise.all(e.map(async n=>{let s=n.Name||"";if(s.length===2){Fg("Populating sub bucket",s);let o=parseInt(s,16),a=await t.repo.blocks.get(n.Hash),c=Dt(a),u=new jp.Bucket({hash:i._options.hash,bits:i._options.bits},r,o);return r._putObjectAt(o,u),await Kg(t,c.Links,u,i),Promise.resolve()}return i.put(s.substring(2),{size:n.Tsize,cid:n.Hash})}))},Dd=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),UQ=async(t,e,r)=>{let i=await BA(r.Links),n=await i._findNewBucketAndPos(e),s=[{bucket:n.bucket,prefix:Dd(n.pos)}],o=n.bucket;for(;o!==i;)s.push({bucket:o,prefix:Dd(o._posAtParent)}),o=o._parent;s.reverse(),s[0].node=r;for(let a=0;a<s.length;a++){let c=s[a];if(!c.node)throw new Error("Could not generate HAMT path");let u=c.node.Links.filter(p=>(p.Name||"").substring(0,2)===c.prefix).pop();if(!u){Fg(`Link ${c.prefix}${e} will be added`);continue}if(u.Name===`${c.prefix}${e}`){Fg(`Link ${c.prefix}${e} will be replaced`);continue}Fg(`Found subshard ${c.prefix}`);let f=await t.repo.blocks.get(u.Hash),d=Dt(f);if(!s[a+1]){Fg(`Loaded new subshard ${c.prefix}`),await DA(t,d.Links,i,c.bucket,parseInt(c.prefix,16));let p=await i._findNewBucketAndPos(e);s.push({bucket:p.bucket,prefix:Dd(p.pos),node:d});continue}let h=s[a+1];await Kg(t,d.Links,h.bucket,i),h.node=d}return await i.put(e,!0),s.reverse(),{rootBucket:i,path:s}},FQ=async(t,e,r={})=>{let i=new Ug({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:r.mtime,mode:r.mode},r);for(let s=0;s<e.length;s++)await i._bucket.put(e[s].name,{size:e[s].size,cid:e[s].cid});let n=await(0,jQ.default)(i.flush(t.repo.blocks));if(!n)throw new Error("Flushing shard yielded no result");return n};var vc=N(Rt()),VQ=N(ss()),wc=(0,KQ.default)("ipfs:mfs:core:utils:add-link");async function ho(t,e){let r=e.parent;if(e.parentCid){let n=J.asCID(e.parentCid);if(n===null)throw(0,vc.default)(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(n.code!==Pt)throw(0,vc.default)(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");wc(`Loading parent node ${n}`);let s=await t.repo.blocks.get(n);r=Dt(s)}if(!r)throw(0,vc.default)(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!e.cid)throw(0,vc.default)(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!e.name)throw(0,vc.default)(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!e.size&&e.size!==0)throw(0,vc.default)(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!r.Data)throw(0,vc.default)(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");let i=ct.unmarshal(r.Data);return i.type==="hamt-sharded-directory"?(wc("Adding link to sharded directory"),VOe(t,{...e,parent:r})):r.Links.length>=e.shardSplitThreshold?(wc("Converting directory to sharded directory"),FOe(t,{...e,parent:r,mtime:i.mtime,mode:i.mode})):(wc(`Adding ${e.name} (${e.cid}) to regular directory`),KOe(t,{...e,parent:r}))}var FOe=async(t,e)=>{let r=await FQ(t,e.parent.Links.map(i=>({name:i.Name||"",size:i.Tsize||0,cid:i.Hash})).concat({name:e.name,size:e.size,cid:e.cid}),e);return wc(`Converted directory to sharded directory ${r.cid}`),r},KOe=async(t,e)=>{let r=e.parent.Links.filter(u=>u.Name!==e.name);if(r.push({Name:e.name,Tsize:e.size,Hash:e.cid}),!e.parent.Data)throw(0,vc.default)(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");let i=ct.unmarshal(e.parent.Data),n;if(i.mtime){let u=Date.now(),f=Math.floor(u/1e3);i.mtime={secs:f,nsecs:(u-f*1e3)*1e3},n=i.marshal()}else n=e.parent.Data;e.parent=zi({Data:n,Links:r});let s=await t.hashers.getHasher(e.hashAlg),o=ot(e.parent),a=await s.digest(o),c=J.create(e.cidVersion,Pt,a);return e.flush&&await t.repo.blocks.put(c,o),{node:e.parent,cid:c,size:o.length}},VOe=async(t,e)=>{let{shard:r,path:i}=await zOe(t,e),n=await(0,VQ.default)(r.flush(t.repo.blocks));if(!n)throw new Error("No result from flushing shard");let s=await t.repo.blocks.get(n.cid),o=Dt(s),a=e.parent.Links.filter(u=>(u.Name||"").substring(0,2)!==i[0].prefix),c=o.Links.find(u=>(u.Name||"").substring(0,2)===i[0].prefix);if(!c)throw new Error(`No link found with prefix ${i[0].prefix}`);return a.push(c),Up(t,a,i[0].bucket,e)},zOe=async(t,e)=>{let r={name:e.name,cid:e.cid,size:e.size};if(!e.parent.Data)throw(0,vc.default)(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");let i=await BA(e.parent.Links),n=ct.unmarshal(e.parent.Data),s=new Ug({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:n.mode},e);s._bucket=i,n.mtime&&(s.mtime={secs:Math.round(Date.now()/1e3)});let o=await i._findNewBucketAndPos(r.name),a=HOe(o);a[0].node=e.parent;let c=0;for(;c<a.length;){let u=a[c];c++;let f=u.node;if(!f)throw new Error("Segment had no node");let d=f.Links.find(m=>(m.Name||"").substring(0,2)===u.prefix);if(!d){wc(`Link ${u.prefix}${r.name} will be added`),c=a.length;break}if(d.Name===`${u.prefix}${r.name}`){wc(`Link ${u.prefix}${r.name} will be replaced`),c=a.length;break}if((d.Name||"").length>2){wc(`Link ${d.Name} ${d.Hash} will be replaced with a subshard`),c=a.length;break}wc(`Found subshard ${u.prefix}`);let h=await t.repo.blocks.get(d.Hash),p=Dt(h);if(!a[c]){wc(`Loaded new subshard ${u.prefix}`),await DA(t,p.Links,i,u.bucket,parseInt(u.prefix,16));let m=await i._findNewBucketAndPos(r.name);a.push({bucket:m.bucket,prefix:Dd(m.pos),node:p});break}let y=a[c];await Kg(t,p.Links,y.bucket,i),y.node=p}return await s._bucket.put(r.name,{size:r.size,cid:r.cid}),{shard:s,path:a}},HOe=t=>{let e=[{bucket:t.bucket,prefix:Dd(t.pos)}],r=t.bucket._parent,i=t.bucket._posAtParent;for(;r;)e.push({bucket:r,prefix:Dd(i)}),i=r._posAtParent,r=r._parent;return e.reverse(),e};l();var zQ=N(Ee());var HQ=(0,zQ.default)("ipfs:mfs:utils:update-tree"),$Oe={shardSplitThreshold:1e3};async function Ps(t,e,r){r=Object.assign({},$Oe,r),HQ("Trail",e),e=e.slice().reverse();let i=0,n;for await(let o of t.repo.blocks.getMany(e.map(a=>a.cid))){let a=Dt(o),c=e[i].cid,u=e[i].name;if(i++,!n){n={cid:c,name:u,size:o.length};continue}let f=await ho(t,{parent:a,name:n.name,cid:n.cid,size:n.size,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,hashAlg:r.hashAlg,cidVersion:r.cidVersion});n={cid:f.cid,name:u,size:f.size}}let{cid:s}=n;return HQ(`Final CID ${s}`),s}l();var $Q=N(Ee());var GQ=N(Rt()),GOe=(0,$Q.default)("ipfs:mfs:utils:update-mfs-root");async function Cs(t,e,r){if(r&&r.signal&&r.signal.aborted)throw(0,GQ.default)(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return GOe(`New MFS root will be ${e}`),await t.repo.datastore.put(Ey,e.bytes),e}Te();var nZ=N(Nr());var sZ=N(ss());l();l();var Bd=N(Rt()),YQ=N(Ee());l();Te();async function WQ(t,e,r){let i=new ct({type:e,mode:r.mode,mtime:r.mtime}),n=await t.hashers.getHasher(r.hashAlg),s={Data:i.marshal(),Links:[]},o=ot(s),a=await n.digest(o),c=J.create(r.cidVersion,Pt,a);return r.flush&&await t.repo.blocks.put(c,o),{cid:c,node:s}}var WOe=Tt.bind({ignoreUndefined:!0}),XQ=(0,YQ.default)("ipfs:mfs:mkdir"),YOe={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function Nd(t){async function e(r,i={}){let n=WOe(YOe,i);if(!r)throw new Error("no path given to Mkdir");if(r=r.trim(),r==="/"){if(n.parents)return;throw(0,Bd.default)(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if(r.substring(0,1)!=="/")throw(0,Bd.default)(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");XQ(`Creating ${r}`);let s=qp(r);if(s[0]==="ipfs")throw(0,Bd.default)(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");let o=await Lp(t,n),a,c=[],u=await WQ(t,"directory",n);for(let d=0;d<=s.length;d++){let h=s.slice(0,d),p=`/ipfs/${o}/${h.join("/")}`;try{if(a=await fn(p,t.repo.blocks),a.type!=="file"&&a.type!=="directory")throw(0,Bd.default)(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(d===s.length){if(n.parents)return;throw(0,Bd.default)(new Error("file already exists"),"ERR_ALREADY_EXISTS")}c.push({name:a.name,cid:a.cid})}catch(y){if(y.code==="ERR_NOT_FOUND"){if(d<s.length&&!n.parents)throw(0,Bd.default)(new Error(`Intermediate directory path ${p} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await XOe(t,h[h.length-1],u,c[c.length-1],c,n)}else throw y}}let f=await Ps(t,c,n);await Cs(t,f,n)}return ce(e)}var XOe=async(t,e,r,i,n,s)=>{XQ(`Adding empty dir called ${e} to ${i.cid}`);let o=await ho(t,{parent:i.node,parentCid:i.cid,size:0,cid:r.cid,name:e,hashAlg:s.hashAlg,cidVersion:s.cidVersion,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold});n[n.length-1].cid=o.cid,n.push({name:e,cid:r.cid})};var QQ=N(Ee()),Xf=N(Rt());var QOe=Tt.bind({ignoreUndefined:!0}),P5=(0,QQ.default)("ipfs:mfs:cp"),ZOe={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function Fp(t){async function e(r,i,n={}){let s=QOe(ZOe,n);Array.isArray(r)||(r=[r]);let o=await Promise.all(r.map(h=>ei(t,h,s))),a=await ei(t,i,s);if(!o.length||!a)throw(0,Xf.default)(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");let c=o.find(h=>!h.exists);if(c)throw(0,Xf.default)(new Error(`${c.path} does not exist`),"ERR_INVALID_PARAMS");let u=ZQ(a);if(a.exists){if(P5("Destination exists"),o.length===1&&!u)throw(0,Xf.default)(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(P5("Destination does not exist"),o.length>1){if(!s.parents)throw(0,Xf.default)(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await Nd(t)(a.path,s),a=await ei(t,a.path,s)}else if(a.parts.length>1){let h=`/${a.parts.slice(0,-1).join("/")}`;try{await Yf(t)(h,s)}catch(p){if(p.code!=="ERR_NOT_FOUND")throw p;if(!s.parents)throw(0,Xf.default)(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await Nd(t)(h,s),a=await ei(t,a.path,s)}}let f=ZQ(a)?a.mfsPath:a.mfsDirectory,d=await bc(t,f);if(o.length===1){let h=o.pop();if(!h)throw(0,Xf.default)(new Error("could not find source"),"ERR_INVALID_PARAMS");let p=u?h.name:a.name;return P5(`Only one source, copying to destination ${u?"directory":"file"} ${p}`),JOe(t,h,p,d,s)}return P5("Multiple sources, wrapping in a directory"),eke(t,o,a,d,s)}return ce(e)}var ZQ=t=>t.unixfs&&t.unixfs.type&&t.unixfs.type.includes("directory"),JOe=async(t,e,r,i,n)=>{let s=i.pop();if(!s)throw(0,Xf.default)(new Error("destination had no parent"),"ERR_INVALID_PARAMS");s=await JQ(t,e,r,s,n),i.push(s);let o=await Ps(t,i,n);await Cs(t,o,n)},eke=async(t,e,r,i,n)=>{for(let o=0;o<e.length;o++){let a=e[o];r=await JQ(t,a,a.name,r,n)}i[i.length-1]=r;let s=await Ps(t,i,n);await Cs(t,s,n)},JQ=async(t,e,r,i,n)=>{let s=await t.repo.blocks.get(e.cid),{node:o,cid:a,size:c}=await ho(t,{parentCid:i.cid,size:s.length,cid:e.cid,name:r,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold});return i.node=o,i.cid=a,i.size=c,i};l();var Vg=N(Rt());l();Te();var eZ=N(Ee());var Qf=N(Rt()),Zf=(0,eZ.default)("ipfs:mfs:core:utils:remove-link");async function tZ(t,e){let r=e.parent;if(e.parentCid){let n=J.asCID(e.parentCid);if(n===null)throw(0,Qf.default)(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");Zf(`Loading parent node ${n}`);let s=await t.repo.blocks.get(n);r=Dt(s)}if(!r)throw(0,Qf.default)(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!e.name)throw(0,Qf.default)(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!r.Data)throw(0,Qf.default)(new Error("Parent node had no data"),"ERR_INVALID_NODE");return ct.unmarshal(r.Data).type==="hamt-sharded-directory"?(Zf(`Removing ${e.name} from sharded directory`),rke(t,{...e,parent:r})):(Zf(`Removing link ${e.name} regular directory`),tke(t,{...e,parent:r}))}var tke=async(t,e)=>{e.parent.Links=e.parent.Links.filter(o=>o.Name!==e.name);let r=await ot(e.parent),n=await(await t.hashers.getHasher(e.hashAlg)).digest(r),s=J.create(e.cidVersion,Pt,n);return await t.repo.blocks.put(s,r),Zf(`Updated regular directory ${s}`),{node:e.parent,cid:s}},rke=async(t,e)=>{let{rootBucket:r,path:i}=await UQ(t,e.name,e.parent);await r.del(e.name);let{node:n}=await rZ(t,i,e.name,e);return Up(t,n.Links,r,e)},rZ=async(t,e,r,i)=>{let n=e.pop();if(!n)throw(0,Qf.default)(new Error("Could not find parent"),"EINVALIDPARENT");let{bucket:s,prefix:o,node:a}=n;if(!a)throw(0,Qf.default)(new Error("Could not find parent"),"EINVALIDPARENT");let c=a.Links.find(p=>(p.Name||"").substring(0,2)===o);if(!c)throw(0,Qf.default)(new Error(`No link found with prefix ${o} for file ${r}`),"ERR_NOT_FOUND");if(c.Name===`${o}${r}`){Zf(`Removing existing link ${c.Name}`);let p=a.Links.filter(y=>y.Name!==c.Name);return await s.del(r),Up(t,p,s,i)}Zf(`Descending into sub-shard ${c.Name} for ${o}${r}`);let u=await rZ(t,e,r,i),f=u.cid,d=u.size,h=o;if(u.node.Links.length===1){Zf(`Removing subshard for ${o}`);let p=u.node.Links[0];h=`${o}${(p.Name||"").substring(2)}`,f=p.Hash,d=p.Tsize||0}return Zf(`Updating shard ${o} with name ${h}`),ike(t,s,a,o,h,d,f,i)},ike=(t,e,r,i,n,s,o,a)=>{let c=r.Links.filter(u=>u.Name!==i);return c.push({Name:n,Tsize:s,Hash:o}),Up(t,c,e,a)};var nke=Tt.bind({ignoreUndefined:!0}),ske={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function Kp(t){async function e(r,i={}){let n=nke(ske,i);Array.isArray(r)||(r=[r]);let s=await Promise.all(r.map(o=>ei(t,o,n)));if(!s.length)throw(0,Vg.default)(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");s.forEach(o=>{if(o.path==="/")throw(0,Vg.default)(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")});for(let o of s)await oke(t,o.path,n)}return ce(e)}var oke=async(t,e,r)=>{let i=await ei(t,e,r),n=await bc(t,i.mfsPath),s=n[n.length-1];n.pop();let o=n[n.length-1];if(!o)throw(0,Vg.default)(new Error(`${e} does not exist`),"ERR_NOT_FOUND");if(s.type==="directory"&&!r.recursive)throw(0,Vg.default)(new Error(`${e} is a directory, use -r to remove directories`),"ERR_WAS_DIR");let{cid:a}=await tZ(t,{parentCid:o.cid,name:s.name,hashAlg:r.hashAlg,cidVersion:r.cidVersion,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold});o.cid=a;let c=await Ps(t,n,r);await Cs(t,c,r)};var ake=Tt.bind({ignoreUndefined:!0}),cke=(0,iZ.default)("ipfs:mfs:touch"),oZ={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function uke(t,e,r){let i=0;return(t.includes("x")||t.includes("X")&&(r||e&1||e&8||e&64))&&(i+=1),t.includes("w")&&(i+=2),t.includes("r")&&(i+=4),i}function fke(t,e){let r=0;return t.includes("u")&&(r+=e<<6),t.includes("g")&&(r+=e<<3),t.includes("o")&&(r+=e),r}function lke(t,e,r){return e.includes("t")&&(r+=parseInt("1000",8)),e.includes("s")&&(t.includes("u")&&(r+=parseInt("4000",8)),t.includes("g")&&(r+=parseInt("2000",8))),r}function dke(t,e,r){e||(e=0);let i=t.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!i)throw new Error(`Invalid file mode: ${t}`);let[,n,s,o]=i;(n==="a"||!n)&&(n="ugo");let a=uke(o,e,r);return a=fke(n,a),a=lke(n,o,a),s==="="?(n.includes("u")&&(e=e&parseInt("7077",8),e=e|a),n.includes("g")&&(e=e&parseInt("7707",8),e=e|a),n.includes("o")&&(e=e&parseInt("7770",8),e=e|a),e):s==="+"?a|e:s==="-"?a^e:e}function aZ(t,e){if(t instanceof String||typeof t=="string"){let r=`${t}`;r.match(/^\d+$/g)?t=parseInt(r,8):t=0+r.split(",").reduce((i,n)=>dke(n,i,e.isDirectory()),e.mode||0)}return t}function cZ(t){async function e(r,i,n={}){let s=ake(oZ,n);cke(`Fetching stats for ${r}`);let{cid:o,mfsDirectory:a,name:c}=await ei(t,r,s);if(o.code!==Pt)throw(0,Vp.default)(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(s.recursive){let W=await(0,nZ.pipe)(async function*(){for await(let X of $b(o,t.repo.blocks)){if(X.type!=="file"&&X.type!=="directory")throw(0,Vp.default)(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");X.unixfs.mode=aZ(i,X.unixfs);let P=zi({Data:X.unixfs.marshal(),Links:X.node.Links});yield{path:X.path,content:P}}},X=>mp(X,t.repo.blocks,{...s,pin:!1,dagBuilder:async function*(P,g,_){for await(let x of P)yield async function(){let O=x.content,L=ot(O),Y=await x5(L,g,_);if(!O.Data)throw(0,Vp.default)(new Error(`${Y} had no data`),"ERR_INVALID_NODE");let V=ct.unmarshal(O.Data);return{cid:Y,size:L.length,path:x.path,unixfs:V}}}}),X=>(0,sZ.default)(X));if(!W)throw(0,Vp.default)(new Error(`Could not chmod ${r}`),"ERR_COULD_NOT_CHMOD");await Kp(t)(r,s),await Fp(t)(`/ipfs/${W.cid}`,r,s);return}let u=await t.repo.blocks.get(o),f=Dt(u);if(!f.Data)throw(0,Vp.default)(new Error(`${o} had no data`),"ERR_INVALID_NODE");let d=ct.unmarshal(f.Data);d.mode=aZ(i,d);let h=ot({Data:d.marshal(),Links:f.Links}),p=s.hashAlg||oZ.hashAlg,m=await(await t.hashers.getHasher(p)).digest(h),w=J.create(s.cidVersion,Pt,m);s.flush&&await t.repo.blocks.put(w,h);let b=await bc(t,a),S=b[b.length-1],I=J.decode(S.cid.bytes),j=await t.repo.blocks.get(I),B=Dt(j),C=await ho(t,{parent:B,name:c,cid:w,size:h.length,flush:s.flush,hashAlg:p,cidVersion:o.version,shardSplitThreshold:1/0});S.cid=C.cid;let z=await Ps(t,b,s);await Cs(t,z,s)}return ce(e)}l();var hke=Tt.bind({ignoreUndefined:!0}),pke={};function uZ(t){async function e(r,i={}){i=hke(pke,i);let{cid:n}=await Yf(t)(r,i);return n}return ce(e)}l();var yke=Tt.bind({ignoreUndefined:!0}),gke={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};function fZ(t){async function e(r,i,n={}){let s=yke(gke,n);await Fp(t)(r,i,s),await Kp(t)(r,{...s,recursive:!0})}return ce(e)}l();var lZ=N(Ee()),NA=N(Rt());Te();var mke=Tt.bind({ignoreUndefined:!0}),bke=(0,lZ.default)("ipfs:mfs:touch"),dZ={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};function hZ(t){async function e(r,i={}){let n=mke(dZ,i);n.mtime=n.mtime||new Date,bke(`Touching ${r} mtime: ${n.mtime}`);let{cid:s,mfsDirectory:o,name:a,exists:c}=await ei(t,r,n),u=i.hashAlg||dZ.hashAlg,f=await t.hashers.getHasher(u),d,h,p=n.cidVersion;if(c){if(s.code!==Pt)throw(0,NA.default)(new Error(`${r} was not a UnixFS node`),"ERR_NOT_UNIXFS");p=s.version;let B=await t.repo.blocks.get(s),C=Dt(B);if(!C.Data)throw(0,NA.default)(new Error(`${r} had no data`),"ERR_INVALID_NODE");let z=ct.unmarshal(C.Data);z.mtime=n.mtime,d=ot({Data:z.marshal(),Links:C.Links});let W=await f.digest(d);h=J.create(n.cidVersion,Pt,W),n.flush&&await t.repo.blocks.put(h,d)}else{let B=new ct({type:"file",mtime:n.mtime});d=ot({Data:B.marshal(),Links:[]});let C=await f.digest(d);h=J.create(n.cidVersion,Pt,C),n.flush&&await t.repo.blocks.put(h,d)}let y=await bc(t,o),m=y[y.length-1],w=m.cid,b=await t.repo.blocks.get(w),S=Dt(b),I=await ho(t,{parent:S,name:a,cid:h,size:d.length,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:p});m.cid=I.cid;let j=await Ps(t,y,n);await Cs(t,j,n)}return ce(e)}l();var MA=N(Rt());var vke=Tt.bind({ignoreUndefined:!0}),wke={offset:0,length:1/0};function pZ(t){function e(r,i={}){return i=vke(wke,i),{[Symbol.asyncIterator]:async function*(){let s=await ei(t,r,i),o=await fn(s.mfsPath,t.repo.blocks);if(o.type!=="file")throw(0,MA.default)(new Error(`${r} was not a file`),"ERR_NOT_FILE");if(!o.content)throw(0,MA.default)(new Error(`Could not load content stream from ${r}`),"ERR_NO_CONTENT");for await(let a of o.content({offset:i.offset,length:i.length}))yield a}}}return ce(e)}l();var mZ=N(Ee());l();var LA=N(Rt()),yZ=N(Ee());dt();var zg=(0,yZ.default)("ipfs:mfs:utils:to-async-iterator");function gZ(t){if(!t)throw(0,LA.default)(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if((typeof t=="string"||t instanceof String)&&(zg("Content was a string"),t=Xe(t.toString())),t.length)return zg("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield t}};if(t[Symbol.asyncIterator])return zg("Content was an async iterator"),t;if(t[Symbol.iterator])return zg("Content was an iterator"),t;if(globalThis.Blob&&t instanceof globalThis.Blob){zg("Content was an HTML5 Blob");let e=0,r={next:()=>e>t.size?{done:!0}:new Promise((i,n)=>{let s=t.slice(e,Sy);e+=Sy;let o=new globalThis.FileReader,a=c=>{if(o.removeEventListener("loadend",a,!1),c.error)return n(c.error);i({done:!1,value:new Uint8Array(o.result)})};o.addEventListener("loadend",a),o.readAsArrayBuffer(s)})};return{[Symbol.asyncIterator]:()=>r}}throw(0,LA.default)(new Error(`Don't know how to convert ${t} into an async iterator`),"ERR_INVALID_PARAMS")}var _c=N(Rt());var bZ=N(ss());var _ke=Tt.bind({ignoreUndefined:!0}),Ec=(0,mZ.default)("ipfs:mfs:write"),Eke={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(t,e)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};function vZ(t){async function e(r,i,n={}){let s=_ke(Eke,n),o,a,c;if(Ec("Reading source, destination and parent"),await jg().readLock(async()=>{o=await gZ(i),a=await ei(t,r,s),c=await ei(t,a.mfsDirectory,s)})(),Ec("Read source, destination and parent"),!s.parents&&!c.exists)throw(0,_c.default)(new Error("directory does not exist"),"ERR_NO_EXIST");if(o==null)throw(0,_c.default)(new Error("could not create source"),"ERR_NO_SOURCE");if(a==null)throw(0,_c.default)(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!s.create&&!a.exists)throw(0,_c.default)(new Error("file does not exist"),"ERR_NO_EXIST");if(a.entryType!=="file")throw(0,_c.default)(new Error("not a file"),"ERR_NOT_A_FILE");return Ske(t,r,o,a,s)}return ce(e)}var Ske=async(t,e,r,i,n)=>{let s=await xke(t,r,i,n);await jg().writeLock(async()=>{let o=qp(e),a=o.pop();if(a==null)throw(0,_c.default)(new Error("source does not exist"),"ERR_NO_EXIST");let c=!1;try{await Yf(t)(`/${o.join("/")}`,n),c=!0}catch(w){if(w.code!=="ERR_NOT_FOUND")throw w}c||await Nd(t)(`/${o.join("/")}`,n);let u=await ei(t,e,n),f=await bc(t,u.mfsDirectory),d=f[f.length-1];if(!d)throw(0,_c.default)(new Error("directory does not exist"),"ERR_NO_EXIST");if(!d.type||!d.type.includes("directory"))throw(0,_c.default)(new Error(`cannot write to ${d.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");let h=await t.repo.blocks.get(d.cid),p=Dt(h),y=await ho(t,{parent:p,name:a,cid:s.cid,size:s.size,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:n.cidVersion});d.cid=y.cid;let m=await Ps(t,f,n);await Cs(t,m,n)})()},xke=async(t,e,r,i)=>{r.exists?Ec(`Overwriting file ${r.cid} offset ${i.offset} length ${i.length}`):Ec(`Writing file offset ${i.offset} length ${i.length}`);let n=[];if(i.offset>0)if(r.unixfs){if(Ec(`Writing first ${i.offset} bytes of original file`),n.push(()=>r.content({offset:0,length:i.offset})),r.unixfs.fileSize()<i.offset){let f=i.offset-r.unixfs.fileSize();Ec(`Writing zeros for extra ${f} bytes`),n.push(_Z(f))}}else Ec(`Writing zeros for first ${i.offset} bytes`),n.push(_Z(i.offset));n.push(wZ(e,i.length));let s=Ike(Ake(n),f=>{if(r.unixfs&&!i.truncate){let d=r.unixfs.fileSize();if(d>f)return Ec(`Writing last ${d-f} of ${d} bytes from original file starting at offset ${f}`),r.content({offset:f});Ec("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}),o;i.mode!==void 0&&i.mode!==null?o=Qc(i.mode):r&&r.unixfs&&(o=r.unixfs.mode);let a;i.mtime!=null?a=rf(i.mtime):r&&r.unixfs&&(a=r.unixfs.mtime);let c=await t.hashers.getHasher(i.hashAlg),u=await(0,bZ.default)(mp([{content:s,mode:o,mtime:a}],t.repo.blocks,{progress:i.progress,hasher:c,cidVersion:i.cidVersion,strategy:i.strategy,rawLeaves:i.rawLeaves,reduceSingleLeafToSelf:i.reduceSingleLeafToSelf,leafType:i.leafType}));if(!u)throw(0,_c.default)(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return Ec(`Wrote ${u.cid}`),{cid:u.cid,size:u.size}},wZ=(t,e)=>async function*(){let i=0;for await(let n of t){if(i+=n.length,i>e){yield n.slice(0,e-i);return}yield n}},_Z=(t,e=Sy)=>{let r=new Uint8Array(e);async function*i(){for(;;)yield r.slice()}return wZ(i(),t)},Ake=async function*(t){for(let e=0;e<t.length;e++)yield*t[e]()},Ike=async function*(t,e){let r=0;for await(let i of t)r+=i.length,yield i;for await(let i of e(r))r+=i.length,yield i};l();var EZ=N(oo()),SZ=t=>{let e={cid:t.cid,name:t.name,type:t.type==="directory"?"directory":"file",size:t.size};return(t.type==="file"||t.type==="directory")&&(e.mode=t.unixfs.mode,e.mtime=t.unixfs.mtime),e};function xZ(t){async function*e(r,i={}){let n=await ei(t,r,i),s=await fn(n.mfsPath,t.repo.blocks);if(s.type==="directory"){yield*(0,EZ.default)(s.content(i),SZ);return}yield SZ(s)}return ce(e)}var Tke={stat:Yf},Rke={chmod:cZ,cp:Fp,flush:uZ,mkdir:Nd,mv:fZ,rm:Kp,touch:hZ},AZ={write:vZ,read:pZ,ls:xZ},IZ=({options:t,mfs:e,operations:r,lock:i})=>{Object.keys(r).forEach(n=>{e[n]=i(r[n](t))})},Pke={repoOwner:!0,repo:null};function Cke(t){let{repoOwner:e}=Object.assign({},Pke||{},t),r=jg(e),i=o=>r.readLock(o),n=o=>r.writeLock(o),s={};return IZ({options:t,mfs:s,operations:Tke,lock:i}),IZ({options:t,mfs:s,operations:Rke,lock:n}),Object.keys(AZ).forEach(o=>{s[o]=AZ[o](t)}),s}function TZ({repo:t,preload:e,hashers:r,options:i}){let n=Cke({repo:t,repoOwner:Boolean(i.repoOwner),hashers:r}),s=o=>(...c)=>{let u=c.filter(f=>qA.default.ipfsPath(f)||qA.default.cid(f));if(u.length){let f=c[c.length-1];f&&f.preload!==!1&&u.forEach(d=>e(d))}return o(...c)};return{...n,chmod:n.chmod,cp:s(n.cp),mkdir:n.mkdir,stat:s(n.stat),rm:n.rm,read:s(n.read),touch:n.touch,write:n.write,mv:s(n.mv),flush:n.flush,ls:s(async function*(...o){for await(let a of n.ls(...o))yield{...a,size:a.size||0}})}}l();l();function RZ({keychain:t}){return ce((r,i)=>t.exportKey(r,i))}l();var PZ="ed25519",CZ=2048;function OZ({keychain:t}){return ce((r,i={type:PZ,size:CZ})=>t.createKey(r,i.type||PZ,i.size||CZ))}l();function kZ({keychain:t}){return ce((r,i,n)=>t.importKey(r,i,n))}l();function DZ({keychain:t}){return ce(r=>t.findKeyByName(r))}l();function BZ({keychain:t}){return ce(()=>t.listKeys())}l();function NZ({keychain:t}){return ce(async(r,i)=>{let n=await t.renameKey(r,i);return{was:r,now:n.name,id:n.id,overwrite:!1}})}l();function MZ({keychain:t}){return ce(r=>t.removeKey(r))}var jA=class{constructor({keychain:e}){this.gen=OZ({keychain:e}),this.list=BZ({keychain:e}),this.rm=MZ({keychain:e}),this.rename=NZ({keychain:e}),this.export=RZ({keychain:e}),this.import=kZ({keychain:e}),this.info=DZ({keychain:e})}};l();l();l();function us({repo:t,preload:e}){async function r(i,n={}){n.preload!==!1&&e(i);let s=await t.blocks.get(i,n);return Dt(s)}return ce(r)}function LZ({repo:t,preload:e}){let r=us({repo:t,preload:e});async function i(n,s={}){return(await r(n,s)).Data||new Uint8Array(0)}return ce(i)}l();Hs();Te();function UA(t,e=[]){for(let r in t){let i=t[r];if(r==="/"&&Object.keys(t).length===1)try{e.push({Name:"",Tsize:0,Hash:J.parse(i)});continue}catch(s){}let n=J.asCID(i);if(n){e.push({Name:"",Tsize:0,Hash:n});continue}Array.isArray(i)&&UA(i,e),i&&typeof i=="object"&&UA(i,e)}return e}function qZ({repo:t,codecs:e}){async function r(i,n={}){let s=await e.getCodec(i.code),o=await t.blocks.get(i,n),a=s.decode(o);if(i.code===Ci)return[];if(i.code===Pt)return a.Links;if(i.code===Ul)return UA(a);throw new Error(`Cannot resolve links from codec ${i.code}`)}return ce(r)}l();mi();Te();function jZ({repo:t,preload:e}){async function r(i={}){let n;if(i.template)if(i.template==="unixfs-dir")n=new ct({type:"directory"}).marshal();else throw new Error("unknown template");let s=ot({Data:n,Links:[]}),o=await Ir.digest(s),a=J.createV0(o);return await t.blocks.put(a,s,{signal:i.signal}),i.preload!==!1&&e(a),a}return ce(r)}l();Te();mi();function Sc({repo:t,preload:e}){async function r(i,n={}){let s=await t.gcLock.readLock();try{let o=ot(i),a=await Ir.digest(o),c=J.createV0(a);return await t.blocks.put(c,o,{signal:n.signal}),n.preload!==!1&&e(c),n.pin&&await t.pins.pinRecursively(c,{signal:n.signal}),c}finally{s()}}return ce(r)}l();function UZ({repo:t,preload:e}){let r=us({repo:t,preload:e});async function i(n,s={}){let o=await r(n,s),c=ot(o).length,u=o.Links.reduce((f,d)=>f+(d.Tsize||0),0);return{Hash:n,NumLinks:o.Links.length,BlockSize:c,LinksSize:c-(o.Data||[]).length,DataSize:(o.Data||[]).length,CumulativeSize:c+u}}return ce(i)}l();l();function FZ({repo:t,preload:e}){let r=us({repo:t,preload:e}),i=Sc({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a);return i({...c,Links:c.Links.concat([o])},a)}return ce(n)}l();bn();function KZ({repo:t,preload:e}){let r=us({repo:t,preload:e}),i=Sc({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a),u=mn([c.Data||[],o]);return i({...c,Data:u},a)}return ce(n)}l();function VZ({repo:t,preload:e}){let r=us({repo:t,preload:e}),i=Sc({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a),u=(typeof o=="string"?o:o.Name)||"";return c.Links=c.Links.filter(f=>f.Name!==u),i(c,a)}return ce(n)}l();function zZ({repo:t,preload:e}){let r=us({repo:t,preload:e}),i=Sc({repo:t,preload:e});async function n(s,o,a={}){let c=await r(s,a);return i({...c,Data:o},a)}return ce(n)}var FA=class{constructor({repo:e,preload:r}){this.addLink=FZ({repo:e,preload:r}),this.appendData=KZ({repo:e,preload:r}),this.rmLink=VZ({repo:e,preload:r}),this.setData=zZ({repo:e,preload:r})}};var KA=class{constructor({repo:e,codecs:r,preload:i}){this.data=LZ({repo:e,preload:i}),this.get=us({repo:e,preload:i}),this.links=qZ({repo:e,codecs:r}),this.new=jZ({repo:e,preload:i}),this.put=Sc({repo:e,preload:i}),this.stat=UZ({repo:e,preload:i}),this.patch=new FA({repo:e,preload:i})}};l();l();var HZ=N(Ee());var Oke=(0,HZ.default)("ipfs:repo:gc");function $Z({repo:t,hashers:e}){async function*r(i={}){let n=Date.now(),s;try{s=await Lp({repo:t,hashers:e},i),await t.pins.pinRecursively(s),yield*t.gc()}finally{s&&await t.pins.unpin(s)}Oke(`Complete (${Date.now()-n}ms)`)}return ce(r)}l();function C5({repo:t}){async function e(r={}){let i=await t.stat();return{numObjects:BigInt(i.numObjects.toString()),repoSize:BigInt(i.repoSize.toString()),repoPath:i.repoPath,version:`${i.version}`,storageMax:BigInt(i.storageMax.toString())}}return ce(e)}l();l();var zp=11;function GZ({repo:t}){async function e(r={}){try{await t._checkInitialized(r)}catch(i){if([/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some(s=>s.test(i.message)))return zp;throw i}return t.version.get()}return ce(e)}var VA=class{constructor({repo:e,hashers:r}){this.gc=$Z({repo:e,hashers:r}),this.stat=C5({repo:e}),this.version=GZ({repo:e}),this.setApiAddr=i=>e.apiAddr.set(i)}};l();l();var WZ=N(Rt());function YZ(t,e){let r;if(t.metrics?e.peer?r=t.metrics.forPeer(e.peer):e.proto?r=t.metrics.forProtocol(e.proto):r=t.metrics.global:r=void 0,!r)return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};let{movingAverages:i,snapshot:n}=r;return{totalIn:BigInt(n.dataReceived.integerValue().toString()),totalOut:BigInt(n.dataSent.integerValue().toString()),rateIn:i.dataReceived[6e4].movingAverage()/60,rateOut:i.dataSent[6e4].movingAverage()/60}}function XZ({network:t}){return ce(async function*(r={}){let{libp2p:i}=await t.use(r);if(!r.poll){yield YZ(i,r);return}let n=r.interval||1e3,s=-1;try{if(s=typeof n=="string"?gf(n)||-1:n,!s||s<0)throw new Error("invalid duration")}catch(a){throw(0,WZ.default)(a,"ERR_INVALID_POLL_INTERVAL")}let o;try{for(;;)yield YZ(i,r),await new Promise(a=>{o=setTimeout(a,s)})}finally{clearTimeout(o)}})}var zA=class{constructor({repo:e,network:r}){this.repo=C5({repo:e}),this.bw=XZ({network:r}),this.bitswap=wb({network:r})}};l();var G6e=N(Ee());l();l();var hI=N(HA()),hee=N(Ee()),Kd=N(Md());l();l();l();Te();Br();var tJ=N(Ee()),rJ=N(O5());gn();Hs();Nn();var Nke=(0,tJ.default)("ipfs:repo:migrator:migration-8");function iJ(t){return t.child?iJ(t.child):t}function Mke(t){try{let e=ir.decode(`b${t.toString().toLowerCase().slice(1)}`),r=J.decode(e).multihash.bytes,i=ir.encode(r).slice(1).toUpperCase();return new qe(`/${i}`,!1)}catch(e){return t}}function Lke(t){try{let e=ir.decode(`b${t.toString().toLowerCase().slice(1)}`),r=Pi(e),i=ir.encode(J.createV1(Ci,r).bytes).slice(1);return new qe(`/${i.toUpperCase()}`,!1)}catch{return t}}async function nJ(t,e,r){let i=t.blocks;await i.open();let n=iJ(i),s=await(0,rJ.default)(n.queryKeys({filters:[o=>r(o).toString()!==o.toString()]}));try{let o=0;for await(let a of n.query({})){let c=r(a.key);c.toString()!==a.key.toString()&&(o+=1,Nke(`Migrating Block from ${a.key} to ${c}`,await n.has(a.key)),await n.delete(a.key),await n.put(c,a.value),e(o/s*100,`Migrated Block from ${a.key} to ${c}`))}}finally{await i.close()}}var sJ={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(t,e=()=>{})=>nJ(t,e,Mke),revert:(t,e=()=>{})=>nJ(t,e,Lke)};l();Te();l();Te();l();var Ld=N(Vi()),oJ=Ld.default.Reader,qke=Ld.default.Writer,V6t=Ld.default.util,k5=Ld.default.roots.default||(Ld.default.roots.default={}),aJ=k5.ipfs=(()=>{let t={};return t.pin=function(){let e={};return e.Set=function(){function r(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}return r.prototype.version=0,r.prototype.fanout=0,r.prototype.seed=0,r.encode=function(n,s){return s||(s=qke.create()),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&s.uint32(8).uint32(n.version),n.fanout!=null&&Object.hasOwnProperty.call(n,"fanout")&&s.uint32(16).uint32(n.fanout),n.seed!=null&&Object.hasOwnProperty.call(n,"seed")&&s.uint32(29).fixed32(n.seed),s},r.decode=function(n,s){n instanceof oJ||(n=oJ.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new k5.ipfs.pin.Set;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.version=n.uint32();break;case 2:a.fanout=n.uint32();break;case 3:a.seed=n.fixed32();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof k5.ipfs.pin.Set)return n;var s=new k5.ipfs.pin.Set;return n.version!=null&&(s.version=n.version>>>0),n.fanout!=null&&(s.fanout=n.fanout>>>0),n.seed!=null&&(s.seed=n.seed>>>0),s},r.toObject=function(n,s){s||(s={});var o={};return s.defaults&&(o.version=0,o.fanout=0,o.seed=0),n.version!=null&&n.hasOwnProperty("version")&&(o.version=n.version),n.fanout!=null&&n.hasOwnProperty("fanout")&&(o.fanout=n.fanout),n.seed!=null&&n.hasOwnProperty("seed")&&(o.seed=n.seed),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ld.default.util.toJSONOptions)},r}(),e}(),t})();var lJ=N(uJ()),N5=N(Ss());l();Br();gn();Te();var Hg=new qe("/local/pins"),D5=256,fJ=8192,GA=J.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),qd={direct:"direct",recursive:"recursive"};function WA(t){return new qe(`/${ir.encode(t.multihash.bytes).toUpperCase().substring(1)}`)}bn();B5();tt();dt();mi();var QA=aJ.pin.Set;function jke(t){let e=t.Data;if(!e)throw new Error("No data present");let r=N5.default.decode(e),i=N5.default.decode.bytes;if(i<=0)throw new Error("Invalid Set header length");if(i+r>e.length)throw new Error("Impossibly large set header length");let n=e.slice(i,r+i),s=QA.toObject(QA.decode(n),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(s.version!==1)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>t.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:e.slice(r+i)}}function Uke(t,e){let r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,t,!0);let n=Xe(e.toString()),s=mn([r,n],r.byteLength+n.byteLength);return(0,lJ.default)($e(s))}async function*dJ(t,e){let r=jke(e),i=0;for(let n of e.Links){if(i<r.header.fanout){let s=n.Hash;if(!GA.equals(s)){let o=await t.get(s),a=Dt(o);yield*dJ(t,a)}}else yield n.Hash;i++}}async function*$g(t,e,r){let i=e.Links.find(o=>o.Name===r);if(!i)throw new Error("No link found with name "+r);let n=await t.get(i.Hash),s=Dt(n);yield*dJ(t,s)}function Fke(t,e){return r(e,0);async function r(i,n){let s=QA.encode({version:1,fanout:D5,seed:n}).finish(),o=N5.default.encode(s.length),a=mn([o,s]),c=[];for(let f=0;f<D5;f++)c.push({Name:"",Tsize:1,Hash:GA});if(i.length<=fJ){let f=i.map(p=>({link:{Name:"",Tsize:1,Hash:p.key},data:p.data||new Uint8Array})).sort((p,y)=>YA(p.link.Hash.bytes,y.link.Hash.bytes)),d=c.concat(f.map(p=>p.link));return{Data:mn([a,...f.map(p=>p.data)]),Links:d}}else{let f=i.reduce((h,p)=>{let y=Uke(n,p.key)%D5;return h[y]=y in h?h[y].concat([p]):[p],h},[]),d=0;for(let h of f){let p=await r(h,n+1);await u(p,d),d++}return{Data:a,Links:c}}async function u(f,d){let h=ot(f),p=await Ir.digest(h),y=J.createV0(p);await t.put(y,h);let m=f.Links.reduce((w,b)=>w+(b.Tsize||0),0)+h.length;c[d]={Name:"",Tsize:m,Hash:y}}}}async function ZA(t,e,r){let i=await Fke(t,r.map(c=>({key:c}))),n=ot(i),s=await Ir.digest(n),o=J.createV0(s);await t.put(o,n);let a=i.Links.reduce((c,u)=>c+u.Tsize,0)+n.length;return{Name:e,Tsize:a,Hash:o}}var M5=N(O5());mi();Nn();gn();async function Kke(t,e,r,i){if(!await e.has(Hg))return;let n=await e.get(Hg),s=J.decode(n),o=await t.get(s),a=Dt(o),c=0,u=await(0,M5.default)($g(t,a,qd.recursive))+await(0,M5.default)($g(t,a,qd.direct));for await(let f of $g(t,a,qd.recursive)){c++;let d={depth:1/0};f.version!==0&&(d.version=f.version),f.code!==Pt&&(d.codec=f.code),await r.put(WA(f),zo(d)),i(c/u*100,`Migrated recursive pin ${f}`)}for await(let f of $g(t,a,qd.direct)){c++;let d={depth:0};f.version!==0&&(d.version=f.version),f.code!==Pt&&(d.codec=f.code),await r.put(WA(f),zo(d)),i(c/u*100,`Migrated direct pin ${f}`)}await t.delete(s),await e.delete(Hg)}async function Vke(t,e,r,i){let n=[],s=[],o=0,a=await(0,M5.default)(r.queryKeys({}));for await(let{key:h,value:p}of r.query({})){o++;let y=Jn(p),m=J.create(y.version||0,y.codec||Pt,Pi(ir.decode("b"+h.toString().toLowerCase().split("/").pop())));y.depth===0?(i(o/a*100,`Reverted direct pin ${m}`),s.push(m)):(i(o/a*100,`Reverted recursive pin ${m}`),n.push(m))}i(100,"Updating pin root");let c={Links:[await ZA(t,qd.direct,s),await ZA(t,qd.recursive,n)]},u=ot(c),f=await Ir.digest(u),d=J.createV0(f);await t.put(d,u),await e.put(Hg,d.bytes)}async function hJ(t,e,r){let i=t.blocks,n=t.datastore,s=t.pins;await i.open(),await n.open(),await s.open();try{await r(i,n,s,e)}finally{await s.close(),await n.close(),await i.close()}}var pJ={version:9,description:"Migrates pins to datastore",migrate:(t,e=()=>{})=>hJ(t,e,Kke),revert:(t,e=()=>{})=>hJ(t,e,Vke)};l();l();Br();ia();var yJ=new qe("/config"),Gg=new qe("/version");function Wg(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function zke(t,e,r){let i=await e(t);if(i)return i;let n=Wg(r);return n?new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{s(Boolean(a.result))}}):!1}async function Hke(t,e,r,i){if(await r(t))return e(t);let n=Wg(i);if(!n)throw un();return new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return s(a.result);o(un())}})}function L5(t){let e=t.get.bind(t),r=t.has.bind(t);return t.get=i=>Hke(i,e,r,t),t.has=i=>zke(i,r,t),t}function JA(t){return{...t,root:L5(t.root),datastore:L5(t.datastore),pins:L5(t.pins),keys:L5(t.keys)}}dt();tt();async function $ke(t,e,r=()=>{}){let i=Wg(e);if(!i){r(`${t} did not need an upgrade`);return}r(`Upgrading ${t}`),await vJ(i,(s,o)=>[{type:"del",key:s},{type:"put",key:Xe(s),value:o}])}async function Gke(t,e,r=()=>{}){let i=Wg(e);if(!i){r(`${t} did not need a downgrade`);return}r(`Downgrading ${t}`),await vJ(i,(s,o)=>[{type:"del",key:s},{type:"put",key:$e(s),value:o}])}function gJ(t){return t.child?gJ(t.child):t}async function mJ(t,e,r){let i=Object.entries(t).map(([o,a])=>({key:o,backend:gJ(a)})).filter(({key:o,backend:a})=>a.constructor.name==="LevelDatastore").map(({key:o,backend:a})=>({name:o,store:a}));e(0,`Migrating ${i.length} dbs`);let n=0,s=o=>{e(Math.round(n/i.length*100),o)};for(let{name:o,store:a}of i){await a.open();try{await r(o,a,s)}finally{n++,await a.close()}}e(100,`Migrated ${i.length} dbs`)}var bJ={version:10,description:"Migrates datastore-level keys to binary",migrate:(t,e=()=>{})=>mJ(t,e,$ke),revert:(t,e=()=>{})=>mJ(t,e,Gke)};function vJ(t,e){function r(i,n){let s=t.store("readwrite"),o=s.transaction,a=0,c;o.onabort=()=>n(c||o.error||new Error("aborted by user")),o.oncomplete=()=>n();function u(){let f=i[a++],d=f.key,h;try{h=f.type==="del"?s.delete(d):s.put(f.value,d)}catch(p){c=p,o.abort();return}a<i.length&&(h.onsuccess=u)}u()}return new Promise((i,n)=>{let s=t.iterator(),o=c=>c;s._deserializeKey=s._deserializeValue=o,a();function a(){let c=(u,f,d)=>{if(u||f===void 0){let h=p=>{if(p){n(p);return}i()};s.end(h);return}r(e(f,d),a)};s.next(c)}})}l();Br();var Jf=new qe("/local/filesroot");async function Wke(t,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await t.root.open(),await t.datastore.open(),await t.root.has(Jf)){let r=await t.root.get(Jf);await t.datastore.put(Jf,r),await t.root.delete(Jf)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo datastore")}async function Yke(t,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await t.root.open(),await t.datastore.open(),await t.datastore.has(Jf)){let r=await t.datastore.get(Jf);await t.root.put(Jf,r),await t.datastore.delete(Jf)}await t.datastore.close(),await t.root.close(),e(100,"Stored MFS root in repo root datastore")}var wJ={version:11,description:"Store mfs root in the datastore",migrate:Wke,revert:Yke};var jd={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},q5=[Object.assign({version:1},jd),Object.assign({version:2},jd),Object.assign({version:3},jd),Object.assign({version:4},jd),Object.assign({version:5},jd),Object.assign({version:6},jd),Object.assign({version:7},jd),sJ,pJ,bJ,wJ];l();l();var _J=N(Ee());var eI={};zt(eI,{InvalidValueError:()=>Qg,MissingRepoOptionsError:()=>xu,NonReversibleMigrationError:()=>Yg,NotInitializedRepoError:()=>Ud,RequiredParameterError:()=>Xg});l();var Yg=class extends Error{constructor(e){super(e);this.name="NonReversibleMigrationError",this.code=Yg.code,this.message=e}};Yg.code="ERR_NON_REVERSIBLE_MIGRATION";var Ud=class extends Error{constructor(e){super(e);this.name="NotInitializedRepoError",this.code=Ud.code,this.message=e}};Ud.code="ERR_NOT_INITIALIZED_REPO";var Xg=class extends Error{constructor(e){super(e);this.name="RequiredParameterError",this.code=Xg.code,this.message=e}};Xg.code="ERR_REQUIRED_PARAMETER";var Qg=class extends Error{constructor(e){super(e);this.name="InvalidValueError",this.code=Qg.code,this.message=e}};Qg.code="ERR_INVALID_VALUE";var xu=class extends Error{constructor(e){super(e);this.name="MissingRepoOptionsError",this.code=xu.code,this.message=e}};xu.code="ERR_MISSING_REPO_OPTIONS";var tI=(0,_J.default)("ipfs:repo:migrator:repo:init");async function EJ(t){if(!t)throw new xu("Please pass repo options when trying to open a repo");let e=t.root;try{await e.open();let r=await e.has(Gg),i=await e.has(yJ);return!r||!i?(tI(`Version entry present: ${r}`),tI(`Config entry present: ${i}`),!1):!0}catch(r){return tI("While checking if repo is initialized error was thrown: "+r.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}dt();tt();async function rI(t){if(!await EJ(t))throw new Ud("Repo is not initialized!");let e=t.root;await e.open();try{return parseInt($e(await e.get(Gg)))}finally{await e.close()}}async function Zg(t,e){if(!e)throw new xu("Please pass repo options when trying to open a repo");let r=e.root;await r.open(),await r.put(Gg,Xe(String(t))),await r.close()}var SJ=N(Ee()),la=(0,SJ.default)("ipfs:repo:migrator");function Xke(t){return t=t||q5,!Array.isArray(t)||t.length===0?0:t[t.length-1].version}async function xJ(t,e,r,i,{ignoreLock:n=!1,onProgress:s,isDryRun:o=!1,migrations:a}){if(a=a||q5,!t)throw new po.RequiredParameterError("Path argument is required!");if(!r)throw new po.RequiredParameterError("repoOptions argument is required!");if(!i)throw new po.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(i)||i<=0)throw new po.InvalidValueError("Version has to be positive integer!");e=JA(e);let c=await rI(e);if(c===i){la("Nothing to migrate.");return}if(c>i)throw new po.InvalidValueError(`Current repo's version (${c}) is higher then toVersion (${i}), you probably wanted to revert it?`);IJ(a,c,i);let u;!o&&!n&&(u=await r.repoLock.lock(t));try{for(let f of a){if(i!==void 0&&f.version>i)break;if(!(f.version<=c)){la(`Migrating version ${f.version}`);try{if(!o){let d=()=>{};s&&(d=(h,p)=>s(f.version,h.toFixed(2),p)),await f.migrate(e,d)}}catch(d){let h=f.version-1;throw la(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${h}`),await Zg(h,e),new Error(`During migration to version ${f.version} exception was raised: ${d.stack||d.message||d}`)}la(`Migrating to version ${f.version} finished`)}}o||await Zg(i||Xke(a),e),la("Repo successfully migrated",i!==void 0?`to version ${i}!`:"to latest version!")}finally{!o&&!n&&u&&await u.close()}}async function AJ(t,e,r,i,{ignoreLock:n=!1,onProgress:s,isDryRun:o=!1,migrations:a}){if(a=a||q5,!t)throw new po.RequiredParameterError("Path argument is required!");if(!r)throw new po.RequiredParameterError("repoOptions argument is required!");if(!i)throw new po.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(i)||i<=0)throw new po.InvalidValueError("Version has to be positive integer!");e=JA(e);let c=await rI(e);if(c===i){la("Nothing to revert.");return}if(c<i)throw new po.InvalidValueError(`Current repo's version (${c}) is lower then toVersion (${i}), you probably wanted to migrate it?`);IJ(a,i,c,!0);let u;!o&&!n&&(u=await r.repoLock.lock(t)),la(`Reverting from version ${c} to ${i}`);try{let f=a.slice().reverse();for(let d of f){if(d.version<=i)break;if(!(d.version>c)){la(`Reverting migration version ${d.version}`);try{if(!o){let h=()=>{};s&&(h=(p,y)=>s(d.version,p.toFixed(2),y)),await d.revert(e,h)}}catch(h){let p=d.version;throw la(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${p}`),await Zg(p,e),h.message=`During reversion to version ${d.version} exception was raised: ${h.message}`,h}la(`Reverting to version ${d.version} finished`)}}o||await Zg(i,e),la(`All migrations successfully reverted to version ${i}!`)}finally{!o&&!n&&u&&await u.close()}}function IJ(t,e,r,i=!1){let n=0;for(let s of t){if(s.version>r)break;if(s.version>e){if(i&&!s.revert)throw new po.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${s.version} is not reversible. Cancelling reversion.`);n++}}if(n!==r-e)throw new po.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${r}`)}var po=eI;var pee=N(PJ());l();Br();var DJ=N(Ee());tt();dt();l();l();var Hp=class extends Error{constructor(e){super(e);this.name="LockExistsError",this.code=Hp.code}};Hp.code="ERR_LOCK_EXISTS";var yo=class extends Error{constructor(e){super(e);this.name="NotFoundError",this.code=yo.code}};yo.code="ERR_NOT_FOUND";var $p=class extends Error{constructor(e){super(e);this.name="InvalidRepoVersionError",this.code=$p.code}};$p.code="ERR_INVALID_REPO_VERSION";var Fd="ERR_REPO_NOT_INITIALIZED",CJ="ERR_REPO_ALREADY_OPEN",OJ="ERR_REPO_ALREADY_CLOSED";async function U5(t,e,r){let i=await e(t);if(i)return i;let n=kJ(r);return n?new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{s(Boolean(a.result))}}):!1}async function F5(t,e,r,i){if(await r(t))return e(t);let n=kJ(i);if(!n)throw new yo;return new Promise((s,o)=>{let a=n.store("readonly").get(t.toString());a.transaction.onabort=()=>{o(a.transaction.error)},a.transaction.oncomplete=()=>{if(a.result)return s(a.result);o(new yo)}})}function kJ(t){let e=t;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var tDe=(0,DJ.default)("ipfs:repo:version"),iI=new qe("version");function BJ(t){return{async exists(){return U5(iI,t.has.bind(t),t)},async get(){let e=await F5(iI,t.get.bind(t),t.has.bind(t),t);return parseInt($e(e),10)},set(e){return t.put(iI,Xe(String(e)))},async check(e){let r=await this.get();return tDe("comparing version: %s and %s",r,e),r===e||(r===6&&e===7||e===6&&r===7)}}}l();Br();var K5=N(Fa()),NJ=N(HA()),MJ=N(lA()),V5=N(Md());tt();dt();var rDe=K5.default.default?K5.default.default:K5.default,nI=new qe("config");function LJ(t){let e=new rDe({concurrency:1}),r={async getAll(s={}){let o=await F5(nI,t.get.bind(t),t.has.bind(t),t);return JSON.parse($e(o))},async get(s,o={}){if(s==null)throw new yo(`Key ${s} does not exist in config`);let a=await this.getAll(o),c=(0,NJ.default)(a,s);if(c===void 0)throw new yo(`Key ${s} does not exist in config`);return c},set(s,o,a={}){if(typeof s!="string"&&!(s instanceof String))throw(0,V5.default)(new Error("Invalid key type: "+typeof s),"ERR_INVALID_KEY");if(o===void 0||o instanceof Uint8Array)throw(0,V5.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>i({key:s,value:o},a.signal))},replace(s,o={}){if(!s||s instanceof Uint8Array)throw(0,V5.default)(new Error("Invalid value type: "+typeof s),"ERR_INVALID_VALUE");return e.add(()=>i({key:void 0,value:s},o.signal))},async exists(){return U5(nI,t.has.bind(t),t)}};return r;async function i(s,o){if(o&&o.aborted)return;let a=s.key,c=s.value;if(a){let u=await r.getAll();return typeof u=="object"&&u!==null&&(0,MJ.default)(u,a,c),n(u)}return n(c)}function n(s){let o=Xe(JSON.stringify(s,null,2));return t.put(nI,o)}}l();var KJ=N(FJ());tt();dt();var oI=new qe("datastore_spec");function VJ(t){return{exists(){return t.has(oI)},async get(){let e=await t.get(oI);return JSON.parse($e(e))},async set(e){return t.put(oI,Xe(JSON.stringify((0,KJ.default)(e,{deep:!0}))))}}}l();Br();dt();var aI=new qe("api");function zJ(t){return{async get(){let e=await t.get(aI);return e&&e.toString()},set(e){return t.put(aI,Xe(e.toString()))},delete(){return t.delete(aI)}}}l();var HJ=N(sa()),$J=N(lc()),GJ=N(fc());Te();var WJ=N(Md());Jc();function YJ(t){return{open(){return t.open()},close(){return t.close()},query(e,r){return t.query(e,r)},queryKeys(e,r){return t.queryKeys(e,r)},async get(e,r){let i=tl(e);return i.isIdentity?Promise.resolve(i.digest):t.get(e,r)},async*getMany(e,r){for await(let i of e)yield this.get(i,r)},async put(e,r,i){let{isIdentity:n}=tl(e);n||await t.put(e,r,i)},async*putMany(e,r){let i=(0,$J.default)();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await(0,GJ.default)(t.putMany(async function*(){for await(let{key:s,value:o}of e)tl(s).isIdentity||(yield{key:s,value:o}),i.push({key:s,value:o})}())),i.end()}catch(s){i.end(s)}}),yield*i},has(e,r){let{isIdentity:i}=tl(e);return i?Promise.resolve(!0):t.has(e,r)},delete(e,r){let{isIdentity:i}=tl(e);return i?Promise.resolve():t.delete(e,r)},deleteMany(e,r){return t.deleteMany((0,HJ.default)(e,i=>!tl(i).isIdentity),r)},batch(){let e=t.batch();return{put(r,i){let{isIdentity:n}=tl(r);n||e.put(r,i)},delete(r){let{isIdentity:i}=tl(r);i||e.delete(r)},commit:r=>e.commit(r)}}}}function tl(t){let e=J.asCID(t);if(e==null)throw(0,WJ.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==Es.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}l();l();var XJ=N(Ee()),QJ=(0,XJ.default)("ipfs:repo:lock:memory"),ZJ="repo.lock",Jg={};async function iDe(t){let e=t+"/"+ZJ;if(QJ("locking %s",e),Jg[e]===!0)throw new Hp(`Lock already being held for file: ${e}`);return Jg[e]=!0,{async close(){Jg[e]&&delete Jg[e]}}}async function nDe(t){let e=t+"/"+ZJ;return QJ(`checking lock: ${e}`),Boolean(Jg[e])}var z5={lock:iDe,locked:nDe};var JJ={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:z5};l();var cI={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};l();Te();var ree=N(Md()),iee=N(Ee()),fI=N(Od());l();Br();fy();Hs();var eee=N(Md());gn();Nn();function em(t){let e=J.asCID(t);if(e==null)throw(0,eee.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let r=ir.encode(e.multihash.bytes);return new qe("/"+r.slice(1).toUpperCase(),!1)}function uI(t){return Pi(ir.decode(`b${t.toString().toLowerCase().substring(1)}`))}l();var tee=N(Ee());var sDe=(0,tee.default)("ipfs:repo:utils:walk-dag");async function*Gp(t,e,r,i){try{let n=await e.get(t,i),s=await r(t.code),o=Dp({bytes:n,cid:t,codec:s});for(let[,a]of o.links())yield a,yield*Gp(a,e,r,i)}catch(n){throw sDe("Could not walk DAG for CID",t.toString(),n),n}}function oDe(t){let e=`Invalid type '${t}', must be one of {direct, indirect, recursive, all}`;return(0,ree.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var lI=class{constructor({pinstore:e,blockstore:r,loadCodec:i}){this.pinstore=e,this.blockstore=r,this.loadCodec=i,this.log=(0,iee.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,r={}){await this.blockstore.get(e,r);let i={depth:0};return e.version!==0&&(i.version=e.version),e.code!==Pt&&(i.codec=e.code),r.metadata&&(i.metadata=r.metadata),this.pinstore.put(em(e),zo(i))}unpin(e,r){return this.pinstore.delete(em(e),r)}async pinRecursively(e,r={}){await this.fetchCompleteDag(e,r);let i={depth:1/0};e.version!==0&&(i.version=e.version),e.code!==Pt&&(i.codec=e.code),r.metadata&&(i.metadata=r.metadata),await this.pinstore.put(em(e),zo(i))}async*directKeys(e){for await(let r of this.pinstore.query({filters:[i=>Jn(i.value).depth===0]})){let i=Jn(r.value),n=i.version||0,s=i.codec!=null?i.codec:Pt,o=uI(r.key);yield{cid:J.create(n,s,o),metadata:i.metadata}}}async*recursiveKeys(e){for await(let r of this.pinstore.query({filters:[i=>Jn(i.value).depth===1/0]})){let i=Jn(r.value),n=i.version||0,s=i.codec!=null?i.codec:Pt,o=uI(r.key);yield{cid:J.create(n,s,o),metadata:i.metadata}}}async*indirectKeys(e){for await(let{cid:r}of this.recursiveKeys())for await(let i of Gp(r,this.blockstore,this.loadCodec,e)){let n=[Ct.recursive];(await this.isPinnedWithType(i,n)).pinned||(yield i)}}async isPinnedWithType(e,r,i){Array.isArray(r)||(r=[r]);let n=r.includes(Ct.all),s=r.includes(Ct.direct),o=r.includes(Ct.recursive),a=r.includes(Ct.indirect);if(o||s||n){let f=await(0,fI.default)(this.pinstore.query({prefix:em(e).toString(),filters:[d=>{if(n)return!0;let h=Jn(d.value);return r.includes(h.depth===0?Ct.direct:Ct.recursive)}],limit:1}));if(f){let d=Jn(f.value);return{cid:e,pinned:!0,reason:d.depth===0?Ct.direct:Ct.recursive,metadata:d.metadata}}}let c=this;async function*u(f,d){for await(let{cid:h}of d)for await(let p of Gp(h,c.blockstore,c.loadCodec))if(p.equals(f)){yield h;return}}if(n||a){let f=await(0,fI.default)(u(e,this.recursiveKeys()));if(f)return{cid:e,pinned:!0,reason:Ct.indirect,parent:f}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,r){let i=new Set,n=async(s,o)=>{if(i.has(s.toString()))return;i.add(s.toString());let a=await this.blockstore.get(s,o),c=await this.loadCodec(s.code),u=Dp({bytes:a,cid:s,codec:c});await Promise.all([...u.links()].map(([,f])=>n(f,o)))};await n(e,r)}static checkPinType(e){if(typeof e!="string"||!Object.keys(Ct).includes(e))throw oDe(e);return!0}};l();var nee=N(oo()),see=N(Md());function oee(t,e){return{open(){return e.open()},close(){return e.close()},query(r,i){return e.query(r,i)},queryKeys(r,i){return e.queryKeys(r,i)},async get(r,i){return e.get(r,i)},async*getMany(r,i){yield*e.getMany(r,i)},async put(r,i,n){await e.put(r,i,n)},async*putMany(r,i){yield*e.putMany(r,i)},has(r,i){return e.has(r,i)},async delete(r,i){return await aee(r,t),e.delete(r,i)},deleteMany(r,i){return e.deleteMany((0,nee.default)(r,async n=>(await aee(n,t),n)),i)},batch(){return e.batch()}}}async function aee(t,e){let{pinned:r,reason:i}=await e.isPinnedWithType(t,Ct.all);if(r)throw(0,see.default)(new Error(`pinned: ${i}`),"ERR_BLOCK_PINNED")}var yee=N(PA());l();Te();var cee=N(Ee());ia();var uee=N(kb()),fee=N(Nr()),dI=N(cp()),H5=N(oo()),lee=N(sa());Br();gn();var tm=(0,cee.default)("ipfs:repo:gc"),aDe=un().code,cDe=256,uDe=new qe("/local/filesroot");function dee({gcLock:t,pins:e,blockstore:r,root:i,loadCodec:n}){async function*s(){let o=Date.now();tm("Creating set of marked blocks");let a=await t.writeLock();try{let c=await fDe({pins:e,blockstore:r,root:i,loadCodec:n}),u=r.queryKeys({});yield*lDe({blockstore:r},c,u),tm(`Complete (${Date.now()-o}ms)`)}finally{a()}}return s}async function fDe({pins:t,blockstore:e,loadCodec:r,root:i}){let n=async function*(){let a;try{a=await i.get(uDe)}catch(u){if(u.code===aDe){tm("No blocks in MFS");return}throw u}let c=J.decode(a);yield c,yield*Gp(c,e,r)}(),s=(0,dI.default)((0,H5.default)(t.recursiveKeys(),({cid:a})=>a),t.indirectKeys(),(0,H5.default)(t.directKeys(),({cid:a})=>a),n),o=new Set;for await(let a of(0,dI.default)(s,n))o.add(ir.encode(a.multihash.bytes));return o}async function*lDe({blockstore:t},e,r){let i=0,n=0;yield*(0,fee.pipe)((0,uee.default)((0,H5.default)(r,async o=>async function(){i++;try{let c=ir.encode(o.multihash.bytes);if(e.has(c))return null;try{await t.delete(o),n++}catch(u){return{err:new Error(`Could not delete block with CID ${o}: ${u.message}`)}}return{cid:o}}catch(c){let u=`Could delete block with CID ${o}`;return tm(u,c),{err:new Error(u+`: ${c.message}`)}}}),cDe),o=>(0,lee.default)(o,Boolean)),tm(`Marked set has ${e.size} unique blocks. Blockstore has ${i} blocks. Deleted ${n} blocks.`)}var fs=(0,hee.default)("ipfs:repo"),dDe=Number.MAX_SAFE_INTEGER,hDe="repoAutoMigrate",gee=class{constructor(e,r,i,n){if(typeof e!="string")throw new Error("missing repo path");if(typeof r!="function")throw new Error("missing codec loader");this.options=Tt(JJ,n),this.closed=!0,this.path=e,this.root=i.root,this.datastore=i.datastore,this.keys=i.keys;let s=i.blocks,o=i.pins;this.pins=new lI({pinstore:o,blockstore:s,loadCodec:r});let a=oee(this.pins,s);this.blocks=YJ(a),this.version=BJ(this.root),this.config=LJ(this.root),this.spec=VJ(this.root),this.apiAddr=zJ(this.root),this.gcLock=(0,yee.default)(e,{singleProcess:this.options.repoOwner!==!1}),this.gc=dee({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:r})}async init(e){fs("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(pDe(e)),await this.spec.set(yDe(e)),await this.version.set(zp)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch(e){return!1}}async open(){if(!this.closed)throw(0,Kd.default)(new Error("repo is already open"),CJ);fs("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),fs("acquired repo.lock"),!await this.version.check(zp))if(await this._isAutoMigrationEnabled())await this._migrate(zp,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new $p("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");fs("creating datastore"),await this.datastore.open(),fs("creating blocks"),this.blocks.open(),fs("creating keystore"),await this.keys.open(),fs("creating pins"),await this.pins.pinstore.open(),this.closed=!1,fs("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(r){fs("error removing lock",r)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,Kd.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){fs("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(r){throw r.code==="ERR_NOT_FOUND"?(0,Kd.default)(new Error("repo is not initialized yet"),Fd,{path:this.path}):r}if(!e)throw(0,Kd.default)(new Error("repo is not initialized yet"),Fd,{path:this.path})}async close(){if(this.closed)throw(0,Kd.default)(new Error("repo is already closed"),OJ);fs("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==Fd&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),fs("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,r,i,n,s]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),mee(this.datastore),mee(this.keys)]),o=r.size+n+s;return{repoPath:this.path,storageMax:e,version:i,numObjects:r.count,repoSize:o}}throw(0,Kd.default)(new Error("repo is not initialized yet"),Fd,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(hDe)}catch(r){if(r.code===yo.code)e=!0;else throw r}return e}async _migrate(e,r){return await this.version.get()>e?(fs(`reverting to version ${e}`),AJ(this.path,r,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(fs(`migrating to version ${e}`),xJ(this.path,r,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,pee.default)(e))}catch(e){return BigInt(dDe)}}async _blockStat(){let e=BigInt(0),r=BigInt(0);if(this.blocks)for await(let{key:i,value:n}of this.blocks.query({}))e+=BigInt(1),r+=BigInt(n.byteLength),r+=BigInt(i.bytes.byteLength);return{count:e,size:r}}};async function mee(t){let e=BigInt(0);for await(let r of t.query({}))e+=BigInt(r.value.byteLength),e+=BigInt(r.key.uint8Array().byteLength);return e}function bee(t,e,r,i){return new gee(t,e,r,i)}function pDe(t){return t.Datastore=Object.assign({},cI,(0,hI.default)(t,"datastore")),t}function yDe(t){let e={...cI.Spec,...(0,hI.default)(t,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(r=>({mountpoint:r.mountpoint,type:r.child.type,path:r.child.path,shardFunc:r.child.shardFunc}))}}l();var xm=N(sa()),Jie=N(oo()),MT=N(op()),LT=N(wee()),ene=N(Zie()),nh=class extends Is{constructor(e,r){super();this.path=e,this.opts=r,r&&r.db?(this.database=r.db,delete r.db):this.database=ene.default}_initDb(){return new Promise((e,r)=>{this.db=this.database(this.path,{...this.opts,valueEncoding:"binary",compression:!1},i=>{if(i)return r(i);e(this.db)})})}async open(){try{this.db?await this.db.open():this.db=await this._initDb()}catch(e){throw up.dbOpenFailedError(e)}}async put(e,r){try{await this.db.put(e.toString(),r)}catch(i){throw up.dbWriteFailedError(i)}}async get(e){let r;try{r=await this.db.get(e.toString())}catch(i){throw i.notFound?up.notFoundError(i):up.dbWriteFailedError(i)}return r}async has(e){try{await this.db.get(e.toString())}catch(r){if(r.notFound)return!1;throw r}return!0}async delete(e){try{await this.db.del(e.toString())}catch(r){throw up.dbDeleteFailedError(r)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(r,i)=>{e.push({type:"put",key:r.toString(),value:i})},delete:r=>{e.push({type:"del",key:r.toString()})},commit:()=>this.db.batch(e)}}query(e){let r=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(r=e.filters.reduce((s,o)=>(0,xm.default)(s,o),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((s,o)=>(0,LT.default)(s,o),r));let{offset:i,limit:n}=e;if(i){let s=0;r=(0,xm.default)(r,()=>s++>=i)}return n&&(r=(0,MT.default)(r,n)),r}queryKeys(e){let r=(0,Jie.default)(this._query({values:!1,prefix:e.prefix}),({key:s})=>s);Array.isArray(e.filters)&&(r=e.filters.reduce((s,o)=>(0,xm.default)(s,o),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((s,o)=>(0,LT.default)(s,o),r));let{offset:i,limit:n}=e;if(i){let s=0;r=(0,xm.default)(r,()=>s++>=i)}return n&&(r=(0,MT.default)(r,n)),r}_query(e){let r={keys:!0,keyAsBuffer:!0,values:e.values};if(e.prefix!=null){let i=e.prefix.toString();r.gte=i,r.lt=i+"\xFF"}return WLe(this.db.iterator(r))}};function WLe(t){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,r)=>{t.next((i,n,s)=>{if(i)return r(i);if(n==null)return t.end(o=>{if(o)return r(o);e({done:!0,value:void 0})});e({done:!1,value:{key:new qe(n,!1),value:s}})})}),return:()=>new Promise((e,r)=>{t.end(i=>{if(i)return r(i);e({done:!0,value:void 0})})})}}}}l();var UT=N(fc()),FT=N(lc());Br();Te();Hs();Nn();gn();li();var one=N(ine());l();var qT=N(fc()),sh=N(sa()),jT=N(op()),nne=N(yd()),sne=(t,e)=>async function*(){yield*(await(0,nne.default)(t)).sort(e)}(),Pu=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,r,i){return Promise.reject(new Error(".put is not implemented"))}get(e,r){return Promise.reject(new Error(".get is not implemented"))}has(e,r){return Promise.reject(new Error(".has is not implemented"))}delete(e,r){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,r={}){for await(let{key:i,value:n}of e)await this.put(i,n,r),yield{key:i,value:n}}async*getMany(e,r={}){for await(let i of e)yield this.get(i,r)}async*deleteMany(e,r={}){for await(let i of e)await this.delete(i,r),yield i}batch(){let e=[],r=[];return{put(i,n){e.push({key:i,value:n})},delete(i){r.push(i)},commit:async i=>{await(0,qT.default)(this.putMany(e,i)),e=[],await(0,qT.default)(this.deleteMany(r,i)),r=[]}}}async*_all(e,r){throw new Error("._all is not implemented")}async*_allKeys(e,r){throw new Error("._allKeys is not implemented")}query(e,r){let i=this._all(e,r);if(e.prefix!=null&&(i=(0,sh.default)(i,n=>n.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>(0,sh.default)(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>sne(n,s),i)),e.offset!=null){let n=0;i=(0,sh.default)(i,()=>n++>=(e.offset||0))}return e.limit!=null&&(i=(0,jT.default)(i,e.limit)),i}queryKeys(e,r){let i=this._allKeys(e,r);if(e.prefix!=null&&(i=(0,sh.default)(i,n=>n.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(i=e.filters.reduce((n,s)=>(0,sh.default)(n,s),i)),Array.isArray(e.orders)&&(i=e.orders.reduce((n,s)=>sne(n,s),i)),e.offset!=null){let n=0;i=(0,sh.default)(i,()=>n++>=e.offset)}return e.limit!=null&&(i=(0,jT.default)(i,e.limit)),i}};function h1(t){let e=J.asCID(t);if(!e)throw(0,one.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new qe("/"+ir.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function ul(t){return J.createV1(Ci,Pi(ir.decode("b"+t.toString().slice(1).toLowerCase())))}function KT(t){let e=t.substring(0,1);if(e==="/")return KT(t.substring(1));let r;e.toLowerCase()==="b"?r=s=>ir.decode(s.toLowerCase()).subarray(2):e.toLowerCase()==="c"?r=s=>o9.decode(s.toLowerCase()).subarray(2):e==="z"?r=s=>pt.decode(s).subarray(2):e==="Q"?r=s=>pt.decode("z"+s):r=s=>ir.decode("b"+s.toLowerCase()).subarray(2);let i;for(let s=1;s<t.length;s++)try{i=r(t.substring(0,s))}catch(o){if(o.message!=="Unexpected end of data")throw o}let n="/C";return i&&(n=`/${ir.encode(i).slice(1,-1).toUpperCase()||"C"}`),n}function XLe(t){return{...t,prefix:t.prefix?KT(t.prefix):void 0,filters:t.filters?t.filters.map(e=>r=>e({key:ul(r.key),value:r.value})):void 0,orders:t.orders?t.orders.map(e=>(r,i)=>e({key:ul(r.key),value:r.value},{key:ul(i.key),value:i.value})):void 0}}function QLe(t){return{...t,prefix:t.prefix?KT(t.prefix):void 0,filters:t.filters?t.filters.map(e=>r=>e(ul(r))):void 0,orders:t.orders?t.orders.map(e=>(r,i)=>e(ul(r),ul(i))):void 0}}var VT=class extends Pu{constructor(e){super();this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,r){for await(let{key:i,value:n}of this.child.query(XLe(e),r))yield{key:ul(i),value:n}}async*queryKeys(e,r){for await(let i of this.child.queryKeys(QLe(e),r))yield ul(i)}async get(e,r){return this.child.get(h1(e),r)}async*getMany(e,r){for await(let i of e)yield this.get(i,r)}async put(e,r,i){await this.child.put(h1(e),r,i)}async*putMany(e,r){let i=(0,FT.default)();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let s=this.child;await(0,UT.default)(this.child.putMany(async function*(){for await(let o of e){let a=h1(o.key);await s.has(a,r)||(yield{key:a,value:o.value}),i.push(o)}}())),i.end()}catch(s){i.end(s)}}),yield*i}has(e,r){return this.child.has(h1(e),r)}delete(e,r){return this.child.delete(h1(e),r)}deleteMany(e,r){let i=(0,FT.default)();return(0,UT.default)(this.child.deleteMany(async function*(){for await(let n of e)yield h1(n),i.push(n);i.end()}(),r)).catch(n=>{i.end(n)}),i}};function ane(t,e,r){let i=r.path||"ipfs";return bee(i,n=>e.getCodec(n),{root:new nh(i,{prefix:"",version:2}),blocks:new VT(new nh(`${i}/blocks`,{prefix:"",version:2})),datastore:new nh(`${i}/datastore`,{prefix:"",version:2}),keys:new nh(`${i}/keys`,{prefix:"",version:2}),pins:new nh(`${i}/pins`,{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||t,repoLock:z5})}dt();tt();var gw=N(it());l();var Vt=N(ng());var F6e=N(Rt());l();var aoe=N(_R()),ER={gossipsub:aoe.default};var K6e=N(hoe()),V6e=N(voe());l();l();var cUe=t=>Promise.reject(new Error(`No base found for "${t}"`)),Cm=class{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||cUe;for(let r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];let r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};l();var uUe=t=>Promise.reject(new Error(`No codec found for "${t}"`)),Om=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||uUe;for(let r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e])return r[e];let i=await this._loadCodec(e);return r[e]==null&&this.addCodec(i),i}listCodecs(){return Object.values(this._codecsByName)}};l();var fUe=t=>Promise.reject(new Error(`No hasher found for "${t}"`)),km=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||fUe;for(let r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e])return r[e];let i=await this._loadHasher(e);return r[e]==null&&this.addHasher(i),i}listHashers(){return Object.values(this._hashersByName)}};Jc();O6();l();l();Te();l();l();var AR=N(rt()),Cc=N(z2());var Soe=N(Ee()),lh=N(Iy());l();var woe=N(rt()),_oe=N(v5());function xR(t){try{t=(0,_oe.default)(new woe.Multiaddr(t))}catch(e){}return t=t.toString(),t}l();var Eoe=()=>{};var xoe=(0,Soe.default)("ipfs-http-client:lib:error-handler"),lUe=Tt.bind({ignoreUndefined:!0}),dUe=Cc.isBrowser||Cc.isWebWorker?location.protocol:"http",hUe=Cc.isBrowser||Cc.isWebWorker?location.hostname:"localhost",pUe=Cc.isBrowser||Cc.isWebWorker?location.port:"5001",yUe=(t={})=>{let e,r={},i;if(typeof t=="string"||AR.Multiaddr.isMultiaddr(t))e=new URL(xR(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||AR.Multiaddr.isMultiaddr(t.url))e=new URL(xR(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t||{};let n=(r.protocol||dUe).replace(":",""),s=(r.host||hUe).split(":")[0],o=r.port||pUe;e=new URL(`${n}://${s}:${o}`)}if(r.apiPath?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),Cc.isNode){let n=Eoe(e);i=r.agent||new n({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:i}},gUe=async t=>{let e;try{if((t.headers.get("Content-Type")||"").startsWith("application/json")){let i=await t.json();xoe(i),e=i.Message||i.message}else e=await t.text()}catch(i){xoe("Failed to parse error response",i),e=i.message}let r=new lh.default.HTTPError(t);throw e&&(e.includes("deadline has elapsed")&&(r=new lh.default.TimeoutError),e&&e.includes("context deadline exceeded")&&(r=new lh.default.TimeoutError)),e&&e.includes("request timed out")&&(r=new lh.default.TimeoutError),e&&(r.message=e),r},mUe=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Aoe=t=>t.replace(mUe,function(e){return"-"+e.toLowerCase()}),bUe=t=>typeof t=="string"?gf(t):t,dh=class extends lh.default{constructor(e={}){let r=yUe(e);super({timeout:bUe(r.timeout||0)||void 0,headers:r.headers,base:`${r.url}`,handleError:gUe,transformSearchParams:n=>{let s=new URLSearchParams;for(let[o,a]of n)a!=="undefined"&&a!=="null"&&o!=="signal"&&s.append(Aoe(o),a),o==="timeout"&&!isNaN(a)&&s.append(Aoe(o),a);return s},agent:r.agent});delete this.get,delete this.put,delete this.delete,delete this.options;let i=this.fetch;this.fetch=(n,s={})=>(typeof n=="string"&&!n.startsWith("/")&&(n=`${r.url}/${n}`),i.call(this,n,lUe(s,{method:"POST"})))}},Wvt=lh.default.HTTPError;var re=t=>e=>t(new dh(e),e);l();l();function av(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}l();var Roe=N(hh());function cv(t){if(t==null)return;let e;if(t.secs!=null&&(e={secs:t.secs,nsecs:t.nsecs}),t.Seconds!=null&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){let r=t.getTime(),i=Math.floor(r/1e3);e={secs:i,nsecs:(r-i*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(e,"secs")){if(e!=null&&e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw(0,Roe.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}function oe({arg:t,searchParams:e,hashAlg:r,mtime:i,mode:n,...s}={}){e&&(s={...s,...e}),r&&(s.hash=r),i!=null&&(i=cv(i),s.mtime=i.secs,s.mtimeNsecs=i.nsecs),n!=null&&(s.mode=av(n)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);let o=new URLSearchParams(s);return t.forEach(a=>o.append("arg",a)),o}var Poe=re(t=>{async function e(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json()).Keys||[]).map(n=>J.parse(n["/"]))}return e});l();Te();var Coe=re(t=>{async function e(r,i={}){return((await(await t.post("bitswap/wantlist",{signal:i.signal,searchParams:oe({...i,peer:r.toString()}),headers:i.headers})).json()).Keys||[]).map(s=>J.parse(s["/"]))}return e});l();Te();var uv=re(t=>{async function e(r={}){let i=await t.post("bitswap/stat",{searchParams:oe(r),signal:r.signal,headers:r.headers});return wUe(await i.json())}return e});function wUe(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist||[]).map(e=>J.parse(e["/"])),peers:t.Peers||[],blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}l();var Ooe=re(t=>{async function e(r,i={}){return(await t.post("bitswap/unwant",{signal:i.signal,searchParams:oe({arg:r.toString(),...i}),headers:i.headers})).json()}return e});function koe(t){return{wantlist:Poe(t),wantlistForPeer:Coe(t),unwant:Ooe(t),stat:uv(t)}}l();l();var fv=re(t=>{async function e(r,i={}){let n=await t.post("block/get",{signal:i.signal,searchParams:oe({arg:r.toString(),...i}),headers:i.headers});return new Uint8Array(await n.arrayBuffer())}return e});l();Te();l();l();l();var Doe=N(Hl()),Boe=N(gp()),Noe=N(yp()),Moe=N(yd());async function Loe(t){if(co(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(mu(t))return t;if(bu(t)&&(t=(0,Noe.default)(t)),Symbol.iterator in t||Symbol.asyncIterator in t){let e=(0,Boe.default)(t),{value:r,done:i}=await e.peek();if(i)return qoe(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await(0,Moe.default)(e))]);if(co(r)||typeof r=="string"||r instanceof String)return qoe(e)}throw(0,Doe.default)(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}async function qoe(t){let e=[];for await(let r of t)e.push(r);return new Blob(e)}function joe(t){return Ub(t,Loe,!0)}l();function Uoe(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function Si(t,e,r={}){let i=[],n=new FormData,s=0,o=0;for await(let{content:a,path:c,mode:u,mtime:f}of joe(t)){let d="",h=a?"file":"dir";s>0&&(d=`-${s}`);let p=h+d,y=[];if(u!=null&&y.push(`mode=${Uoe(u)}`),f!=null){let{secs:m,nsecs:w}=f;y.push(`mtime=${m}`),w!=null&&y.push(`mtime-nsecs=${w}`)}if(y.length&&(p=`${p}?${y.join("&")}`),a){n.set(p,a,c!=null?encodeURIComponent(c):void 0);let m=o+a.size;i.push({name:c,start:o,end:m}),o=m}else if(c!=null)n.set(p,new File([""],encodeURIComponent(c),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");s++}return{total:o,parts:i,headers:r,body:n}}l();var Foe=N(yf());function _Ue(t){return t.filter(Boolean)}function xi(...t){return(0,Foe.anySignal)(_Ue(t))}var Koe=N(_n()),Voe=re(t=>{async function e(r,i={}){let n=new Koe.AbortController,s=xi(n.signal,i.signal),o;try{o=await(await t.post("block/put",{signal:s,searchParams:oe(i),...await Si([r],n,i.headers)})).json()}catch(a){if(i.format==="dag-pb")return e(r,{...i,format:"protobuf"});if(i.format==="dag-cbor")return e(r,{...i,format:"cbor"});throw a}return J.parse(o.Key)}return e});l();Te();var zoe=re(t=>{async function*e(r,i={}){Array.isArray(r)||(r=[r]);let n=await t.post("block/rm",{signal:i.signal,searchParams:oe({arg:r.map(s=>s.toString()),"stream-channels":!0,...i}),headers:i.headers});for await(let s of n.ndjson())yield EUe(s)}return e});function EUe(t){let e={cid:J.parse(t.Hash)};return t.Error&&(e.error=new Error(t.Error)),e}l();Te();var Hoe=re(t=>{async function e(r,i={}){let s=await(await t.post("block/stat",{signal:i.signal,searchParams:oe({arg:r.toString(),...i}),headers:i.headers})).json();return{cid:J.parse(s.Key),size:s.Size}}return e});function $oe(t){return{get:fv(t),put:Voe(t),rm:zoe(t),stat:Hoe(t)}}l();l();var Goe=N(rt()),Woe=re(t=>{async function e(r,i={}){let n=await t.post("bootstrap/add",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers}),{Peers:s}=await n.json();return{Peers:s.map(o=>new Goe.Multiaddr(o))}}return e});l();var Yoe=N(rt()),Xoe=re(t=>{async function e(r={}){let i=await t.post("bootstrap/rm",{signal:r.signal,searchParams:oe({...r,all:!0}),headers:r.headers}),{Peers:n}=await i.json();return{Peers:n.map(s=>new Yoe.Multiaddr(s))}}return e});l();var Qoe=N(rt()),Zoe=re(t=>{async function e(r={}){let i=await t.post("bootstrap/list",{signal:r.signal,searchParams:oe(r),headers:r.headers}),{Peers:n}=await i.json();return{Peers:n.map(s=>new Qoe.Multiaddr(s))}}return e});l();var Joe=N(rt()),eae=re(t=>{async function e(r={}){let i=await t.post("bootstrap/add",{signal:r.signal,searchParams:oe({...r,default:!0}),headers:r.headers}),{Peers:n}=await i.json();return{Peers:n.map(s=>new Joe.Multiaddr(s))}}return e});l();var tae=N(rt()),rae=re(t=>{async function e(r,i={}){let n=await t.post("bootstrap/rm",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers}),{Peers:s}=await n.json();return{Peers:s.map(o=>new tae.Multiaddr(o))}}return e});function iae(t){return{add:Woe(t),clear:Xoe(t),list:Zoe(t),reset:eae(t),rm:rae(t)}}l();l();l();var nae=re(t=>{async function e(r,i={}){let s=await(await t.post("config/profile/apply",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}return e});l();l();function lt(t){if(t==null)return t;let e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((i,n)=>(e.test(n)?i[n.toLowerCase()]=t[n]:e.test(n[0])?i[n[0].toLowerCase()+n.slice(1)]=t[n]:i[n]=t[n],i),r)}var sae=re(t=>{async function e(r={}){return(await(await t.post("config/profile/list",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json()).map(s=>lt(s))}return e});function oae(t){return{apply:nae(t),list:sae(t)}}l();var aae=re(t=>async(r,i={})=>{if(!r)throw new Error("key argument is required");return(await(await t.post("config",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).json()).Value});l();var cae=re(t=>async(r={})=>await(await t.post("config/show",{signal:r.signal,searchParams:oe({...r}),headers:r.headers})).json());l();dt();var uae=N(_n()),fae=re(t=>async(r,i={})=>{let n=new uae.AbortController,s=xi(n.signal,i.signal);await(await t.post("config/replace",{signal:s,searchParams:oe(i),...await Si([Xe(JSON.stringify(r))],n,i.headers)})).text()});l();var lae=re(t=>async(r,i,n={})=>{if(typeof r!="string")throw new Error("Invalid key type");let s={...n,...SUe(r,i)};await(await t.post("config",{signal:n.signal,searchParams:oe(s),headers:n.headers})).text()}),SUe=(t,e)=>{switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}};function dae(t){return{getAll:cae(t),get:aae(t),set:lae(t),replace:fae(t),profiles:oae(t)}}l();l();var hae=re(t=>{async function*e(r,i={}){yield*(await t.post("dag/export",{signal:i.signal,searchParams:oe({arg:r.toString()}),headers:i.headers})).iterator()}return e});l();l();Te();var IR=N(hh());async function*TR(t,e,r,i,n){let s=async u=>{let f=await r.getCodec(u.code),d=await i(u,n);return f.decode(d)},o=e.split("/").filter(Boolean),a=await s(t),c=t;for(o.length||(yield{value:a,remainderPath:""});o.length;){let u=o.shift();if(!u)throw(0,IR.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:o.join("/")};else throw(0,IR.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");let f=J.asCID(a);f&&(c=f,a=await s(a))}}var pae=N(Od()),yae=N(ss()),gae=N(hh());var mae=(t,e)=>re((i,n)=>{let s=fv(n);return async(a,c={})=>{if(c.path){let p=c.localResolve?await(0,pae.default)(TR(a,c.path,t,s,c)):await(0,yae.default)(TR(a,c.path,t,s,c));if(!p)throw(0,gae.default)(new Error("Not found"),"ERR_NOT_FOUND");return p}let u=await t.getCodec(a.code),f=await s(a,c);return{value:u.decode(f),remainderPath:""}}})(e);l();var bae=N(_n());Te();var vae=re(t=>{async function*e(r,i={}){let n=new bae.AbortController,s=xi(n.signal,i.signal),{headers:o,body:a}=await Si(r,n,i.headers),c=await t.post("dag/import",{signal:s,headers:o,body:a,searchParams:oe({"pin-roots":i.pinRoots})});for await(let{Root:u}of c.ndjson())if(u!==void 0){let{Cid:{"/":f},PinErrorMsg:d}=u;yield{root:{cid:J.parse(f),pinErrorMsg:d}}}}return e});l();Te();var wae=N(_n()),lv=(t,e)=>re(i=>async(s,o={})=>{let a={format:"dag-cbor",hashAlg:"sha2-256",inputEnc:"raw",...o},u=(await t.getCodec(a.format)).encode(s),f=new wae.AbortController,d=xi(f.signal,a.signal),p=await(await i.post("dag/put",{timeout:a.timeout,signal:d,searchParams:oe(a),...await Si([u],f,a.headers)})).json();return J.parse(p.Cid["/"])})(e);l();Te();var _ae=re(t=>async(r,i={})=>{let s=await(await t.post("dag/resolve",{signal:i.signal,searchParams:oe({arg:`${r}${i.path?`/${i.path}`.replace(/\/[/]+/g,"/"):""}`,...i}),headers:i.headers})).json();return{cid:J.parse(s.Cid["/"]),remainderPath:s.RemPath}});function Eae(t,e){return{export:hae(e),get:mae(t,e),import:vae(e),put:lv(t,e),resolve:_ae(e)}}l();l();var Iae=N(rt());l();var Sae=2;var xae=4,Aae=5;var Tae=re(t=>{async function e(r,i={}){let n=await t.post("dht/findpeer",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers});for await(let s of n.ndjson())if(s.Type===Sae&&s.Responses){let{ID:o,Addrs:a}=s.Responses[0];return{id:o,addrs:(a||[]).map(c=>new Iae.Multiaddr(c))}}throw new Error("not found")}return e});l();var Rae=N(rt());var Pae=re(t=>{async function*e(r,i={}){let n=await t.post("dht/findprovs",{signal:i.signal,searchParams:oe({arg:r.toString(),...i}),headers:i.headers});for await(let s of n.ndjson())if(s.Type===xae&&s.Responses)for(let{ID:o,Addrs:a}of s.Responses)yield{id:o,addrs:(a||[]).map(c=>new Rae.Multiaddr(c))}}return e});l();dt();tt();var Cae=re(t=>{async function e(r,i={}){let n=await t.post("dht/get",{signal:i.signal,searchParams:oe({arg:r instanceof Uint8Array?$e(r):r,...i}),headers:i.headers});for await(let s of n.ndjson())if(s.Type===Aae)return Xe(s.Extra,"base64pad");throw new Error("not found")}return e});l();var Oae=N(rt());var kae=re(t=>{async function*e(r,i={recursive:!1}){let n=Array.isArray(r)?r:[r],s=await t.post("dht/provide",{signal:i.signal,searchParams:oe({arg:n.map(o=>o.toString()),...i}),headers:i.headers});for await(let o of s.ndjson())o=lt(o),o.responses?o.responses=o.responses.map(({ID:a,Addrs:c})=>({id:a,addrs:(c||[]).map(u=>new Oae.Multiaddr(u))})):o.responses=[],yield o}return e});l();var Dae=N(rt());var Bae=N(_n());tt();var Nae=re(t=>{async function*e(r,i,n={}){let s=new Bae.AbortController,o=xi(s.signal,n.signal),a=await t.post("dht/put",{signal:o,searchParams:oe({arg:$e(r),...n}),...await Si([i],s,n.headers)});for await(let c of a.ndjson())c=lt(c),c.responses&&(c.responses=c.responses.map(({ID:u,Addrs:f})=>({id:u,addrs:(f||[]).map(d=>new Dae.Multiaddr(d))}))),yield c}return e});l();var Mae=N(rt());var Lae=re(t=>{async function*e(r,i={}){let n=await t.post("dht/query",{signal:i.signal,searchParams:oe({arg:r.toString(),...i}),headers:i.headers});for await(let s of n.ndjson())s=lt(s),s.responses=(s.responses||[]).map(({ID:o,Addrs:a})=>({id:o,addrs:(a||[]).map(c=>new Mae.Multiaddr(c))})),yield s}return e});function qae(t){return{findPeer:Tae(t),findProvs:Pae(t),get:Cae(t),provide:kae(t),put:Nae(t),query:Lae(t)}}l();l();var jae=re(t=>{async function e(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json()}return e});l();var Uae=re(t=>{async function e(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json()}return e});l();var Fae=re(t=>{async function e(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json()}return e});function Kae(t){return{cmds:jae(t),net:Uae(t),sys:Fae(t)}}l();l();var Vae=re(t=>{async function e(r,i,n={}){await(await t.post("files/chmod",{signal:n.signal,searchParams:oe({arg:r,mode:i,...n}),headers:n.headers})).text()}return e});l();Te();var zae=re(t=>{async function e(r,i,n={}){let s=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:n.signal,searchParams:oe({arg:s.concat(i).map(a=>J.asCID(a)?`/ipfs/${a}`:a),...n}),headers:n.headers})).text()}return e});l();Te();var Hae=re(t=>{async function e(r,i={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await t.post("files/flush",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).json();return J.parse(s.Cid)}return e});l();Te();l();function Dm(t){let e=lt(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs||0},delete e.mtimeNsecs),e}var $ae=re(t=>{async function*e(r,i={}){if(!r)throw new Error("ipfs.files.ls requires a path");let n=await t.post("files/ls",{signal:i.signal,searchParams:oe({arg:J.asCID(r)?`/ipfs/${r}`:r,long:!0,...i,stream:!0}),headers:i.headers});for await(let s of n.ndjson())if("Entries"in s)for(let o of s.Entries||[])yield Gae(Dm(o));else yield Gae(Dm(s))}return e});function Gae(t){return t.hash&&(t.cid=J.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}l();var Wae=re(t=>{async function e(r,i={}){await(await t.post("files/mkdir",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).text()}return e});l();var Yae=re(t=>{async function e(r,i,n={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:n.signal,searchParams:oe({arg:r.concat(i),...n}),headers:n.headers})).text()}return e});l();var Qae=N(Bm()),Zae=re(t=>{async function*e(r,i={}){let n=await t.post("files/read",{signal:i.signal,searchParams:oe({arg:r,count:i.length,...i}),headers:i.headers});yield*(0,Qae.default)(n.body)}return e});l();var Jae=re(t=>{async function e(r,i={}){await(await t.post("files/rm",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).text()}return e});l();Te();var dv=re(t=>{async function e(r,i={}){let s=await(await t.post("files/stat",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).json();return s.WithLocality=s.WithLocality||!1,xUe(Dm(s))}return e});function xUe(t){return t.cid=J.parse(t.hash),delete t.hash,t}l();var ece=re(t=>{async function e(r,i={}){await(await t.post("files/touch",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).text()}return e});l();var tce=N(_n()),rce=re(t=>{async function e(r,i,n={}){let s=new tce.AbortController,o=xi(s.signal,n.signal);await(await t.post("files/write",{signal:o,searchParams:oe({arg:r,streamChannels:!0,count:n.length,...n}),...await Si([{content:i,path:"arg",mode:av(n.mode),mtime:cv(n.mtime)}],s,n.headers)})).text()}return e});function ice(t){return{chmod:Vae(t),cp:zae(t),flush:Hae(t),ls:$ae(t),mkdir:Wae(t),mv:Yae(t),read:Zae(t),rm:Jae(t),stat:dv(t),touch:ece(t),write:rce(t)}}l();l();var nce=N(hh()),sce=re(t=>async(r,i,n={})=>{throw(0,nce.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});l();var oce=re(t=>{async function e(r,i={type:"rsa",size:2048}){let s=await(await t.post("key/gen",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).json();return lt(s)}return e});l();var ace=re(t=>{async function e(r,i,n,s={}){let a=await(await t.post("key/import",{signal:s.signal,searchParams:oe({arg:r,pem:i,password:n,...s}),headers:s.headers})).json();return lt(a)}return e});l();var cce=N(hh()),uce=re(t=>async(r,i={})=>{throw(0,cce.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});l();var fce=re(t=>{async function e(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json()).Keys||[]).map(s=>lt(s))}return e});l();var lce=re(t=>{async function e(r,i,n={}){let s=await t.post("key/rename",{signal:n.signal,searchParams:oe({arg:[r,i],...n}),headers:n.headers});return lt(await s.json())}return e});l();var dce=re(t=>{async function e(r,i={}){let s=await(await t.post("key/rm",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).json();return lt(s.Keys[0])}return e});function hce(t){return{export:sce(t),gen:oce(t),import:ace(t),info:uce(t),list:fce(t),rename:lce(t),rm:dce(t)}}l();l();var pce=re(t=>{async function e(r,i,n={}){let s=await t.post("log/level",{signal:n.signal,searchParams:oe({arg:[r,i],...n}),headers:n.headers});return lt(await s.json())}return e});l();var yce=re(t=>{async function e(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json()).Strings}return e});l();var gce=re(t=>{async function*e(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:oe(r),headers:r.headers})).ndjson()}return e});function mce(t){return{level:pce(t),ls:yce(t),tail:gce(t)}}l();l();var bce=re(t=>{async function e(r,i={}){let n=await t.post("name/publish",{signal:i.signal,searchParams:oe({arg:`${r}`,...i}),headers:i.headers});return lt(await n.json())}return e});l();var vce=re(t=>{async function*e(r,i={}){let n=await t.post("name/resolve",{signal:i.signal,searchParams:oe({arg:r,stream:!0,...i}),headers:i.headers});for await(let s of n.ndjson())yield s.Path}return e});l();l();var wce=re(t=>{async function e(r,i={}){let n=await t.post("name/pubsub/cancel",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers});return lt(await n.json())}return e});l();var _ce=re(t=>{async function e(r={}){let i=await t.post("name/pubsub/state",{signal:r.signal,searchParams:oe(r),headers:r.headers});return lt(await i.json())}return e});l();var Ece=re(t=>{async function e(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json()).Strings||[]}return e});function Sce(t){return{cancel:wce(t),state:_ce(t),subs:Ece(t)}}function xce(t){return{publish:bce(t),resolve:vce(t),pubsub:Sce(t)}}l();l();Te();var Ace=re(t=>{async function e(r,i={}){let s=await(await t.post("object/data",{signal:i.signal,searchParams:oe({arg:`${r instanceof Uint8Array?J.decode(r):r}`,...i}),headers:i.headers})).arrayBuffer();return new Uint8Array(s,0,s.byteLength)}return e});l();Te();dt();var Ice=re(t=>{async function e(r,i={}){let s=await(await t.post("object/get",{signal:i.signal,searchParams:oe({arg:`${r instanceof Uint8Array?J.decode(r):r}`,dataEncoding:"base64",...i}),headers:i.headers})).json();return{Data:Xe(s.Data,"base64pad"),Links:(s.Links||[]).map(o=>({Name:o.Name,Hash:J.parse(o.Hash),Tsize:o.Size}))}}return e});l();Te();var Tce=re(t=>{async function e(r,i={}){return((await(await t.post("object/links",{signal:i.signal,searchParams:oe({arg:`${r instanceof Uint8Array?J.decode(r):r}`,...i}),headers:i.headers})).json()).Links||[]).map(o=>({Name:o.Name,Tsize:o.Size,Hash:J.parse(o.Hash)}))}return e});l();Te();var Rce=re(t=>{async function e(r={}){let i=await t.post("object/new",{signal:r.signal,searchParams:oe({arg:r.template,...r}),headers:r.headers}),{Hash:n}=await i.json();return J.parse(n)}return e});l();var Pce=(t,e)=>re(i=>{let n=lv(t,e);async function s(o,a={}){return n(o,{...a,format:"dag-pb",hashAlg:"sha2-256",version:0})}return s})(e);l();Te();var Cce=re(t=>{async function e(r,i={}){let s=await(await t.post("object/stat",{signal:i.signal,searchParams:oe({arg:`${r}`,...i}),headers:i.headers})).json();return{...s,Hash:J.parse(s.Hash)}}return e});l();l();Te();var Oce=re(t=>{async function e(r,i,n={}){let s=await t.post("object/patch/add-link",{signal:n.signal,searchParams:oe({arg:[`${r}`,i.Name||i.name||"",(i.Hash||i.cid||"").toString()||null],...n}),headers:n.headers}),{Hash:o}=await s.json();return J.parse(o)}return e});l();Te();var kce=N(_n()),Dce=re(t=>{async function e(r,i,n={}){let s=new kce.AbortController,o=xi(s.signal,n.signal),a=await t.post("object/patch/append-data",{signal:o,searchParams:oe({arg:`${r}`,...n}),...await Si([i],s,n.headers)}),{Hash:c}=await a.json();return J.parse(c)}return e});l();Te();var Bce=re(t=>{async function e(r,i,n={}){let s=await t.post("object/patch/rm-link",{signal:n.signal,searchParams:oe({arg:[`${r}`,i.Name||i.name||null],...n}),headers:n.headers}),{Hash:o}=await s.json();return J.parse(o)}return e});l();Te();var Nce=N(_n()),Mce=re(t=>{async function e(r,i,n={}){let s=new Nce.AbortController,o=xi(s.signal,n.signal),a=await t.post("object/patch/set-data",{signal:o,searchParams:oe({arg:[`${r}`],...n}),...await Si([i],s,n.headers)}),{Hash:c}=await a.json();return J.parse(c)}return e});function Lce(t){return{addLink:Oce(t),appendData:Dce(t),rmLink:Bce(t),setData:Mce(t)}}function qce(t,e){return{data:Ace(e),get:Ice(e),links:Tce(e),new:Rce(e),put:Pce(t,e),stat:Cce(e),patch:Lce(e)}}l();l();Te();var hv=re(t=>{async function*e(r,i={}){for await(let{path:n,recursive:s,metadata:o}of cc(r)){let a=await t.post("pin/add",{signal:i.signal,searchParams:oe({...i,arg:n,recursive:s,metadata:o?JSON.stringify(o):void 0,stream:!0}),headers:i.headers});for await(let c of a.ndjson()){if(c.Pins){for(let u of c.Pins)yield J.parse(u);continue}yield J.parse(c)}}}return e});l();var jce=N(ss());function Uce(t){let e=hv(t);return re(()=>{async function r(i,n={}){return(0,jce.default)(e([{path:i,...n}],n))}return r})(t)}l();Te();function Fce(t,e,r){let i={type:t,cid:J.parse(e)};return r&&(i.metadata=r),i}var Kce=re(t=>{async function*e(r={}){let i=[];r.paths&&(i=Array.isArray(r.paths)?r.paths:[r.paths]);let n=await t.post("pin/ls",{signal:r.signal,searchParams:oe({...r,arg:i.map(s=>`${s}`),stream:!0}),headers:r.headers});for await(let s of n.ndjson()){if(s.Keys){for(let o of Object.keys(s.Keys))yield Fce(s.Keys[o].Type,o,s.Keys[o].Metadata);return}yield Fce(s.Type,s.Cid,s.Metadata)}}return e});l();Te();var pv=re(t=>{async function*e(r,i={}){for await(let{path:n,recursive:s}of cc(r)){let o=new URLSearchParams(i.searchParams);o.append("arg",`${n}`),s!=null&&o.set("recursive",String(s));let a=await t.post("pin/rm",{signal:i.signal,headers:i.headers,searchParams:oe({...i,arg:`${n}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins){yield*c.Pins.map(u=>J.parse(u));continue}yield J.parse(c)}}}return e});l();var Vce=N(ss());var zce=t=>{let e=pv(t);return re(()=>{async function r(i,n={}){return(0,Vce.default)(e([{path:i,...n}],n))}return r})(t)};l();l();l();Te();var yv=({Name:t,Status:e,Cid:r})=>({cid:J.parse(r),name:t,status:e}),Hce=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},$ce=t=>{if(J.asCID(t))return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},E1=({service:t,cid:e,name:r,status:i,all:n})=>{let s=oe({service:Hce(t),name:r,force:n?!0:void 0});if(e)for(let o of e)s.append("cid",$ce(o));if(i)for(let o of i)s.append("status",o);return s},Gce=({cid:t,service:e,background:r,name:i,origins:n})=>{let s=oe({arg:$ce(t),service:Hce(e),name:i,background:r?!0:void 0});if(n)for(let o of n)s.append("origin",o.toString());return s};function Wce(t){async function e(r,{timeout:i,signal:n,headers:s,...o}){let a=await t.post("pin/remote/add",{timeout:i,signal:n,headers:s,searchParams:Gce({cid:r,...o})});return yv(await a.json())}return e}l();function Yce(t){async function*e({timeout:r,signal:i,headers:n,...s}){let o=await t.post("pin/remote/ls",{timeout:r,signal:i,headers:n,searchParams:E1(s)});for await(let a of o.ndjson())yield yv(a)}return e}l();function Xce(t){async function e({timeout:r,signal:i,headers:n,...s}){await t.post("pin/remote/rm",{timeout:r,signal:i,headers:n,searchParams:E1({...s,all:!1})})}return e}l();function Qce(t){async function e({timeout:r,signal:i,headers:n,...s}){await t.post("pin/remote/rm",{timeout:r,signal:i,headers:n,searchParams:E1({...s,all:!0})})}return e}l();l();l();function Zce(t){let e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function Jce(t){return{service:t.Service,endpoint:new URL(t.ApiEndpoint),...t.Stat&&{stat:AUe(t.Stat)}}}function AUe(t){switch(t.Status){case"valid":{let{Pinning:e,Pinned:r,Queued:i,Failed:n}=t.PinCount;return{status:"valid",pinCount:{queued:i,pinning:e,pinned:r,failed:n}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function eue(t){async function e(r,i){let{endpoint:n,key:s,headers:o,timeout:a,signal:c}=i;await t.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:oe({arg:[r,Zce(n),s]}),headers:o})}return e}l();function tue(t){async function e(r={}){let{stat:i,headers:n,timeout:s,signal:o}=r,a=await t.post("pin/remote/service/ls",{timeout:s,signal:o,headers:n,searchParams:i===!0?oe({stat:i}):void 0}),{RemoteServices:c}=await a.json();return c.map(Jce)}return e}l();function rue(t){async function e(r,i={}){await t.post("pin/remote/service/rm",{signal:i.signal,headers:i.headers,searchParams:oe({arg:r})})}return e}function iue(t){let e=new dh(t);return{add:eue(e),ls:tue(e),rm:rue(e)}}function nue(t){let e=new dh(t);return{add:Wce(e),ls:Yce(e),rm:Xce(e),rmAll:Qce(e),service:iue(t)}}function sue(t){return{addAll:hv(t),add:Uce(t),ls:Kce(t),rmAll:pv(t),rm:zce(t),remote:nue(t)}}l();l();var oue=re(t=>{async function e(r={}){let{Strings:i}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json();return i||[]}return e});l();var aue=re(t=>{async function e(r,i={}){let n=await t.post("pubsub/peers",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers}),{Strings:s}=await n.json();return s||[]}return e});l();var cue=N(_n()),uue=re(t=>{async function e(r,i,n={}){let s=oe({arg:r,...n}),o=new cue.AbortController,a=xi(o.signal,n.signal);await(await t.post("pubsub/pub",{signal:a,searchParams:s,...await Si([i],o,n.headers)})).text()}return e});l();dt();tt();var fue=N(Ee());var IUe=(0,fue.default)("ipfs-http-client:pubsub:subscribe"),lue=(t,e)=>re(r=>{async function i(n,s,o={}){o.signal=e.subscribe(n,s,o.signal);let a,c,u=new Promise((d,h)=>{a=d,c=h}),f=setTimeout(()=>a(),1e3);return r.post("pubsub/sub",{signal:o.signal,searchParams:oe({arg:n,...o}),headers:o.headers}).catch(d=>{e.unsubscribe(n,s),c(d)}).then(d=>{clearTimeout(f),!!d&&(TUe(d,{onMessage:s,onEnd:()=>e.unsubscribe(n,s),onError:o.onError}),a())}),u}return i})(t);async function TUe(t,{onMessage:e,onEnd:r,onError:i}){i=i||IUe;try{for await(let n of t.ndjson())try{if(!n.from)continue;e({from:$e(Xe(n.from,"base64pad"),"base58btc"),data:Xe(n.data,"base64pad"),seqno:Xe(n.seqno,"base64pad"),topicIDs:n.topicIDs})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,i(s,!1,n)}}catch(n){RUe(n)||i(n,!0)}finally{r()}}var RUe=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}};l();var due=(t,e)=>{async function r(i,n){e.unsubscribe(i,n)}return r};l();var hue=N(_n()),RR=class{constructor(){this._subs=new Map}subscribe(e,r,i){let n=this._subs.get(e)||[];if(n.find(o=>o.handler===r))throw new Error(`Already subscribed to ${e} with this handler`);let s=new hue.AbortController;return this._subs.set(e,[{handler:r,controller:s}].concat(n)),i&&i.addEventListener("abort",()=>this.unsubscribe(e,r)),s.signal}unsubscribe(e,r){let i=this._subs.get(e)||[],n;r?(this._subs.set(e,i.filter(s=>s.handler!==r)),n=i.filter(s=>s.handler===r)):(this._subs.set(e,[]),n=i),(this._subs.get(e)||[]).length||this._subs.delete(e),n.forEach(s=>s.controller.abort())}};function pue(t){let e=new RR;return{ls:oue(t),peers:aue(t),publish:uue(t),subscribe:lue(t,e),unsubscribe:due(t,e)}}l();Te();l();var yue=re(t=>{async function*e(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:lt,searchParams:oe(r),headers:r.headers})).ndjson()}return e});var gue=re((t,e)=>Object.assign(async function*(i,n={}){let s=Array.isArray(i)?i:[i];yield*(await t.post("refs",{signal:n.signal,searchParams:oe({arg:s.map(a=>`${a instanceof Uint8Array?J.decode(a):a}`),...n}),headers:n.headers,transform:lt})).ndjson()},{local:yue(e)}));l();l();Te();var mue=re(t=>{async function*e(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:oe(r),headers:r.headers,transform:n=>({err:n.Error?new Error(n.Error):null,cid:(n.Key||{})["/"]?J.parse(n.Key["/"]):null})})).ndjson()}return e});l();var gv=re(t=>{async function e(r={}){let n=await(await t.post("repo/stat",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json();return{numObjects:BigInt(n.NumObjects),repoSize:BigInt(n.RepoSize),repoPath:n.RepoPath,version:n.Version,storageMax:BigInt(n.StorageMax)}}return e});l();var bue=re(t=>{async function e(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json()).Version}return e});function vue(t){return{gc:mue(t),stat:gv(t),version:bue(t)}}l();l();var wue=re(t=>{async function*e(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:oe(r),headers:r.headers,transform:n=>({totalIn:BigInt(n.TotalIn),totalOut:BigInt(n.TotalOut),rateIn:parseFloat(n.RateIn),rateOut:parseFloat(n.RateOut)})})).ndjson()}return e});function _ue(t){return{bitswap:uv(t),repo:gv(t),bw:wue(t)}}l();l();var Eue=N(rt());var Sue=re(t=>{async function e(r={}){let i=await t.post("swarm/addrs",{signal:r.signal,searchParams:oe(r),headers:r.headers}),{Addrs:n}=await i.json();return Object.keys(n).map(s=>({id:s,addrs:(n[s]||[]).map(o=>new Eue.Multiaddr(o))}))}return e});l();var xue=re(t=>{async function e(r,i={}){let n=await t.post("swarm/connect",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers}),{Strings:s}=await n.json();return s||[]}return e});l();var Aue=re(t=>{async function e(r,i={}){let n=await t.post("swarm/disconnect",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers}),{Strings:s}=await n.json();return s||[]}return e});l();var Iue=N(rt());var Tue=re(t=>{async function e(r={}){let i=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:oe(r),headers:r.headers}),{Strings:n}=await i.json();return(n||[]).map(s=>new Iue.Multiaddr(s))}return e});l();var Rue=N(rt());var Pue=re(t=>{async function e(r={}){let i=await t.post("swarm/peers",{signal:r.signal,searchParams:oe(r),headers:r.headers}),{Peers:n}=await i.json();return(n||[]).map(s=>({addr:new Rue.Multiaddr(s.Addr),peer:s.Peer,muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}return e});function Cue(t){return{addrs:Sue(t),connect:xue(t),disconnect:Aue(t),localAddrs:Tue(t),peers:Pue(t)}}l();l();Te();var Oue=N(_n()),mv=re(t=>{async function*e(r,i={}){let n=new Oue.AbortController,s=xi(n.signal,i.signal),{headers:o,body:a,total:c,parts:u}=await Si(r,n,i.headers),[f,d]=typeof i.progress=="function"?PUe(c,u,i.progress):[void 0,void 0],h=await t.post("add",{searchParams:oe({"stream-channels":!0,...i,progress:Boolean(f)}),onUploadProgress:d,signal:s,headers:o,body:a});for await(let p of h.ndjson())p=lt(p),p.hash!==void 0?yield OUe(p):f&&f(p.bytes||0,p.name)}return e}),PUe=(t,e,r)=>e?[void 0,CUe(t,e,r)]:[r,void 0],CUe=(t,e,r)=>{let i=0,n=e.length;return({loaded:s,total:o})=>{let a=Math.floor(s/o*t);for(;i<n;){let{start:c,end:u,name:f}=e[i];if(a<u){r(a-c,f);break}else r(u-c,f),i+=1}}};function OUe({name:t,hash:e,size:r,mode:i,mtime:n,mtimeNsecs:s}){let o={path:t,cid:J.parse(e),size:parseInt(r)};return i!=null&&(o.mode=parseInt(i,8)),n!=null&&(o.mtime={secs:n,nsecs:s||0}),o}var kue=N(ss());function Due(t){let e=mv(t);return re(()=>{async function r(i,n={}){return await(0,kue.default)(e(Cb(i),n))}return r})(t)}l();var Bue=re(t=>{async function*e(r,i={}){yield*(await t.post("cat",{signal:i.signal,searchParams:oe({arg:r.toString(),...i}),headers:i.headers})).iterator()}return e});l();var Nue=re(t=>async(r={})=>(await t.post("commands",{signal:r.signal,searchParams:oe(r),headers:r.headers})).json());l();var Mue=re(t=>async(r,i={})=>(await(await t.post("dns",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers})).json()).Path);l();var Lue=re(t=>()=>{let e=new URL(t.opts.base||"");return{host:e.hostname,port:e.port,protocol:e.protocol,pathname:e.pathname,"api-path":e.pathname}});l();Te();var que=re(t=>{async function*e(r,i={}){let n={arg:`${r instanceof Uint8Array?J.decode(r):r}`,...i};n.compressionLevel&&(n["compression-level"]=n.compressionLevel,delete n.compressionLevel),yield*(await t.post("get",{signal:i.signal,searchParams:oe(n),headers:i.headers})).iterator()}return e});l();var jue=N(rt());var bv=re(t=>{async function e(r={}){let n=await(await t.post("id",{signal:r.signal,searchParams:oe({arg:r.peerId?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...lt(n)};return s.addresses&&(s.addresses=s.addresses.map(o=>new jue.Multiaddr(o))),s}return e});l();var Uue=t=>{let e=bv(t);async function r(i={}){let n=await e(i);return Boolean(n&&n.addresses&&n.addresses.length)}return r};l();Te();var Fue=re((t,e)=>{async function*r(i,n={}){let s=`${i instanceof Uint8Array?J.decode(i):i}`;async function o(c){let u=c.Hash;if(u.includes("/")){let d=u.startsWith("/ipfs/")?u:`/ipfs/${u}`;u=(await dv(e)(d)).cid}else u=J.parse(u);let f={name:c.Name,path:s+(c.Name?`/${c.Name}`:""),size:c.Size,cid:u,type:kUe(c)};return c.Mode&&(f.mode=parseInt(c.Mode,8)),c.Mtime!==void 0&&c.Mtime!==null&&(f.mtime={secs:c.Mtime},c.MtimeNsecs!==void 0&&c.MtimeNsecs!==null&&(f.mtime.nsecs=c.MtimeNsecs)),f}let a=await t.post("ls",{signal:n.signal,searchParams:oe({arg:s,...n}),headers:n.headers});for await(let c of a.ndjson()){if(c=c.Objects,!c)throw new Error("expected .Objects in results");if(c=c[0],!c)throw new Error("expected one array in results.Objects");let u=c.Links;if(!Array.isArray(u))throw new Error("expected one array in results.Objects[0].Links");if(!u.length){yield o(c);return}yield*u.map(o)}}return r});function kUe(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}l();var Kue=re(t=>{async function e(r={}){let i=await t.post("dns",{signal:r.signal,searchParams:oe(r),headers:r.headers});return lt(await i.json())}return e});l();var Vue=re(t=>{async function*e(r,i={}){yield*(await t.post("ping",{signal:i.signal,searchParams:oe({arg:`${r}`,...i}),headers:i.headers,transform:lt})).ndjson()}return e});l();var zue=re(t=>{async function e(r,i={}){let n=await t.post("resolve",{signal:i.signal,searchParams:oe({arg:r,...i}),headers:i.headers}),{Path:s}=await n.json();return s}return e});l();var Hue=N(hh()),$ue=re(t=>async(r={})=>{throw(0,Hue.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});l();var Gue=re(t=>{async function e(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:oe(r),headers:r.headers})).text()}return e});l();var Wue=re(t=>{async function e(r={}){let i=await t.post("version",{signal:r.signal,searchParams:oe(r),headers:r.headers});return{...lt(await i.json()),"ipfs-http-client":"1.0.0"}}return e});var MUe=N(PR());Te();var LUe=N(rt()),qUe=N(CR());function Xue(t={}){let e={name:Es.name,code:Es.code,encode:u=>u,decode:u=>u},r=Object.values(Kl);(t.ipld&&t.ipld.bases?t.ipld.bases:[]).forEach(u=>r.push(u));let i=new Cm({bases:r,loadBase:t.ipld&&t.ipld.loadBase}),n=Object.values(C6);[Mn,sy,e].concat(t.ipld&&t.ipld.codecs||[]).forEach(u=>n.push(u));let s=new Om({codecs:n,loadCodec:t.ipld&&t.ipld.loadCodec}),o=Object.values(P6);(t.ipld&&t.ipld.hashers?t.ipld.hashers:[]).forEach(u=>o.push(u));let a=new km({hashers:o,loadHasher:t.ipld&&t.ipld.loadHasher});return{add:Due(t),addAll:mv(t),bitswap:koe(t),block:$oe(t),bootstrap:iae(t),cat:Bue(t),commands:Nue(t),config:dae(t),dag:Eae(s,t),dht:qae(t),diag:Kae(t),dns:Mue(t),files:ice(t),get:que(t),getEndpointConfig:Lue(t),id:bv(t),isOnline:Uue(t),key:hce(t),log:mce(t),ls:Fue(t),mount:Kue(t),name:xce(t),object:qce(s,t),pin:sue(t),ping:Vue(t),pubsub:pue(t),refs:gue(t),repo:vue(t),resolve:zue(t),start:$ue(t),stats:_ue(t),stop:Gue(t),swarm:Cue(t),version:Wue(t),bases:i,codecs:s,hashers:a}}var z6e=N(rt());l();var O1e=N(Xfe()),k1e=N(Nde()),D1e=N(nhe()),B1e=N(x0e()),N1e=N(R1e()),M1e=N(_R());l();var P1e={func:(t,e)=>tg.validate(e,t)};function C1e(t,e){return tg.select(e[0],e[1])}function L1e(){return{dialer:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4},modules:{transport:[O1e.default,k1e.default],streamMuxer:[D1e.default],connEncryption:[B1e.NOISE],peerDiscovery:[],dht:N1e.default,pubsub:M1e.default},config:{peerDiscovery:{autoDial:!0,bootstrap:{enabled:!0},webRTCStar:{enabled:!0}},dht:{kBucketSize:20,enabled:!1,clientMode:!0,randomWalk:{enabled:!1},validators:{ipns:P1e},selectors:{ipns:C1e}},pubsub:{enabled:!0,emitSelf:!0},nat:{enabled:!1}},metrics:{enabled:!0},peerStore:{persistence:!0,threshold:1}}}var H6e=N(F1e()),$6e=N(U6e()),Met=Tt.bind({ignoreUndefined:!0});function D3({options:t={},peerId:e,multiaddrs:r=[],repo:i,keychainConfig:n={},config:s={}}){let{datastore:o,keys:a}=i,c=Let({options:t,config:s,datastore:o,keys:a,keychainConfig:n,peerId:e,multiaddrs:r});return typeof t.libp2p=="function"?t.libp2p({libp2pOptions:c,options:t,config:s,datastore:o,peerId:e}):$6e.default.create(c)}function Let({options:t,config:e,datastore:r,keys:i,keychainConfig:n,peerId:s,multiaddrs:o}){let a=()=>{let y=(0,Vt.default)(e,"Pubsub.Router")||"gossipsub";if(!ER[y])throw(0,F6e.default)(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${y} router.`),"ERR_NOT_SUPPORTED");return ER[y]},c={datastore:r,peerId:s,modules:{}},u={modules:{pubsub:a(),contentRouting:[],peerRouting:[]},config:{peerDiscovery:{mdns:{enabled:(0,Vt.default)(t,"config.Discovery.MDNS.Enabled",(0,Vt.default)(e,"Discovery.MDNS.Enabled",!0))},webRTCStar:{enabled:(0,Vt.default)(t,"config.Discovery.webRTCStar.Enabled",(0,Vt.default)(e,"Discovery.webRTCStar.Enabled",!0))},bootstrap:{list:(0,Vt.default)(t,"config.Bootstrap",(0,Vt.default)(e,"Bootstrap",[]))}},relay:{enabled:(0,Vt.default)(t,"relay.enabled",(0,Vt.default)(e,"relay.enabled",!0)),hop:{enabled:(0,Vt.default)(t,"relay.hop.enabled",(0,Vt.default)(e,"relay.hop.enabled",!1)),active:(0,Vt.default)(t,"relay.hop.active",(0,Vt.default)(e,"relay.hop.active",!1))}},dht:{enabled:(0,Vt.default)(e,"Routing.Type","none")!=="none",clientMode:(0,Vt.default)(e,"Routing.Type","dht")!=="dhtserver",kBucketSize:(0,Vt.default)(t,"dht.kBucketSize",20)},pubsub:{enabled:(0,Vt.default)(t,"config.Pubsub.Enabled",(0,Vt.default)(e,"Pubsub.Enabled",!0))},nat:{enabled:!(0,Vt.default)(e,"Swarm.DisableNatPortMap",!1)}},addresses:{listen:o.map(y=>y.toString()),announce:(0,Vt.default)(t,"addresses.announce",(0,Vt.default)(e,"Addresses.Announce",[])),noAnnounce:(0,Vt.default)(t,"addresses.noAnnounce",(0,Vt.default)(e,"Addresses.NoAnnounce",[]))},connectionManager:(0,Vt.default)(t,"connectionManager",{maxConnections:(0,Vt.default)(t,"config.Swarm.ConnMgr.HighWater",(0,Vt.default)(e,"Swarm.ConnMgr.HighWater")),minConnections:(0,Vt.default)(t,"config.Swarm.ConnMgr.LowWater",(0,Vt.default)(e,"Swarm.ConnMgr.LowWater"))}),keychain:{datastore:i,...n},host:{agentVersion:`js-ipfs/${Cd}`}},f=(0,Vt.default)(t,"libp2p",void 0);typeof f=="function"&&(f=void 0);let d=Met(c,L1e(),u,f);(0,Vt.default)(d,"config.peerDiscovery.bootstrap.list",[]).length>0&&d.modules.peerDiscovery.push(H6e.default);let p=(0,Vt.default)(t,"config.Addresses.Delegates",(0,Vt.default)(e,"Addresses.Delegates",[]));if(p.length>0){let y=p[Math.floor(Math.random()*p.length)],m=new z6e.Multiaddr(y).toOptions(),w={host:m.host,protocol:parseInt(m.port)===443?"https":"http",port:m.port},b=Xue(w);u.modules.contentRouting=u.modules.contentRouting||[],u.modules.contentRouting.push(new V6e.default(s,b)),u.modules.peerRouting=u.modules.peerRouting||[],u.modules.peerRouting.push(new K6e.default(b))}return d}var W6e=Tt.bind({ignoreUndefined:!0}),B3=(0,G6e.default)("ipfs:components:peer:storage"),N3=class{constructor(e,r,i,n,s){this.print=n,this.peerId=e,this.keychain=r,this.repo=i,this.print=n,this.isNew=s}static async start(e,r,i){let{repoAutoMigrate:n,repo:s,onMigrationProgress:o}=i,a=typeof s=="string"||s==null?ane(e,r,{path:s,autoMigrate:n,onMigrationProgress:o}):s,{peerId:c,keychain:u,isNew:f}=await qet(e,a,i);return new N3(c,u,a,e,f)}},qet=async(t,e,r)=>{if(!e.closed)return{...await Y6e(e,r),isNew:!1};try{return await e.open(),{...await Y6e(e,r),isNew:!1}}catch(i){if(i.code!==Fd)throw i;if(r.init&&r.init.allowNew===!1)throw new ja("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await jet(t,e,r),isNew:!0}}},jet=async(t,e,r)=>{let i=r.init||{},n=await e.exists();if(B3("repo exists?",n),n===!0)throw new Error("repo already exists");let s=i.privateKey?await Uet(i.privateKey):await Fet(t,i),o=Ket(s);B3("peer identity: %s",o.PeerID);let a={...W6e(X6e(yu(),i.profiles),r.config),Identity:o};await e.init(a),await e.open(),B3("repo opened");let c={pass:r.pass};try{c.dek=await e.config.get("Keychain.DEK")}catch(f){if(f.code!=="ERR_NOT_FOUND")throw f}let u=await D3({options:void 0,multiaddrs:void 0,peerId:s,repo:e,config:a,keychainConfig:c});return u.keychain&&u.keychain.opts&&(await u.loadKeychain(),await e.config.set("Keychain",{DEK:u.keychain.opts.dek})),{peerId:s,keychain:u.keychain}},Uet=t=>(B3("using user-supplied private-key"),typeof t=="object"?t:gw.default.createFromPrivKey(Xe(t,"base64pad"))),Fet=(t,{algorithm:e="Ed25519",bits:r=2048})=>(t("generating %s keypair...",e),gw.default.create({keyType:e,bits:r})),Ket=t=>({PeerID:t.toB58String(),PrivKey:$e(t.privKey.bytes,"base64pad")}),Y6e=async(t,e)=>{let r=e.config,i=e.init&&e.init.profiles||[],n=e.pass,s=await t.config.getAll(),o=Vet(X6e(s,i),r);if(s!==o&&await t.config.replace(o),!o.Identity||!o.Identity.PrivKey)throw new lf("No private key was found in the config, please intialize the repo");let a=await gw.default.createFromPrivKey(o.Identity.PrivKey),c=await D3({options:void 0,multiaddrs:void 0,peerId:a,repo:t,config:o,keychainConfig:{pass:n,...o.Keychain}});return c.keychain&&await c.loadKeychain(),{peerId:a,keychain:c.keychain}},Vet=(t,e)=>e?W6e(t,e):t,X6e=(t,e)=>(e||[]).reduce((r,i)=>{let n=kp[i];if(!n)throw new Error(`Could not find profile with name '${i}'`);return B3("applying profile %s",i),n.transform(r)},t);l();l();l();l();l();Te();mi();li();var y4e=N(f4e());l();var qO=N(Ee());wi();l();l();l();li();var mw=class{constructor(e,r,i){this._refCounter=1,this.cid=e,this.priority=r||1,this.wantType=i}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toString(pt)}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}};li();l();var Ta=N(Vi()),Vc=Ta.default.Reader,M3=Ta.default.Writer,Wt=Ta.default.util,jt=Ta.default.roots["ipfs-bitswap"]||(Ta.default.roots["ipfs-bitswap"]={}),Ms=jt.Message=(()=>{function t(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var r=Object.keys(e),i=0;i<r.length;++i)e[r[i]]!=null&&(this[r[i]]=e[r[i]])}return t.prototype.wantlist=null,t.prototype.blocks=Wt.emptyArray,t.prototype.payload=Wt.emptyArray,t.prototype.blockPresences=Wt.emptyArray,t.prototype.pendingBytes=0,t.encode=function(r,i){if(i||(i=M3.create()),r.wantlist!=null&&Object.hasOwnProperty.call(r,"wantlist")&&jt.Message.Wantlist.encode(r.wantlist,i.uint32(10).fork()).ldelim(),r.blocks!=null&&r.blocks.length)for(var n=0;n<r.blocks.length;++n)i.uint32(18).bytes(r.blocks[n]);if(r.payload!=null&&r.payload.length)for(var n=0;n<r.payload.length;++n)jt.Message.Block.encode(r.payload[n],i.uint32(26).fork()).ldelim();if(r.blockPresences!=null&&r.blockPresences.length)for(var n=0;n<r.blockPresences.length;++n)jt.Message.BlockPresence.encode(r.blockPresences[n],i.uint32(34).fork()).ldelim();return r.pendingBytes!=null&&Object.hasOwnProperty.call(r,"pendingBytes")&&i.uint32(40).int32(r.pendingBytes),i},t.decode=function(r,i){r instanceof Vc||(r=Vc.create(r));for(var n=i===void 0?r.len:r.pos+i,s=new jt.Message;r.pos<n;){var o=r.uint32();switch(o>>>3){case 1:s.wantlist=jt.Message.Wantlist.decode(r,r.uint32());break;case 2:s.blocks&&s.blocks.length||(s.blocks=[]),s.blocks.push(r.bytes());break;case 3:s.payload&&s.payload.length||(s.payload=[]),s.payload.push(jt.Message.Block.decode(r,r.uint32()));break;case 4:s.blockPresences&&s.blockPresences.length||(s.blockPresences=[]),s.blockPresences.push(jt.Message.BlockPresence.decode(r,r.uint32()));break;case 5:s.pendingBytes=r.int32();break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof jt.Message)return r;var i=new jt.Message;if(r.wantlist!=null){if(typeof r.wantlist!="object")throw TypeError(".Message.wantlist: object expected");i.wantlist=jt.Message.Wantlist.fromObject(r.wantlist)}if(r.blocks){if(!Array.isArray(r.blocks))throw TypeError(".Message.blocks: array expected");i.blocks=[];for(var n=0;n<r.blocks.length;++n)typeof r.blocks[n]=="string"?Wt.base64.decode(r.blocks[n],i.blocks[n]=Wt.newBuffer(Wt.base64.length(r.blocks[n])),0):r.blocks[n].length&&(i.blocks[n]=r.blocks[n])}if(r.payload){if(!Array.isArray(r.payload))throw TypeError(".Message.payload: array expected");i.payload=[];for(var n=0;n<r.payload.length;++n){if(typeof r.payload[n]!="object")throw TypeError(".Message.payload: object expected");i.payload[n]=jt.Message.Block.fromObject(r.payload[n])}}if(r.blockPresences){if(!Array.isArray(r.blockPresences))throw TypeError(".Message.blockPresences: array expected");i.blockPresences=[];for(var n=0;n<r.blockPresences.length;++n){if(typeof r.blockPresences[n]!="object")throw TypeError(".Message.blockPresences: object expected");i.blockPresences[n]=jt.Message.BlockPresence.fromObject(r.blockPresences[n])}}return r.pendingBytes!=null&&(i.pendingBytes=r.pendingBytes|0),i},t.toObject=function(r,i){i||(i={});var n={};if((i.arrays||i.defaults)&&(n.blocks=[],n.payload=[],n.blockPresences=[]),i.defaults&&(n.wantlist=null,n.pendingBytes=0),r.wantlist!=null&&r.hasOwnProperty("wantlist")&&(n.wantlist=jt.Message.Wantlist.toObject(r.wantlist,i)),r.blocks&&r.blocks.length){n.blocks=[];for(var s=0;s<r.blocks.length;++s)n.blocks[s]=i.bytes===String?Wt.base64.encode(r.blocks[s],0,r.blocks[s].length):i.bytes===Array?Array.prototype.slice.call(r.blocks[s]):r.blocks[s]}if(r.payload&&r.payload.length){n.payload=[];for(var s=0;s<r.payload.length;++s)n.payload[s]=jt.Message.Block.toObject(r.payload[s],i)}if(r.blockPresences&&r.blockPresences.length){n.blockPresences=[];for(var s=0;s<r.blockPresences.length;++s)n.blockPresences[s]=jt.Message.BlockPresence.toObject(r.blockPresences[s],i)}return r.pendingBytes!=null&&r.hasOwnProperty("pendingBytes")&&(n.pendingBytes=r.pendingBytes),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Ta.default.util.toJSONOptions)},t.Wantlist=function(){function e(r){if(this.entries=[],r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.entries=Wt.emptyArray,e.prototype.full=!1,e.encode=function(i,n){if(n||(n=M3.create()),i.entries!=null&&i.entries.length)for(var s=0;s<i.entries.length;++s)jt.Message.Wantlist.Entry.encode(i.entries[s],n.uint32(10).fork()).ldelim();return i.full!=null&&Object.hasOwnProperty.call(i,"full")&&n.uint32(16).bool(i.full),n},e.decode=function(i,n){i instanceof Vc||(i=Vc.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new jt.Message.Wantlist;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.entries&&o.entries.length||(o.entries=[]),o.entries.push(jt.Message.Wantlist.Entry.decode(i,i.uint32()));break;case 2:o.full=i.bool();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof jt.Message.Wantlist)return i;var n=new jt.Message.Wantlist;if(i.entries){if(!Array.isArray(i.entries))throw TypeError(".Message.Wantlist.entries: array expected");n.entries=[];for(var s=0;s<i.entries.length;++s){if(typeof i.entries[s]!="object")throw TypeError(".Message.Wantlist.entries: object expected");n.entries[s]=jt.Message.Wantlist.Entry.fromObject(i.entries[s])}}return i.full!=null&&(n.full=Boolean(i.full)),n},e.toObject=function(i,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.entries=[]),n.defaults&&(s.full=!1),i.entries&&i.entries.length){s.entries=[];for(var o=0;o<i.entries.length;++o)s.entries[o]=jt.Message.Wantlist.Entry.toObject(i.entries[o],n)}return i.full!=null&&i.hasOwnProperty("full")&&(s.full=i.full),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ta.default.util.toJSONOptions)},e.WantType=function(){let r={},i=Object.create(r);return i[r[0]="Block"]=0,i[r[1]="Have"]=1,i}(),e.Entry=function(){function r(i){if(i)for(var n=Object.keys(i),s=0;s<n.length;++s)i[n[s]]!=null&&(this[n[s]]=i[n[s]])}return r.prototype.block=Wt.newBuffer([]),r.prototype.priority=0,r.prototype.cancel=!1,r.prototype.wantType=0,r.prototype.sendDontHave=!1,r.encode=function(n,s){return s||(s=M3.create()),n.block!=null&&Object.hasOwnProperty.call(n,"block")&&s.uint32(10).bytes(n.block),n.priority!=null&&Object.hasOwnProperty.call(n,"priority")&&s.uint32(16).int32(n.priority),n.cancel!=null&&Object.hasOwnProperty.call(n,"cancel")&&s.uint32(24).bool(n.cancel),n.wantType!=null&&Object.hasOwnProperty.call(n,"wantType")&&s.uint32(32).int32(n.wantType),n.sendDontHave!=null&&Object.hasOwnProperty.call(n,"sendDontHave")&&s.uint32(40).bool(n.sendDontHave),s},r.decode=function(n,s){n instanceof Vc||(n=Vc.create(n));for(var o=s===void 0?n.len:n.pos+s,a=new jt.Message.Wantlist.Entry;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:a.block=n.bytes();break;case 2:a.priority=n.int32();break;case 3:a.cancel=n.bool();break;case 4:a.wantType=n.int32();break;case 5:a.sendDontHave=n.bool();break;default:n.skipType(c&7);break}}return a},r.fromObject=function(n){if(n instanceof jt.Message.Wantlist.Entry)return n;var s=new jt.Message.Wantlist.Entry;switch(n.block!=null&&(typeof n.block=="string"?Wt.base64.decode(n.block,s.block=Wt.newBuffer(Wt.base64.length(n.block)),0):n.block.length&&(s.block=n.block)),n.priority!=null&&(s.priority=n.priority|0),n.cancel!=null&&(s.cancel=Boolean(n.cancel)),n.wantType){case"Block":case 0:s.wantType=0;break;case"Have":case 1:s.wantType=1;break}return n.sendDontHave!=null&&(s.sendDontHave=Boolean(n.sendDontHave)),s},r.toObject=function(n,s){s||(s={});var o={};return s.defaults&&(s.bytes===String?o.block="":(o.block=[],s.bytes!==Array&&(o.block=Wt.newBuffer(o.block))),o.priority=0,o.cancel=!1,o.wantType=s.enums===String?"Block":0,o.sendDontHave=!1),n.block!=null&&n.hasOwnProperty("block")&&(o.block=s.bytes===String?Wt.base64.encode(n.block,0,n.block.length):s.bytes===Array?Array.prototype.slice.call(n.block):n.block),n.priority!=null&&n.hasOwnProperty("priority")&&(o.priority=n.priority),n.cancel!=null&&n.hasOwnProperty("cancel")&&(o.cancel=n.cancel),n.wantType!=null&&n.hasOwnProperty("wantType")&&(o.wantType=s.enums===String?jt.Message.Wantlist.WantType[n.wantType]:n.wantType),n.sendDontHave!=null&&n.hasOwnProperty("sendDontHave")&&(o.sendDontHave=n.sendDontHave),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,Ta.default.util.toJSONOptions)},r}(),e}(),t.Block=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.prefix=Wt.newBuffer([]),e.prototype.data=Wt.newBuffer([]),e.encode=function(i,n){return n||(n=M3.create()),i.prefix!=null&&Object.hasOwnProperty.call(i,"prefix")&&n.uint32(10).bytes(i.prefix),i.data!=null&&Object.hasOwnProperty.call(i,"data")&&n.uint32(18).bytes(i.data),n},e.decode=function(i,n){i instanceof Vc||(i=Vc.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new jt.Message.Block;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.prefix=i.bytes();break;case 2:o.data=i.bytes();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof jt.Message.Block)return i;var n=new jt.Message.Block;return i.prefix!=null&&(typeof i.prefix=="string"?Wt.base64.decode(i.prefix,n.prefix=Wt.newBuffer(Wt.base64.length(i.prefix)),0):i.prefix.length&&(n.prefix=i.prefix)),i.data!=null&&(typeof i.data=="string"?Wt.base64.decode(i.data,n.data=Wt.newBuffer(Wt.base64.length(i.data)),0):i.data.length&&(n.data=i.data)),n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.prefix="":(s.prefix=[],n.bytes!==Array&&(s.prefix=Wt.newBuffer(s.prefix))),n.bytes===String?s.data="":(s.data=[],n.bytes!==Array&&(s.data=Wt.newBuffer(s.data)))),i.prefix!=null&&i.hasOwnProperty("prefix")&&(s.prefix=n.bytes===String?Wt.base64.encode(i.prefix,0,i.prefix.length):n.bytes===Array?Array.prototype.slice.call(i.prefix):i.prefix),i.data!=null&&i.hasOwnProperty("data")&&(s.data=n.bytes===String?Wt.base64.encode(i.data,0,i.data.length):n.bytes===Array?Array.prototype.slice.call(i.data):i.data),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ta.default.util.toJSONOptions)},e}(),t.BlockPresenceType=function(){let e={},r=Object.create(e);return r[e[0]="Have"]=0,r[e[1]="DontHave"]=1,r}(),t.BlockPresence=function(){function e(r){if(r)for(var i=Object.keys(r),n=0;n<i.length;++n)r[i[n]]!=null&&(this[i[n]]=r[i[n]])}return e.prototype.cid=Wt.newBuffer([]),e.prototype.type=0,e.encode=function(i,n){return n||(n=M3.create()),i.cid!=null&&Object.hasOwnProperty.call(i,"cid")&&n.uint32(10).bytes(i.cid),i.type!=null&&Object.hasOwnProperty.call(i,"type")&&n.uint32(16).int32(i.type),n},e.decode=function(i,n){i instanceof Vc||(i=Vc.create(i));for(var s=n===void 0?i.len:i.pos+n,o=new jt.Message.BlockPresence;i.pos<s;){var a=i.uint32();switch(a>>>3){case 1:o.cid=i.bytes();break;case 2:o.type=i.int32();break;default:i.skipType(a&7);break}}return o},e.fromObject=function(i){if(i instanceof jt.Message.BlockPresence)return i;var n=new jt.Message.BlockPresence;switch(i.cid!=null&&(typeof i.cid=="string"?Wt.base64.decode(i.cid,n.cid=Wt.newBuffer(Wt.base64.length(i.cid)),0):i.cid.length&&(n.cid=i.cid)),i.type){case"Have":case 0:n.type=0;break;case"DontHave":case 1:n.type=1;break}return n},e.toObject=function(i,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.cid="":(s.cid=[],n.bytes!==Array&&(s.cid=Wt.newBuffer(s.cid))),s.type=n.enums===String?"Have":0),i.cid!=null&&i.hasOwnProperty("cid")&&(s.cid=n.bytes===String?Wt.base64.encode(i.cid,0,i.cid.length):n.bytes===Array?Array.prototype.slice.call(i.cid):i.cid),i.type!=null&&i.hasOwnProperty("type")&&(s.type=n.enums===String?jt.Message.BlockPresenceType[i.type]:i.type),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ta.default.util.toJSONOptions)},e}(),t})();var l4e={Block:Ms.Wantlist.WantType.Block,Have:Ms.Wantlist.WantType.Have},itt=(t,e)=>Array.prototype.slice.call(e,0).sort((r,i)=>{let n=t(r),s=t(i);return n<s?-1:n>s?1:0}),zc=class{constructor(e){this.set=new Map,this._stats=e}get length(){return this.set.size}add(e,r,i){let n=e.toString(pt),s=this.set.get(n);s?(s.inc(),s.priority=r,s.wantType===l4e.Have&&i===l4e.Block&&(s.wantType=i)):(this.set.set(n,new mw(e,r,i)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){let r=e.toString(pt),i=this.set.get(r);!i||(i.dec(),!i.hasRefs()&&(this.set.delete(r),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(itt(e=>e[1].key,Array.from(this.set.entries())))}contains(e){let r=e.toString(pt);return this.set.has(r)}get(e){let r=e.toString(pt);return this.set.get(r)}};zc.Entry=mw;li();var ntt=zc.Entry,jh=class{constructor(e,r,i,n,s){this.entry=new ntt(e,r,i),this.cancel=Boolean(n),this.sendDontHave=Boolean(s)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get wantType(){return this.entry.wantType}set wantType(e){this.entry.wantType=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toString(pt)} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}};var No=(t,e)=>{let r=["bitswap"];return e&&r.push(e),t&&r.push(`${t.toB58String().slice(0,8)}`),Object.assign((0,qO.default)(r.join(":")),{error:(0,qO.default)(r.concat(["error"]).join(":"))})};var bw=(t,e)=>{if(t.size!==e.size)return!1;for(let[r,i]of t){let n=e.get(r);if(n===void 0||i instanceof Uint8Array&&n instanceof Uint8Array&&!Ua(i,n)||i instanceof jh&&n instanceof jh&&!i.equals(n))return!1}return!0};bn();var g4e=N(p4e()),tr=class{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return this.blocks.size===0&&this.wantlist.size===0&&this.blockPresences.size===0}addEntry(e,r,i,n,s){i==null&&(i=tr.WantType.Block);let o=e.toString(pt),a=this.wantlist.get(o);a?(a.wantType===i&&(a.priority=r),n&&(a.cancel=Boolean(n)),s&&(a.sendDontHave=Boolean(s)),i===tr.WantType.Block&&a.wantType===tr.WantType.Have&&(a.wantType=i)):this.wantlist.set(o,new jh(e,r,i,n,s))}addBlock(e,r){let i=e.toString(pt);this.blocks.set(i,r)}addHave(e){let r=e.toString(pt);this.blockPresences.has(r)||this.blockPresences.set(r,tr.BlockPresenceType.Have)}addDontHave(e){let r=e.toString(pt);this.blockPresences.has(r)||this.blockPresences.set(r,tr.BlockPresenceType.DontHave)}cancel(e){let r=e.toString(pt);this.wantlist.delete(r),this.addEntry(e,0,tr.WantType.Block,!0,!1)}setPendingBytes(e){this.pendingBytes=e}serializeToBitswap100(){let e={wantlist:{entries:Array.from(this.wantlist.values()).map(r=>({block:r.cid.bytes,priority:Number(r.priority),cancel:Boolean(r.cancel)})),full:this.full?!0:void 0},blocks:Array.from(this.blocks.values())};return Ms.encode(e).finish()}serializeToBitswap110(){let e={wantlist:{entries:Array.from(this.wantlist.values()).map(r=>({block:r.cid.bytes,priority:Number(r.priority),wantType:r.wantType,cancel:Boolean(r.cancel),sendDontHave:Boolean(r.sendDontHave)})),full:this.full?!0:void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(let[r,i]of this.blocks.entries()){let n=J.parse(r),s=Uint8Array.from([n.code]),o=n.multihash.bytes.subarray(0,2),a=mn([[n.version],s,o],1+s.byteLength+o.byteLength);e.payload.push(new Ms.Block({prefix:a,data:i}))}for(let[r,i]of this.blockPresences)e.blockPresences.push(new Ms.BlockPresence({cid:J.parse(r).bytes,type:i}));return this.pendingBytes>0&&(e.pendingBytes=this.pendingBytes),Ms.encode(e).finish()}equals(e){return!(this.full!==e.full||this.pendingBytes!==e.pendingBytes||!bw(this.wantlist,e.wantlist)||!bw(this.blocks,e.blocks)||!bw(this.blockPresences,e.blockPresences))}get[Symbol.toStringTag](){let e=Array.from(this.wantlist.keys()),r=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${r}>`}};tr.deserialize=async(t,e={})=>{let r=Ms.decode(t),i=r.wantlist&&r.wantlist.full||!1,n=new tr(i);return r.wantlist&&r.wantlist.entries&&r.wantlist.entries.forEach(s=>{if(!s.block)return;let o=J.decode(s.block);n.addEntry(o,s.priority||0,s.wantType,Boolean(s.cancel),Boolean(s.sendDontHave))}),r.blockPresences&&r.blockPresences.forEach(s=>{if(!s.cid)return;let o=J.decode(s.cid);s.type===tr.BlockPresenceType.Have?n.addHave(o):n.addDontHave(o)}),r.blocks.length>0?(await Promise.all(r.blocks.map(async s=>{let o=await Ir.digest(s),a=J.createV0(o);n.addBlock(a,s)})),n):(r.payload.length>0&&(await Promise.all(r.payload.map(async s=>{if(!s.prefix||!s.data)return;let o=(0,y4e.default)(s.prefix),a=o[0],c=o[1],u=o[2],f=u===Ir.code?Ir:e[u];if(!f)throw(0,g4e.default)(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");let d=await f.digest(s.data),h=J.create(a,c,d);n.addBlock(h,s.data)})),n.setPendingBytes(r.pendingBytes)),n)};tr.blockPresenceSize=t=>t.bytes.length+1;tr.Entry=jh;tr.WantType={Block:Ms.Wantlist.WantType.Block,Have:Ms.Wantlist.WantType.Have};tr.BlockPresenceType={Have:Ms.BlockPresenceType.Have,DontHave:Ms.BlockPresenceType.DontHave};l();var jO=1e3,m4e=3,b4e=10*jO,lNt=15*jO,dNt=15*jO,v4e=Math.pow(2,31)-1,w4e=1e3,_4e=1;l();var x4e=N(S4e());var UO=class{constructor(e,r,i){this.peerId=r,this.network=i,this.refcnt=1,this._entries=[],this._log=No(e,"msgqueue"),this.sendEntries=(0,x4e.default)(this._sendEntries.bind(this),_4e)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;let e=new tr(!1);this._entries.forEach(r=>{r.cancel?e.cancel(r.cid):e.addEntry(r.cid,r.priority)}),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(r){this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),r.message);return}this._log("sending message to peer %s",this.peerId.toB58String()),this.network.sendMessage(this.peerId,e).catch(r=>{this._log.error("send error: %s",r.message)})}};li();var FO=class{constructor(e,r,i){this.peers=new Map,this.wantlist=new zc(i),this.network=r,this._stats=i,this._peerId=e,this._log=No(e,"want")}_addEntries(e,r,i){let n=e.map((s,o)=>new tr.Entry(s,v4e-o,tr.WantType.Block,r));n.forEach(s=>{s.cancel?i?this.wantlist.removeForce(s.cid.toString(pt)):this.wantlist.remove(s.cid):(this._log("adding to wl"),this.wantlist.add(s.cid,s.priority))});for(let s of this.peers.values())s.addEntries(n)}_startPeerHandler(e){let r=this.peers.get(e.toB58String());if(r){r.refcnt++;return}r=new UO(this._peerId,e,this.network);let i=new tr(!0);for(let n of this.wantlist.entries())i.addEntry(n[1].cid,n[1].priority);return r.addMessage(i),this.peers.set(e.toB58String(),r),r}_stopPeerHandler(e){let r=this.peers.get(e.toB58String());!r||(r.refcnt--,!(r.refcnt>0)&&this.peers.delete(e.toB58String()))}wantBlocks(e,r={}){this._addEntries(e,!1),r&&r.signal&&r.signal.addEventListener("abort",()=>{this.cancelWants(e)})}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){}stop(){this.peers.forEach(e=>this.disconnected(e.peerId))}};l();var KO=N(ga()),VO=N(Nr()),A4e=N(K8());var zO="/ipfs/bitswap/1.0.0",HO="/ipfs/bitswap/1.1.0",$O="/ipfs/bitswap/1.2.0",GO=class{constructor(e,r,i,n={}){this._log=No(e.peerId,"network"),this._libp2p=e,this._bitswap=r,this._protocols=[zO],n.b100Only||(this._protocols.unshift(HO),this._protocols.unshift($O)),this._stats=i,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashers=n.hashers||{}}start(){this._running=!0,this._libp2p.handle(this._protocols,this._onConnection);let e=new A4e.default({multicodecs:this._protocols,handlers:{onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect}});this._registrarId=this._libp2p.registrar.register(e);for(let r of this._libp2p.peerStore.peers.values()){let i=this._libp2p.connectionManager.get(r.id);i&&this._onPeerConnect(i.remotePeer)}}stop(){this._running=!1,this._libp2p.unhandle(this._protocols),this._registrarId!=null&&this._libp2p.registrar.unregister(this._registrarId)}async _onConnection({protocol:e,stream:r,connection:i}){if(!!this._running){this._log("incoming new bitswap %s connection from %s",e,i.remotePeer.toB58String());try{await(0,VO.pipe)(r,KO.default.decode(),async n=>{for await(let s of n)try{let o=await tr.deserialize(s.slice(),this._hashers);await this._bitswap._receiveMessage(i.remotePeer,o)}catch(o){this._bitswap._receiveError(o);break}})}catch(n){this._log(n)}}}_onPeerConnect(e){this._bitswap._onPeerConnected(e)}_onPeerDisconnect(e){this._bitswap._onPeerDisconnected(e)}findProviders(e,r,i={}){return this._libp2p.contentRouting.findProviders(e,{timeout:b4e,maxNumProviders:r})}async findAndConnect(e,r){let i=[];for await(let n of this.findProviders(e,m4e,r))this._log(`connecting to provider ${n.id}`),i.push(this.connectTo(n.id,r).catch(s=>{this._log.error(s)}));await Promise.all(i)}async provide(e,r){await this._libp2p.contentRouting.provide(e,r)}async sendMessage(e,r){if(!this._running)throw new Error("network isn't running");let i=e.toB58String();this._log("sendMessage to %s",i,r);let n=await this._libp2p.dial(e),{stream:s,protocol:o}=await n.newStream([$O,HO,zO]),a;switch(o){case zO:a=r.serializeToBitswap100();break;case HO:case $O:a=r.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+o)}att(s,a,this._log),this._updateSentStats(e,r.blocks)}async connectTo(e,r){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(e,r)}_updateSentStats(e,r){let i=e.toB58String();if(this._stats){for(let n of r.values())this._stats.push(i,"dataSent",n.length);this._stats.push(i,"blocksSent",r.size)}}};async function att(t,e,r){try{await(0,VO.pipe)([e],KO.default.encode(),t)}catch(i){r(i)}}l();Te();li();l();var WO=class{constructor(e){this.partner=e,this.wantlist=new zc,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesRecv+=e}wants(e,r,i){this.wantlist.add(e,r,i)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.get(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}};l();l();var vw=class extends Map{constructor(e,r){super();this._cmp=r||this._defaultSort,this._keys=[];for(let[i,n]of e||[])this.set(i,n)}update(e){if(e<0||e>=this._keys.length)return;let r=this._keys[e];this._keys.splice(e,1);let i=this._find(r);this._keys.splice(i,0,r)}set(e,r){if(this.has(e)){let n=this.indexOf(e);this._keys.splice(n,1)}super.set(e,r);let i=this._find(e);return this._keys.splice(i,0,e),this}clear(){super.clear(),this._keys=[]}delete(e){if(!this.has(e))return!1;let r=this.indexOf(e);return this._keys.splice(r,1),super.delete(e)}indexOf(e){if(!this.has(e))return-1;let r=this._find(e);if(this._keys[r]===e)return r;for(let i=1;i<this._keys.length;i++){if(this._keys[r+i]===e)return r+i;if(this._keys[r-i]===e)return r-i}return-1}_find(e){let r=0,i=this._keys.length;for(;r<i;){let n=r+i>>>1,s=this._kCmp(this._keys[n],e);if(s<0)r=n+1;else if(s>0)i=n;else return n}return r}*keys(){for(let e of this._keys)yield e}*values(){for(let e of this._keys)yield this.get(e)}*entries(){for(let e of this._keys)yield[e,this.get(e)]}*[Symbol.iterator](){yield*this.entries()}forEach(e,r){if(!!e)for(let i of this._keys)e.apply(r,[[i,this.get(i)]])}_defaultSort(e,r){return e[0]<r[0]?-1:r[0]<e[0]?1:0}_kCmp(e,r){return this._cmp([e,this.get(e)],[r,this.get(r)])}};var ctt={hasNewInfo(){return!1},merge(){}},YO=class{constructor(e=ctt){this._taskMerger=e,this._byPeer=new vw([],XO.compare)}pushTasks(e,r){let i=this._byPeer.get(e.toB58String());i||(i=new XO(e,this._taskMerger)),i.pushTasks(r),this._byPeer.set(e.toB58String(),i)}popTasks(e){let r=this._head();if(r===void 0)return{tasks:[],pendingSize:0};let{tasks:i,pendingSize:n}=r.popTasks(e);if(i.length===0)return{tasks:i,pendingSize:n};let s=r.peerId;return r.isIdle()?this._byPeer.delete(s.toB58String()):this._byPeer.update(0),{peerId:s,tasks:i,pendingSize:n}}_head(){if(this._byPeer.size!==0)for(let[,e]of this._byPeer)return e}remove(e,r){let i=this._byPeer.get(r.toB58String());i&&i.remove(e)}tasksDone(e,r){let i=this._byPeer.get(e.toB58String());if(!i)return;let n=this._byPeer.indexOf(e.toB58String());for(let s of r)i.taskDone(s);this._byPeer.update(n)}},XO=class{constructor(e,r){this.peerId=e,this._taskMerger=r,this._activeTotalSize=0,this._pending=new I4e,this._active=new Set}pushTasks(e){for(let r of e)this._pushTask(r)}_pushTask(e){if(!this._taskHasMoreInfoThanActiveTasks(e))return;let r=this._pending.get(e.topic);if(r){e.priority>r.priority&&this._pending.updatePriority(e.topic,e.priority),this._taskMerger.merge(e,r);return}this._pending.add(e)}_taskHasMoreInfoThanActiveTasks(e){let r=[];for(let i of this._active)i.topic===e.topic&&r.push(i);return r.length===0?!0:this._taskMerger.hasNewInfo(e,r)}popTasks(e){let r=0,i=[],n=this._pending.tasks();for(let s=0;s<n.length&&r<e;s++){let o=n[s];i.push(o),r+=o.size,this._pending.delete(o.topic),this._activeTotalSize+=o.size,this._active.add(o)}return{tasks:i,pendingSize:this._pending.totalSize}}taskDone(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}remove(e){this._pending.delete(e)}isIdle(){return this._pending.length===0&&this._active.size===0}static compare(e,r){return e[1]._pending.length===0?1:r[1]._pending.length===0?-1:e[1]._activeTotalSize===r[1]._activeTotalSize?r[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-r[1]._activeTotalSize}},I4e=class{constructor(){this._tasks=new vw([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce((e,r)=>e+r.task.size,0)}get(e){return(this._tasks.get(e)||{}).task}add(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}delete(e){this._tasks.delete(e)}tasks(){return[...this._tasks.values()].map(e=>e.task)}updatePriority(e,r){let i=this._tasks.get(e);if(!i)return;let n=this._tasks.indexOf(e);i.task.priority=r,this._tasks.update(n)}_compare(e,r){return e[1].task.priority===r[1].task.priority?e[1].created-r[1].created:r[1].task.priority-e[1].task.priority}};l();var T4e={hasNewInfo(t,e){let r=!1,i=!1;for(let n of e)n.data.haveBlock&&(r=!0),n.data.isWantBlock&&(i=!0);return!!(!i&&t.data.isWantBlock||!r&&t.data.haveBlock)},merge(t,e){let r=t.data,i=e.data;!i.haveBlock&&r.haveBlock&&(i.haveBlock=r.haveBlock,i.blockSize=r.blockSize),!i.isWantBlock&&r.isWantBlock&&(i.isWantBlock=!0,(!i.haveBlock||r.haveBlock)&&(i.haveBlock=r.haveBlock,e.size=t.size)),i.isWantBlock&&i.haveBlock&&(e.size=i.blockSize)}};var R4e=tr.WantType,utt=16*1024,ftt=1024,QO=class{constructor(e,r,i,n,s={}){this._log=No(e,"engine"),this.blockstore=r,this.network=i,this._stats=n,this._opts=this._processOpts(s),this.ledgerMap=new Map,this._running=!1,this._requestQueue=new YO(T4e)}_processOpts(e){return{maxSizeReplaceHasWithBlock:ftt,targetMessageSize:utt,...e}}_scheduleProcessTasks(){setTimeout(()=>{this._processTasks()})}async _processTasks(){if(!this._running)return;let{peerId:e,tasks:r,pendingSize:i}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(r.length===0)return;let n=new tr(!1);n.setPendingBytes(i);let s=[],o=new Map;for(let c of r){let u=J.parse(c.topic);c.data.haveBlock?c.data.isWantBlock?(s.push(u),o.set(c.topic,c.data)):n.addHave(u):n.addDontHave(u)}let a=await this._getBlocks(s);for(let[c,u]of o){let f=J.parse(c),d=a.get(c);d?n.addBlock(f,d):u.sendDontHave&&n.addDontHave(f)}if(n.empty){e&&this._requestQueue.tasksDone(e,r),this._scheduleProcessTasks();return}try{e&&await this.network.sendMessage(e,n);for(let[c,u]of a.entries())e&&this.messageSent(e,J.parse(c),u)}catch(c){this._log.error(c)}e&&this._requestQueue.tasksDone(e,r),this._scheduleProcessTasks()}wantlistForPeer(e){let r=e.toB58String(),i=this.ledgerMap.get(r);return i?i.wantlist.sortedEntries():new Map}ledgerForPeer(e){let r=e.toB58String(),i=this.ledgerMap.get(r);return i?{peer:i.partner,value:i.debtRatio(),sent:i.accounting.bytesSent,recv:i.accounting.bytesRecv,exchanged:i.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.partner)}receivedBlocks(e){if(!!e.length){for(let r of this.ledgerMap.values())for(let i of e){let n=r.wantlistContains(i.cid);if(!n)continue;let s=i.data.length,o=this._sendAsBlock(n.wantType,s),a=s;o||(a=tr.blockPresenceSize(n.cid)),this._requestQueue.pushTasks(r.partner,[{topic:n.cid.toString(pt),priority:n.priority,size:a,data:{blockSize:s,isWantBlock:o,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(e,r){let i=this._findOrCreate(e);if(r.empty)return;if(r.full&&(i.wantlist=new zc),this._updateBlockAccounting(r.blocks,i),r.wantlist.size===0){this._scheduleProcessTasks();return}let n=[],s=[];r.wantlist.forEach(o=>{o.cancel?(i.cancelWant(o.cid),n.push(o.cid)):(i.wants(o.cid,o.priority,o.wantType),s.push(o))}),this._cancelWants(e,n),await this._addWants(e,s),this._scheduleProcessTasks()}_cancelWants(e,r){for(let i of r)this._requestQueue.remove(i.toString(pt),e)}async _addWants(e,r){let i=await this._getBlockSizes(r.map(s=>s.cid)),n=[];for(let s of r){let o=s.cid.toString(pt),a=i.get(o);if(a==null)s.sendDontHave&&n.push({topic:o,priority:s.priority,size:tr.blockPresenceSize(s.cid),data:{isWantBlock:s.wantType===R4e.Block,blockSize:0,haveBlock:!1,sendDontHave:s.sendDontHave}});else{let c=this._sendAsBlock(s.wantType,a),u=a;c||(u=tr.blockPresenceSize(s.cid)),n.push({topic:o,priority:s.priority,size:u,data:{isWantBlock:c,blockSize:a,haveBlock:!0,sendDontHave:s.sendDontHave}})}this._requestQueue.pushTasks(e,n)}}_sendAsBlock(e,r){return e===R4e.Block||r<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(e){let r=await this._getBlocks(e);return new Map([...r].map(([i,n])=>[i,n.length]))}async _getBlocks(e){let r=new Map;return await Promise.all(e.map(async i=>{try{let n=await this.blockstore.get(i);r.set(i.toString(pt),n)}catch(n){n.code!=="ERR_NOT_FOUND"&&this._log.error("failed to query blockstore for %s: %s",i,n)}})),r}_updateBlockAccounting(e,r){for(let i of e.values())this._log("got block (%s bytes)",i.length),r.receivedBytes(i.length)}messageSent(e,r,i){let n=this._findOrCreate(e);n.sentBytes(i.length),n.wantlist.remove(r)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){}_findOrCreate(e){let r=e.toB58String(),i=this.ledgerMap.get(r);if(i)return i;let n=new WO(e);return this.ledgerMap.set(r,n),this._stats&&this._stats.push(r,"peerCount",1),n}start(){this._running=!0}stop(){this._running=!1}};l();var P4e=N(vr());tt();var C4e=t=>`unwant:${$e(t.multihash.bytes,"base64")}`,O4e=t=>`block:${$e(t.multihash.bytes,"base64")}`,ZO=class extends P4e.EventEmitter{constructor(e){super();this.setMaxListeners(w4e),this._log=No(e,"notif")}hasBlock(e,r){let i=O4e(e);this._log(i),this.emit(i,r)}wantBlock(e,r={}){if(!e)throw new Error("Not a valid cid");let i=O4e(e),n=C4e(e);return this._log(`wantBlock:${e}`),new Promise((s,o)=>{let a=()=>{this.removeListener(i,c),o(new Error(`Block for ${e} unwanted`))},c=u=>{this.removeListener(n,a),s(u)};this.once(n,a),this.once(i,c),r&&r.signal&&r.signal.addEventListener("abort",()=>{this.removeListener(i,c),this.removeListener(n,a),o(new Error(`Want for ${e} aborted`))})})}unwantBlock(e){let r=C4e(e);this._log(r),this.emit(r)}};l();var D4e=N(vr());l();var k4e=N(vr()),JO=N(fO()),ww=class extends k4e.EventEmitter{constructor(e,r){super();this._options=r,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach(i=>{this._stats[i]=BigInt(0),this._movingAverages[i]={},this._options.movingAverageIntervals.forEach(n=>{(this._movingAverages[i][n]=(0,JO.default)(n)).push(this._frequencyLastTime,0)})}),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,r){this._enabled&&(this._queue.push([e,r,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){let e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){let r=e=this._queue.shift();r&&this._applyOp(r)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){let r=e-this._frequencyLastTime;r&&Object.keys(this._stats).forEach(i=>{this._updateFrequencyFor(i,r,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,r,i){let n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;let s=n/r*1e3,o=this._movingAverages[e];o||(o=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach(a=>{let c=o[a];c||(c=o[a]=(0,JO.default)(a)),c.push(i,s)})}_applyOp(e){let r=e[0],i=e[1];if(typeof i!="number")throw new Error(`invalid increment number: ${i}`);Object.prototype.hasOwnProperty.call(this._stats,r)||(this._stats[r]=BigInt(0)),this._stats[r]=BigInt(this._stats[r])+BigInt(i),this._frequencyAccumulators[r]||(this._frequencyAccumulators[r]=0),this._frequencyAccumulators[r]+=i}};var B4e={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3]},ek=class extends D4e.EventEmitter{constructor(e=[],r=B4e){super();let i=Object.assign({},B4e,r);if(typeof i.computeThrottleTimeout!="number")throw new Error("need computeThrottleTimeout");if(typeof i.computeThrottleMaxQueueSize!="number")throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=e,this._options=i,this._enabled=this._options.enabled,this._global=new ww(e,i),this._global.on("update",n=>this.emit("update",n)),this._peers=new Map}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(let e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){let r=typeof e!="string"&&e.toB58String?e.toB58String():`${e}`;return this._peers.get(r)}push(e,r,i){if(this._enabled&&(this._global.push(r,i),e)){let n=this._peers.get(e);n||(n=new ww(this._initialCounters,this._options),this._peers.set(e,n)),n.push(r,i)}}disconnected(e){let r=e.toB58String(),i=this._peers.get(r);i&&(i.stop(),this._peers.delete(r))}};var N4e=N(_n()),M4e=N(yf());Te();var ltt={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},dtt=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"],tk=class extends Pu{constructor(e,r,i={}){super();this._libp2p=e,this._log=No(this.peerId),this._options=Object.assign({},ltt,i),this._stats=new ek(dtt,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new GO(e,this,this._stats,{hashers:i.hashers}),this.blockstore=r,this.engine=new QO(this.peerId,r,this.network,this._stats),this.wm=new FO(this.peerId,this.network,this._stats),this.notifications=new ZO(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(e,r){try{await this.engine.messageReceived(e,r)}catch(n){this._log("failed to receive message",r)}if(r.blocks.size===0)return;let i=[];for(let[n,s]of r.blocks.entries()){let o=J.parse(n);i.push({wasWanted:this.wm.wantlist.contains(o),cid:o,data:s})}this.wm.cancelWants(i.filter(({wasWanted:n})=>n).map(({cid:n})=>n)),await Promise.all(i.map(({cid:n,wasWanted:s,data:o})=>this._handleReceivedBlock(e,n,o,s)))}async _handleReceivedBlock(e,r,i,n){this._log("received block");let s=await this.blockstore.has(r);this._updateReceiveCounters(e.toB58String(),r,i,s),!!n&&await this.put(r,i)}_updateReceiveCounters(e,r,i,n){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",i.length),n&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",i.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e,r){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e,r={}){let i=(u,f)=>(this.wm.wantBlocks([u],f),this.notifications.wantBlock(u,f)),n=!1,s=async(u,f)=>{try{return await this.blockstore.get(u,f)}catch(d){if(d.code!=="ERR_NOT_FOUND")throw d;return n||(n=!0,this.network.findAndConnect(u).catch(h=>this._log.error(h))),i(u,f)}},o=new N4e.AbortController,a=r.signal?(0,M4e.anySignal)([r.signal,o.signal]):o.signal,c=await Promise.race([this.notifications.wantBlock(e,{signal:a}),s(e,{signal:a})]);return o.abort(),c}async*getMany(e,r={}){for await(let i of e)yield this.get(i,r)}unwant(e){let r=Array.isArray(e)?e:[e];this.wm.unwantBlocks(r),r.forEach(i=>this.notifications.unwantBlock(i))}cancelWants(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}async put(e,r,i){await this.blockstore.put(e,r),this._sendHaveBlockNotifications(e,r)}async*putMany(e,r){for await(let{key:i,value:n}of this.blockstore.putMany(e,r))this._sendHaveBlockNotifications(i,n),yield{key:i,value:n}}_sendHaveBlockNotifications(e,r){this.notifications.hasBlock(e,r),this.engine.receivedBlocks([{cid:e,data:r}]),this.network.provide(e).catch(i=>{this._log.error("Failed to provide: %s",i.message)})}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}start(){this.wm.start(),this.network.start(),this.engine.start(),this.started=!0}stop(){this._stats.stop(),this.wm.stop(),this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}};var L4e=(t,e,r={})=>new tk(t,e,r);var z4e=N(rt()),H4e=N(Rt());l();l();var ik={};zt(ik,{abortedError:()=>ptt,notFoundError:()=>F4e});l();var rk=N(U4e());function F4e(t){return t=t||new Error("Not Found"),(0,rk.default)(t,"ERR_NOT_FOUND")}function ptt(t){return t=t||new Error("Aborted"),(0,rk.default)(t,"ERR_ABORTED")}l();gn();Hs();Te();Nn();var bMt={...ik};var K4e=N(cp()),nk=N(lc()),V4e=N(sa()),sk=class extends Pu{constructor(e,r){super();this.child=e,this.bitswap=r}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(e,r,i={}){await this.has(e)||(this.bitswap.isStarted()?await this.bitswap.put(e,r,i):await this.child.put(e,r,i))}async*putMany(e,r={}){let i=(0,V4e.default)(e,async({key:n})=>!await this.has(n));this.bitswap.isStarted()?yield*this.bitswap.putMany(i,r):yield*this.child.putMany(i,r)}async get(e,r={}){return!await this.has(e)&&this.bitswap.isStarted()?this.bitswap.get(e,r):this.child.get(e,r)}async*getMany(e,r={}){let i=(0,nk.default)(),n=(0,nk.default)();Promise.resolve().then(async()=>{for await(let s of e)!await this.has(s)&&this.bitswap.isStarted()?i.push(s):n.push(s);i.end(),n.end()}),yield*(0,K4e.default)(this.bitswap.getMany(i,r),this.child.getMany(n,r))}async delete(e,r){await this.child.delete(e,r)}async*deleteMany(e,r){yield*this.child.deleteMany(e,r)}async has(e,r={}){return this.child.has(e,r)}async*query(e,r={}){yield*this.child.query(e,r)}async*queryKeys(e,r={}){yield*this.child.queryKeys(e,r)}};var L3=class{constructor(e,r,i,n,s){this.peerId=e,this.libp2p=r,this.bitswap=i,this.repo=n,this.blockstore=s}static async start({peerId:e,repo:r,print:i,options:n}){r.closed&&await r.open();let s=await r.config.getAll(),o=await D3({options:n,repo:r,peerId:e,multiaddrs:ytt(e,s),config:s,keychainConfig:void 0});o.keychain&&await o.loadKeychain(),await o.start();for(let u of o.multiaddrs)i(`Swarm listening on ${u}/p2p/${e.toB58String()}`);let a=L4e(o,r.blocks,{statsEnabled:!0});await a.start();let c=new sk(r.blocks,a);return r.blocks=c,r.pins.blockstore=c,new L3(e,o,a,r,c)}static async stop(e){e.repo.blocks=e.blockstore.unwrap(),e.repo.pins.blockstore=e.blockstore.unwrap(),await Promise.all([e.bitswap.stop(),e.libp2p.stop()])}},ytt=(t,e)=>{let r=t.toB58String(),i=[],n=e.Addresses&&e.Addresses.Swarm||[];for(let s of n){let o=new z4e.Multiaddr(s);if(o.protoCodes().includes(gtt))throw(0,H4e.default)(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");let a=o.getPeerId();a&&a!==r&&(o=o.encapsulate(`/p2p/${r}`)),i.push(o)}return i},gtt=479;l();l();function $4e({network:t}){async function e(r={}){let i=[],{libp2p:n}=await t.use(r);for(let[s,o]of n.peerStore.peers.entries())i.push({id:s,addrs:o.addresses.map(a=>a.multiaddr)});return i}return ce(e)}l();function G4e({network:t}){async function e(r,i={}){let{libp2p:n}=await t.use(i);await n.dial(r,i)}return ce(e)}l();function W4e({network:t}){async function e(r,i={}){let{libp2p:n}=await t.use(i);await n.hangUp(r)}return ce(e)}l();function Y4e({network:t}){async function e(r={}){let{libp2p:i}=await t.use(r);return i.multiaddrs}return ce(e)}l();function X4e({network:t}){async function e(r={}){let{libp2p:i}=await t.use(r),n=[];for(let[s,o]of i.connections)for(let a of o){let c={addr:a.remoteAddr,peer:s};(r.verbose||r.direction)&&(c.direction=a.stat.direction),r.verbose&&(c.muxer=a.stat.multiplexer,c.latency="n/a",c.streams=[]),n.push(c)}return n}return ce(e)}var ok=class{constructor({network:e}){this.addrs=$4e({network:e}),this.connect=G4e({network:e}),this.disconnect=W4e({network:e}),this.localAddrs=Y4e({network:e}),this.peers=X4e({network:e})}};l();var Q4e=N(it());var q3={success:!0,time:0,text:""};function Z4e({network:t}){async function*e(r,i={}){let{libp2p:n}=await t.use();i.count=i.count||10;let s=Q4e.default.createFromB58String(r),o=n.peerStore.get(s),a=o&&o.id;if(!a){yield{...q3,text:`Looking up peer ${r}`};let f=await n.peerRouting.findPeer(s);a=f&&f.id}if(!a)throw new Error("Peer was not found");yield{...q3,text:`PING ${a.toB58String()}`};let c=0,u=0;for(let f=0;f<i.count;f++)try{let d=await n.ping(a);u+=d,c++,yield{...q3,time:d}}catch(d){yield{...q3,success:!1,text:d.toString()}}if(c){let f=u/c;yield{...q3,text:`Average latency: ${f}ms`}}}return ce(e)}l();var ak=N(it()),ck=N(Rt());var J4e=N(ng());function ebe({network:t,repo:e}){let{get:r,put:i,findProvs:n,findPeer:s,provide:o,query:a}={async get(c,u={}){let{libp2p:f}=await A2(t,u);return f._dht.get(c,u)},async*put(c,u,f){let{libp2p:d}=await A2(t,f);yield*d._dht.put(c,u)},async*findProvs(c,u={numProviders:20}){let{libp2p:f}=await A2(t,u);for await(let d of f._dht.findProviders(c,{maxNumProviders:u.numProviders,signal:u.signal}))yield{id:d.id.toB58String(),addrs:d.addrs}},async findPeer(c,u){let{libp2p:f}=await A2(t,u),d=await f._dht.findPeer(ak.default.parse(c));return{id:d.id.toB58String(),addrs:d.multiaddrs}},async*provide(c,u={recursive:!1}){let{libp2p:f}=await A2(t,u),d=Array.isArray(c)?c:[c];if(!(await Promise.all(d.map(y=>e.blocks.has(y)))).every(y=>y))throw(0,ck.default)(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(u.recursive)throw(0,ck.default)(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");for(let y of d)yield f._dht.provide(y)},async*query(c,u){let{libp2p:f}=await A2(t,u);for await(let d of f._dht.getClosestPeers(ak.default.parse(c).toBytes()))yield{id:d.toB58String(),addrs:[]}}};return{get:ce(r),put:ce(i),findProvs:ce(n),findPeer:ce(s),provide:ce(o),query:ce(a)}}var A2=async(t,e)=>{let r=await t.use(e);if((0,J4e.default)(r.libp2p,"_config.dht.enabled",!1))return r;throw new ja("dht not enabled")};l();var tbe=N(Rt());var rbe=N(ng());function ibe({network:t,config:e}){let r=(0,rbe.default)(e||{},"Pubsub.Enabled",!0);return{subscribe:r?ce(i):j3,unsubscribe:r?ce(n):j3,publish:r?ce(s):j3,ls:r?ce(o):j3,peers:r?ce(a):j3};async function i(c,u,f={}){let{libp2p:d}=await t.use(f);return d.pubsub.subscribe(c,u,f)}async function n(c,u,f={}){let{libp2p:d}=await t.use(f);d.pubsub.unsubscribe(c,u,f)}async function s(c,u,f={}){let{libp2p:d}=await t.use(f);if(!u)throw(0,tbe.default)(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await d.pubsub.publish(c,u)}async function o(c={}){let{libp2p:u}=await t.use(c);return u.pubsub.getTopics()}async function a(c,u={}){let{libp2p:f}=await t.use(u);return f.pubsub.getSubscribers(c)}}var j3=async()=>{throw new ja("pubsub not enabled")};var mtt=Tt.bind({ignoreUndefined:!0}),fk=(0,sbe.default)("ipfs"),obe=class{constructor({print:e,storage:r,codecs:i,options:n}){let{peerId:s,repo:o,keychain:a}=r,c=qn.create(L3),u=tQ(n.preload),f=hq(),d=pq({network:c}),h=new qS(n),p=Object.values(P6);(n.ipld&&n.ipld.hashers?n.ipld.hashers:[]).forEach(O=>p.push(O)),this.hashers=new km({hashers:p,loadHasher:n.ipld&&n.ipld.loadHasher});let y=Object.values(Kl);(n.ipld&&n.ipld.bases?n.ipld.bases:[]).forEach(O=>y.push(O)),this.bases=new Cm({bases:y,loadBase:n.ipld&&n.ipld.loadBase});let m=new UE({repo:o,codecs:i}),w=new QS({codecs:i,hashers:this.hashers,preload:u,repo:o}),b=new HS({dns:f,ipns:h,repo:o,codecs:i,peerId:s,isOnline:d,keychain:a,options:n}),S=$K({repo:o,codecs:i,bases:this.bases,name:b}),I=new wA({repo:o,codecs:i,hashers:this.hashers,preload:u}),j=Object.assign(uH({repo:o,codecs:i,resolve:S,preload:u}),{local:fH({repo:r.repo})}),{add:B,addAll:C,cat:z,get:W,ls:X}=new fA({preload:u,repo:o,options:n.EXPERIMENTAL}),P=TZ({repo:o,preload:u,hashers:this.hashers,options:n}),g=rQ({files:P,preload:u,options:n.preload});this.preload=u,this.name=b,this.ipns=h,this.pin=m,this.resolve=S,this.block=w,this.refs=j,this.start=DL({network:c,peerId:s,repo:o,preload:u,ipns:h,mfsPreload:g,print:e,keychain:a,options:n}),this.stop=BL({network:c,preload:u,mfsPreload:g,ipns:h,repo:o}),this.dht=ebe({network:c,repo:o}),this.pubsub=ibe({network:c,config:n.config}),this.dns=f,this.isOnline=d,this.id=pX({network:c,peerId:s}),this.version=lX({repo:o}),this.bitswap=new WS({network:c}),this.bootstrap=new YS({repo:o}),this.config=bX({repo:o}),this.ping=Z4e({network:c}),this.add=B,this.addAll=C,this.cat=z,this.get=W,this.ls=X,this.dag=I,this.files=P,this.key=new jA({keychain:a}),this.object=new KA({preload:u,codecs:i,repo:o}),this.repo=new VA({repo:o,hashers:this.hashers}),this.stats=new zA({repo:o,network:c}),this.swarm=new ok({network:c}),Object.defineProperty(this,"libp2p",{get(){let O=c.try();return O?O.libp2p:void 0}});let _=()=>Promise.reject((0,uk.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")),x=async function*(){throw(0,uk.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};this.commands=_,this.diag={cmds:_,net:_,sys:_},this.log={level:_,ls:_,tail:x},this.mount=_,this.codecs=i}async init(){throw new qa}},btt=async t=>{let e=ot({Data:new ct({type:"directory"}).marshal(),Links:[]}),r=await t.block.put(e,{mhtype:"sha2-256",format:"dag-pb"});return await t.pin.add(r),r},vtt=()=>({start:!0,EXPERIMENTAL:{},preload:{enabled:!nbe.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}});async function abe(t={}){t=mtt(vtt(),t);let e=t.init||{},r={name:Es.name,code:Es.code,encode:u=>u,decode:u=>u},i=Object.values(C6);[Mn,sy,r].concat(t.ipld&&t.ipld.codecs||[]).forEach(u=>i.push(u));let n=new Om({codecs:i,loadCodec:t.ipld&&t.ipld.loadCodec}),s=t.silent?fk:console.log,o=await N3.start(s,n,t),a=await o.repo.config.getAll(),c=new obe({storage:o,print:s,codecs:n,options:{...t,config:a}});if(await c.preload.start(),c.ipns.startOffline(o),o.isNew&&!e.emptyRepo){let u=await btt(c);fk("adding default assets"),await FN({addAll:c.addAll,print:s}),fk("initializing IPNS keyspace"),await c.ipns.initializeKeyspace(o.peerId.privKey,Xe(`/ipfs/${u}`))}return t.start!==!1&&await c.start(),c}var cbe=N(uc()),ube=N(_0());Te();var fbe=N(rt()),lbe=N(it()),dbe=N(PR()),hbe=N(CR()),wtt=abe,_tt=cbe.default,Ett=ube.default,Stt=J,xtt=fbe.Multiaddr,Att=lbe.default,Itt=dbe.default,Ttt=hbe.default;return Rtt;})();
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
return IpfsCore}));
